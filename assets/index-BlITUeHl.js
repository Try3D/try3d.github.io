const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-PodbCr9q.js","assets/index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function o4(e,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rp={exports:{}},Eu={},kp={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function s4(){if(_x)return pt;_x=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function P(B,$,W){this.props=B,this.context=$,this.refs=C,this.updater=W||v}P.prototype.isReactComponent={},P.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},P.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=P.prototype;function x(B,$,W){this.props=B,this.context=$,this.refs=C,this.updater=W||v}var k=x.prototype=new D;k.constructor=x,w(k,P.prototype),k.isPureReactComponent=!0;var T=Array.isArray,H=Object.prototype.hasOwnProperty,z={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function q(B,$,W){var Y,oe={},re=null,ge=null;if($!=null)for(Y in $.ref!==void 0&&(ge=$.ref),$.key!==void 0&&(re=""+$.key),$)H.call($,Y)&&!U.hasOwnProperty(Y)&&(oe[Y]=$[Y]);var pe=arguments.length-2;if(pe===1)oe.children=W;else if(1<pe){for(var X=Array(pe),ae=0;ae<pe;ae++)X[ae]=arguments[ae+2];oe.children=X}if(B&&B.defaultProps)for(Y in pe=B.defaultProps,pe)oe[Y]===void 0&&(oe[Y]=pe[Y]);return{$$typeof:e,type:B,key:re,ref:ge,props:oe,_owner:z.current}}function te(B,$){return{$$typeof:e,type:B.type,key:$,ref:B.ref,props:B.props,_owner:B._owner}}function ne(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function le(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(W){return $[W]})}var Q=/\/+/g;function J(B,$){return typeof B=="object"&&B!==null&&B.key!=null?le(""+B.key):$.toString(36)}function ie(B,$,W,Y,oe){var re=typeof B;(re==="undefined"||re==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(re){case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case e:case n:ge=!0}}if(ge)return ge=B,oe=oe(ge),B=Y===""?"."+J(ge,0):Y,T(oe)?(W="",B!=null&&(W=B.replace(Q,"$&/")+"/"),ie(oe,$,W,"",function(ae){return ae})):oe!=null&&(ne(oe)&&(oe=te(oe,W+(!oe.key||ge&&ge.key===oe.key?"":(""+oe.key).replace(Q,"$&/")+"/")+B)),$.push(oe)),1;if(ge=0,Y=Y===""?".":Y+":",T(B))for(var pe=0;pe<B.length;pe++){re=B[pe];var X=Y+J(re,pe);ge+=ie(re,$,W,X,oe)}else if(X=m(B),typeof X=="function")for(B=X.call(B),pe=0;!(re=B.next()).done;)re=re.value,X=Y+J(re,pe++),ge+=ie(re,$,W,X,oe);else if(re==="object")throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ge}function N(B,$,W){if(B==null)return B;var Y=[],oe=0;return ie(B,Y,"","",function(re){return $.call(W,re,oe++)}),Y}function A(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(W){(B._status===0||B._status===-1)&&(B._status=1,B._result=W)},function(W){(B._status===0||B._status===-1)&&(B._status=2,B._result=W)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var b={current:null},M={transition:null},I={ReactCurrentDispatcher:b,ReactCurrentBatchConfig:M,ReactCurrentOwner:z};function _(){throw Error("act(...) is not supported in production builds of React.")}return pt.Children={map:N,forEach:function(B,$,W){N(B,function(){$.apply(this,arguments)},W)},count:function(B){var $=0;return N(B,function(){$++}),$},toArray:function(B){return N(B,function($){return $})||[]},only:function(B){if(!ne(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},pt.Component=P,pt.Fragment=r,pt.Profiler=o,pt.PureComponent=x,pt.StrictMode=i,pt.Suspense=h,pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,pt.act=_,pt.cloneElement=function(B,$,W){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Y=w({},B.props),oe=B.key,re=B.ref,ge=B._owner;if($!=null){if($.ref!==void 0&&(re=$.ref,ge=z.current),$.key!==void 0&&(oe=""+$.key),B.type&&B.type.defaultProps)var pe=B.type.defaultProps;for(X in $)H.call($,X)&&!U.hasOwnProperty(X)&&(Y[X]=$[X]===void 0&&pe!==void 0?pe[X]:$[X])}var X=arguments.length-2;if(X===1)Y.children=W;else if(1<X){pe=Array(X);for(var ae=0;ae<X;ae++)pe[ae]=arguments[ae+2];Y.children=pe}return{$$typeof:e,type:B.type,key:oe,ref:re,props:Y,_owner:ge}},pt.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},pt.createElement=q,pt.createFactory=function(B){var $=q.bind(null,B);return $.type=B,$},pt.createRef=function(){return{current:null}},pt.forwardRef=function(B){return{$$typeof:u,render:B}},pt.isValidElement=ne,pt.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:A}},pt.memo=function(B,$){return{$$typeof:d,type:B,compare:$===void 0?null:$}},pt.startTransition=function(B){var $=M.transition;M.transition={};try{B()}finally{M.transition=$}},pt.unstable_act=_,pt.useCallback=function(B,$){return b.current.useCallback(B,$)},pt.useContext=function(B){return b.current.useContext(B)},pt.useDebugValue=function(){},pt.useDeferredValue=function(B){return b.current.useDeferredValue(B)},pt.useEffect=function(B,$){return b.current.useEffect(B,$)},pt.useId=function(){return b.current.useId()},pt.useImperativeHandle=function(B,$,W){return b.current.useImperativeHandle(B,$,W)},pt.useInsertionEffect=function(B,$){return b.current.useInsertionEffect(B,$)},pt.useLayoutEffect=function(B,$){return b.current.useLayoutEffect(B,$)},pt.useMemo=function(B,$){return b.current.useMemo(B,$)},pt.useReducer=function(B,$,W){return b.current.useReducer(B,$,W)},pt.useRef=function(B){return b.current.useRef(B)},pt.useState=function(B){return b.current.useState(B)},pt.useSyncExternalStore=function(B,$,W){return b.current.useSyncExternalStore(B,$,W)},pt.useTransition=function(){return b.current.useTransition()},pt.version="18.3.1",pt}var jx;function av(){return jx||(jx=1,kp.exports=s4()),kp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function a4(){if(zx)return Eu;zx=1;var e=av(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,d){var f,g={},m=null,v=null;d!==void 0&&(m=""+d),h.key!==void 0&&(m=""+h.key),h.ref!==void 0&&(v=h.ref);for(f in h)i.call(h,f)&&!s.hasOwnProperty(f)&&(g[f]=h[f]);if(u&&u.defaultProps)for(f in h=u.defaultProps,h)g[f]===void 0&&(g[f]=h[f]);return{$$typeof:n,type:u,key:m,ref:v,props:g,_owner:o.current}}return Eu.Fragment=r,Eu.jsx=a,Eu.jsxs=a,Eu}var $x;function l4(){return $x||($x=1,Rp.exports=a4()),Rp.exports}var G=l4(),j=av();const Xe=oa(j),u4=o4({__proto__:null,default:Xe},[j]);var cd={},bp={exports:{}},ir={},Fp={exports:{}},Op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function c4(){return Wx||(Wx=1,function(e){function n(M,I){var _=M.length;M.push(I);e:for(;0<_;){var B=_-1>>>1,$=M[B];if(0<o($,I))M[B]=I,M[_]=$,_=B;else break e}}function r(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var I=M[0],_=M.pop();if(_!==I){M[0]=_;e:for(var B=0,$=M.length,W=$>>>1;B<W;){var Y=2*(B+1)-1,oe=M[Y],re=Y+1,ge=M[re];if(0>o(oe,_))re<$&&0>o(ge,oe)?(M[B]=ge,M[re]=_,B=re):(M[B]=oe,M[Y]=_,B=Y);else if(re<$&&0>o(ge,_))M[B]=ge,M[re]=_,B=re;else break e}}return I}function o(M,I){var _=M.sortIndex-I.sortIndex;return _!==0?_:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var h=[],d=[],f=1,g=null,m=3,v=!1,w=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var I=r(d);I!==null;){if(I.callback===null)i(d);else if(I.startTime<=M)i(d),I.sortIndex=I.expirationTime,n(h,I);else break;I=r(d)}}function T(M){if(C=!1,k(M),!w)if(r(h)!==null)w=!0,A(H);else{var I=r(d);I!==null&&b(T,I.startTime-M)}}function H(M,I){w=!1,C&&(C=!1,D(q),q=-1),v=!0;var _=m;try{for(k(I),g=r(h);g!==null&&(!(g.expirationTime>I)||M&&!le());){var B=g.callback;if(typeof B=="function"){g.callback=null,m=g.priorityLevel;var $=B(g.expirationTime<=I);I=e.unstable_now(),typeof $=="function"?g.callback=$:g===r(h)&&i(h),k(I)}else i(h);g=r(h)}if(g!==null)var W=!0;else{var Y=r(d);Y!==null&&b(T,Y.startTime-I),W=!1}return W}finally{g=null,m=_,v=!1}}var z=!1,U=null,q=-1,te=5,ne=-1;function le(){return!(e.unstable_now()-ne<te)}function Q(){if(U!==null){var M=e.unstable_now();ne=M;var I=!0;try{I=U(!0,M)}finally{I?J():(z=!1,U=null)}}else z=!1}var J;if(typeof x=="function")J=function(){x(Q)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,N=ie.port2;ie.port1.onmessage=Q,J=function(){N.postMessage(null)}}else J=function(){P(Q,0)};function A(M){U=M,z||(z=!0,J())}function b(M,I){q=P(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,A(H))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var _=m;m=I;try{return M()}finally{m=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var _=m;m=M;try{return I()}finally{m=_}},e.unstable_scheduleCallback=function(M,I,_){var B=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?B+_:B):_=B,M){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=_+$,M={id:f++,callback:I,priorityLevel:M,startTime:_,expirationTime:$,sortIndex:-1},_>B?(M.sortIndex=_,n(d,M),r(h)===null&&M===r(d)&&(C?(D(q),q=-1):C=!0,b(T,_-B))):(M.sortIndex=$,n(h,M),w||v||(w=!0,A(H))),M},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(M){var I=m;return function(){var _=m;m=I;try{return M.apply(this,arguments)}finally{m=_}}}}(Op)),Op}var Vx;function h4(){return Vx||(Vx=1,Fp.exports=c4()),Fp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function d4(){if(Ux)return ir;Ux=1;var e=av(),n=h4();function r(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function s(l,c){a(l,c),a(l+"Capture",c)}function a(l,c){for(o[l]=c,l=0;l<c.length;l++)i.add(c[l])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function m(l){return h.call(g,l)?!0:h.call(f,l)?!1:d.test(l)?g[l]=!0:(f[l]=!0,!1)}function v(l,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,c,p,y){if(c===null||typeof c>"u"||v(l,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function C(l,c,p,y,E,S,L){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=p,this.propertyName=l,this.type=c,this.sanitizeURL=S,this.removeEmptyString=L}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){P[l]=new C(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];P[c]=new C(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){P[l]=new C(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){P[l]=new C(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){P[l]=new C(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){P[l]=new C(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){P[l]=new C(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){P[l]=new C(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){P[l]=new C(l,5,!1,l.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function x(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(D,x);P[c]=new C(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(D,x);P[c]=new C(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(D,x);P[c]=new C(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){P[l]=new C(l,1,!1,l.toLowerCase(),null,!1,!1)}),P.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){P[l]=new C(l,1,!1,l.toLowerCase(),null,!0,!0)});function k(l,c,p,y){var E=P.hasOwnProperty(c)?P[c]:null;(E!==null?E.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,p,E,y)&&(p=null),y||E===null?m(c)&&(p===null?l.removeAttribute(c):l.setAttribute(c,""+p)):E.mustUseProperty?l[E.propertyName]=p===null?E.type===3?!1:"":p:(c=E.attributeName,y=E.attributeNamespace,p===null?l.removeAttribute(c):(E=E.type,p=E===3||E===4&&p===!0?"":""+p,y?l.setAttributeNS(y,c,p):l.setAttribute(c,p))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),z=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),le=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),M=Symbol.iterator;function I(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var _=Object.assign,B;function $(l){if(B===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||""}return`
`+B+l}var W=!1;function Y(l,c){if(!l||W)return"";W=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(he){var y=he}Reflect.construct(l,[],c)}else{try{c.call()}catch(he){y=he}l.call(c.prototype)}else{try{throw Error()}catch(he){y=he}l()}}catch(he){if(he&&y&&typeof he.stack=="string"){for(var E=he.stack.split(`
`),S=y.stack.split(`
`),L=E.length-1,V=S.length-1;1<=L&&0<=V&&E[L]!==S[V];)V--;for(;1<=L&&0<=V;L--,V--)if(E[L]!==S[V]){if(L!==1||V!==1)do if(L--,V--,0>V||E[L]!==S[V]){var Z=`
`+E[L].replace(" at new "," at ");return l.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",l.displayName)),Z}while(1<=L&&0<=V);break}}}finally{W=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?$(l):""}function oe(l){switch(l.tag){case 5:return $(l.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return l=Y(l.type,!1),l;case 11:return l=Y(l.type.render,!1),l;case 1:return l=Y(l.type,!0),l;default:return""}}function re(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case U:return"Fragment";case z:return"Portal";case te:return"Profiler";case q:return"StrictMode";case J:return"Suspense";case ie:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case le:return(l.displayName||"Context")+".Consumer";case ne:return(l._context.displayName||"Context")+".Provider";case Q:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return c=l.displayName||null,c!==null?c:re(l.type)||"Memo";case A:c=l._payload,l=l._init;try{return re(l(c))}catch{}}return null}function ge(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(c);case 8:return c===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function pe(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function X(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ae(l){var c=X(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),y=""+l[c];if(!l.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,S=p.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return E.call(this)},set:function(L){y=""+L,S.call(this,L)}}),Object.defineProperty(l,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function fe(l){l._valueTracker||(l._valueTracker=ae(l))}function me(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return l&&(y=X(l)?l.checked?"true":"false":l.value),l=y,l!==p?(c.setValue(l),!0):!1}function Ne(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function we(l,c){var p=c.checked;return _({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??l._wrapperState.initialChecked})}function it(l,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=pe(c.value!=null?c.value:p),l._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ie(l,c){c=c.checked,c!=null&&k(l,"checked",c,!1)}function Be(l,c){Ie(l,c);var p=pe(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?_e(l,c.type,p):c.hasOwnProperty("defaultValue")&&_e(l,c.type,pe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function et(l,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,p||c===l.value||(l.value=c),l.defaultValue=c}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function _e(l,c,p){(c!=="number"||Ne(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var ct=Array.isArray;function rt(l,c,p,y){if(l=l.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=c.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+pe(p),c=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}c!==null||l[E].disabled||(c=l[E])}c!==null&&(c.selected=!0)}}function wt(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return _({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function sn(l,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(r(92));if(ct(p)){if(1<p.length)throw Error(r(93));p=p[0]}c=p}c==null&&(c=""),p=c}l._wrapperState={initialValue:pe(p)}}function Qn(l,c){var p=pe(c.value),y=pe(c.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),c.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),y!=null&&(l.defaultValue=""+y)}function an(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Yr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Or(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Yr(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Vt,qt=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,E){MSApp.execUnsafeLocalFunction(function(){return l(c,p,y,E)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(Vt=Vt||document.createElement("div"),Vt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Vt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function Zr(l,c){if(c){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=c;return}}l.textContent=c}var yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},th=["Webkit","ms","Moz","O"];Object.keys(yo).forEach(function(l){th.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),yo[c]=yo[l]})});function Nl(l,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||yo.hasOwnProperty(l)&&yo[l]?(""+c).trim():c+"px"}function Gl(l,c){l=l.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,E=Nl(p,c[p],y);p==="float"&&(p="cssFloat"),y?l.setProperty(p,E):l[p]=E}}var $0=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gs(l,c){if(c){if($0[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function ga(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W0=null;function V0(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var U0=null,pa=null,ma=null;function rw(l){if(l=au(l)){if(typeof U0!="function")throw Error(r(280));var c=l.stateNode;c&&(c=Dh(c),U0(l.stateNode,l.type,c))}}function iw(l){pa?ma?ma.push(l):ma=[l]:pa=l}function ow(){if(pa){var l=pa,c=ma;if(ma=pa=null,rw(l),c)for(l=0;l<c.length;l++)rw(c[l])}}function sw(l,c){return l(c)}function aw(){}var X0=!1;function lw(l,c,p){if(X0)return l(c,p);X0=!0;try{return sw(l,c,p)}finally{X0=!1,(pa!==null||ma!==null)&&(aw(),ow())}}function _l(l,c){var p=l.stateNode;if(p===null)return null;var y=Dh(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var K0=!1;if(u)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){K0=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{K0=!1}function hB(l,c,p,y,E,S,L,V,Z){var he=Array.prototype.slice.call(arguments,3);try{c.apply(p,he)}catch(Ce){this.onError(Ce)}}var zl=!1,nh=null,rh=!1,q0=null,dB={onError:function(l){zl=!0,nh=l}};function fB(l,c,p,y,E,S,L,V,Z){zl=!1,nh=null,hB.apply(dB,arguments)}function gB(l,c,p,y,E,S,L,V,Z){if(fB.apply(this,arguments),zl){if(zl){var he=nh;zl=!1,nh=null}else throw Error(r(198));rh||(rh=!0,q0=he)}}function ps(l){var c=l,p=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(p=c.return),l=c.return;while(l)}return c.tag===3?p:null}function uw(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function cw(l){if(ps(l)!==l)throw Error(r(188))}function pB(l){var c=l.alternate;if(!c){if(c=ps(l),c===null)throw Error(r(188));return c!==l?null:l}for(var p=l,y=c;;){var E=p.return;if(E===null)break;var S=E.alternate;if(S===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===p)return cw(E),l;if(S===y)return cw(E),c;S=S.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=S;else{for(var L=!1,V=E.child;V;){if(V===p){L=!0,p=E,y=S;break}if(V===y){L=!0,y=E,p=S;break}V=V.sibling}if(!L){for(V=S.child;V;){if(V===p){L=!0,p=S,y=E;break}if(V===y){L=!0,y=S,p=E;break}V=V.sibling}if(!L)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:c}function hw(l){return l=pB(l),l!==null?dw(l):null}function dw(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=dw(l);if(c!==null)return c;l=l.sibling}return null}var fw=n.unstable_scheduleCallback,gw=n.unstable_cancelCallback,mB=n.unstable_shouldYield,vB=n.unstable_requestPaint,en=n.unstable_now,yB=n.unstable_getCurrentPriorityLevel,Y0=n.unstable_ImmediatePriority,pw=n.unstable_UserBlockingPriority,ih=n.unstable_NormalPriority,wB=n.unstable_LowPriority,mw=n.unstable_IdlePriority,oh=null,yi=null;function xB(l){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(oh,l,void 0,(l.current.flags&128)===128)}catch{}}var Qr=Math.clz32?Math.clz32:PB,CB=Math.log,EB=Math.LN2;function PB(l){return l>>>=0,l===0?32:31-(CB(l)/EB|0)|0}var sh=64,ah=4194304;function $l(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function lh(l,c){var p=l.pendingLanes;if(p===0)return 0;var y=0,E=l.suspendedLanes,S=l.pingedLanes,L=p&268435455;if(L!==0){var V=L&~E;V!==0?y=$l(V):(S&=L,S!==0&&(y=$l(S)))}else L=p&~E,L!==0?y=$l(L):S!==0&&(y=$l(S));if(y===0)return 0;if(c!==0&&c!==y&&(c&E)===0&&(E=y&-y,S=c&-c,E>=S||E===16&&(S&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=y;0<c;)p=31-Qr(c),E=1<<p,y|=l[p],c&=~E;return y}function DB(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SB(l,c){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,S=l.pendingLanes;0<S;){var L=31-Qr(S),V=1<<L,Z=E[L];Z===-1?((V&p)===0||(V&y)!==0)&&(E[L]=DB(V,c)):Z<=c&&(l.expiredLanes|=V),S&=~V}}function Z0(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function vw(){var l=sh;return sh<<=1,(sh&4194240)===0&&(sh=64),l}function Q0(l){for(var c=[],p=0;31>p;p++)c.push(l);return c}function Wl(l,c,p){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-Qr(c),l[c]=p}function TB(l,c){var p=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<p;){var E=31-Qr(p),S=1<<E;c[E]=0,y[E]=-1,l[E]=-1,p&=~S}}function J0(l,c){var p=l.entangledLanes|=c;for(l=l.entanglements;p;){var y=31-Qr(p),E=1<<y;E&c|l[y]&c&&(l[y]|=c),p&=~E}}var Mt=0;function yw(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ww,eg,xw,Cw,Ew,tg=!1,uh=[],wo=null,xo=null,Co=null,Vl=new Map,Ul=new Map,Eo=[],AB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pw(l,c){switch(l){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Vl.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(c.pointerId)}}function Xl(l,c,p,y,E,S){return l===null||l.nativeEvent!==S?(l={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:S,targetContainers:[E]},c!==null&&(c=au(c),c!==null&&eg(c)),l):(l.eventSystemFlags|=y,c=l.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),l)}function BB(l,c,p,y,E){switch(c){case"focusin":return wo=Xl(wo,l,c,p,y,E),!0;case"dragenter":return xo=Xl(xo,l,c,p,y,E),!0;case"mouseover":return Co=Xl(Co,l,c,p,y,E),!0;case"pointerover":var S=E.pointerId;return Vl.set(S,Xl(Vl.get(S)||null,l,c,p,y,E)),!0;case"gotpointercapture":return S=E.pointerId,Ul.set(S,Xl(Ul.get(S)||null,l,c,p,y,E)),!0}return!1}function Dw(l){var c=ms(l.target);if(c!==null){var p=ps(c);if(p!==null){if(c=p.tag,c===13){if(c=uw(p),c!==null){l.blockedOn=c,Ew(l.priority,function(){xw(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ch(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var p=rg(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);W0=y,p.target.dispatchEvent(y),W0=null}else return c=au(p),c!==null&&eg(c),l.blockedOn=p,!1;c.shift()}return!0}function Sw(l,c,p){ch(l)&&p.delete(c)}function MB(){tg=!1,wo!==null&&ch(wo)&&(wo=null),xo!==null&&ch(xo)&&(xo=null),Co!==null&&ch(Co)&&(Co=null),Vl.forEach(Sw),Ul.forEach(Sw)}function Kl(l,c){l.blockedOn===c&&(l.blockedOn=null,tg||(tg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,MB)))}function ql(l){function c(E){return Kl(E,l)}if(0<uh.length){Kl(uh[0],l);for(var p=1;p<uh.length;p++){var y=uh[p];y.blockedOn===l&&(y.blockedOn=null)}}for(wo!==null&&Kl(wo,l),xo!==null&&Kl(xo,l),Co!==null&&Kl(Co,l),Vl.forEach(c),Ul.forEach(c),p=0;p<Eo.length;p++)y=Eo[p],y.blockedOn===l&&(y.blockedOn=null);for(;0<Eo.length&&(p=Eo[0],p.blockedOn===null);)Dw(p),p.blockedOn===null&&Eo.shift()}var va=T.ReactCurrentBatchConfig,hh=!0;function RB(l,c,p,y){var E=Mt,S=va.transition;va.transition=null;try{Mt=1,ng(l,c,p,y)}finally{Mt=E,va.transition=S}}function kB(l,c,p,y){var E=Mt,S=va.transition;va.transition=null;try{Mt=4,ng(l,c,p,y)}finally{Mt=E,va.transition=S}}function ng(l,c,p,y){if(hh){var E=rg(l,c,p,y);if(E===null)xg(l,c,y,dh,p),Pw(l,y);else if(BB(E,l,c,p,y))y.stopPropagation();else if(Pw(l,y),c&4&&-1<AB.indexOf(l)){for(;E!==null;){var S=au(E);if(S!==null&&ww(S),S=rg(l,c,p,y),S===null&&xg(l,c,y,dh,p),S===E)break;E=S}E!==null&&y.stopPropagation()}else xg(l,c,y,null,p)}}var dh=null;function rg(l,c,p,y){if(dh=null,l=V0(y),l=ms(l),l!==null)if(c=ps(l),c===null)l=null;else if(p=c.tag,p===13){if(l=uw(c),l!==null)return l;l=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return dh=l,null}function Tw(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yB()){case Y0:return 1;case pw:return 4;case ih:case wB:return 16;case mw:return 536870912;default:return 16}default:return 16}}var Po=null,ig=null,fh=null;function Aw(){if(fh)return fh;var l,c=ig,p=c.length,y,E="value"in Po?Po.value:Po.textContent,S=E.length;for(l=0;l<p&&c[l]===E[l];l++);var L=p-l;for(y=1;y<=L&&c[p-y]===E[S-y];y++);return fh=E.slice(l,1<y?1-y:void 0)}function gh(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function ph(){return!0}function Bw(){return!1}function yr(l){function c(p,y,E,S,L){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=S,this.target=L,this.currentTarget=null;for(var V in l)l.hasOwnProperty(V)&&(p=l[V],this[V]=p?p(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ph:Bw,this.isPropagationStopped=Bw,this}return _(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=ph)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=ph)},persist:function(){},isPersistent:ph}),c}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},og=yr(ya),Yl=_({},ya,{view:0,detail:0}),bB=yr(Yl),sg,ag,Zl,mh=_({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Zl&&(Zl&&l.type==="mousemove"?(sg=l.screenX-Zl.screenX,ag=l.screenY-Zl.screenY):ag=sg=0,Zl=l),sg)},movementY:function(l){return"movementY"in l?l.movementY:ag}}),Mw=yr(mh),FB=_({},mh,{dataTransfer:0}),OB=yr(FB),IB=_({},Yl,{relatedTarget:0}),lg=yr(IB),LB=_({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),HB=yr(LB),NB=_({},ya,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),GB=yr(NB),_B=_({},ya,{data:0}),Rw=yr(_B),jB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WB(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=$B[l])?!!c[l]:!1}function ug(){return WB}var VB=_({},Yl,{key:function(l){if(l.key){var c=jB[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=gh(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?zB[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(l){return l.type==="keypress"?gh(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?gh(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),UB=yr(VB),XB=_({},mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kw=yr(XB),KB=_({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),qB=yr(KB),YB=_({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZB=yr(YB),QB=_({},mh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),JB=yr(QB),e8=[9,13,27,32],cg=u&&"CompositionEvent"in window,Ql=null;u&&"documentMode"in document&&(Ql=document.documentMode);var t8=u&&"TextEvent"in window&&!Ql,bw=u&&(!cg||Ql&&8<Ql&&11>=Ql),Fw=" ",Ow=!1;function Iw(l,c){switch(l){case"keyup":return e8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var wa=!1;function n8(l,c){switch(l){case"compositionend":return Lw(c);case"keypress":return c.which!==32?null:(Ow=!0,Fw);case"textInput":return l=c.data,l===Fw&&Ow?null:l;default:return null}}function r8(l,c){if(wa)return l==="compositionend"||!cg&&Iw(l,c)?(l=Aw(),fh=ig=Po=null,wa=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bw&&c.locale!=="ko"?null:c.data;default:return null}}var i8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hw(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!i8[l.type]:c==="textarea"}function Nw(l,c,p,y){iw(y),c=Ch(c,"onChange"),0<c.length&&(p=new og("onChange","change",null,p,y),l.push({event:p,listeners:c}))}var Jl=null,eu=null;function o8(l){n2(l,0)}function vh(l){var c=Da(l);if(me(c))return l}function s8(l,c){if(l==="change")return c}var Gw=!1;if(u){var hg;if(u){var dg="oninput"in document;if(!dg){var _w=document.createElement("div");_w.setAttribute("oninput","return;"),dg=typeof _w.oninput=="function"}hg=dg}else hg=!1;Gw=hg&&(!document.documentMode||9<document.documentMode)}function jw(){Jl&&(Jl.detachEvent("onpropertychange",zw),eu=Jl=null)}function zw(l){if(l.propertyName==="value"&&vh(eu)){var c=[];Nw(c,eu,l,V0(l)),lw(o8,c)}}function a8(l,c,p){l==="focusin"?(jw(),Jl=c,eu=p,Jl.attachEvent("onpropertychange",zw)):l==="focusout"&&jw()}function l8(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vh(eu)}function u8(l,c){if(l==="click")return vh(c)}function c8(l,c){if(l==="input"||l==="change")return vh(c)}function h8(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Jr=typeof Object.is=="function"?Object.is:h8;function tu(l,c){if(Jr(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var p=Object.keys(l),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!h.call(c,E)||!Jr(l[E],c[E]))return!1}return!0}function $w(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ww(l,c){var p=$w(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=c&&y>=c)return{node:p,offset:c-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=$w(p)}}function Vw(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?Vw(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Uw(){for(var l=window,c=Ne();c instanceof l.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)l=c.contentWindow;else break;c=Ne(l.document)}return c}function fg(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function d8(l){var c=Uw(),p=l.focusedElem,y=l.selectionRange;if(c!==p&&p&&p.ownerDocument&&Vw(p.ownerDocument.documentElement,p)){if(y!==null&&fg(p)){if(c=y.start,l=y.end,l===void 0&&(l=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(l,p.value.length);else if(l=(c=p.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var E=p.textContent.length,S=Math.min(y.start,E);y=y.end===void 0?S:Math.min(y.end,E),!l.extend&&S>y&&(E=y,y=S,S=E),E=Ww(p,S);var L=Ww(p,y);E&&L&&(l.rangeCount!==1||l.anchorNode!==E.node||l.anchorOffset!==E.offset||l.focusNode!==L.node||l.focusOffset!==L.offset)&&(c=c.createRange(),c.setStart(E.node,E.offset),l.removeAllRanges(),S>y?(l.addRange(c),l.extend(L.node,L.offset)):(c.setEnd(L.node,L.offset),l.addRange(c)))}}for(c=[],l=p;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)l=c[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var f8=u&&"documentMode"in document&&11>=document.documentMode,xa=null,gg=null,nu=null,pg=!1;function Xw(l,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;pg||xa==null||xa!==Ne(y)||(y=xa,"selectionStart"in y&&fg(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),nu&&tu(nu,y)||(nu=y,y=Ch(gg,"onSelect"),0<y.length&&(c=new og("onSelect","select",null,c,p),l.push({event:c,listeners:y}),c.target=xa)))}function yh(l,c){var p={};return p[l.toLowerCase()]=c.toLowerCase(),p["Webkit"+l]="webkit"+c,p["Moz"+l]="moz"+c,p}var Ca={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},mg={},Kw={};u&&(Kw=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function wh(l){if(mg[l])return mg[l];if(!Ca[l])return l;var c=Ca[l],p;for(p in c)if(c.hasOwnProperty(p)&&p in Kw)return mg[l]=c[p];return l}var qw=wh("animationend"),Yw=wh("animationiteration"),Zw=wh("animationstart"),Qw=wh("transitionend"),Jw=new Map,e2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(l,c){Jw.set(l,c),s(c,[l])}for(var vg=0;vg<e2.length;vg++){var yg=e2[vg],g8=yg.toLowerCase(),p8=yg[0].toUpperCase()+yg.slice(1);Do(g8,"on"+p8)}Do(qw,"onAnimationEnd"),Do(Yw,"onAnimationIteration"),Do(Zw,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(Qw,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function t2(l,c,p){var y=l.type||"unknown-event";l.currentTarget=p,gB(y,c,void 0,l),l.currentTarget=null}function n2(l,c){c=(c&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var S=void 0;if(c)for(var L=y.length-1;0<=L;L--){var V=y[L],Z=V.instance,he=V.currentTarget;if(V=V.listener,Z!==S&&E.isPropagationStopped())break e;t2(E,V,he),S=Z}else for(L=0;L<y.length;L++){if(V=y[L],Z=V.instance,he=V.currentTarget,V=V.listener,Z!==S&&E.isPropagationStopped())break e;t2(E,V,he),S=Z}}}if(rh)throw l=q0,rh=!1,q0=null,l}function It(l,c){var p=c[Tg];p===void 0&&(p=c[Tg]=new Set);var y=l+"__bubble";p.has(y)||(r2(c,l,2,!1),p.add(y))}function wg(l,c,p){var y=0;c&&(y|=4),r2(p,l,y,c)}var xh="_reactListening"+Math.random().toString(36).slice(2);function iu(l){if(!l[xh]){l[xh]=!0,i.forEach(function(p){p!=="selectionchange"&&(m8.has(p)||wg(p,!1,l),wg(p,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[xh]||(c[xh]=!0,wg("selectionchange",!1,c))}}function r2(l,c,p,y){switch(Tw(c)){case 1:var E=RB;break;case 4:E=kB;break;default:E=ng}p=E.bind(null,c,p,l),E=void 0,!K0||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(c,p,{capture:!0,passive:E}):l.addEventListener(c,p,!0):E!==void 0?l.addEventListener(c,p,{passive:E}):l.addEventListener(c,p,!1)}function xg(l,c,p,y,E){var S=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var V=y.stateNode.containerInfo;if(V===E||V.nodeType===8&&V.parentNode===E)break;if(L===4)for(L=y.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===E||Z.nodeType===8&&Z.parentNode===E))return;L=L.return}for(;V!==null;){if(L=ms(V),L===null)return;if(Z=L.tag,Z===5||Z===6){y=S=L;continue e}V=V.parentNode}}y=y.return}lw(function(){var he=S,Ce=V0(p),Ee=[];e:{var xe=Jw.get(l);if(xe!==void 0){var Re=og,Le=l;switch(l){case"keypress":if(gh(p)===0)break e;case"keydown":case"keyup":Re=UB;break;case"focusin":Le="focus",Re=lg;break;case"focusout":Le="blur",Re=lg;break;case"beforeblur":case"afterblur":Re=lg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=OB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=qB;break;case qw:case Yw:case Zw:Re=HB;break;case Qw:Re=ZB;break;case"scroll":Re=bB;break;case"wheel":Re=JB;break;case"copy":case"cut":case"paste":Re=GB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=kw}var Ge=(c&4)!==0,tn=!Ge&&l==="scroll",se=Ge?xe!==null?xe+"Capture":null:xe;Ge=[];for(var ee=he,ue;ee!==null;){ue=ee;var Se=ue.stateNode;if(ue.tag===5&&Se!==null&&(ue=Se,se!==null&&(Se=_l(ee,se),Se!=null&&Ge.push(ou(ee,Se,ue)))),tn)break;ee=ee.return}0<Ge.length&&(xe=new Re(xe,Le,null,p,Ce),Ee.push({event:xe,listeners:Ge}))}}if((c&7)===0){e:{if(xe=l==="mouseover"||l==="pointerover",Re=l==="mouseout"||l==="pointerout",xe&&p!==W0&&(Le=p.relatedTarget||p.fromElement)&&(ms(Le)||Le[ji]))break e;if((Re||xe)&&(xe=Ce.window===Ce?Ce:(xe=Ce.ownerDocument)?xe.defaultView||xe.parentWindow:window,Re?(Le=p.relatedTarget||p.toElement,Re=he,Le=Le?ms(Le):null,Le!==null&&(tn=ps(Le),Le!==tn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Re=null,Le=he),Re!==Le)){if(Ge=Mw,Se="onMouseLeave",se="onMouseEnter",ee="mouse",(l==="pointerout"||l==="pointerover")&&(Ge=kw,Se="onPointerLeave",se="onPointerEnter",ee="pointer"),tn=Re==null?xe:Da(Re),ue=Le==null?xe:Da(Le),xe=new Ge(Se,ee+"leave",Re,p,Ce),xe.target=tn,xe.relatedTarget=ue,Se=null,ms(Ce)===he&&(Ge=new Ge(se,ee+"enter",Le,p,Ce),Ge.target=ue,Ge.relatedTarget=tn,Se=Ge),tn=Se,Re&&Le)t:{for(Ge=Re,se=Le,ee=0,ue=Ge;ue;ue=Ea(ue))ee++;for(ue=0,Se=se;Se;Se=Ea(Se))ue++;for(;0<ee-ue;)Ge=Ea(Ge),ee--;for(;0<ue-ee;)se=Ea(se),ue--;for(;ee--;){if(Ge===se||se!==null&&Ge===se.alternate)break t;Ge=Ea(Ge),se=Ea(se)}Ge=null}else Ge=null;Re!==null&&i2(Ee,xe,Re,Ge,!1),Le!==null&&tn!==null&&i2(Ee,tn,Le,Ge,!0)}}e:{if(xe=he?Da(he):window,Re=xe.nodeName&&xe.nodeName.toLowerCase(),Re==="select"||Re==="input"&&xe.type==="file")var je=s8;else if(Hw(xe))if(Gw)je=c8;else{je=l8;var qe=a8}else(Re=xe.nodeName)&&Re.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(je=u8);if(je&&(je=je(l,he))){Nw(Ee,je,p,Ce);break e}qe&&qe(l,xe,he),l==="focusout"&&(qe=xe._wrapperState)&&qe.controlled&&xe.type==="number"&&_e(xe,"number",xe.value)}switch(qe=he?Da(he):window,l){case"focusin":(Hw(qe)||qe.contentEditable==="true")&&(xa=qe,gg=he,nu=null);break;case"focusout":nu=gg=xa=null;break;case"mousedown":pg=!0;break;case"contextmenu":case"mouseup":case"dragend":pg=!1,Xw(Ee,p,Ce);break;case"selectionchange":if(f8)break;case"keydown":case"keyup":Xw(Ee,p,Ce)}var Ye;if(cg)e:{switch(l){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else wa?Iw(l,p)&&(ot="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(ot="onCompositionStart");ot&&(bw&&p.locale!=="ko"&&(wa||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&wa&&(Ye=Aw()):(Po=Ce,ig="value"in Po?Po.value:Po.textContent,wa=!0)),qe=Ch(he,ot),0<qe.length&&(ot=new Rw(ot,l,null,p,Ce),Ee.push({event:ot,listeners:qe}),Ye?ot.data=Ye:(Ye=Lw(p),Ye!==null&&(ot.data=Ye)))),(Ye=t8?n8(l,p):r8(l,p))&&(he=Ch(he,"onBeforeInput"),0<he.length&&(Ce=new Rw("onBeforeInput","beforeinput",null,p,Ce),Ee.push({event:Ce,listeners:he}),Ce.data=Ye))}n2(Ee,c)})}function ou(l,c,p){return{instance:l,listener:c,currentTarget:p}}function Ch(l,c){for(var p=c+"Capture",y=[];l!==null;){var E=l,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=_l(l,p),S!=null&&y.unshift(ou(l,S,E)),S=_l(l,c),S!=null&&y.push(ou(l,S,E))),l=l.return}return y}function Ea(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function i2(l,c,p,y,E){for(var S=c._reactName,L=[];p!==null&&p!==y;){var V=p,Z=V.alternate,he=V.stateNode;if(Z!==null&&Z===y)break;V.tag===5&&he!==null&&(V=he,E?(Z=_l(p,S),Z!=null&&L.unshift(ou(p,Z,V))):E||(Z=_l(p,S),Z!=null&&L.push(ou(p,Z,V)))),p=p.return}L.length!==0&&l.push({event:c,listeners:L})}var v8=/\r\n?/g,y8=/\u0000|\uFFFD/g;function o2(l){return(typeof l=="string"?l:""+l).replace(v8,`
`).replace(y8,"")}function Eh(l,c,p){if(c=o2(c),o2(l)!==c&&p)throw Error(r(425))}function Ph(){}var Cg=null,Eg=null;function Pg(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Dg=typeof setTimeout=="function"?setTimeout:void 0,w8=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,x8=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(l){return s2.resolve(null).then(l).catch(C8)}:Dg;function C8(l){setTimeout(function(){throw l})}function Sg(l,c){var p=c,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"){if(y===0){l.removeChild(E),ql(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=E}while(p);ql(c)}function So(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function a2(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return l;c--}else p==="/$"&&c++}l=l.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),wi="__reactFiber$"+Pa,su="__reactProps$"+Pa,ji="__reactContainer$"+Pa,Tg="__reactEvents$"+Pa,E8="__reactListeners$"+Pa,P8="__reactHandles$"+Pa;function ms(l){var c=l[wi];if(c)return c;for(var p=l.parentNode;p;){if(c=p[ji]||p[wi]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(l=a2(l);l!==null;){if(p=l[wi])return p;l=a2(l)}return c}l=p,p=l.parentNode}return null}function au(l){return l=l[wi]||l[ji],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Da(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function Dh(l){return l[su]||null}var Ag=[],Sa=-1;function To(l){return{current:l}}function Lt(l){0>Sa||(l.current=Ag[Sa],Ag[Sa]=null,Sa--)}function Ot(l,c){Sa++,Ag[Sa]=l.current,l.current=c}var Ao={},Fn=To(Ao),Jn=To(!1),vs=Ao;function Ta(l,c){var p=l.type.contextTypes;if(!p)return Ao;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in p)E[S]=c[S];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=E),E}function er(l){return l=l.childContextTypes,l!=null}function Sh(){Lt(Jn),Lt(Fn)}function l2(l,c,p){if(Fn.current!==Ao)throw Error(r(168));Ot(Fn,c),Ot(Jn,p)}function u2(l,c,p){var y=l.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var E in y)if(!(E in c))throw Error(r(108,ge(l)||"Unknown",E));return _({},p,y)}function Th(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ao,vs=Fn.current,Ot(Fn,l),Ot(Jn,Jn.current),!0}function c2(l,c,p){var y=l.stateNode;if(!y)throw Error(r(169));p?(l=u2(l,c,vs),y.__reactInternalMemoizedMergedChildContext=l,Lt(Jn),Lt(Fn),Ot(Fn,l)):Lt(Jn),Ot(Jn,p)}var zi=null,Ah=!1,Bg=!1;function h2(l){zi===null?zi=[l]:zi.push(l)}function D8(l){Ah=!0,h2(l)}function Bo(){if(!Bg&&zi!==null){Bg=!0;var l=0,c=Mt;try{var p=zi;for(Mt=1;l<p.length;l++){var y=p[l];do y=y(!0);while(y!==null)}zi=null,Ah=!1}catch(E){throw zi!==null&&(zi=zi.slice(l+1)),fw(Y0,Bo),E}finally{Mt=c,Bg=!1}}return null}var Aa=[],Ba=0,Bh=null,Mh=0,Ir=[],Lr=0,ys=null,$i=1,Wi="";function ws(l,c){Aa[Ba++]=Mh,Aa[Ba++]=Bh,Bh=l,Mh=c}function d2(l,c,p){Ir[Lr++]=$i,Ir[Lr++]=Wi,Ir[Lr++]=ys,ys=l;var y=$i;l=Wi;var E=32-Qr(y)-1;y&=~(1<<E),p+=1;var S=32-Qr(c)+E;if(30<S){var L=E-E%5;S=(y&(1<<L)-1).toString(32),y>>=L,E-=L,$i=1<<32-Qr(c)+E|p<<E|y,Wi=S+l}else $i=1<<S|p<<E|y,Wi=l}function Mg(l){l.return!==null&&(ws(l,1),d2(l,1,0))}function Rg(l){for(;l===Bh;)Bh=Aa[--Ba],Aa[Ba]=null,Mh=Aa[--Ba],Aa[Ba]=null;for(;l===ys;)ys=Ir[--Lr],Ir[Lr]=null,Wi=Ir[--Lr],Ir[Lr]=null,$i=Ir[--Lr],Ir[Lr]=null}var wr=null,xr=null,_t=!1,ei=null;function f2(l,c){var p=_r(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=l,c=l.deletions,c===null?(l.deletions=[p],l.flags|=16):c.push(p)}function g2(l,c){switch(l.tag){case 5:var p=l.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,wr=l,xr=So(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,wr=l,xr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=ys!==null?{id:$i,overflow:Wi}:null,l.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=_r(18,null,null,0),p.stateNode=c,p.return=l,l.child=p,wr=l,xr=null,!0):!1;default:return!1}}function kg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function bg(l){if(_t){var c=xr;if(c){var p=c;if(!g2(l,c)){if(kg(l))throw Error(r(418));c=So(p.nextSibling);var y=wr;c&&g2(l,c)?f2(y,p):(l.flags=l.flags&-4097|2,_t=!1,wr=l)}}else{if(kg(l))throw Error(r(418));l.flags=l.flags&-4097|2,_t=!1,wr=l}}}function p2(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;wr=l}function Rh(l){if(l!==wr)return!1;if(!_t)return p2(l),_t=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!Pg(l.type,l.memoizedProps)),c&&(c=xr)){if(kg(l))throw m2(),Error(r(418));for(;c;)f2(l,c),c=So(c.nextSibling)}if(p2(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(c===0){xr=So(l.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}l=l.nextSibling}xr=null}}else xr=wr?So(l.stateNode.nextSibling):null;return!0}function m2(){for(var l=xr;l;)l=So(l.nextSibling)}function Ma(){xr=wr=null,_t=!1}function Fg(l){ei===null?ei=[l]:ei.push(l)}var S8=T.ReactCurrentBatchConfig;function lu(l,c,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(r(309));var y=p.stateNode}if(!y)throw Error(r(147,l));var E=y,S=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(L){var V=E.refs;L===null?delete V[S]:V[S]=L},c._stringRef=S,c)}if(typeof l!="string")throw Error(r(284));if(!p._owner)throw Error(r(290,l))}return l}function kh(l,c){throw l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function v2(l){var c=l._init;return c(l._payload)}function y2(l){function c(se,ee){if(l){var ue=se.deletions;ue===null?(se.deletions=[ee],se.flags|=16):ue.push(ee)}}function p(se,ee){if(!l)return null;for(;ee!==null;)c(se,ee),ee=ee.sibling;return null}function y(se,ee){for(se=new Map;ee!==null;)ee.key!==null?se.set(ee.key,ee):se.set(ee.index,ee),ee=ee.sibling;return se}function E(se,ee){return se=Lo(se,ee),se.index=0,se.sibling=null,se}function S(se,ee,ue){return se.index=ue,l?(ue=se.alternate,ue!==null?(ue=ue.index,ue<ee?(se.flags|=2,ee):ue):(se.flags|=2,ee)):(se.flags|=1048576,ee)}function L(se){return l&&se.alternate===null&&(se.flags|=2),se}function V(se,ee,ue,Se){return ee===null||ee.tag!==6?(ee=Dp(ue,se.mode,Se),ee.return=se,ee):(ee=E(ee,ue),ee.return=se,ee)}function Z(se,ee,ue,Se){var je=ue.type;return je===U?Ce(se,ee,ue.props.children,Se,ue.key):ee!==null&&(ee.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===A&&v2(je)===ee.type)?(Se=E(ee,ue.props),Se.ref=lu(se,ee,ue),Se.return=se,Se):(Se=td(ue.type,ue.key,ue.props,null,se.mode,Se),Se.ref=lu(se,ee,ue),Se.return=se,Se)}function he(se,ee,ue,Se){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ue.containerInfo||ee.stateNode.implementation!==ue.implementation?(ee=Sp(ue,se.mode,Se),ee.return=se,ee):(ee=E(ee,ue.children||[]),ee.return=se,ee)}function Ce(se,ee,ue,Se,je){return ee===null||ee.tag!==7?(ee=As(ue,se.mode,Se,je),ee.return=se,ee):(ee=E(ee,ue),ee.return=se,ee)}function Ee(se,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Dp(""+ee,se.mode,ue),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case H:return ue=td(ee.type,ee.key,ee.props,null,se.mode,ue),ue.ref=lu(se,null,ee),ue.return=se,ue;case z:return ee=Sp(ee,se.mode,ue),ee.return=se,ee;case A:var Se=ee._init;return Ee(se,Se(ee._payload),ue)}if(ct(ee)||I(ee))return ee=As(ee,se.mode,ue,null),ee.return=se,ee;kh(se,ee)}return null}function xe(se,ee,ue,Se){var je=ee!==null?ee.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return je!==null?null:V(se,ee,""+ue,Se);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case H:return ue.key===je?Z(se,ee,ue,Se):null;case z:return ue.key===je?he(se,ee,ue,Se):null;case A:return je=ue._init,xe(se,ee,je(ue._payload),Se)}if(ct(ue)||I(ue))return je!==null?null:Ce(se,ee,ue,Se,null);kh(se,ue)}return null}function Re(se,ee,ue,Se,je){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return se=se.get(ue)||null,V(ee,se,""+Se,je);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case H:return se=se.get(Se.key===null?ue:Se.key)||null,Z(ee,se,Se,je);case z:return se=se.get(Se.key===null?ue:Se.key)||null,he(ee,se,Se,je);case A:var qe=Se._init;return Re(se,ee,ue,qe(Se._payload),je)}if(ct(Se)||I(Se))return se=se.get(ue)||null,Ce(ee,se,Se,je,null);kh(ee,Se)}return null}function Le(se,ee,ue,Se){for(var je=null,qe=null,Ye=ee,ot=ee=0,pn=null;Ye!==null&&ot<ue.length;ot++){Ye.index>ot?(pn=Ye,Ye=null):pn=Ye.sibling;var Dt=xe(se,Ye,ue[ot],Se);if(Dt===null){Ye===null&&(Ye=pn);break}l&&Ye&&Dt.alternate===null&&c(se,Ye),ee=S(Dt,ee,ot),qe===null?je=Dt:qe.sibling=Dt,qe=Dt,Ye=pn}if(ot===ue.length)return p(se,Ye),_t&&ws(se,ot),je;if(Ye===null){for(;ot<ue.length;ot++)Ye=Ee(se,ue[ot],Se),Ye!==null&&(ee=S(Ye,ee,ot),qe===null?je=Ye:qe.sibling=Ye,qe=Ye);return _t&&ws(se,ot),je}for(Ye=y(se,Ye);ot<ue.length;ot++)pn=Re(Ye,se,ot,ue[ot],Se),pn!==null&&(l&&pn.alternate!==null&&Ye.delete(pn.key===null?ot:pn.key),ee=S(pn,ee,ot),qe===null?je=pn:qe.sibling=pn,qe=pn);return l&&Ye.forEach(function(Ho){return c(se,Ho)}),_t&&ws(se,ot),je}function Ge(se,ee,ue,Se){var je=I(ue);if(typeof je!="function")throw Error(r(150));if(ue=je.call(ue),ue==null)throw Error(r(151));for(var qe=je=null,Ye=ee,ot=ee=0,pn=null,Dt=ue.next();Ye!==null&&!Dt.done;ot++,Dt=ue.next()){Ye.index>ot?(pn=Ye,Ye=null):pn=Ye.sibling;var Ho=xe(se,Ye,Dt.value,Se);if(Ho===null){Ye===null&&(Ye=pn);break}l&&Ye&&Ho.alternate===null&&c(se,Ye),ee=S(Ho,ee,ot),qe===null?je=Ho:qe.sibling=Ho,qe=Ho,Ye=pn}if(Dt.done)return p(se,Ye),_t&&ws(se,ot),je;if(Ye===null){for(;!Dt.done;ot++,Dt=ue.next())Dt=Ee(se,Dt.value,Se),Dt!==null&&(ee=S(Dt,ee,ot),qe===null?je=Dt:qe.sibling=Dt,qe=Dt);return _t&&ws(se,ot),je}for(Ye=y(se,Ye);!Dt.done;ot++,Dt=ue.next())Dt=Re(Ye,se,ot,Dt.value,Se),Dt!==null&&(l&&Dt.alternate!==null&&Ye.delete(Dt.key===null?ot:Dt.key),ee=S(Dt,ee,ot),qe===null?je=Dt:qe.sibling=Dt,qe=Dt);return l&&Ye.forEach(function(i4){return c(se,i4)}),_t&&ws(se,ot),je}function tn(se,ee,ue,Se){if(typeof ue=="object"&&ue!==null&&ue.type===U&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case H:e:{for(var je=ue.key,qe=ee;qe!==null;){if(qe.key===je){if(je=ue.type,je===U){if(qe.tag===7){p(se,qe.sibling),ee=E(qe,ue.props.children),ee.return=se,se=ee;break e}}else if(qe.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===A&&v2(je)===qe.type){p(se,qe.sibling),ee=E(qe,ue.props),ee.ref=lu(se,qe,ue),ee.return=se,se=ee;break e}p(se,qe);break}else c(se,qe);qe=qe.sibling}ue.type===U?(ee=As(ue.props.children,se.mode,Se,ue.key),ee.return=se,se=ee):(Se=td(ue.type,ue.key,ue.props,null,se.mode,Se),Se.ref=lu(se,ee,ue),Se.return=se,se=Se)}return L(se);case z:e:{for(qe=ue.key;ee!==null;){if(ee.key===qe)if(ee.tag===4&&ee.stateNode.containerInfo===ue.containerInfo&&ee.stateNode.implementation===ue.implementation){p(se,ee.sibling),ee=E(ee,ue.children||[]),ee.return=se,se=ee;break e}else{p(se,ee);break}else c(se,ee);ee=ee.sibling}ee=Sp(ue,se.mode,Se),ee.return=se,se=ee}return L(se);case A:return qe=ue._init,tn(se,ee,qe(ue._payload),Se)}if(ct(ue))return Le(se,ee,ue,Se);if(I(ue))return Ge(se,ee,ue,Se);kh(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ee!==null&&ee.tag===6?(p(se,ee.sibling),ee=E(ee,ue),ee.return=se,se=ee):(p(se,ee),ee=Dp(ue,se.mode,Se),ee.return=se,se=ee),L(se)):p(se,ee)}return tn}var Ra=y2(!0),w2=y2(!1),bh=To(null),Fh=null,ka=null,Og=null;function Ig(){Og=ka=Fh=null}function Lg(l){var c=bh.current;Lt(bh),l._currentValue=c}function Hg(l,c,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),l===p)break;l=l.return}}function ba(l,c){Fh=l,Og=ka=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(tr=!0),l.firstContext=null)}function Hr(l){var c=l._currentValue;if(Og!==l)if(l={context:l,memoizedValue:c,next:null},ka===null){if(Fh===null)throw Error(r(308));ka=l,Fh.dependencies={lanes:0,firstContext:l}}else ka=ka.next=l;return c}var xs=null;function Ng(l){xs===null?xs=[l]:xs.push(l)}function x2(l,c,p,y){var E=c.interleaved;return E===null?(p.next=p,Ng(c)):(p.next=E.next,E.next=p),c.interleaved=p,Vi(l,y)}function Vi(l,c){l.lanes|=c;var p=l.alternate;for(p!==null&&(p.lanes|=c),p=l,l=l.return;l!==null;)l.childLanes|=c,p=l.alternate,p!==null&&(p.childLanes|=c),p=l,l=l.return;return p.tag===3?p.stateNode:null}var Mo=!1;function Gg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C2(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Ui(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Ro(l,c,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Et&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,Vi(l,p)}return E=y.interleaved,E===null?(c.next=c,Ng(y)):(c.next=E.next,E.next=c),y.interleaved=c,Vi(l,p)}function Oh(l,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=l.pendingLanes,p|=y,c.lanes=p,J0(l,p)}}function E2(l,c){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};S===null?E=S=L:S=S.next=L,p=p.next}while(p!==null);S===null?E=S=c:S=S.next=c}else E=S=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:y.shared,effects:y.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=c}function Ih(l,c,p,y){var E=l.updateQueue;Mo=!1;var S=E.firstBaseUpdate,L=E.lastBaseUpdate,V=E.shared.pending;if(V!==null){E.shared.pending=null;var Z=V,he=Z.next;Z.next=null,L===null?S=he:L.next=he,L=Z;var Ce=l.alternate;Ce!==null&&(Ce=Ce.updateQueue,V=Ce.lastBaseUpdate,V!==L&&(V===null?Ce.firstBaseUpdate=he:V.next=he,Ce.lastBaseUpdate=Z))}if(S!==null){var Ee=E.baseState;L=0,Ce=he=Z=null,V=S;do{var xe=V.lane,Re=V.eventTime;if((y&xe)===xe){Ce!==null&&(Ce=Ce.next={eventTime:Re,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Le=l,Ge=V;switch(xe=c,Re=p,Ge.tag){case 1:if(Le=Ge.payload,typeof Le=="function"){Ee=Le.call(Re,Ee,xe);break e}Ee=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ge.payload,xe=typeof Le=="function"?Le.call(Re,Ee,xe):Le,xe==null)break e;Ee=_({},Ee,xe);break e;case 2:Mo=!0}}V.callback!==null&&V.lane!==0&&(l.flags|=64,xe=E.effects,xe===null?E.effects=[V]:xe.push(V))}else Re={eventTime:Re,lane:xe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ce===null?(he=Ce=Re,Z=Ee):Ce=Ce.next=Re,L|=xe;if(V=V.next,V===null){if(V=E.shared.pending,V===null)break;xe=V,V=xe.next,xe.next=null,E.lastBaseUpdate=xe,E.shared.pending=null}}while(!0);if(Ce===null&&(Z=Ee),E.baseState=Z,E.firstBaseUpdate=he,E.lastBaseUpdate=Ce,c=E.shared.interleaved,c!==null){E=c;do L|=E.lane,E=E.next;while(E!==c)}else S===null&&(E.shared.lanes=0);Ps|=L,l.lanes=L,l.memoizedState=Ee}}function P2(l,c,p){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var y=l[c],E=y.callback;if(E!==null){if(y.callback=null,y=p,typeof E!="function")throw Error(r(191,E));E.call(y)}}}var uu={},xi=To(uu),cu=To(uu),hu=To(uu);function Cs(l){if(l===uu)throw Error(r(174));return l}function _g(l,c){switch(Ot(hu,c),Ot(cu,l),Ot(xi,uu),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Or(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=Or(c,l)}Lt(xi),Ot(xi,c)}function Fa(){Lt(xi),Lt(cu),Lt(hu)}function D2(l){Cs(hu.current);var c=Cs(xi.current),p=Or(c,l.type);c!==p&&(Ot(cu,l),Ot(xi,p))}function jg(l){cu.current===l&&(Lt(xi),Lt(cu))}var Ut=To(0);function Lh(l){for(var c=l;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var zg=[];function $g(){for(var l=0;l<zg.length;l++)zg[l]._workInProgressVersionPrimary=null;zg.length=0}var Hh=T.ReactCurrentDispatcher,Wg=T.ReactCurrentBatchConfig,Es=0,Xt=null,ln=null,fn=null,Nh=!1,du=!1,fu=0,T8=0;function On(){throw Error(r(321))}function Vg(l,c){if(c===null)return!1;for(var p=0;p<c.length&&p<l.length;p++)if(!Jr(l[p],c[p]))return!1;return!0}function Ug(l,c,p,y,E,S){if(Es=S,Xt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Hh.current=l===null||l.memoizedState===null?R8:k8,l=p(y,E),du){S=0;do{if(du=!1,fu=0,25<=S)throw Error(r(301));S+=1,fn=ln=null,c.updateQueue=null,Hh.current=b8,l=p(y,E)}while(du)}if(Hh.current=jh,c=ln!==null&&ln.next!==null,Es=0,fn=ln=Xt=null,Nh=!1,c)throw Error(r(300));return l}function Xg(){var l=fu!==0;return fu=0,l}function Ci(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Xt.memoizedState=fn=l:fn=fn.next=l,fn}function Nr(){if(ln===null){var l=Xt.alternate;l=l!==null?l.memoizedState:null}else l=ln.next;var c=fn===null?Xt.memoizedState:fn.next;if(c!==null)fn=c,ln=l;else{if(l===null)throw Error(r(310));ln=l,l={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},fn===null?Xt.memoizedState=fn=l:fn=fn.next=l}return fn}function gu(l,c){return typeof c=="function"?c(l):c}function Kg(l){var c=Nr(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=ln,E=y.baseQueue,S=p.pending;if(S!==null){if(E!==null){var L=E.next;E.next=S.next,S.next=L}y.baseQueue=E=S,p.pending=null}if(E!==null){S=E.next,y=y.baseState;var V=L=null,Z=null,he=S;do{var Ce=he.lane;if((Es&Ce)===Ce)Z!==null&&(Z=Z.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),y=he.hasEagerState?he.eagerState:l(y,he.action);else{var Ee={lane:Ce,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Z===null?(V=Z=Ee,L=y):Z=Z.next=Ee,Xt.lanes|=Ce,Ps|=Ce}he=he.next}while(he!==null&&he!==S);Z===null?L=y:Z.next=V,Jr(y,c.memoizedState)||(tr=!0),c.memoizedState=y,c.baseState=L,c.baseQueue=Z,p.lastRenderedState=y}if(l=p.interleaved,l!==null){E=l;do S=E.lane,Xt.lanes|=S,Ps|=S,E=E.next;while(E!==l)}else E===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function qg(l){var c=Nr(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,S=c.memoizedState;if(E!==null){p.pending=null;var L=E=E.next;do S=l(S,L.action),L=L.next;while(L!==E);Jr(S,c.memoizedState)||(tr=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),p.lastRenderedState=S}return[S,y]}function S2(){}function T2(l,c){var p=Xt,y=Nr(),E=c(),S=!Jr(y.memoizedState,E);if(S&&(y.memoizedState=E,tr=!0),y=y.queue,Yg(M2.bind(null,p,y,l),[l]),y.getSnapshot!==c||S||fn!==null&&fn.memoizedState.tag&1){if(p.flags|=2048,pu(9,B2.bind(null,p,y,E,c),void 0,null),gn===null)throw Error(r(349));(Es&30)!==0||A2(p,c,E)}return E}function A2(l,c,p){l.flags|=16384,l={getSnapshot:c,value:p},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.stores=[l]):(p=c.stores,p===null?c.stores=[l]:p.push(l))}function B2(l,c,p,y){c.value=p,c.getSnapshot=y,R2(c)&&k2(l)}function M2(l,c,p){return p(function(){R2(c)&&k2(l)})}function R2(l){var c=l.getSnapshot;l=l.value;try{var p=c();return!Jr(l,p)}catch{return!0}}function k2(l){var c=Vi(l,1);c!==null&&ii(c,l,1,-1)}function b2(l){var c=Ci();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:l},c.queue=l,l=l.dispatch=M8.bind(null,Xt,l),[c.memoizedState,l]}function pu(l,c,p,y){return l={tag:l,create:c,destroy:p,deps:y,next:null},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.lastEffect=l.next=l):(p=c.lastEffect,p===null?c.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,c.lastEffect=l)),l}function F2(){return Nr().memoizedState}function Gh(l,c,p,y){var E=Ci();Xt.flags|=l,E.memoizedState=pu(1|c,p,void 0,y===void 0?null:y)}function _h(l,c,p,y){var E=Nr();y=y===void 0?null:y;var S=void 0;if(ln!==null){var L=ln.memoizedState;if(S=L.destroy,y!==null&&Vg(y,L.deps)){E.memoizedState=pu(c,p,S,y);return}}Xt.flags|=l,E.memoizedState=pu(1|c,p,S,y)}function O2(l,c){return Gh(8390656,8,l,c)}function Yg(l,c){return _h(2048,8,l,c)}function I2(l,c){return _h(4,2,l,c)}function L2(l,c){return _h(4,4,l,c)}function H2(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function N2(l,c,p){return p=p!=null?p.concat([l]):null,_h(4,4,H2.bind(null,c,l),p)}function Zg(){}function G2(l,c){var p=Nr();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&Vg(c,y[1])?y[0]:(p.memoizedState=[l,c],l)}function _2(l,c){var p=Nr();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&Vg(c,y[1])?y[0]:(l=l(),p.memoizedState=[l,c],l)}function j2(l,c,p){return(Es&21)===0?(l.baseState&&(l.baseState=!1,tr=!0),l.memoizedState=p):(Jr(p,c)||(p=vw(),Xt.lanes|=p,Ps|=p,l.baseState=!0),c)}function A8(l,c){var p=Mt;Mt=p!==0&&4>p?p:4,l(!0);var y=Wg.transition;Wg.transition={};try{l(!1),c()}finally{Mt=p,Wg.transition=y}}function z2(){return Nr().memoizedState}function B8(l,c,p){var y=Oo(l);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},$2(l))W2(c,p);else if(p=x2(l,c,p,y),p!==null){var E=$n();ii(p,l,y,E),V2(p,c,y)}}function M8(l,c,p){var y=Oo(l),E={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if($2(l))W2(c,E);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var L=c.lastRenderedState,V=S(L,p);if(E.hasEagerState=!0,E.eagerState=V,Jr(V,L)){var Z=c.interleaved;Z===null?(E.next=E,Ng(c)):(E.next=Z.next,Z.next=E),c.interleaved=E;return}}catch{}finally{}p=x2(l,c,E,y),p!==null&&(E=$n(),ii(p,l,y,E),V2(p,c,y))}}function $2(l){var c=l.alternate;return l===Xt||c!==null&&c===Xt}function W2(l,c){du=Nh=!0;var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}function V2(l,c,p){if((p&4194240)!==0){var y=c.lanes;y&=l.pendingLanes,p|=y,c.lanes=p,J0(l,p)}}var jh={readContext:Hr,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},R8={readContext:Hr,useCallback:function(l,c){return Ci().memoizedState=[l,c===void 0?null:c],l},useContext:Hr,useEffect:O2,useImperativeHandle:function(l,c,p){return p=p!=null?p.concat([l]):null,Gh(4194308,4,H2.bind(null,c,l),p)},useLayoutEffect:function(l,c){return Gh(4194308,4,l,c)},useInsertionEffect:function(l,c){return Gh(4,2,l,c)},useMemo:function(l,c){var p=Ci();return c=c===void 0?null:c,l=l(),p.memoizedState=[l,c],l},useReducer:function(l,c,p){var y=Ci();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},y.queue=l,l=l.dispatch=B8.bind(null,Xt,l),[y.memoizedState,l]},useRef:function(l){var c=Ci();return l={current:l},c.memoizedState=l},useState:b2,useDebugValue:Zg,useDeferredValue:function(l){return Ci().memoizedState=l},useTransition:function(){var l=b2(!1),c=l[0];return l=A8.bind(null,l[1]),Ci().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,p){var y=Xt,E=Ci();if(_t){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),gn===null)throw Error(r(349));(Es&30)!==0||A2(y,c,p)}E.memoizedState=p;var S={value:p,getSnapshot:c};return E.queue=S,O2(M2.bind(null,y,S,l),[l]),y.flags|=2048,pu(9,B2.bind(null,y,S,p,c),void 0,null),p},useId:function(){var l=Ci(),c=gn.identifierPrefix;if(_t){var p=Wi,y=$i;p=(y&~(1<<32-Qr(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=fu++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=T8++,c=":"+c+"r"+p.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},k8={readContext:Hr,useCallback:G2,useContext:Hr,useEffect:Yg,useImperativeHandle:N2,useInsertionEffect:I2,useLayoutEffect:L2,useMemo:_2,useReducer:Kg,useRef:F2,useState:function(){return Kg(gu)},useDebugValue:Zg,useDeferredValue:function(l){var c=Nr();return j2(c,ln.memoizedState,l)},useTransition:function(){var l=Kg(gu)[0],c=Nr().memoizedState;return[l,c]},useMutableSource:S2,useSyncExternalStore:T2,useId:z2,unstable_isNewReconciler:!1},b8={readContext:Hr,useCallback:G2,useContext:Hr,useEffect:Yg,useImperativeHandle:N2,useInsertionEffect:I2,useLayoutEffect:L2,useMemo:_2,useReducer:qg,useRef:F2,useState:function(){return qg(gu)},useDebugValue:Zg,useDeferredValue:function(l){var c=Nr();return ln===null?c.memoizedState=l:j2(c,ln.memoizedState,l)},useTransition:function(){var l=qg(gu)[0],c=Nr().memoizedState;return[l,c]},useMutableSource:S2,useSyncExternalStore:T2,useId:z2,unstable_isNewReconciler:!1};function ti(l,c){if(l&&l.defaultProps){c=_({},c),l=l.defaultProps;for(var p in l)c[p]===void 0&&(c[p]=l[p]);return c}return c}function Qg(l,c,p,y){c=l.memoizedState,p=p(y,c),p=p==null?c:_({},c,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var zh={isMounted:function(l){return(l=l._reactInternals)?ps(l)===l:!1},enqueueSetState:function(l,c,p){l=l._reactInternals;var y=$n(),E=Oo(l),S=Ui(y,E);S.payload=c,p!=null&&(S.callback=p),c=Ro(l,S,E),c!==null&&(ii(c,l,E,y),Oh(c,l,E))},enqueueReplaceState:function(l,c,p){l=l._reactInternals;var y=$n(),E=Oo(l),S=Ui(y,E);S.tag=1,S.payload=c,p!=null&&(S.callback=p),c=Ro(l,S,E),c!==null&&(ii(c,l,E,y),Oh(c,l,E))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var p=$n(),y=Oo(l),E=Ui(p,y);E.tag=2,c!=null&&(E.callback=c),c=Ro(l,E,y),c!==null&&(ii(c,l,y,p),Oh(c,l,y))}};function U2(l,c,p,y,E,S,L){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,S,L):c.prototype&&c.prototype.isPureReactComponent?!tu(p,y)||!tu(E,S):!0}function X2(l,c,p){var y=!1,E=Ao,S=c.contextType;return typeof S=="object"&&S!==null?S=Hr(S):(E=er(c)?vs:Fn.current,y=c.contextTypes,S=(y=y!=null)?Ta(l,E):Ao),c=new c(p,S),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=zh,l.stateNode=c,c._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=S),c}function K2(l,c,p,y){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==l&&zh.enqueueReplaceState(c,c.state,null)}function Jg(l,c,p,y){var E=l.stateNode;E.props=p,E.state=l.memoizedState,E.refs={},Gg(l);var S=c.contextType;typeof S=="object"&&S!==null?E.context=Hr(S):(S=er(c)?vs:Fn.current,E.context=Ta(l,S)),E.state=l.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Qg(l,c,S,p),E.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&zh.enqueueReplaceState(E,E.state,null),Ih(l,p,E,y),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}function Oa(l,c){try{var p="",y=c;do p+=oe(y),y=y.return;while(y);var E=p}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:l,source:c,stack:E,digest:null}}function ep(l,c,p){return{value:l,source:null,stack:p??null,digest:c??null}}function tp(l,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var F8=typeof WeakMap=="function"?WeakMap:Map;function q2(l,c,p){p=Ui(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){qh||(qh=!0,mp=y),tp(l,c)},p}function Y2(l,c,p){p=Ui(-1,p),p.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var E=c.value;p.payload=function(){return y(E)},p.callback=function(){tp(l,c)}}var S=l.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(p.callback=function(){tp(l,c),typeof y!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})}),p}function Z2(l,c,p){var y=l.pingCache;if(y===null){y=l.pingCache=new F8;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(E.add(p),l=X8.bind(null,l,c,p),c.then(l,l))}function Q2(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function J2(l,c,p,y,E){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Ui(-1,1),c.tag=2,Ro(p,c,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=E,l)}var O8=T.ReactCurrentOwner,tr=!1;function zn(l,c,p,y){c.child=l===null?w2(c,null,p,y):Ra(c,l.child,p,y)}function ex(l,c,p,y,E){p=p.render;var S=c.ref;return ba(c,E),y=Ug(l,c,p,y,S,E),p=Xg(),l!==null&&!tr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~E,Xi(l,c,E)):(_t&&p&&Mg(c),c.flags|=1,zn(l,c,y,E),c.child)}function tx(l,c,p,y,E){if(l===null){var S=p.type;return typeof S=="function"&&!Pp(S)&&S.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=S,nx(l,c,S,y,E)):(l=td(p.type,null,y,c,c.mode,E),l.ref=c.ref,l.return=c,c.child=l)}if(S=l.child,(l.lanes&E)===0){var L=S.memoizedProps;if(p=p.compare,p=p!==null?p:tu,p(L,y)&&l.ref===c.ref)return Xi(l,c,E)}return c.flags|=1,l=Lo(S,y),l.ref=c.ref,l.return=c,c.child=l}function nx(l,c,p,y,E){if(l!==null){var S=l.memoizedProps;if(tu(S,y)&&l.ref===c.ref)if(tr=!1,c.pendingProps=y=S,(l.lanes&E)!==0)(l.flags&131072)!==0&&(tr=!0);else return c.lanes=l.lanes,Xi(l,c,E)}return np(l,c,p,y,E)}function rx(l,c,p){var y=c.pendingProps,E=y.children,S=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(La,Cr),Cr|=p;else{if((p&1073741824)===0)return l=S!==null?S.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Ot(La,Cr),Cr|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:p,Ot(La,Cr),Cr|=y}else S!==null?(y=S.baseLanes|p,c.memoizedState=null):y=p,Ot(La,Cr),Cr|=y;return zn(l,c,E,p),c.child}function ix(l,c){var p=c.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function np(l,c,p,y,E){var S=er(p)?vs:Fn.current;return S=Ta(c,S),ba(c,E),p=Ug(l,c,p,y,S,E),y=Xg(),l!==null&&!tr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~E,Xi(l,c,E)):(_t&&y&&Mg(c),c.flags|=1,zn(l,c,p,E),c.child)}function ox(l,c,p,y,E){if(er(p)){var S=!0;Th(c)}else S=!1;if(ba(c,E),c.stateNode===null)Wh(l,c),X2(c,p,y),Jg(c,p,y,E),y=!0;else if(l===null){var L=c.stateNode,V=c.memoizedProps;L.props=V;var Z=L.context,he=p.contextType;typeof he=="object"&&he!==null?he=Hr(he):(he=er(p)?vs:Fn.current,he=Ta(c,he));var Ce=p.getDerivedStateFromProps,Ee=typeof Ce=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ee||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==y||Z!==he)&&K2(c,L,y,he),Mo=!1;var xe=c.memoizedState;L.state=xe,Ih(c,y,L,E),Z=c.memoizedState,V!==y||xe!==Z||Jn.current||Mo?(typeof Ce=="function"&&(Qg(c,p,Ce,y),Z=c.memoizedState),(V=Mo||U2(c,p,V,y,xe,Z,he))?(Ee||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Z),L.props=y,L.state=Z,L.context=he,y=V):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{L=c.stateNode,C2(l,c),V=c.memoizedProps,he=c.type===c.elementType?V:ti(c.type,V),L.props=he,Ee=c.pendingProps,xe=L.context,Z=p.contextType,typeof Z=="object"&&Z!==null?Z=Hr(Z):(Z=er(p)?vs:Fn.current,Z=Ta(c,Z));var Re=p.getDerivedStateFromProps;(Ce=typeof Re=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==Ee||xe!==Z)&&K2(c,L,y,Z),Mo=!1,xe=c.memoizedState,L.state=xe,Ih(c,y,L,E);var Le=c.memoizedState;V!==Ee||xe!==Le||Jn.current||Mo?(typeof Re=="function"&&(Qg(c,p,Re,y),Le=c.memoizedState),(he=Mo||U2(c,p,he,y,xe,Le,Z)||!1)?(Ce||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,Le,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,Le,Z)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||V===l.memoizedProps&&xe===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&xe===l.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Le),L.props=y,L.state=Le,L.context=Z,y=he):(typeof L.componentDidUpdate!="function"||V===l.memoizedProps&&xe===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&xe===l.memoizedState||(c.flags|=1024),y=!1)}return rp(l,c,p,y,S,E)}function rp(l,c,p,y,E,S){ix(l,c);var L=(c.flags&128)!==0;if(!y&&!L)return E&&c2(c,p,!1),Xi(l,c,S);y=c.stateNode,O8.current=c;var V=L&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,l!==null&&L?(c.child=Ra(c,l.child,null,S),c.child=Ra(c,null,V,S)):zn(l,c,V,S),c.memoizedState=y.state,E&&c2(c,p,!0),c.child}function sx(l){var c=l.stateNode;c.pendingContext?l2(l,c.pendingContext,c.pendingContext!==c.context):c.context&&l2(l,c.context,!1),_g(l,c.containerInfo)}function ax(l,c,p,y,E){return Ma(),Fg(E),c.flags|=256,zn(l,c,p,y),c.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function op(l){return{baseLanes:l,cachePool:null,transitions:null}}function lx(l,c,p){var y=c.pendingProps,E=Ut.current,S=!1,L=(c.flags&128)!==0,V;if((V=L)||(V=l!==null&&l.memoizedState===null?!1:(E&2)!==0),V?(S=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),Ot(Ut,E&1),l===null)return bg(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(L=y.children,l=y.fallback,S?(y=c.mode,S=c.child,L={mode:"hidden",children:L},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=L):S=nd(L,y,0,null),l=As(l,y,p,null),S.return=c,l.return=c,S.sibling=l,c.child=S,c.child.memoizedState=op(p),c.memoizedState=ip,l):sp(c,L));if(E=l.memoizedState,E!==null&&(V=E.dehydrated,V!==null))return I8(l,c,L,y,V,E,p);if(S){S=y.fallback,L=c.mode,E=l.child,V=E.sibling;var Z={mode:"hidden",children:y.children};return(L&1)===0&&c.child!==E?(y=c.child,y.childLanes=0,y.pendingProps=Z,c.deletions=null):(y=Lo(E,Z),y.subtreeFlags=E.subtreeFlags&14680064),V!==null?S=Lo(V,S):(S=As(S,L,p,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,L=l.child.memoizedState,L=L===null?op(p):{baseLanes:L.baseLanes|p,cachePool:null,transitions:L.transitions},S.memoizedState=L,S.childLanes=l.childLanes&~p,c.memoizedState=ip,y}return S=l.child,l=S.sibling,y=Lo(S,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,l!==null&&(p=c.deletions,p===null?(c.deletions=[l],c.flags|=16):p.push(l)),c.child=y,c.memoizedState=null,y}function sp(l,c){return c=nd({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function $h(l,c,p,y){return y!==null&&Fg(y),Ra(c,l.child,null,p),l=sp(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function I8(l,c,p,y,E,S,L){if(p)return c.flags&256?(c.flags&=-257,y=ep(Error(r(422))),$h(l,c,L,y)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(S=y.fallback,E=c.mode,y=nd({mode:"visible",children:y.children},E,0,null),S=As(S,E,L,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,(c.mode&1)!==0&&Ra(c,l.child,null,L),c.child.memoizedState=op(L),c.memoizedState=ip,S);if((c.mode&1)===0)return $h(l,c,L,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var V=y.dgst;return y=V,S=Error(r(419)),y=ep(S,y,void 0),$h(l,c,L,y)}if(V=(L&l.childLanes)!==0,tr||V){if(y=gn,y!==null){switch(L&-L){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|L))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,Vi(l,E),ii(y,l,E,-1))}return Ep(),y=ep(Error(r(421))),$h(l,c,L,y)}return E.data==="$?"?(c.flags|=128,c.child=l.child,c=K8.bind(null,l),E._reactRetry=c,null):(l=S.treeContext,xr=So(E.nextSibling),wr=c,_t=!0,ei=null,l!==null&&(Ir[Lr++]=$i,Ir[Lr++]=Wi,Ir[Lr++]=ys,$i=l.id,Wi=l.overflow,ys=c),c=sp(c,y.children),c.flags|=4096,c)}function ux(l,c,p){l.lanes|=c;var y=l.alternate;y!==null&&(y.lanes|=c),Hg(l.return,c,p)}function ap(l,c,p,y,E){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=p,S.tailMode=E)}function cx(l,c,p){var y=c.pendingProps,E=y.revealOrder,S=y.tail;if(zn(l,c,y.children,p),y=Ut.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ux(l,p,c);else if(l.tag===19)ux(l,p,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Ot(Ut,y),(c.mode&1)===0)c.memoizedState=null;else switch(E){case"forwards":for(p=c.child,E=null;p!==null;)l=p.alternate,l!==null&&Lh(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),ap(c,!1,E,p,S);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(l=E.alternate,l!==null&&Lh(l)===null){c.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}ap(c,!0,p,null,S);break;case"together":ap(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Wh(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Xi(l,c,p){if(l!==null&&(c.dependencies=l.dependencies),Ps|=c.lanes,(p&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,p=Lo(l,l.pendingProps),c.child=p,p.return=c;l.sibling!==null;)l=l.sibling,p=p.sibling=Lo(l,l.pendingProps),p.return=c;p.sibling=null}return c.child}function L8(l,c,p){switch(c.tag){case 3:sx(c),Ma();break;case 5:D2(c);break;case 1:er(c.type)&&Th(c);break;case 4:_g(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,E=c.memoizedProps.value;Ot(bh,y._currentValue),y._currentValue=E;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Ot(Ut,Ut.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?lx(l,c,p):(Ot(Ut,Ut.current&1),l=Xi(l,c,p),l!==null?l.sibling:null);Ot(Ut,Ut.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(l.flags&128)!==0){if(y)return cx(l,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ot(Ut,Ut.current),y)break;return null;case 22:case 23:return c.lanes=0,rx(l,c,p)}return Xi(l,c,p)}var hx,lp,dx,fx;hx=function(l,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},lp=function(){},dx=function(l,c,p,y){var E=l.memoizedProps;if(E!==y){l=c.stateNode,Cs(xi.current);var S=null;switch(p){case"input":E=we(l,E),y=we(l,y),S=[];break;case"select":E=_({},E,{value:void 0}),y=_({},y,{value:void 0}),S=[];break;case"textarea":E=wt(l,E),y=wt(l,y),S=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=Ph)}gs(p,y);var L;p=null;for(he in E)if(!y.hasOwnProperty(he)&&E.hasOwnProperty(he)&&E[he]!=null)if(he==="style"){var V=E[he];for(L in V)V.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(o.hasOwnProperty(he)?S||(S=[]):(S=S||[]).push(he,null));for(he in y){var Z=y[he];if(V=E!=null?E[he]:void 0,y.hasOwnProperty(he)&&Z!==V&&(Z!=null||V!=null))if(he==="style")if(V){for(L in V)!V.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in Z)Z.hasOwnProperty(L)&&V[L]!==Z[L]&&(p||(p={}),p[L]=Z[L])}else p||(S||(S=[]),S.push(he,p)),p=Z;else he==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(S=S||[]).push(he,Z)):he==="children"?typeof Z!="string"&&typeof Z!="number"||(S=S||[]).push(he,""+Z):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(o.hasOwnProperty(he)?(Z!=null&&he==="onScroll"&&It("scroll",l),S||V===Z||(S=[])):(S=S||[]).push(he,Z))}p&&(S=S||[]).push("style",p);var he=S;(c.updateQueue=he)&&(c.flags|=4)}},fx=function(l,c,p,y){p!==y&&(c.flags|=4)};function mu(l,c){if(!_t)switch(l.tailMode){case"hidden":c=l.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function In(l){var c=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(c)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,c}function H8(l,c,p){var y=c.pendingProps;switch(Rg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(c),null;case 1:return er(c.type)&&Sh(),In(c),null;case 3:return y=c.stateNode,Fa(),Lt(Jn),Lt(Fn),$g(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Rh(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ei!==null&&(wp(ei),ei=null))),lp(l,c),In(c),null;case 5:jg(c);var E=Cs(hu.current);if(p=c.type,l!==null&&c.stateNode!=null)dx(l,c,p,y,E),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(r(166));return In(c),null}if(l=Cs(xi.current),Rh(c)){y=c.stateNode,p=c.type;var S=c.memoizedProps;switch(y[wi]=c,y[su]=S,l=(c.mode&1)!==0,p){case"dialog":It("cancel",y),It("close",y);break;case"iframe":case"object":case"embed":It("load",y);break;case"video":case"audio":for(E=0;E<ru.length;E++)It(ru[E],y);break;case"source":It("error",y);break;case"img":case"image":case"link":It("error",y),It("load",y);break;case"details":It("toggle",y);break;case"input":it(y,S),It("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},It("invalid",y);break;case"textarea":sn(y,S),It("invalid",y)}gs(p,S),E=null;for(var L in S)if(S.hasOwnProperty(L)){var V=S[L];L==="children"?typeof V=="string"?y.textContent!==V&&(S.suppressHydrationWarning!==!0&&Eh(y.textContent,V,l),E=["children",V]):typeof V=="number"&&y.textContent!==""+V&&(S.suppressHydrationWarning!==!0&&Eh(y.textContent,V,l),E=["children",""+V]):o.hasOwnProperty(L)&&V!=null&&L==="onScroll"&&It("scroll",y)}switch(p){case"input":fe(y),et(y,S,!0);break;case"textarea":fe(y),an(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=Ph)}y=E,c.updateQueue=y,y!==null&&(c.flags|=4)}else{L=E.nodeType===9?E:E.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Yr(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=L.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=L.createElement(p,{is:y.is}):(l=L.createElement(p),p==="select"&&(L=l,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):l=L.createElementNS(l,p),l[wi]=c,l[su]=y,hx(l,c,!1,!1),c.stateNode=l;e:{switch(L=ga(p,y),p){case"dialog":It("cancel",l),It("close",l),E=y;break;case"iframe":case"object":case"embed":It("load",l),E=y;break;case"video":case"audio":for(E=0;E<ru.length;E++)It(ru[E],l);E=y;break;case"source":It("error",l),E=y;break;case"img":case"image":case"link":It("error",l),It("load",l),E=y;break;case"details":It("toggle",l),E=y;break;case"input":it(l,y),E=we(l,y),It("invalid",l);break;case"option":E=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},E=_({},y,{value:void 0}),It("invalid",l);break;case"textarea":sn(l,y),E=wt(l,y),It("invalid",l);break;default:E=y}gs(p,E),V=E;for(S in V)if(V.hasOwnProperty(S)){var Z=V[S];S==="style"?Gl(l,Z):S==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&qt(l,Z)):S==="children"?typeof Z=="string"?(p!=="textarea"||Z!=="")&&Zr(l,Z):typeof Z=="number"&&Zr(l,""+Z):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(o.hasOwnProperty(S)?Z!=null&&S==="onScroll"&&It("scroll",l):Z!=null&&k(l,S,Z,L))}switch(p){case"input":fe(l),et(l,y,!1);break;case"textarea":fe(l),an(l);break;case"option":y.value!=null&&l.setAttribute("value",""+pe(y.value));break;case"select":l.multiple=!!y.multiple,S=y.value,S!=null?rt(l,!!y.multiple,S,!1):y.defaultValue!=null&&rt(l,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(l.onclick=Ph)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return In(c),null;case 6:if(l&&c.stateNode!=null)fx(l,c,l.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(p=Cs(hu.current),Cs(xi.current),Rh(c)){if(y=c.stateNode,p=c.memoizedProps,y[wi]=c,(S=y.nodeValue!==p)&&(l=wr,l!==null))switch(l.tag){case 3:Eh(y.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Eh(y.nodeValue,p,(l.mode&1)!==0)}S&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[wi]=c,c.stateNode=y}return In(c),null;case 13:if(Lt(Ut),y=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_t&&xr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)m2(),Ma(),c.flags|=98560,S=!1;else if(S=Rh(c),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(r(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[wi]=c}else Ma(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;In(c),S=!1}else ei!==null&&(wp(ei),ei=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Ut.current&1)!==0?un===0&&(un=3):Ep())),c.updateQueue!==null&&(c.flags|=4),In(c),null);case 4:return Fa(),lp(l,c),l===null&&iu(c.stateNode.containerInfo),In(c),null;case 10:return Lg(c.type._context),In(c),null;case 17:return er(c.type)&&Sh(),In(c),null;case 19:if(Lt(Ut),S=c.memoizedState,S===null)return In(c),null;if(y=(c.flags&128)!==0,L=S.rendering,L===null)if(y)mu(S,!1);else{if(un!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(L=Lh(l),L!==null){for(c.flags|=128,mu(S,!1),y=L.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)S=p,l=y,S.flags&=14680066,L=S.alternate,L===null?(S.childLanes=0,S.lanes=l,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=L.childLanes,S.lanes=L.lanes,S.child=L.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=L.memoizedProps,S.memoizedState=L.memoizedState,S.updateQueue=L.updateQueue,S.type=L.type,l=L.dependencies,S.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return Ot(Ut,Ut.current&1|2),c.child}l=l.sibling}S.tail!==null&&en()>Ha&&(c.flags|=128,y=!0,mu(S,!1),c.lanes=4194304)}else{if(!y)if(l=Lh(L),l!==null){if(c.flags|=128,y=!0,p=l.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),mu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!L.alternate&&!_t)return In(c),null}else 2*en()-S.renderingStartTime>Ha&&p!==1073741824&&(c.flags|=128,y=!0,mu(S,!1),c.lanes=4194304);S.isBackwards?(L.sibling=c.child,c.child=L):(p=S.last,p!==null?p.sibling=L:c.child=L,S.last=L)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=en(),c.sibling=null,p=Ut.current,Ot(Ut,y?p&1|2:p&1),c):(In(c),null);case 22:case 23:return Cp(),y=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Cr&1073741824)!==0&&(In(c),c.subtreeFlags&6&&(c.flags|=8192)):In(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function N8(l,c){switch(Rg(c),c.tag){case 1:return er(c.type)&&Sh(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Fa(),Lt(Jn),Lt(Fn),$g(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return jg(c),null;case 13:if(Lt(Ut),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Ma()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Lt(Ut),null;case 4:return Fa(),null;case 10:return Lg(c.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var Vh=!1,Ln=!1,G8=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Ia(l,c){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Yt(l,c,y)}else p.current=null}function up(l,c,p){try{p()}catch(y){Yt(l,c,y)}}var gx=!1;function _8(l,c){if(Cg=hh,l=Uw(),fg(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var L=0,V=-1,Z=-1,he=0,Ce=0,Ee=l,xe=null;t:for(;;){for(var Re;Ee!==p||E!==0&&Ee.nodeType!==3||(V=L+E),Ee!==S||y!==0&&Ee.nodeType!==3||(Z=L+y),Ee.nodeType===3&&(L+=Ee.nodeValue.length),(Re=Ee.firstChild)!==null;)xe=Ee,Ee=Re;for(;;){if(Ee===l)break t;if(xe===p&&++he===E&&(V=L),xe===S&&++Ce===y&&(Z=L),(Re=Ee.nextSibling)!==null)break;Ee=xe,xe=Ee.parentNode}Ee=Re}p=V===-1||Z===-1?null:{start:V,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Eg={focusedElem:l,selectionRange:p},hh=!1,Oe=c;Oe!==null;)if(c=Oe,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,Oe=l;else for(;Oe!==null;){c=Oe;try{var Le=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Ge=Le.memoizedProps,tn=Le.memoizedState,se=c.stateNode,ee=se.getSnapshotBeforeUpdate(c.elementType===c.type?Ge:ti(c.type,Ge),tn);se.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Se){Yt(c,c.return,Se)}if(l=c.sibling,l!==null){l.return=c.return,Oe=l;break}Oe=c.return}return Le=gx,gx=!1,Le}function vu(l,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&l)===l){var S=E.destroy;E.destroy=void 0,S!==void 0&&up(c,p,S)}E=E.next}while(E!==y)}}function Uh(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&l)===l){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function cp(l){var c=l.ref;if(c!==null){var p=l.stateNode;switch(l.tag){case 5:l=p;break;default:l=p}typeof c=="function"?c(l):c.current=l}}function px(l){var c=l.alternate;c!==null&&(l.alternate=null,px(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[wi],delete c[su],delete c[Tg],delete c[E8],delete c[P8])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function mx(l){return l.tag===5||l.tag===3||l.tag===4}function vx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||mx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function hp(l,c,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(l,c):p.insertBefore(l,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(l,p)):(c=p,c.appendChild(l)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Ph));else if(y!==4&&(l=l.child,l!==null))for(hp(l,c,p),l=l.sibling;l!==null;)hp(l,c,p),l=l.sibling}function dp(l,c,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?p.insertBefore(l,c):p.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(dp(l,c,p),l=l.sibling;l!==null;)dp(l,c,p),l=l.sibling}var Pn=null,ni=!1;function ko(l,c,p){for(p=p.child;p!==null;)yx(l,c,p),p=p.sibling}function yx(l,c,p){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(oh,p)}catch{}switch(p.tag){case 5:Ln||Ia(p,c);case 6:var y=Pn,E=ni;Pn=null,ko(l,c,p),Pn=y,ni=E,Pn!==null&&(ni?(l=Pn,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):Pn.removeChild(p.stateNode));break;case 18:Pn!==null&&(ni?(l=Pn,p=p.stateNode,l.nodeType===8?Sg(l.parentNode,p):l.nodeType===1&&Sg(l,p),ql(l)):Sg(Pn,p.stateNode));break;case 4:y=Pn,E=ni,Pn=p.stateNode.containerInfo,ni=!0,ko(l,c,p),Pn=y,ni=E;break;case 0:case 11:case 14:case 15:if(!Ln&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var S=E,L=S.destroy;S=S.tag,L!==void 0&&((S&2)!==0||(S&4)!==0)&&up(p,c,L),E=E.next}while(E!==y)}ko(l,c,p);break;case 1:if(!Ln&&(Ia(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(V){Yt(p,c,V)}ko(l,c,p);break;case 21:ko(l,c,p);break;case 22:p.mode&1?(Ln=(y=Ln)||p.memoizedState!==null,ko(l,c,p),Ln=y):ko(l,c,p);break;default:ko(l,c,p)}}function wx(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new G8),c.forEach(function(y){var E=q8.bind(null,l,y);p.has(y)||(p.add(y),y.then(E,E))})}}function ri(l,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];try{var S=l,L=c,V=L;e:for(;V!==null;){switch(V.tag){case 5:Pn=V.stateNode,ni=!1;break e;case 3:Pn=V.stateNode.containerInfo,ni=!0;break e;case 4:Pn=V.stateNode.containerInfo,ni=!0;break e}V=V.return}if(Pn===null)throw Error(r(160));yx(S,L,E),Pn=null,ni=!1;var Z=E.alternate;Z!==null&&(Z.return=null),E.return=null}catch(he){Yt(E,c,he)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)xx(c,l),c=c.sibling}function xx(l,c){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ri(c,l),Ei(l),y&4){try{vu(3,l,l.return),Uh(3,l)}catch(Ge){Yt(l,l.return,Ge)}try{vu(5,l,l.return)}catch(Ge){Yt(l,l.return,Ge)}}break;case 1:ri(c,l),Ei(l),y&512&&p!==null&&Ia(p,p.return);break;case 5:if(ri(c,l),Ei(l),y&512&&p!==null&&Ia(p,p.return),l.flags&32){var E=l.stateNode;try{Zr(E,"")}catch(Ge){Yt(l,l.return,Ge)}}if(y&4&&(E=l.stateNode,E!=null)){var S=l.memoizedProps,L=p!==null?p.memoizedProps:S,V=l.type,Z=l.updateQueue;if(l.updateQueue=null,Z!==null)try{V==="input"&&S.type==="radio"&&S.name!=null&&Ie(E,S),ga(V,L);var he=ga(V,S);for(L=0;L<Z.length;L+=2){var Ce=Z[L],Ee=Z[L+1];Ce==="style"?Gl(E,Ee):Ce==="dangerouslySetInnerHTML"?qt(E,Ee):Ce==="children"?Zr(E,Ee):k(E,Ce,Ee,he)}switch(V){case"input":Be(E,S);break;case"textarea":Qn(E,S);break;case"select":var xe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var Re=S.value;Re!=null?rt(E,!!S.multiple,Re,!1):xe!==!!S.multiple&&(S.defaultValue!=null?rt(E,!!S.multiple,S.defaultValue,!0):rt(E,!!S.multiple,S.multiple?[]:"",!1))}E[su]=S}catch(Ge){Yt(l,l.return,Ge)}}break;case 6:if(ri(c,l),Ei(l),y&4){if(l.stateNode===null)throw Error(r(162));E=l.stateNode,S=l.memoizedProps;try{E.nodeValue=S}catch(Ge){Yt(l,l.return,Ge)}}break;case 3:if(ri(c,l),Ei(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{ql(c.containerInfo)}catch(Ge){Yt(l,l.return,Ge)}break;case 4:ri(c,l),Ei(l);break;case 13:ri(c,l),Ei(l),E=l.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(pp=en())),y&4&&wx(l);break;case 22:if(Ce=p!==null&&p.memoizedState!==null,l.mode&1?(Ln=(he=Ln)||Ce,ri(c,l),Ln=he):ri(c,l),Ei(l),y&8192){if(he=l.memoizedState!==null,(l.stateNode.isHidden=he)&&!Ce&&(l.mode&1)!==0)for(Oe=l,Ce=l.child;Ce!==null;){for(Ee=Oe=Ce;Oe!==null;){switch(xe=Oe,Re=xe.child,xe.tag){case 0:case 11:case 14:case 15:vu(4,xe,xe.return);break;case 1:Ia(xe,xe.return);var Le=xe.stateNode;if(typeof Le.componentWillUnmount=="function"){y=xe,p=xe.return;try{c=y,Le.props=c.memoizedProps,Le.state=c.memoizedState,Le.componentWillUnmount()}catch(Ge){Yt(y,p,Ge)}}break;case 5:Ia(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Px(Ee);continue}}Re!==null?(Re.return=xe,Oe=Re):Px(Ee)}Ce=Ce.sibling}e:for(Ce=null,Ee=l;;){if(Ee.tag===5){if(Ce===null){Ce=Ee;try{E=Ee.stateNode,he?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(V=Ee.stateNode,Z=Ee.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=Nl("display",L))}catch(Ge){Yt(l,l.return,Ge)}}}else if(Ee.tag===6){if(Ce===null)try{Ee.stateNode.nodeValue=he?"":Ee.memoizedProps}catch(Ge){Yt(l,l.return,Ge)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===l)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===l)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===l)break e;Ce===Ee&&(Ce=null),Ee=Ee.return}Ce===Ee&&(Ce=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:ri(c,l),Ei(l),y&4&&wx(l);break;case 21:break;default:ri(c,l),Ei(l)}}function Ei(l){var c=l.flags;if(c&2){try{e:{for(var p=l.return;p!==null;){if(mx(p)){var y=p;break e}p=p.return}throw Error(r(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(Zr(E,""),y.flags&=-33);var S=vx(l);dp(l,S,E);break;case 3:case 4:var L=y.stateNode.containerInfo,V=vx(l);hp(l,V,L);break;default:throw Error(r(161))}}catch(Z){Yt(l,l.return,Z)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function j8(l,c,p){Oe=l,Cx(l)}function Cx(l,c,p){for(var y=(l.mode&1)!==0;Oe!==null;){var E=Oe,S=E.child;if(E.tag===22&&y){var L=E.memoizedState!==null||Vh;if(!L){var V=E.alternate,Z=V!==null&&V.memoizedState!==null||Ln;V=Vh;var he=Ln;if(Vh=L,(Ln=Z)&&!he)for(Oe=E;Oe!==null;)L=Oe,Z=L.child,L.tag===22&&L.memoizedState!==null?Dx(E):Z!==null?(Z.return=L,Oe=Z):Dx(E);for(;S!==null;)Oe=S,Cx(S),S=S.sibling;Oe=E,Vh=V,Ln=he}Ex(l)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,Oe=S):Ex(l)}}function Ex(l){for(;Oe!==null;){var c=Oe;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ln||Uh(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Ln)if(p===null)y.componentDidMount();else{var E=c.elementType===c.type?p.memoizedProps:ti(c.type,p.memoizedProps);y.componentDidUpdate(E,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&P2(c,S,y);break;case 3:var L=c.updateQueue;if(L!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}P2(c,L,p)}break;case 5:var V=c.stateNode;if(p===null&&c.flags&4){p=V;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&p.focus();break;case"img":Z.src&&(p.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var he=c.alternate;if(he!==null){var Ce=he.memoizedState;if(Ce!==null){var Ee=Ce.dehydrated;Ee!==null&&ql(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ln||c.flags&512&&cp(c)}catch(xe){Yt(c,c.return,xe)}}if(c===l){Oe=null;break}if(p=c.sibling,p!==null){p.return=c.return,Oe=p;break}Oe=c.return}}function Px(l){for(;Oe!==null;){var c=Oe;if(c===l){Oe=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Oe=p;break}Oe=c.return}}function Dx(l){for(;Oe!==null;){var c=Oe;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Uh(4,c)}catch(Z){Yt(c,p,Z)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var E=c.return;try{y.componentDidMount()}catch(Z){Yt(c,E,Z)}}var S=c.return;try{cp(c)}catch(Z){Yt(c,S,Z)}break;case 5:var L=c.return;try{cp(c)}catch(Z){Yt(c,L,Z)}}}catch(Z){Yt(c,c.return,Z)}if(c===l){Oe=null;break}var V=c.sibling;if(V!==null){V.return=c.return,Oe=V;break}Oe=c.return}}var z8=Math.ceil,Xh=T.ReactCurrentDispatcher,fp=T.ReactCurrentOwner,Gr=T.ReactCurrentBatchConfig,Et=0,gn=null,nn=null,Dn=0,Cr=0,La=To(0),un=0,yu=null,Ps=0,Kh=0,gp=0,wu=null,nr=null,pp=0,Ha=1/0,Ki=null,qh=!1,mp=null,bo=null,Yh=!1,Fo=null,Zh=0,xu=0,vp=null,Qh=-1,Jh=0;function $n(){return(Et&6)!==0?en():Qh!==-1?Qh:Qh=en()}function Oo(l){return(l.mode&1)===0?1:(Et&2)!==0&&Dn!==0?Dn&-Dn:S8.transition!==null?(Jh===0&&(Jh=vw()),Jh):(l=Mt,l!==0||(l=window.event,l=l===void 0?16:Tw(l.type)),l)}function ii(l,c,p,y){if(50<xu)throw xu=0,vp=null,Error(r(185));Wl(l,p,y),((Et&2)===0||l!==gn)&&(l===gn&&((Et&2)===0&&(Kh|=p),un===4&&Io(l,Dn)),rr(l,y),p===1&&Et===0&&(c.mode&1)===0&&(Ha=en()+500,Ah&&Bo()))}function rr(l,c){var p=l.callbackNode;SB(l,c);var y=lh(l,l===gn?Dn:0);if(y===0)p!==null&&gw(p),l.callbackNode=null,l.callbackPriority=0;else if(c=y&-y,l.callbackPriority!==c){if(p!=null&&gw(p),c===1)l.tag===0?D8(Tx.bind(null,l)):h2(Tx.bind(null,l)),x8(function(){(Et&6)===0&&Bo()}),p=null;else{switch(yw(y)){case 1:p=Y0;break;case 4:p=pw;break;case 16:p=ih;break;case 536870912:p=mw;break;default:p=ih}p=Ox(p,Sx.bind(null,l))}l.callbackPriority=c,l.callbackNode=p}}function Sx(l,c){if(Qh=-1,Jh=0,(Et&6)!==0)throw Error(r(327));var p=l.callbackNode;if(Na()&&l.callbackNode!==p)return null;var y=lh(l,l===gn?Dn:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||c)c=ed(l,y);else{c=y;var E=Et;Et|=2;var S=Bx();(gn!==l||Dn!==c)&&(Ki=null,Ha=en()+500,Ss(l,c));do try{V8();break}catch(V){Ax(l,V)}while(!0);Ig(),Xh.current=S,Et=E,nn!==null?c=0:(gn=null,Dn=0,c=un)}if(c!==0){if(c===2&&(E=Z0(l),E!==0&&(y=E,c=yp(l,E))),c===1)throw p=yu,Ss(l,0),Io(l,y),rr(l,en()),p;if(c===6)Io(l,y);else{if(E=l.current.alternate,(y&30)===0&&!$8(E)&&(c=ed(l,y),c===2&&(S=Z0(l),S!==0&&(y=S,c=yp(l,S))),c===1))throw p=yu,Ss(l,0),Io(l,y),rr(l,en()),p;switch(l.finishedWork=E,l.finishedLanes=y,c){case 0:case 1:throw Error(r(345));case 2:Ts(l,nr,Ki);break;case 3:if(Io(l,y),(y&130023424)===y&&(c=pp+500-en(),10<c)){if(lh(l,0)!==0)break;if(E=l.suspendedLanes,(E&y)!==y){$n(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=Dg(Ts.bind(null,l,nr,Ki),c);break}Ts(l,nr,Ki);break;case 4:if(Io(l,y),(y&4194240)===y)break;for(c=l.eventTimes,E=-1;0<y;){var L=31-Qr(y);S=1<<L,L=c[L],L>E&&(E=L),y&=~S}if(y=E,y=en()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*z8(y/1960))-y,10<y){l.timeoutHandle=Dg(Ts.bind(null,l,nr,Ki),y);break}Ts(l,nr,Ki);break;case 5:Ts(l,nr,Ki);break;default:throw Error(r(329))}}}return rr(l,en()),l.callbackNode===p?Sx.bind(null,l):null}function yp(l,c){var p=wu;return l.current.memoizedState.isDehydrated&&(Ss(l,c).flags|=256),l=ed(l,c),l!==2&&(c=nr,nr=p,c!==null&&wp(c)),l}function wp(l){nr===null?nr=l:nr.push.apply(nr,l)}function $8(l){for(var c=l;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var E=p[y],S=E.getSnapshot;E=E.value;try{if(!Jr(S(),E))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Io(l,c){for(c&=~gp,c&=~Kh,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var p=31-Qr(c),y=1<<p;l[p]=-1,c&=~y}}function Tx(l){if((Et&6)!==0)throw Error(r(327));Na();var c=lh(l,0);if((c&1)===0)return rr(l,en()),null;var p=ed(l,c);if(l.tag!==0&&p===2){var y=Z0(l);y!==0&&(c=y,p=yp(l,y))}if(p===1)throw p=yu,Ss(l,0),Io(l,c),rr(l,en()),p;if(p===6)throw Error(r(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Ts(l,nr,Ki),rr(l,en()),null}function xp(l,c){var p=Et;Et|=1;try{return l(c)}finally{Et=p,Et===0&&(Ha=en()+500,Ah&&Bo())}}function Ds(l){Fo!==null&&Fo.tag===0&&(Et&6)===0&&Na();var c=Et;Et|=1;var p=Gr.transition,y=Mt;try{if(Gr.transition=null,Mt=1,l)return l()}finally{Mt=y,Gr.transition=p,Et=c,(Et&6)===0&&Bo()}}function Cp(){Cr=La.current,Lt(La)}function Ss(l,c){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,w8(p)),nn!==null)for(p=nn.return;p!==null;){var y=p;switch(Rg(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Sh();break;case 3:Fa(),Lt(Jn),Lt(Fn),$g();break;case 5:jg(y);break;case 4:Fa();break;case 13:Lt(Ut);break;case 19:Lt(Ut);break;case 10:Lg(y.type._context);break;case 22:case 23:Cp()}p=p.return}if(gn=l,nn=l=Lo(l.current,null),Dn=Cr=c,un=0,yu=null,gp=Kh=Ps=0,nr=wu=null,xs!==null){for(c=0;c<xs.length;c++)if(p=xs[c],y=p.interleaved,y!==null){p.interleaved=null;var E=y.next,S=p.pending;if(S!==null){var L=S.next;S.next=E,y.next=L}p.pending=y}xs=null}return l}function Ax(l,c){do{var p=nn;try{if(Ig(),Hh.current=jh,Nh){for(var y=Xt.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Nh=!1}if(Es=0,fn=ln=Xt=null,du=!1,fu=0,fp.current=null,p===null||p.return===null){un=1,yu=c,nn=null;break}e:{var S=l,L=p.return,V=p,Z=c;if(c=Dn,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var he=Z,Ce=V,Ee=Ce.tag;if((Ce.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var xe=Ce.alternate;xe?(Ce.updateQueue=xe.updateQueue,Ce.memoizedState=xe.memoizedState,Ce.lanes=xe.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Re=Q2(L);if(Re!==null){Re.flags&=-257,J2(Re,L,V,S,c),Re.mode&1&&Z2(S,he,c),c=Re,Z=he;var Le=c.updateQueue;if(Le===null){var Ge=new Set;Ge.add(Z),c.updateQueue=Ge}else Le.add(Z);break e}else{if((c&1)===0){Z2(S,he,c),Ep();break e}Z=Error(r(426))}}else if(_t&&V.mode&1){var tn=Q2(L);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),J2(tn,L,V,S,c),Fg(Oa(Z,V));break e}}S=Z=Oa(Z,V),un!==4&&(un=2),wu===null?wu=[S]:wu.push(S),S=L;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var se=q2(S,Z,c);E2(S,se);break e;case 1:V=Z;var ee=S.type,ue=S.stateNode;if((S.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(bo===null||!bo.has(ue)))){S.flags|=65536,c&=-c,S.lanes|=c;var Se=Y2(S,V,c);E2(S,Se);break e}}S=S.return}while(S!==null)}Rx(p)}catch(je){c=je,nn===p&&p!==null&&(nn=p=p.return);continue}break}while(!0)}function Bx(){var l=Xh.current;return Xh.current=jh,l===null?jh:l}function Ep(){(un===0||un===3||un===2)&&(un=4),gn===null||(Ps&268435455)===0&&(Kh&268435455)===0||Io(gn,Dn)}function ed(l,c){var p=Et;Et|=2;var y=Bx();(gn!==l||Dn!==c)&&(Ki=null,Ss(l,c));do try{W8();break}catch(E){Ax(l,E)}while(!0);if(Ig(),Et=p,Xh.current=y,nn!==null)throw Error(r(261));return gn=null,Dn=0,un}function W8(){for(;nn!==null;)Mx(nn)}function V8(){for(;nn!==null&&!mB();)Mx(nn)}function Mx(l){var c=Fx(l.alternate,l,Cr);l.memoizedProps=l.pendingProps,c===null?Rx(l):nn=c,fp.current=null}function Rx(l){var c=l;do{var p=c.alternate;if(l=c.return,(c.flags&32768)===0){if(p=H8(p,c,Cr),p!==null){nn=p;return}}else{if(p=N8(p,c),p!==null){p.flags&=32767,nn=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{un=6,nn=null;return}}if(c=c.sibling,c!==null){nn=c;return}nn=c=l}while(c!==null);un===0&&(un=5)}function Ts(l,c,p){var y=Mt,E=Gr.transition;try{Gr.transition=null,Mt=1,U8(l,c,p,y)}finally{Gr.transition=E,Mt=y}return null}function U8(l,c,p,y){do Na();while(Fo!==null);if((Et&6)!==0)throw Error(r(327));p=l.finishedWork;var E=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(r(177));l.callbackNode=null,l.callbackPriority=0;var S=p.lanes|p.childLanes;if(TB(l,S),l===gn&&(nn=gn=null,Dn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Yh||(Yh=!0,Ox(ih,function(){return Na(),null})),S=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||S){S=Gr.transition,Gr.transition=null;var L=Mt;Mt=1;var V=Et;Et|=4,fp.current=null,_8(l,p),xx(p,l),d8(Eg),hh=!!Cg,Eg=Cg=null,l.current=p,j8(p),vB(),Et=V,Mt=L,Gr.transition=S}else l.current=p;if(Yh&&(Yh=!1,Fo=l,Zh=E),S=l.pendingLanes,S===0&&(bo=null),xB(p.stateNode),rr(l,en()),c!==null)for(y=l.onRecoverableError,p=0;p<c.length;p++)E=c[p],y(E.value,{componentStack:E.stack,digest:E.digest});if(qh)throw qh=!1,l=mp,mp=null,l;return(Zh&1)!==0&&l.tag!==0&&Na(),S=l.pendingLanes,(S&1)!==0?l===vp?xu++:(xu=0,vp=l):xu=0,Bo(),null}function Na(){if(Fo!==null){var l=yw(Zh),c=Gr.transition,p=Mt;try{if(Gr.transition=null,Mt=16>l?16:l,Fo===null)var y=!1;else{if(l=Fo,Fo=null,Zh=0,(Et&6)!==0)throw Error(r(331));var E=Et;for(Et|=4,Oe=l.current;Oe!==null;){var S=Oe,L=S.child;if((Oe.flags&16)!==0){var V=S.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var he=V[Z];for(Oe=he;Oe!==null;){var Ce=Oe;switch(Ce.tag){case 0:case 11:case 15:vu(8,Ce,S)}var Ee=Ce.child;if(Ee!==null)Ee.return=Ce,Oe=Ee;else for(;Oe!==null;){Ce=Oe;var xe=Ce.sibling,Re=Ce.return;if(px(Ce),Ce===he){Oe=null;break}if(xe!==null){xe.return=Re,Oe=xe;break}Oe=Re}}}var Le=S.alternate;if(Le!==null){var Ge=Le.child;if(Ge!==null){Le.child=null;do{var tn=Ge.sibling;Ge.sibling=null,Ge=tn}while(Ge!==null)}}Oe=S}}if((S.subtreeFlags&2064)!==0&&L!==null)L.return=S,Oe=L;else e:for(;Oe!==null;){if(S=Oe,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:vu(9,S,S.return)}var se=S.sibling;if(se!==null){se.return=S.return,Oe=se;break e}Oe=S.return}}var ee=l.current;for(Oe=ee;Oe!==null;){L=Oe;var ue=L.child;if((L.subtreeFlags&2064)!==0&&ue!==null)ue.return=L,Oe=ue;else e:for(L=ee;Oe!==null;){if(V=Oe,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Uh(9,V)}}catch(je){Yt(V,V.return,je)}if(V===L){Oe=null;break e}var Se=V.sibling;if(Se!==null){Se.return=V.return,Oe=Se;break e}Oe=V.return}}if(Et=E,Bo(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(oh,l)}catch{}y=!0}return y}finally{Mt=p,Gr.transition=c}}return!1}function kx(l,c,p){c=Oa(p,c),c=q2(l,c,1),l=Ro(l,c,1),c=$n(),l!==null&&(Wl(l,1,c),rr(l,c))}function Yt(l,c,p){if(l.tag===3)kx(l,l,p);else for(;c!==null;){if(c.tag===3){kx(c,l,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(bo===null||!bo.has(y))){l=Oa(p,l),l=Y2(c,l,1),c=Ro(c,l,1),l=$n(),c!==null&&(Wl(c,1,l),rr(c,l));break}}c=c.return}}function X8(l,c,p){var y=l.pingCache;y!==null&&y.delete(c),c=$n(),l.pingedLanes|=l.suspendedLanes&p,gn===l&&(Dn&p)===p&&(un===4||un===3&&(Dn&130023424)===Dn&&500>en()-pp?Ss(l,0):gp|=p),rr(l,c)}function bx(l,c){c===0&&((l.mode&1)===0?c=1:(c=ah,ah<<=1,(ah&130023424)===0&&(ah=4194304)));var p=$n();l=Vi(l,c),l!==null&&(Wl(l,c,p),rr(l,p))}function K8(l){var c=l.memoizedState,p=0;c!==null&&(p=c.retryLane),bx(l,p)}function q8(l,c){var p=0;switch(l.tag){case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(c),bx(l,p)}var Fx;Fx=function(l,c,p){if(l!==null)if(l.memoizedProps!==c.pendingProps||Jn.current)tr=!0;else{if((l.lanes&p)===0&&(c.flags&128)===0)return tr=!1,L8(l,c,p);tr=(l.flags&131072)!==0}else tr=!1,_t&&(c.flags&1048576)!==0&&d2(c,Mh,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Wh(l,c),l=c.pendingProps;var E=Ta(c,Fn.current);ba(c,p),E=Ug(null,c,y,l,E,p);var S=Xg();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,er(y)?(S=!0,Th(c)):S=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Gg(c),E.updater=zh,c.stateNode=E,E._reactInternals=c,Jg(c,y,l,p),c=rp(null,c,y,!0,S,p)):(c.tag=0,_t&&S&&Mg(c),zn(null,c,E,p),c=c.child),c;case 16:y=c.elementType;e:{switch(Wh(l,c),l=c.pendingProps,E=y._init,y=E(y._payload),c.type=y,E=c.tag=Z8(y),l=ti(y,l),E){case 0:c=np(null,c,y,l,p);break e;case 1:c=ox(null,c,y,l,p);break e;case 11:c=ex(null,c,y,l,p);break e;case 14:c=tx(null,c,y,ti(y.type,l),p);break e}throw Error(r(306,y,""))}return c;case 0:return y=c.type,E=c.pendingProps,E=c.elementType===y?E:ti(y,E),np(l,c,y,E,p);case 1:return y=c.type,E=c.pendingProps,E=c.elementType===y?E:ti(y,E),ox(l,c,y,E,p);case 3:e:{if(sx(c),l===null)throw Error(r(387));y=c.pendingProps,S=c.memoizedState,E=S.element,C2(l,c),Ih(c,y,null,p);var L=c.memoizedState;if(y=L.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){E=Oa(Error(r(423)),c),c=ax(l,c,y,p,E);break e}else if(y!==E){E=Oa(Error(r(424)),c),c=ax(l,c,y,p,E);break e}else for(xr=So(c.stateNode.containerInfo.firstChild),wr=c,_t=!0,ei=null,p=w2(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ma(),y===E){c=Xi(l,c,p);break e}zn(l,c,y,p)}c=c.child}return c;case 5:return D2(c),l===null&&bg(c),y=c.type,E=c.pendingProps,S=l!==null?l.memoizedProps:null,L=E.children,Pg(y,E)?L=null:S!==null&&Pg(y,S)&&(c.flags|=32),ix(l,c),zn(l,c,L,p),c.child;case 6:return l===null&&bg(c),null;case 13:return lx(l,c,p);case 4:return _g(c,c.stateNode.containerInfo),y=c.pendingProps,l===null?c.child=Ra(c,null,y,p):zn(l,c,y,p),c.child;case 11:return y=c.type,E=c.pendingProps,E=c.elementType===y?E:ti(y,E),ex(l,c,y,E,p);case 7:return zn(l,c,c.pendingProps,p),c.child;case 8:return zn(l,c,c.pendingProps.children,p),c.child;case 12:return zn(l,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,E=c.pendingProps,S=c.memoizedProps,L=E.value,Ot(bh,y._currentValue),y._currentValue=L,S!==null)if(Jr(S.value,L)){if(S.children===E.children&&!Jn.current){c=Xi(l,c,p);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var V=S.dependencies;if(V!==null){L=S.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===y){if(S.tag===1){Z=Ui(-1,p&-p),Z.tag=2;var he=S.updateQueue;if(he!==null){he=he.shared;var Ce=he.pending;Ce===null?Z.next=Z:(Z.next=Ce.next,Ce.next=Z),he.pending=Z}}S.lanes|=p,Z=S.alternate,Z!==null&&(Z.lanes|=p),Hg(S.return,p,c),V.lanes|=p;break}Z=Z.next}}else if(S.tag===10)L=S.type===c.type?null:S.child;else if(S.tag===18){if(L=S.return,L===null)throw Error(r(341));L.lanes|=p,V=L.alternate,V!==null&&(V.lanes|=p),Hg(L,p,c),L=S.sibling}else L=S.child;if(L!==null)L.return=S;else for(L=S;L!==null;){if(L===c){L=null;break}if(S=L.sibling,S!==null){S.return=L.return,L=S;break}L=L.return}S=L}zn(l,c,E.children,p),c=c.child}return c;case 9:return E=c.type,y=c.pendingProps.children,ba(c,p),E=Hr(E),y=y(E),c.flags|=1,zn(l,c,y,p),c.child;case 14:return y=c.type,E=ti(y,c.pendingProps),E=ti(y.type,E),tx(l,c,y,E,p);case 15:return nx(l,c,c.type,c.pendingProps,p);case 17:return y=c.type,E=c.pendingProps,E=c.elementType===y?E:ti(y,E),Wh(l,c),c.tag=1,er(y)?(l=!0,Th(c)):l=!1,ba(c,p),X2(c,y,E),Jg(c,y,E,p),rp(null,c,y,!0,l,p);case 19:return cx(l,c,p);case 22:return rx(l,c,p)}throw Error(r(156,c.tag))};function Ox(l,c){return fw(l,c)}function Y8(l,c,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(l,c,p,y){return new Y8(l,c,p,y)}function Pp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Z8(l){if(typeof l=="function")return Pp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Q)return 11;if(l===N)return 14}return 2}function Lo(l,c){var p=l.alternate;return p===null?(p=_r(l.tag,c,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=c,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,c=l.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function td(l,c,p,y,E,S){var L=2;if(y=l,typeof l=="function")Pp(l)&&(L=1);else if(typeof l=="string")L=5;else e:switch(l){case U:return As(p.children,E,S,c);case q:L=8,E|=8;break;case te:return l=_r(12,p,c,E|2),l.elementType=te,l.lanes=S,l;case J:return l=_r(13,p,c,E),l.elementType=J,l.lanes=S,l;case ie:return l=_r(19,p,c,E),l.elementType=ie,l.lanes=S,l;case b:return nd(p,E,S,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case ne:L=10;break e;case le:L=9;break e;case Q:L=11;break e;case N:L=14;break e;case A:L=16,y=null;break e}throw Error(r(130,l==null?l:typeof l,""))}return c=_r(L,p,c,E),c.elementType=l,c.type=y,c.lanes=S,c}function As(l,c,p,y){return l=_r(7,l,y,c),l.lanes=p,l}function nd(l,c,p,y){return l=_r(22,l,y,c),l.elementType=b,l.lanes=p,l.stateNode={isHidden:!1},l}function Dp(l,c,p){return l=_r(6,l,null,c),l.lanes=p,l}function Sp(l,c,p){return c=_r(4,l.children!==null?l.children:[],l.key,c),c.lanes=p,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function Q8(l,c,p,y,E){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q0(0),this.expirationTimes=Q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q0(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Tp(l,c,p,y,E,S,L,V,Z){return l=new Q8(l,c,p,V,Z),c===1?(c=1,S===!0&&(c|=8)):c=0,S=_r(3,null,null,c),l.current=S,S.stateNode=l,S.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(S),l}function J8(l,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:l,containerInfo:c,implementation:p}}function Ix(l){if(!l)return Ao;l=l._reactInternals;e:{if(ps(l)!==l||l.tag!==1)throw Error(r(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(er(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(l.tag===1){var p=l.type;if(er(p))return u2(l,p,c)}return c}function Lx(l,c,p,y,E,S,L,V,Z){return l=Tp(p,y,!0,l,E,S,L,V,Z),l.context=Ix(null),p=l.current,y=$n(),E=Oo(p),S=Ui(y,E),S.callback=c??null,Ro(p,S,E),l.current.lanes=E,Wl(l,E,y),rr(l,y),l}function rd(l,c,p,y){var E=c.current,S=$n(),L=Oo(E);return p=Ix(p),c.context===null?c.context=p:c.pendingContext=p,c=Ui(S,L),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=Ro(E,c,L),l!==null&&(ii(l,E,L,S),Oh(l,E,L)),L}function id(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Hx(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<c?p:c}}function Ap(l,c){Hx(l,c),(l=l.alternate)&&Hx(l,c)}function e4(){return null}var Nx=typeof reportError=="function"?reportError:function(l){console.error(l)};function Bp(l){this._internalRoot=l}od.prototype.render=Bp.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));rd(l,c,null,null)},od.prototype.unmount=Bp.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;Ds(function(){rd(null,l,null,null)}),c[ji]=null}};function od(l){this._internalRoot=l}od.prototype.unstable_scheduleHydration=function(l){if(l){var c=Cw();l={blockedOn:null,target:l,priority:c};for(var p=0;p<Eo.length&&c!==0&&c<Eo[p].priority;p++);Eo.splice(p,0,l),p===0&&Dw(l)}};function Mp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function sd(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Gx(){}function t4(l,c,p,y,E){if(E){if(typeof y=="function"){var S=y;y=function(){var he=id(L);S.call(he)}}var L=Lx(c,y,l,0,null,!1,!1,"",Gx);return l._reactRootContainer=L,l[ji]=L.current,iu(l.nodeType===8?l.parentNode:l),Ds(),L}for(;E=l.lastChild;)l.removeChild(E);if(typeof y=="function"){var V=y;y=function(){var he=id(Z);V.call(he)}}var Z=Tp(l,0,!1,null,null,!1,!1,"",Gx);return l._reactRootContainer=Z,l[ji]=Z.current,iu(l.nodeType===8?l.parentNode:l),Ds(function(){rd(c,Z,p,y)}),Z}function ad(l,c,p,y,E){var S=p._reactRootContainer;if(S){var L=S;if(typeof E=="function"){var V=E;E=function(){var Z=id(L);V.call(Z)}}rd(c,L,l,E)}else L=t4(p,c,l,E,y);return id(L)}ww=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var p=$l(c.pendingLanes);p!==0&&(J0(c,p|1),rr(c,en()),(Et&6)===0&&(Ha=en()+500,Bo()))}break;case 13:Ds(function(){var y=Vi(l,1);if(y!==null){var E=$n();ii(y,l,1,E)}}),Ap(l,1)}},eg=function(l){if(l.tag===13){var c=Vi(l,134217728);if(c!==null){var p=$n();ii(c,l,134217728,p)}Ap(l,134217728)}},xw=function(l){if(l.tag===13){var c=Oo(l),p=Vi(l,c);if(p!==null){var y=$n();ii(p,l,c,y)}Ap(l,c)}},Cw=function(){return Mt},Ew=function(l,c){var p=Mt;try{return Mt=l,c()}finally{Mt=p}},U0=function(l,c,p){switch(c){case"input":if(Be(l,p),c=p.name,p.type==="radio"&&c!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==l&&y.form===l.form){var E=Dh(y);if(!E)throw Error(r(90));me(y),Be(y,E)}}}break;case"textarea":Qn(l,p);break;case"select":c=p.value,c!=null&&rt(l,!!p.multiple,c,!1)}},sw=xp,aw=Ds;var n4={usingClientEntryPoint:!1,Events:[au,Da,Dh,iw,ow,xp]},Cu={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r4={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=hw(l),l===null?null:l.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||e4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{oh=ld.inject(r4),yi=ld}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n4,ir.createPortal=function(l,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(c))throw Error(r(200));return J8(l,c,null,p)},ir.createRoot=function(l,c){if(!Mp(l))throw Error(r(299));var p=!1,y="",E=Nx;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),c=Tp(l,1,!1,null,null,p,!1,y,E),l[ji]=c.current,iu(l.nodeType===8?l.parentNode:l),new Bp(c)},ir.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=hw(c),l=l===null?null:l.stateNode,l},ir.flushSync=function(l){return Ds(l)},ir.hydrate=function(l,c,p){if(!sd(c))throw Error(r(200));return ad(null,l,c,!0,p)},ir.hydrateRoot=function(l,c,p){if(!Mp(l))throw Error(r(405));var y=p!=null&&p.hydratedSources||null,E=!1,S="",L=Nx;if(p!=null&&(p.unstable_strictMode===!0&&(E=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),c=Lx(c,null,l,1,p??null,E,!1,S,L),l[ji]=c.current,iu(l),y)for(l=0;l<y.length;l++)p=y[l],E=p._getVersion,E=E(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,E]:c.mutableSourceEagerHydrationData.push(p,E);return new od(c)},ir.render=function(l,c,p){if(!sd(c))throw Error(r(200));return ad(null,l,c,!1,p)},ir.unmountComponentAtNode=function(l){if(!sd(l))throw Error(r(40));return l._reactRootContainer?(Ds(function(){ad(null,null,l,!1,function(){l._reactRootContainer=null,l[ji]=null})}),!0):!1},ir.unstable_batchedUpdates=xp,ir.unstable_renderSubtreeIntoContainer=function(l,c,p,y){if(!sd(p))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return ad(l,c,p,!1,y)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var Xx;function fD(){if(Xx)return bp.exports;Xx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),bp.exports=d4(),bp.exports}var Kx;function f4(){if(Kx)return cd;Kx=1;var e=fD();return cd.createRoot=e.createRoot,cd.hydrateRoot=e.hydrateRoot,cd}var Qf=f4();function _1(e,n,r){if(e&&e.length){const[i,o]=n,s=Math.PI/180*r,a=Math.cos(s),u=Math.sin(s);for(const h of e){const[d,f]=h;h[0]=(d-i)*a-(f-o)*u+i,h[1]=(d-i)*u+(f-o)*a+o}}}function g4(e,n,r){const i=[];e.forEach(o=>i.push(...o)),_1(i,n,r)}function p4(e,n){return e[0]===n[0]&&e[1]===n[1]}function m4(e,n,r,i=1){const o=r,s=Math.max(n,.1),a=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(o)for(const d of a)_1(d,u,o);const h=v4(a,s,i);if(o){for(const d of a)_1(d,u,-o);g4(h,u,-o)}return h}function v4(e,n,r){const i=[];for(const d of e){const f=[...d];p4(f[0],f[f.length-1])||f.push([f[0][0],f[0][1]]),f.length>2&&i.push(f)}const o=[];n=Math.max(n,.1);const s=[];for(const d of i)for(let f=0;f<d.length-1;f++){const g=d[f],m=d[f+1];if(g[1]!==m[1]){const v=Math.min(g[1],m[1]);s.push({ymin:v,ymax:Math.max(g[1],m[1]),x:v===g[1]?g[0]:m[0],islope:(m[0]-g[0])/(m[1]-g[1])})}}if(s.sort((d,f)=>d.ymin<f.ymin?-1:d.ymin>f.ymin?1:d.x<f.x?-1:d.x>f.x?1:d.ymax===f.ymax?0:(d.ymax-f.ymax)/Math.abs(d.ymax-f.ymax)),!s.length)return o;let a=[],u=s[0].ymin,h=0;for(;a.length||s.length;){if(s.length){let d=-1;for(let g=0;g<s.length&&!(s[g].ymin>u);g++)d=g;s.splice(0,d+1).forEach(g=>{a.push({s:u,edge:g})})}if(a=a.filter(d=>!(d.edge.ymax<=u)),a.sort((d,f)=>d.edge.x===f.edge.x?0:(d.edge.x-f.edge.x)/Math.abs(d.edge.x-f.edge.x)),(r!==1||h%n===0)&&a.length>1)for(let d=0;d<a.length;d=d+2){const f=d+1;if(f>=a.length)break;const g=a[d].edge,m=a[f].edge;o.push([[Math.round(g.x),u],[Math.round(m.x),u]])}u+=r,a.forEach(d=>{d.edge.x=d.edge.x+r*d.edge.islope}),h++}return o}function Fc(e,n){var r;const i=n.hachureAngle+90;let o=n.hachureGap;o<0&&(o=n.strokeWidth*4),o=Math.round(Math.max(o,.1));let s=1;return n.roughness>=1&&(((r=n.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=o),m4(e,o,i,s||1)}class lv{constructor(n){this.helper=n}fillPolygons(n,r){return this._fillPolygons(n,r)}_fillPolygons(n,r){const i=Fc(n,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(n,r){const i=[];for(const o of n)i.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],r));return i}}function Jf(e){const n=e[0],r=e[1];return Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2))}class y4 extends lv{fillPolygons(n,r){let i=r.hachureGap;i<0&&(i=r.strokeWidth*4),i=Math.max(i,.1);const o=Object.assign({},r,{hachureGap:i}),s=Fc(n,o),a=Math.PI/180*r.hachureAngle,u=[],h=i*.5*Math.cos(a),d=i*.5*Math.sin(a);for(const[g,m]of s)Jf([g,m])&&u.push([[g[0]-h,g[1]+d],[...m]],[[g[0]+h,g[1]-d],[...m]]);return{type:"fillSketch",ops:this.renderLines(u,r)}}}class w4 extends lv{fillPolygons(n,r){const i=this._fillPolygons(n,r),o=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(n,o);return i.ops=i.ops.concat(s.ops),i}}class x4{constructor(n){this.helper=n}fillPolygons(n,r){r=Object.assign({},r,{hachureAngle:0});const i=Fc(n,r);return this.dotsOnLines(i,r)}dotsOnLines(n,r){const i=[];let o=r.hachureGap;o<0&&(o=r.strokeWidth*4),o=Math.max(o,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const a=o/4;for(const u of n){const h=Jf(u),d=h/o,f=Math.ceil(d)-1,g=h-f*o,m=(u[0][0]+u[1][0])/2-o/4,v=Math.min(u[0][1],u[1][1]);for(let w=0;w<f;w++){const C=v+g+w*o,P=m-a+Math.random()*2*a,D=C-a+Math.random()*2*a,x=this.helper.ellipse(P,D,s,s,r);i.push(...x.ops)}}return{type:"fillSketch",ops:i}}}class C4{constructor(n){this.helper=n}fillPolygons(n,r){const i=Fc(n,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(n,r){const i=r.dashOffset<0?r.hachureGap<0?r.strokeWidth*4:r.hachureGap:r.dashOffset,o=r.dashGap<0?r.hachureGap<0?r.strokeWidth*4:r.hachureGap:r.dashGap,s=[];return n.forEach(a=>{const u=Jf(a),h=Math.floor(u/(i+o)),d=(u+o-h*(i+o))/2;let f=a[0],g=a[1];f[0]>g[0]&&(f=a[1],g=a[0]);const m=Math.atan((g[1]-f[1])/(g[0]-f[0]));for(let v=0;v<h;v++){const w=v*(i+o),C=w+i,P=[f[0]+w*Math.cos(m)+d*Math.cos(m),f[1]+w*Math.sin(m)+d*Math.sin(m)],D=[f[0]+C*Math.cos(m)+d*Math.cos(m),f[1]+C*Math.sin(m)+d*Math.sin(m)];s.push(...this.helper.doubleLineOps(P[0],P[1],D[0],D[1],r))}}),s}}class E4{constructor(n){this.helper=n}fillPolygons(n,r){const i=r.hachureGap<0?r.strokeWidth*4:r.hachureGap,o=r.zigzagOffset<0?i:r.zigzagOffset;r=Object.assign({},r,{hachureGap:i+o});const s=Fc(n,r);return{type:"fillSketch",ops:this.zigzagLines(s,o,r)}}zigzagLines(n,r,i){const o=[];return n.forEach(s=>{const a=Jf(s),u=Math.round(a/(2*r));let h=s[0],d=s[1];h[0]>d[0]&&(h=s[1],d=s[0]);const f=Math.atan((d[1]-h[1])/(d[0]-h[0]));for(let g=0;g<u;g++){const m=g*2*r,v=(g+1)*2*r,w=Math.sqrt(2*Math.pow(r,2)),C=[h[0]+m*Math.cos(f),h[1]+m*Math.sin(f)],P=[h[0]+v*Math.cos(f),h[1]+v*Math.sin(f)],D=[C[0]+w*Math.cos(f+Math.PI/4),C[1]+w*Math.sin(f+Math.PI/4)];o.push(...this.helper.doubleLineOps(C[0],C[1],D[0],D[1],i),...this.helper.doubleLineOps(D[0],D[1],P[0],P[1],i))}}),o}}const or={};function P4(e,n){let r=e.fillStyle||"hachure";if(!or[r])switch(r){case"zigzag":or[r]||(or[r]=new y4(n));break;case"cross-hatch":or[r]||(or[r]=new w4(n));break;case"dots":or[r]||(or[r]=new x4(n));break;case"dashed":or[r]||(or[r]=new C4(n));break;case"zigzag-line":or[r]||(or[r]=new E4(n));break;case"hachure":default:r="hachure",or[r]||(or[r]=new lv(n));break}return or[r]}function D4(){return Math.floor(Math.random()*2**31)}class S4{constructor(n){this.seed=n}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const T4=0,j1=1,gD=2,hd={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function A4(e){const n=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:T4,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))n[n.length]={type:j1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return n[n.length]={type:gD,text:""},n}function Ip(e,n){return e.type===n}function uv(e){const n=[],r=A4(e);let i="BOD",o=0,s=r[o];for(;!Ip(s,gD);){let a=0;const u=[];if(i==="BOD")if(s.text==="M"||s.text==="m")o++,a=hd[s.text],i=s.text;else return uv("M0,0"+e);else Ip(s,j1)?a=hd[i]:(o++,a=hd[s.text],i=s.text);if(o+a<r.length){for(let h=o;h<o+a;h++){const d=r[h];if(Ip(d,j1))u[u.length]=+d.text;else throw new Error("Param not a number: "+i+","+d.text)}if(typeof hd[i]=="number"){const h={key:i,data:u};n.push(h),o+=a,s=r[o],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return n}function pD(e){let n=0,r=0,i=0,o=0;const s=[];for(const{key:a,data:u}of e)switch(a){case"M":s.push({key:"M",data:[...u]}),[n,r]=u,[i,o]=u;break;case"m":n+=u[0],r+=u[1],s.push({key:"M",data:[n,r]}),i=n,o=r;break;case"L":s.push({key:"L",data:[...u]}),[n,r]=u;break;case"l":n+=u[0],r+=u[1],s.push({key:"L",data:[n,r]});break;case"C":s.push({key:"C",data:[...u]}),n=u[4],r=u[5];break;case"c":{const h=u.map((d,f)=>f%2?d+r:d+n);s.push({key:"C",data:h}),n=h[4],r=h[5];break}case"Q":s.push({key:"Q",data:[...u]}),n=u[2],r=u[3];break;case"q":{const h=u.map((d,f)=>f%2?d+r:d+n);s.push({key:"Q",data:h}),n=h[2],r=h[3];break}case"A":s.push({key:"A",data:[...u]}),n=u[5],r=u[6];break;case"a":n+=u[5],r+=u[6],s.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],n,r]});break;case"H":s.push({key:"H",data:[...u]}),n=u[0];break;case"h":n+=u[0],s.push({key:"H",data:[n]});break;case"V":s.push({key:"V",data:[...u]}),r=u[0];break;case"v":r+=u[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...u]}),n=u[2],r=u[3];break;case"s":{const h=u.map((d,f)=>f%2?d+r:d+n);s.push({key:"S",data:h}),n=h[2],r=h[3];break}case"T":s.push({key:"T",data:[...u]}),n=u[0],r=u[1];break;case"t":n+=u[0],r+=u[1],s.push({key:"T",data:[n,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),n=i,r=o;break}return s}function mD(e){const n=[];let r="",i=0,o=0,s=0,a=0,u=0,h=0;for(const{key:d,data:f}of e){switch(d){case"M":n.push({key:"M",data:[...f]}),[i,o]=f,[s,a]=f;break;case"C":n.push({key:"C",data:[...f]}),i=f[4],o=f[5],u=f[2],h=f[3];break;case"L":n.push({key:"L",data:[...f]}),[i,o]=f;break;case"H":i=f[0],n.push({key:"L",data:[i,o]});break;case"V":o=f[0],n.push({key:"L",data:[i,o]});break;case"S":{let g=0,m=0;r==="C"||r==="S"?(g=i+(i-u),m=o+(o-h)):(g=i,m=o),n.push({key:"C",data:[g,m,...f]}),u=f[0],h=f[1],i=f[2],o=f[3];break}case"T":{const[g,m]=f;let v=0,w=0;r==="Q"||r==="T"?(v=i+(i-u),w=o+(o-h)):(v=i,w=o);const C=i+2*(v-i)/3,P=o+2*(w-o)/3,D=g+2*(v-g)/3,x=m+2*(w-m)/3;n.push({key:"C",data:[C,P,D,x,g,m]}),u=v,h=w,i=g,o=m;break}case"Q":{const[g,m,v,w]=f,C=i+2*(g-i)/3,P=o+2*(m-o)/3,D=v+2*(g-v)/3,x=w+2*(m-w)/3;n.push({key:"C",data:[C,P,D,x,v,w]}),u=g,h=m,i=v,o=w;break}case"A":{const g=Math.abs(f[0]),m=Math.abs(f[1]),v=f[2],w=f[3],C=f[4],P=f[5],D=f[6];g===0||m===0?(n.push({key:"C",data:[i,o,P,D,P,D]}),i=P,o=D):(i!==P||o!==D)&&(vD(i,o,P,D,g,m,v,w,C).forEach(function(k){n.push({key:"C",data:k})}),i=P,o=D);break}case"Z":n.push({key:"Z",data:[]}),i=s,o=a;break}r=d}return n}function B4(e){return Math.PI*e/180}function Pu(e,n,r){const i=e*Math.cos(r)-n*Math.sin(r),o=e*Math.sin(r)+n*Math.cos(r);return[i,o]}function vD(e,n,r,i,o,s,a,u,h,d){const f=B4(a);let g=[],m=0,v=0,w=0,C=0;if(d)[m,v,w,C]=d;else{[e,n]=Pu(e,n,-f),[r,i]=Pu(r,i,-f);const Q=(e-r)/2,J=(n-i)/2;let ie=Q*Q/(o*o)+J*J/(s*s);ie>1&&(ie=Math.sqrt(ie),o=ie*o,s=ie*s);const N=u===h?-1:1,A=o*o,b=s*s,M=A*b-A*J*J-b*Q*Q,I=A*J*J+b*Q*Q,_=N*Math.sqrt(Math.abs(M/I));w=_*o*J/s+(e+r)/2,C=_*-s*Q/o+(n+i)/2,m=Math.asin(parseFloat(((n-C)/s).toFixed(9))),v=Math.asin(parseFloat(((i-C)/s).toFixed(9))),e<w&&(m=Math.PI-m),r<w&&(v=Math.PI-v),m<0&&(m=Math.PI*2+m),v<0&&(v=Math.PI*2+v),h&&m>v&&(m=m-Math.PI*2),!h&&v>m&&(v=v-Math.PI*2)}let P=v-m;if(Math.abs(P)>Math.PI*120/180){const Q=v,J=r,ie=i;h&&v>m?v=m+Math.PI*120/180*1:v=m+Math.PI*120/180*-1,r=w+o*Math.cos(v),i=C+s*Math.sin(v),g=vD(r,i,J,ie,o,s,a,0,h,[v,Q,w,C])}P=v-m;const D=Math.cos(m),x=Math.sin(m),k=Math.cos(v),T=Math.sin(v),H=Math.tan(P/4),z=4/3*o*H,U=4/3*s*H,q=[e,n],te=[e+z*x,n-U*D],ne=[r+z*T,i-U*k],le=[r,i];if(te[0]=2*q[0]-te[0],te[1]=2*q[1]-te[1],d)return[te,ne,le].concat(g);{g=[te,ne,le].concat(g);const Q=[];for(let J=0;J<g.length;J+=3){const ie=Pu(g[J][0],g[J][1],f),N=Pu(g[J+1][0],g[J+1][1],f),A=Pu(g[J+2][0],g[J+2][1],f);Q.push([ie[0],ie[1],N[0],N[1],A[0],A[1]])}return Q}}const M4={randOffset:O4,randOffsetWithRange:I4,ellipse:b4,doubleLineOps:L4};function yD(e,n,r,i,o){return{type:"path",ops:Jo(e,n,r,i,o)}}function _d(e,n,r){const i=(e||[]).length;if(i>2){const o=[];for(let s=0;s<i-1;s++)o.push(...Jo(e[s][0],e[s][1],e[s+1][0],e[s+1][1],r));return n&&o.push(...Jo(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:o}}else if(i===2)return yD(e[0][0],e[0][1],e[1][0],e[1][1],r);return{type:"path",ops:[]}}function R4(e,n){return _d(e,!0,n)}function k4(e,n,r,i,o){const s=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];return R4(s,o)}function qx(e,n){if(e.length){const i=typeof e[0][0]=="number"?[e]:e,o=dd(i[0],1*(1+n.roughness*.2),n),s=n.disableMultiStroke?[]:dd(i[0],1.5*(1+n.roughness*.22),Qx(n));for(let a=1;a<i.length;a++){const u=i[a];if(u.length){const h=dd(u,1*(1+n.roughness*.2),n),d=n.disableMultiStroke?[]:dd(u,1.5*(1+n.roughness*.22),Qx(n));for(const f of h)f.op!=="move"&&o.push(f);for(const f of d)f.op!=="move"&&s.push(f)}}return{type:"path",ops:o.concat(s)}}return{type:"path",ops:[]}}function b4(e,n,r,i,o){const s=wD(r,i,o);return z1(e,n,o,s).opset}function wD(e,n,r){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(n/2,2))/2)),o=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/o;let a=Math.abs(e/2),u=Math.abs(n/2);const h=1-r.curveFitting;return a+=nt(a*h,r),u+=nt(u*h,r),{increment:s,rx:a,ry:u}}function z1(e,n,r,i){const[o,s]=Jx(i.increment,e,n,i.rx,i.ry,1,i.increment*af(.1,af(.4,1,r),r),r);let a=lf(o,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[u]=Jx(i.increment,e,n,i.rx,i.ry,1.5,0,r),h=lf(u,null,r);a=a.concat(h)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function Yx(e,n,r,i,o,s,a,u,h){const d=e,f=n;let g=Math.abs(r/2),m=Math.abs(i/2);g+=nt(g*.01,h),m+=nt(m*.01,h);let v=o,w=s;for(;v<0;)v+=Math.PI*2,w+=Math.PI*2;w-v>Math.PI*2&&(v=0,w=Math.PI*2);const C=Math.PI*2/h.curveStepCount,P=Math.min(C/2,(w-v)/2),D=eC(P,d,f,g,m,v,w,1,h);if(!h.disableMultiStroke){const x=eC(P,d,f,g,m,v,w,1.5,h);D.push(...x)}return a&&(u?D.push(...Jo(d,f,d+g*Math.cos(v),f+m*Math.sin(v),h),...Jo(d,f,d+g*Math.cos(w),f+m*Math.sin(w),h)):D.push({op:"lineTo",data:[d,f]},{op:"lineTo",data:[d+g*Math.cos(v),f+m*Math.sin(v)]})),{type:"path",ops:D}}function Zx(e,n){const r=mD(pD(uv(e))),i=[];let o=[0,0],s=[0,0];for(const{key:a,data:u}of r)switch(a){case"M":{s=[u[0],u[1]],o=[u[0],u[1]];break}case"L":i.push(...Jo(s[0],s[1],u[0],u[1],n)),s=[u[0],u[1]];break;case"C":{const[h,d,f,g,m,v]=u;i.push(...H4(h,d,f,g,m,v,s,n)),s=[m,v];break}case"Z":i.push(...Jo(s[0],s[1],o[0],o[1],n)),s=[o[0],o[1]];break}return{type:"path",ops:i}}function Lp(e,n){const r=[];for(const i of e)if(i.length){const o=n.maxRandomnessOffset||0,s=i.length;if(s>2){r.push({op:"move",data:[i[0][0]+nt(o,n),i[0][1]+nt(o,n)]});for(let a=1;a<s;a++)r.push({op:"lineTo",data:[i[a][0]+nt(o,n),i[a][1]+nt(o,n)]})}}return{type:"fillPath",ops:r}}function Xa(e,n){return P4(n,M4).fillPolygons(e,n)}function F4(e,n,r,i,o,s,a){const u=e,h=n;let d=Math.abs(r/2),f=Math.abs(i/2);d+=nt(d*.01,a),f+=nt(f*.01,a);let g=o,m=s;for(;g<0;)g+=Math.PI*2,m+=Math.PI*2;m-g>Math.PI*2&&(g=0,m=Math.PI*2);const v=(m-g)/a.curveStepCount,w=[];for(let C=g;C<=m;C=C+v)w.push([u+d*Math.cos(C),h+f*Math.sin(C)]);return w.push([u+d*Math.cos(m),h+f*Math.sin(m)]),w.push([u,h]),Xa([w],a)}function O4(e,n){return nt(e,n)}function I4(e,n,r){return af(e,n,r)}function L4(e,n,r,i,o){return Jo(e,n,r,i,o,!0)}function Qx(e){const n=Object.assign({},e);return n.randomizer=void 0,e.seed&&(n.seed=e.seed+1),n}function xD(e){return e.randomizer||(e.randomizer=new S4(e.seed||0)),e.randomizer.next()}function af(e,n,r,i=1){return r.roughness*i*(xD(r)*(n-e)+e)}function nt(e,n,r=1){return af(-e,e,n,r)}function Jo(e,n,r,i,o,s=!1){const a=s?o.disableMultiStrokeFill:o.disableMultiStroke,u=$1(e,n,r,i,o,!0,!1);if(a)return u;const h=$1(e,n,r,i,o,!0,!0);return u.concat(h)}function $1(e,n,r,i,o,s,a){const u=Math.pow(e-r,2)+Math.pow(n-i,2),h=Math.sqrt(u);let d=1;h<200?d=1:h>500?d=.4:d=-.0016668*h+1.233334;let f=o.maxRandomnessOffset||0;f*f*100>u&&(f=h/10);const g=f/2,m=.2+xD(o)*.2;let v=o.bowing*o.maxRandomnessOffset*(i-n)/200,w=o.bowing*o.maxRandomnessOffset*(e-r)/200;v=nt(v,o,d),w=nt(w,o,d);const C=[],P=()=>nt(g,o,d),D=()=>nt(f,o,d),x=o.preserveVertices;return a?C.push({op:"move",data:[e+(x?0:P()),n+(x?0:P())]}):C.push({op:"move",data:[e+(x?0:nt(f,o,d)),n+(x?0:nt(f,o,d))]}),a?C.push({op:"bcurveTo",data:[v+e+(r-e)*m+P(),w+n+(i-n)*m+P(),v+e+2*(r-e)*m+P(),w+n+2*(i-n)*m+P(),r+(x?0:P()),i+(x?0:P())]}):C.push({op:"bcurveTo",data:[v+e+(r-e)*m+D(),w+n+(i-n)*m+D(),v+e+2*(r-e)*m+D(),w+n+2*(i-n)*m+D(),r+(x?0:D()),i+(x?0:D())]}),C}function dd(e,n,r){if(!e.length)return[];const i=[];i.push([e[0][0]+nt(n,r),e[0][1]+nt(n,r)]),i.push([e[0][0]+nt(n,r),e[0][1]+nt(n,r)]);for(let o=1;o<e.length;o++)i.push([e[o][0]+nt(n,r),e[o][1]+nt(n,r)]),o===e.length-1&&i.push([e[o][0]+nt(n,r),e[o][1]+nt(n,r)]);return lf(i,null,r)}function lf(e,n,r){const i=e.length,o=[];if(i>3){const s=[],a=1-r.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<i;u++){const h=e[u];s[0]=[h[0],h[1]],s[1]=[h[0]+(a*e[u+1][0]-a*e[u-1][0])/6,h[1]+(a*e[u+1][1]-a*e[u-1][1])/6],s[2]=[e[u+1][0]+(a*e[u][0]-a*e[u+2][0])/6,e[u+1][1]+(a*e[u][1]-a*e[u+2][1])/6],s[3]=[e[u+1][0],e[u+1][1]],o.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&o.push(...$1(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return o}function Jx(e,n,r,i,o,s,a,u){const h=u.roughness===0,d=[],f=[];if(h){e=e/4,f.push([n+i*Math.cos(-e),r+o*Math.sin(-e)]);for(let g=0;g<=Math.PI*2;g=g+e){const m=[n+i*Math.cos(g),r+o*Math.sin(g)];d.push(m),f.push(m)}f.push([n+i*Math.cos(0),r+o*Math.sin(0)]),f.push([n+i*Math.cos(e),r+o*Math.sin(e)])}else{const g=nt(.5,u)-Math.PI/2;f.push([nt(s,u)+n+.9*i*Math.cos(g-e),nt(s,u)+r+.9*o*Math.sin(g-e)]);const m=Math.PI*2+g-.01;for(let v=g;v<m;v=v+e){const w=[nt(s,u)+n+i*Math.cos(v),nt(s,u)+r+o*Math.sin(v)];d.push(w),f.push(w)}f.push([nt(s,u)+n+i*Math.cos(g+Math.PI*2+a*.5),nt(s,u)+r+o*Math.sin(g+Math.PI*2+a*.5)]),f.push([nt(s,u)+n+.98*i*Math.cos(g+a),nt(s,u)+r+.98*o*Math.sin(g+a)]),f.push([nt(s,u)+n+.9*i*Math.cos(g+a*.5),nt(s,u)+r+.9*o*Math.sin(g+a*.5)])}return[f,d]}function eC(e,n,r,i,o,s,a,u,h){const d=s+nt(.1,h),f=[];f.push([nt(u,h)+n+.9*i*Math.cos(d-e),nt(u,h)+r+.9*o*Math.sin(d-e)]);for(let g=d;g<=a;g=g+e)f.push([nt(u,h)+n+i*Math.cos(g),nt(u,h)+r+o*Math.sin(g)]);return f.push([n+i*Math.cos(a),r+o*Math.sin(a)]),f.push([n+i*Math.cos(a),r+o*Math.sin(a)]),lf(f,null,h)}function H4(e,n,r,i,o,s,a,u){const h=[],d=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3];let f=[0,0];const g=u.disableMultiStroke?1:2,m=u.preserveVertices;for(let v=0;v<g;v++)v===0?h.push({op:"move",data:[a[0],a[1]]}):h.push({op:"move",data:[a[0]+(m?0:nt(d[0],u)),a[1]+(m?0:nt(d[0],u))]}),f=m?[o,s]:[o+nt(d[v],u),s+nt(d[v],u)],h.push({op:"bcurveTo",data:[e+nt(d[v],u),n+nt(d[v],u),r+nt(d[v],u),i+nt(d[v],u),f[0],f[1]]});return h}function Du(e){return[...e]}function tC(e,n=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(Du(e[0]),Du(e[1]),Du(e[2]),Du(e[2]));else{const o=[];o.push(e[0],e[0]);for(let u=1;u<e.length;u++)o.push(e[u]),u===e.length-1&&o.push(e[u]);const s=[],a=1-n;i.push(Du(o[0]));for(let u=1;u+2<o.length;u++){const h=o[u];s[0]=[h[0],h[1]],s[1]=[h[0]+(a*o[u+1][0]-a*o[u-1][0])/6,h[1]+(a*o[u+1][1]-a*o[u-1][1])/6],s[2]=[o[u+1][0]+(a*o[u][0]-a*o[u+2][0])/6,o[u+1][1]+(a*o[u][1]-a*o[u+2][1])/6],s[3]=[o[u+1][0],o[u+1][1]],i.push(s[1],s[2],s[3])}}return i}function N4(e,n){return Math.sqrt(jd(e,n))}function jd(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function G4(e,n,r){const i=jd(n,r);if(i===0)return jd(e,n);let o=((e[0]-n[0])*(r[0]-n[0])+(e[1]-n[1])*(r[1]-n[1]))/i;return o=Math.max(0,Math.min(1,o)),jd(e,ks(n,r,o))}function ks(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function _4(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let h=3*o[0]-2*s[0]-r[0];h*=h;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<h&&(a=h),u<d&&(u=d),a+u}function W1(e,n,r,i){const o=i||[];if(_4(e,n)<r){const s=e[n+0];o.length?N4(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],h=e[n+2],d=e[n+3],f=ks(a,u,.5),g=ks(u,h,.5),m=ks(h,d,.5),v=ks(f,g,.5),w=ks(g,m,.5),C=ks(v,w,.5);W1([a,f,v,C],0,r,o),W1([C,w,m,d],0,r,o)}return o}function V1(e,n,r,i,o){const s=o||[],a=e[n],u=e[r-1];let h=0,d=1;for(let f=n+1;f<r-1;++f){const g=G4(e[f],a,u);g>h&&(h=g,d=f)}return Math.sqrt(h)>i?(V1(e,n,d+1,i,s),V1(e,d,r,i,s)):(s.length||s.push(a),s.push(u)),s}function nC(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;W1(e,a,n,i)}return r&&r>0?V1(i,0,i.length,r):i}function j4(e,n){return Math.sqrt(zd(e,n))}function zd(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function z4(e,n,r){const i=zd(n,r);if(i===0)return zd(e,n);let o=((e[0]-n[0])*(r[0]-n[0])+(e[1]-n[1])*(r[1]-n[1]))/i;return o=Math.max(0,Math.min(1,o)),zd(e,bs(n,r,o))}function bs(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function $4(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let h=3*o[0]-2*s[0]-r[0];h*=h;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<h&&(a=h),u<d&&(u=d),a+u}function U1(e,n,r,i){const o=i||[];if($4(e,n)<r){const s=e[n+0];o.length?j4(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],h=e[n+2],d=e[n+3],f=bs(a,u,.5),g=bs(u,h,.5),m=bs(h,d,.5),v=bs(f,g,.5),w=bs(g,m,.5),C=bs(v,w,.5);U1([a,f,v,C],0,r,o),U1([C,w,m,d],0,r,o)}return o}function W4(e,n){return X1(e,0,e.length,n)}function X1(e,n,r,i,o){const s=o||[],a=e[n],u=e[r-1];let h=0,d=1;for(let f=n+1;f<r-1;++f){const g=z4(e[f],a,u);g>h&&(h=g,d=f)}return Math.sqrt(h)>i?(X1(e,n,d+1,i,s),X1(e,d,r,i,s)):(s.length||s.push(a),s.push(u)),s}function V4(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;U1(e,a,n,i)}return i}function U4(e,n,r){const i=uv(e),o=mD(pD(i)),s=[];let a=[],u=[0,0],h=[];const d=()=>{h.length>=4&&a.push(...V4(h,n)),h=[]},f=()=>{d(),a.length&&(s.push(a),a=[])};for(const{key:m,data:v}of o)switch(m){case"M":f(),u=[v[0],v[1]],a.push(u);break;case"L":d(),a.push([v[0],v[1]]);break;case"C":if(!h.length){const w=a.length?a[a.length-1]:u;h.push([w[0],w[1]])}h.push([v[0],v[1]]),h.push([v[2],v[3]]),h.push([v[4],v[5]]);break;case"Z":d(),a.push([u[0],u[1]]);break}if(f(),!r)return s;const g=[];for(const m of s){const v=W4(m,r);v.length&&g.push(v)}return g}const Er="none";class uf{constructor(n){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=n||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return D4()}_o(n){return n?Object.assign({},this.defaultOptions,n):this.defaultOptions}_d(n,r,i){return{shape:n,sets:r||[],options:i||this.defaultOptions}}line(n,r,i,o,s){const a=this._o(s);return this._d("line",[yD(n,r,i,o,a)],a)}rectangle(n,r,i,o,s){const a=this._o(s),u=[],h=k4(n,r,i,o,a);if(a.fill){const d=[[n,r],[n+i,r],[n+i,r+o],[n,r+o]];a.fillStyle==="solid"?u.push(Lp([d],a)):u.push(Xa([d],a))}return a.stroke!==Er&&u.push(h),this._d("rectangle",u,a)}ellipse(n,r,i,o,s){const a=this._o(s),u=[],h=wD(i,o,a),d=z1(n,r,a,h);if(a.fill)if(a.fillStyle==="solid"){const f=z1(n,r,a,h).opset;f.type="fillPath",u.push(f)}else u.push(Xa([d.estimatedPoints],a));return a.stroke!==Er&&u.push(d.opset),this._d("ellipse",u,a)}circle(n,r,i,o){const s=this.ellipse(n,r,i,i,o);return s.shape="circle",s}linearPath(n,r){const i=this._o(r);return this._d("linearPath",[_d(n,!1,i)],i)}arc(n,r,i,o,s,a,u=!1,h){const d=this._o(h),f=[],g=Yx(n,r,i,o,s,a,u,!0,d);if(u&&d.fill)if(d.fillStyle==="solid"){const m=Object.assign({},d);m.disableMultiStroke=!0;const v=Yx(n,r,i,o,s,a,!0,!1,m);v.type="fillPath",f.push(v)}else f.push(F4(n,r,i,o,s,a,d));return d.stroke!==Er&&f.push(g),this._d("arc",f,d)}curve(n,r){const i=this._o(r),o=[],s=qx(n,i);if(i.fill&&i.fill!==Er)if(i.fillStyle==="solid"){const a=qx(n,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],u=n;if(u.length){const d=typeof u[0][0]=="number"?[u]:u;for(const f of d)f.length<3?a.push(...f):f.length===3?a.push(...nC(tC([f[0],f[0],f[1],f[2]]),10,(1+i.roughness)/2)):a.push(...nC(tC(f),10,(1+i.roughness)/2))}a.length&&o.push(Xa([a],i))}return i.stroke!==Er&&o.push(s),this._d("curve",o,i)}polygon(n,r){const i=this._o(r),o=[],s=_d(n,!0,i);return i.fill&&(i.fillStyle==="solid"?o.push(Lp([n],i)):o.push(Xa([n],i))),i.stroke!==Er&&o.push(s),this._d("polygon",o,i)}path(n,r){const i=this._o(r),o=[];if(!n)return this._d("path",o,i);n=(n||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Er,a=i.stroke!==Er,u=!!(i.simplification&&i.simplification<1),h=u?4-4*(i.simplification||1):(1+i.roughness)/2,d=U4(n,1,h),f=Zx(n,i);if(s)if(i.fillStyle==="solid")if(d.length===1){const g=Zx(n,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(g.ops)})}else o.push(Lp(d,i));else o.push(Xa(d,i));return a&&(u?d.forEach(g=>{o.push(_d(g,!1,i))}):o.push(f)),this._d("path",o,i)}opsToPath(n,r){let i="";for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(a=>+a.toFixed(r)):o.data;switch(o.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(n){const r=n.sets||[],i=n.options||this.defaultOptions,o=[];for(const s of r){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Er};break;case"fillPath":a={d:this.opsToPath(s),stroke:Er,strokeWidth:0,fill:i.fill||Er};break;case"fillSketch":a=this.fillSketch(s,i);break}a&&o.push(a)}return o}fillSketch(n,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(n),stroke:r.fill||Er,strokeWidth:i,fill:Er}}_mergedShape(n){return n.filter((r,i)=>i===0?!0:r.op!=="move")}}class X4{constructor(n,r){this.canvas=n,this.ctx=this.canvas.getContext("2d"),this.gen=new uf(r)}draw(n){const r=n.sets||[],i=n.options||this.getDefaultOptions(),o=this.ctx,s=n.options.fixedDecimalPlaceDigits;for(const a of r)switch(a.type){case"path":o.save(),o.strokeStyle=i.stroke==="none"?"transparent":i.stroke,o.lineWidth=i.strokeWidth,i.strokeLineDash&&o.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(o.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(o,a,s),o.restore();break;case"fillPath":{o.save(),o.fillStyle=i.fill||"";const u=n.shape==="curve"||n.shape==="polygon"||n.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,a,s,u),o.restore();break}case"fillSketch":this.fillSketch(o,a,i);break}}fillSketch(n,r,i){let o=i.fillWeight;o<0&&(o=i.strokeWidth/2),n.save(),i.fillLineDash&&n.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(n.lineDashOffset=i.fillLineDashOffset),n.strokeStyle=i.fill||"",n.lineWidth=o,this._drawToContext(n,r,i.fixedDecimalPlaceDigits),n.restore()}_drawToContext(n,r,i,o="nonzero"){n.beginPath();for(const s of r.ops){const a=typeof i=="number"&&i>=0?s.data.map(u=>+u.toFixed(i)):s.data;switch(s.op){case"move":n.moveTo(a[0],a[1]);break;case"bcurveTo":n.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":n.lineTo(a[0],a[1]);break}}r.type==="fillPath"?n.fill(o):n.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(n,r,i,o,s){const a=this.gen.line(n,r,i,o,s);return this.draw(a),a}rectangle(n,r,i,o,s){const a=this.gen.rectangle(n,r,i,o,s);return this.draw(a),a}ellipse(n,r,i,o,s){const a=this.gen.ellipse(n,r,i,o,s);return this.draw(a),a}circle(n,r,i,o){const s=this.gen.circle(n,r,i,o);return this.draw(s),s}linearPath(n,r){const i=this.gen.linearPath(n,r);return this.draw(i),i}polygon(n,r){const i=this.gen.polygon(n,r);return this.draw(i),i}arc(n,r,i,o,s,a,u=!1,h){const d=this.gen.arc(n,r,i,o,s,a,u,h);return this.draw(d),d}curve(n,r){const i=this.gen.curve(n,r);return this.draw(i),i}path(n,r){const i=this.gen.path(n,r);return this.draw(i),i}}const fd="http://www.w3.org/2000/svg";class K4{constructor(n,r){this.svg=n,this.gen=new uf(r)}draw(n){const r=n.sets||[],i=n.options||this.getDefaultOptions(),o=this.svg.ownerDocument||window.document,s=o.createElementNS(fd,"g"),a=n.options.fixedDecimalPlaceDigits;for(const u of r){let h=null;switch(u.type){case"path":{h=o.createElementNS(fd,"path"),h.setAttribute("d",this.opsToPath(u,a)),h.setAttribute("stroke",i.stroke),h.setAttribute("stroke-width",i.strokeWidth+""),h.setAttribute("fill","none"),i.strokeLineDash&&h.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{h=o.createElementNS(fd,"path"),h.setAttribute("d",this.opsToPath(u,a)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",i.fill||""),(n.shape==="curve"||n.shape==="polygon")&&h.setAttribute("fill-rule","evenodd");break}case"fillSketch":{h=this.fillSketch(o,u,i);break}}h&&s.appendChild(h)}return s}fillSketch(n,r,i){let o=i.fillWeight;o<0&&(o=i.strokeWidth/2);const s=n.createElementNS(fd,"path");return s.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",o+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(n,r){return this.gen.opsToPath(n,r)}line(n,r,i,o,s){const a=this.gen.line(n,r,i,o,s);return this.draw(a)}rectangle(n,r,i,o,s){const a=this.gen.rectangle(n,r,i,o,s);return this.draw(a)}ellipse(n,r,i,o,s){const a=this.gen.ellipse(n,r,i,o,s);return this.draw(a)}circle(n,r,i,o){const s=this.gen.circle(n,r,i,o);return this.draw(s)}linearPath(n,r){const i=this.gen.linearPath(n,r);return this.draw(i)}polygon(n,r){const i=this.gen.polygon(n,r);return this.draw(i)}arc(n,r,i,o,s,a,u=!1,h){const d=this.gen.arc(n,r,i,o,s,a,u,h);return this.draw(d)}curve(n,r){const i=this.gen.curve(n,r);return this.draw(i)}path(n,r){const i=this.gen.path(n,r);return this.draw(i)}}const q4={canvas(e,n){return new X4(e,n)},svg(e,n){return new K4(e,n)},generator(e){return new uf(e)},newSeed(){return uf.newSeed()}};var CD=Symbol.for("immer-nothing"),rC=Symbol.for("immer-draftable"),Rr=Symbol.for("immer-state");function ui(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cl=Object.getPrototypeOf;function ro(e){return!!e&&!!e[Rr]}function Xs(e){var n;return e?ED(e)||Array.isArray(e)||!!e[rC]||!!((n=e.constructor)!=null&&n[rC])||t0(e)||n0(e):!1}var Y4=Object.prototype.constructor.toString();function ED(e){if(!e||typeof e!="object")return!1;const n=cl(e);if(n===null)return!0;const r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Y4}function cf(e,n){e0(e)===0?Reflect.ownKeys(e).forEach(r=>{n(r,e[r],e)}):e.forEach((r,i)=>n(i,r,e))}function e0(e){const n=e[Rr];return n?n.type_:Array.isArray(e)?1:t0(e)?2:n0(e)?3:0}function K1(e,n){return e0(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function PD(e,n,r){const i=e0(e);i===2?e.set(n,r):i===3?e.add(r):e[n]=r}function Z4(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function t0(e){return e instanceof Map}function n0(e){return e instanceof Set}function Fs(e){return e.copy_||e.base_}function q1(e,n){if(t0(e))return new Map(e);if(n0(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ED(e);if(n===!0||n==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(e);delete i[Rr];let o=Reflect.ownKeys(i);for(let s=0;s<o.length;s++){const a=o[s],u=i[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(i[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[a]})}return Object.create(cl(e),i)}else{const i=cl(e);if(i!==null&&r)return{...e};const o=Object.create(i);return Object.assign(o,e)}}function cv(e,n=!1){return r0(e)||ro(e)||!Xs(e)||(e0(e)>1&&(e.set=e.add=e.clear=e.delete=Q4),Object.freeze(e),n&&Object.entries(e).forEach(([r,i])=>cv(i,!0))),e}function Q4(){ui(2)}function r0(e){return Object.isFrozen(e)}var J4={};function Ks(e){const n=J4[e];return n||ui(0,e),n}var Ju;function DD(){return Ju}function e6(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iC(e,n){n&&(Ks("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Y1(e){Z1(e),e.drafts_.forEach(t6),e.drafts_=null}function Z1(e){e===Ju&&(Ju=e.parent_)}function oC(e){return Ju=e6(Ju,e)}function t6(e){const n=e[Rr];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function sC(e,n){n.unfinalizedDrafts_=n.drafts_.length;const r=n.drafts_[0];return e!==void 0&&e!==r?(r[Rr].modified_&&(Y1(n),ui(4)),Xs(e)&&(e=hf(n,e),n.parent_||df(n,e)),n.patches_&&Ks("Patches").generateReplacementPatches_(r[Rr].base_,e,n.patches_,n.inversePatches_)):e=hf(n,r,[]),Y1(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==CD?e:void 0}function hf(e,n,r){if(r0(n))return n;const i=n[Rr];if(!i)return cf(n,(o,s)=>aC(e,i,n,o,s,r)),n;if(i.scope_!==e)return n;if(!i.modified_)return df(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,a=!1;i.type_===3&&(s=new Set(o),o.clear(),a=!0),cf(s,(u,h)=>aC(e,i,o,u,h,r,a)),df(e,o,!1),r&&e.patches_&&Ks("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function aC(e,n,r,i,o,s,a){if(ro(o)){const u=s&&n&&n.type_!==3&&!K1(n.assigned_,i)?s.concat(i):void 0,h=hf(e,o,u);if(PD(r,i,h),ro(h))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(Xs(o)&&!r0(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hf(e,o),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,i)&&df(e,o)}}function df(e,n,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cv(n,r)}function n6(e,n){const r=Array.isArray(e),i={type_:r?1:0,scope_:n?n.scope_:DD(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,s=hv;r&&(o=[i],s=ec);const{revoke:a,proxy:u}=Proxy.revocable(o,s);return i.draft_=u,i.revoke_=a,u}var hv={get(e,n){if(n===Rr)return e;const r=Fs(e);if(!K1(r,n))return r6(e,r,n);const i=r[n];return e.finalized_||!Xs(i)?i:i===Hp(e.base_,n)?(Np(e),e.copy_[n]=J1(i,e)):i},has(e,n){return n in Fs(e)},ownKeys(e){return Reflect.ownKeys(Fs(e))},set(e,n,r){const i=SD(Fs(e),n);if(i!=null&&i.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){const o=Hp(Fs(e),n),s=o==null?void 0:o[Rr];if(s&&s.base_===r)return e.copy_[n]=r,e.assigned_[n]=!1,!0;if(Z4(r,o)&&(r!==void 0||K1(e.base_,n)))return!0;Np(e),Q1(e)}return e.copy_[n]===r&&(r!==void 0||n in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=r,e.assigned_[n]=!0),!0},deleteProperty(e,n){return Hp(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,Np(e),Q1(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const r=Fs(e),i=Reflect.getOwnPropertyDescriptor(r,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:r[n]}},defineProperty(){ui(11)},getPrototypeOf(e){return cl(e.base_)},setPrototypeOf(){ui(12)}},ec={};cf(hv,(e,n)=>{ec[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});ec.deleteProperty=function(e,n){return ec.set.call(this,e,n,void 0)};ec.set=function(e,n,r){return hv.set.call(this,e[0],n,r,e[0])};function Hp(e,n){const r=e[Rr];return(r?Fs(r):e)[n]}function r6(e,n,r){var o;const i=SD(n,r);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(e.draft_):void 0}function SD(e,n){if(!(n in e))return;let r=cl(e);for(;r;){const i=Object.getOwnPropertyDescriptor(r,n);if(i)return i;r=cl(r)}}function Q1(e){e.modified_||(e.modified_=!0,e.parent_&&Q1(e.parent_))}function Np(e){e.copy_||(e.copy_=q1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var i6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,r,i)=>{if(typeof n=="function"&&typeof r!="function"){const s=r;r=n;const a=this;return function(h=s,...d){return a.produce(h,f=>r.call(this,f,...d))}}typeof r!="function"&&ui(6),i!==void 0&&typeof i!="function"&&ui(7);let o;if(Xs(n)){const s=oC(this),a=J1(n,void 0);let u=!0;try{o=r(a),u=!1}finally{u?Y1(s):Z1(s)}return iC(s,i),sC(o,s)}else if(!n||typeof n!="object"){if(o=r(n),o===void 0&&(o=n),o===CD&&(o=void 0),this.autoFreeze_&&cv(o,!0),i){const s=[],a=[];Ks("Patches").generateReplacementPatches_(n,o,s,a),i(s,a)}return o}else ui(1,n)},this.produceWithPatches=(n,r)=>{if(typeof n=="function")return(a,...u)=>this.produceWithPatches(a,h=>n(h,...u));let i,o;return[this.produce(n,r,(a,u)=>{i=a,o=u}),i,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xs(e)||ui(8),ro(e)&&(e=o6(e));const n=oC(this),r=J1(e,void 0);return r[Rr].isManual_=!0,Z1(n),r}finishDraft(e,n){const r=e&&e[Rr];(!r||!r.isManual_)&&ui(9);const{scope_:i}=r;return iC(i,n),sC(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(n=n.slice(r+1));const i=Ks("Patches").applyPatches_;return ro(e)?i(e,n):this.produce(e,o=>i(o,n))}};function J1(e,n){const r=t0(e)?Ks("MapSet").proxyMap_(e,n):n0(e)?Ks("MapSet").proxySet_(e,n):n6(e,n);return(n?n.scope_:DD()).drafts_.push(r),r}function o6(e){return ro(e)||ui(10,e),TD(e)}function TD(e){if(!Xs(e)||r0(e))return e;const n=e[Rr];let r;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=q1(e,n.scope_.immer_.useStrictShallowCopy_)}else r=q1(e,!0);return cf(r,(i,o)=>{PD(r,i,TD(o))}),n&&(n.finalized_=!1),r}var kr=new i6,s6=kr.produce;kr.produceWithPatches.bind(kr);kr.setAutoFreeze.bind(kr);kr.setUseStrictShallowCopy.bind(kr);kr.applyPatches.bind(kr);var gd=kr.createDraft.bind(kr),pd=kr.finishDraft.bind(kr),oi={},lC;function a6(){if(lC)return oi;lC=1,Object.defineProperty(oi,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)i["f"+o]=111+o;function s(m,v,w){v&&!("byKey"in v)&&(w=v,v=null),Array.isArray(m)||(m=[m]);var C=m.map(function(x){return h(x,v)}),P=function(k){return C.some(function(T){return d(T,k)})},D=w==null?P:P(w);return D}function a(m,v){return s(m,v)}function u(m,v){return s(m,{byKey:!0},v)}function h(m,v){var w=v&&v.byKey,C={};m=m.replace("++","+add");var P=m.split("+"),D=P.length;for(var x in n)C[n[x]]=!1;var k=!0,T=!1,H=void 0;try{for(var z=P[Symbol.iterator](),U;!(k=(U=z.next()).done);k=!0){var q=U.value,te=q.endsWith("?")&&q.length>1;te&&(q=q.slice(0,-1));var ne=g(q),le=n[ne];if(q.length>1&&!le&&!r[q]&&!i[ne])throw new TypeError('Unknown modifier: "'+q+'"');(D===1||!le)&&(w?C.key=ne:C.which=f(q)),le&&(C[le]=te?null:!0)}}catch(Q){T=!0,H=Q}finally{try{!k&&z.return&&z.return()}finally{if(T)throw H}}return C}function d(m,v){for(var w in m){var C=m[w],P=void 0;if(C!=null&&(w==="key"&&v.key!=null?P=v.key.toLowerCase():w==="which"?P=C===91&&v.which===93?91:v.which:P=v[w],!(P==null&&C===!1)&&P!==C))return!1}return!0}function f(m){m=g(m);var v=i[m]||m.toUpperCase().charCodeAt(0);return v}function g(m){return m=m.toLowerCase(),m=r[m]||m,m}return oi.default=s,oi.isHotkey=s,oi.isCodeHotkey=a,oi.isKeyHotkey=u,oi.parseHotkey=h,oi.compareHotkey=d,oi.toKeyCode=f,oi.toKeyName=g,oi}var ft=a6(),ci;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(ci||(ci={}));var Hu;(function(e){e.crosshair="crosshair"})(Hu||(Hu={}));const Gp=[ci.ns,ci.nesw,ci.ew,ci.nwse],dv="plait-board-attached",Jt=1,em=2,Oc="selection-rectangle",l6="selection-rectangle-bounding",u6=.1,AD=.1,BD=4,c6="plait-board-container",MD="active-with-moving",uC="rotate-handle",h6="resize-handle",d6=20,RD={MAIN:0,WHEEL:1},fv=3,kD=10,gv=5;function f6(e){return!!e.beforeContextChange}function g6(e){return!!e.onContextChanged}const cC=new WeakMap,$d=new WeakMap,rl=new WeakMap,_s=new WeakMap,tm=new WeakMap,ku=new WeakMap,bu=new WeakMap,nm=new WeakMap,ff=new WeakMap,gf=new WeakMap,rm=new WeakMap,im=new WeakMap,om=new WeakMap,sm=new WeakMap,Yi=new WeakMap,bD=new WeakMap,am=new WeakMap,FD=new WeakMap,pv=new WeakMap,mv=new WeakMap,i0=new WeakMap,o0=new WeakMap,hC=new WeakMap,Fu=new WeakMap;function pf(e){return e==null}const tc=(e,n)=>e+Math.floor(n*255).toString(16);function p6(e){return e.button===2}function vv(e){const n=new Map;return e.forEach(r=>{n.has(r.id)||n.set(r.id,r)}),Array.from(n.values())}const m6=(e,n,r=e.length-1)=>{r<0&&(r=e.length+r),r=Math.min(e.length-1,Math.max(r,0));let i=r+1;for(;--i>-1;)if(n(e[i],i,e))return i;return-1},v6=(e,n,r=0)=>{r<0&&(r=e.length+r),r=Math.min(e.length,Math.max(r,0));let i=r-1;for(;++i<e.length;)if(n(e[i],i,e))return i;return-1},y6=e=>{e.sort((n,r)=>n-r);for(let n=1;n<e.length;n++)if(e[n]!==e[n-1]+1)return!1;return!0},w6={isViewport:e=>!pf(e.zoom)&&!pf(e.viewBackgroundColor)},Ue={ancestors(e,n={}){const{reverse:r=!1}=n;let i=Ue.levels(e,n);return r?i=i.slice(1):i=i.slice(0,-1),i},levels(e,n={}){const{reverse:r=!1}=n,i=[];for(let o=0;o<=e.length;o++)i.push(e.slice(0,o));return r&&i.reverse(),i},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const n=e[e.length-1];return e.slice(0,-1).concat(n+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const n=e[e.length-1];if(n<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(n-1)},isAncestor(e,n){return e.length<n.length&&Ue.compare(e,n)===0},compare(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1}return 0},equals(e,n){return e.length===n.length&&e.every((r,i)=>r===n[i])},endsBefore(e,n){const r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return Ue.equals(i,o)&&s<a},isSibling(e,n){if(e.length!==n.length)return!1;const r=e.slice(0,-1),i=n.slice(0,-1),o=e[e.length-1],s=n[n.length-1];return o!==s&&Ue.equals(r,i)},transform(e,n){if(!e)return null;const r=[...e];if(e.length===0)return r;switch(n.type){case"insert_node":{const{path:i}=n;(Ue.equals(i,r)||Ue.endsBefore(i,r)||Ue.isAncestor(i,r))&&(r[i.length-1]+=1);break}case"remove_node":{const{path:i}=n;if(Ue.equals(i,r)||Ue.isAncestor(i,r))return null;Ue.endsBefore(i,r)&&(r[i.length-1]-=1);break}case"move_node":{const{path:i,newPath:o}=n;if(Ue.equals(i,o))return r;if(Ue.isAncestor(i,r)||Ue.equals(i,r)){const s=o.slice();return Ue.endsBefore(i,o)&&i.length<o.length&&(s[i.length-1]-=1),s.concat(r.slice(i.length))}else Ue.isSibling(i,o)&&(Ue.isAncestor(o,r)||Ue.equals(o,r))?Ue.endsBefore(i,r)?r[i.length-1]-=1:r[i.length-1]+=1:Ue.endsBefore(o,r)||Ue.equals(o,r)||Ue.isAncestor(o,r)?(Ue.endsBefore(i,r)&&(r[i.length-1]-=1),r[o.length-1]+=1):Ue.endsBefore(i,r)&&(Ue.equals(o,r)&&(r[o.length-1]+=1),r[i.length-1]-=1);break}}return r}},dt={parent:(e,n)=>{const r=Ue.parent(n);return dt.get(e,r)},*parents(e,n,r={}){for(const i of Ue.ancestors(n,r))yield dt.get(e,i)},get(e,n){let r=e;for(let i=0;i<n.length;i++){const o=n[i];if(!r||!r.children||!r.children[o])throw new Error(`Cannot find a descendant at path [${n}]`);r=r.children[o]}return r},last(e,n){let r=dt.get(e,n);for(;r&&r.children&&r.children.length>0;){const i=r.children.length-1;r=r.children[i]}return r},first(e,n){const r=n.slice();let i=dt.get(e,r);if(!i.children||!e.isExpanded(i))return i;for(;i&&i.children&&i.children.length>0&&e.isExpanded(i)&&i.children.length!==0;)i=i.children[0],r.push(0);return i}},x6=(e,n,r,i,o)=>{var s,a;switch(o.type){case"insert_node":{const{path:u,node:h}=o,d=dt.parent(e,u),f=u[u.length-1];if(!d.children||f>d.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);d.children.splice(f,0,h);break}case"remove_node":{const{path:u}=o,h=dt.parent(e,u),d=u[u.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);h.children.splice(d,1);break}case"move_node":{const{path:u,newPath:h}=o;if(Ue.isAncestor(u,h))throw new Error(`Cannot move a path [${u}] to new path [${h}] because the destination is inside itself.`);const d=dt.get(e,u),f=dt.parent(e,u),g=u[u.length-1];(s=f.children)==null||s.splice(g,1);const m=Ue.transform(u,o),v=dt.get(e,Ue.parent(m)),w=m[m.length-1];(a=v.children)==null||a.splice(w,0,d);break}case"set_node":{const{path:u,properties:h,newProperties:d}=o;if(u.length===0)throw new Error("Cannot set properties on the root node!");const f=dt.get(e,u);for(const g in d){const m=d[g];m==null?delete f[g]:f[g]=m}for(const g in h)d.hasOwnProperty(g)||delete f[g];break}case"set_viewport":{const{newProperties:u}=o;if(u==null)r=u;else{if(r==null){if(!w6.isViewport(u))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(u)} when there is no current viewport.`);r={...u}}for(const h in u){const d=u[h];d==null?delete r[h]:r[h]=d}}break}case"set_selection":{const{newProperties:u}=o;u==null?n=u:n===null?n=o.newProperties:n=u;break}case"set_theme":{const{newProperties:u}=o;i=u;break}}return{selection:n,viewport:r,theme:i}},C6={transform(e,n){e.children=gd(e.children);let r=e.viewport&&gd(e.viewport),i=e.selection&&gd(e.selection),o=e.theme&&gd(e.theme);try{const s=x6(e,i,r,o,n);r=s.viewport,i=s.selection,o=s.theme}finally{e.children=pd(e.children),i?e.selection=ro(i)?pd(i):i:e.selection=null,e.viewport=ro(r)?pd(r):r,e.theme=ro(o)?pd(o):o}}},R={isHit:(e,n)=>R.isHitX(e,n)&&R.isHitY(e,n),isHitX:(e,n)=>{const r=e.x<n.x?e.x:n.x,i=e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width;return Math.floor(i-r-e.width-n.width)<=0},isHitY:(e,n)=>{const r=e.y<n.y?e.y:n.y,i=e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height;return Math.floor(i-r-e.height-n.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,n,r){return R.getRectangleByPoint([e[0]-n/2,e[1]-r/2],n,r)},getRectangleByPoint(e,n,r){return{x:e[0],y:e[1],width:n,height:r}},getRectangleByPoints(e){E6(e)&&(e=[e]);let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const a of e){const u=a.map(d=>d[0]),h=a.map(d=>d[1]);n=Math.min(n,...u),r=Math.min(r,...h),i=Math.max(i,...u),r=Math.min(r,...h),o=Math.max(o,...h)}return{x:n,y:r,width:i-n,height:o-r}},getCornerPointsByPoints(e){const n=e.map(u=>u[0]),r=e.map(u=>u[1]),i=Math.min(...n),o=Math.max(...n),s=Math.min(...r),a=Math.max(...r);return[[i,s],[o,s],[o,a],[i,a]]},getOutlineRectangle:(e,n)=>({x:e.x+n,y:e.y+n,width:e.width-n*2,height:e.height-n*2}),inflate:(e,n)=>{const r=n/2;return{x:e.x-r,y:e.y-r,width:e.width+r*2,height:e.height+r*2}},isEqual:(e,n)=>e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>R.getCenterPoint(R.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,n)=>[e.x+e.width*n[0],e.y+e.height*n[1]],expand(e,n,r=n,i=n,o=r){return{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}},getGapCenter(e,n,r){const i=r?"x":"y",o=r?"width":"height",a=[e[i],e[i]+e[o],n[i],n[i]+n[o]].sort((u,h)=>u-h);return(a[1]+a[2])/2},isPointInRectangle(e,n){const r=n[0],i=n[1];return r>e.x&&r<e.x+e.width&&i>e.y&&i<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.forEach(s=>{n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x+s.width),o=Math.max(o,s.y+s.height)}),{x:n,y:r,width:i-n,height:o-r}}};function E6(e){return Array.isArray(e)&&e.every(n=>Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")}function OD(e,n,r,i,o,s){const a=e-r,u=n-i,h=o-r,d=s-i,f=a*h+u*d,g=h*h+d*d;let m=-1;g!==0&&(m=f/g);let v,w;m<0?(v=r,w=i):m>1?(v=o,w=s):(v=r+m*h,w=i+m*d);const C=e-v,P=n-w;return Math.hypot(C,P)}function s0(e,n){const r=e[0],i=e[1],o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],h=r-o,d=i-s,f=a-o,g=u-s,m=h*f+d*g,v=f*f+g*g;let w=-1;v!==0&&(w=m/v);let C,P;return w<0?(C=o,P=s):w>1?(C=a,P=u):(C=o+w*f,P=s+w*g),[C,P]}function ID(e,n){const r=n.length;let i=1/0;if(n.length===1)return Ke(...n[0],...e);for(let o=0;o<r-1;o++){const s=n[o],a=n[o+1],u=OD(e[0],e[1],s[0],s[1],a[0],a[1]);u<i&&(i=u)}return i}function bt(e,n,r=!0){const i=n.length;let o=1/0,s=e;for(let a=0;a<i;a++){const u=n[a];if(a===i-1&&!r)continue;const h=a===i-1?n[0]:n[a+1],d=OD(e[0],e[1],u[0],u[1],h[0],h[1]);d<o&&(o=d,s=s0(e,[u,h]))}return s}function yv(e,n){let r=1/0,i=e;for(const o of n){const s=s0(e,o),a=Ke(e[0],e[1],s[0],s[1]);a<r&&(r=a,i=s)}return i}function Gn(e,n,r,i){const o={x:n[0]-r,y:n[1]-i,height:i*2,width:r*2},s=Math.abs(e[0]-o.x-o.width/2),a=Math.abs(e[1]-o.y-o.height/2);let u=.707,h=.707;const d=Math.abs(o.width)/2,f=Math.abs(o.height)/2;[0,1,2,3].forEach(v=>{const w=d*u,C=f*h,P=(d*d-f*f)*u**3/d,D=(f*f-d*d)*h**3/f,x=w-P,k=C-D,T=s-P,H=a-D,z=Math.hypot(k,x),U=Math.hypot(H,T);u=Math.min(1,Math.max(0,(T*z/U+P)/d)),h=Math.min(1,Math.max(0,(H*z/U+D)/f));const q=Math.hypot(h,u);u/=q,h/=q});const g=e[0]>n[0]?1:-1,m=e[1]>n[1]?1:-1;return[n[0]+d*u*g,n[1]+f*h*m]}function hl(e,n,r,i,o){return[(e-r)*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i]}function Ke(e,n,r,i){const o=e-r,s=n-i;return Math.hypot(o,s)}function Ic(e,n,r){var i=Math.max(r.x-e,0,e-(r.x+r.width)),o=Math.max(r.y-n,0,n-(r.y+r.height));return Math.sqrt(i*i+o*o)}const md=(e,n,r,i)=>{if(We.isEquals(e,n)&&We.isEquals(r,i)&&!We.isEquals(e,r))return!1;const o=(g,m)=>g[0]*m[1]-g[1]*m[0],s=[n[0]-e[0],n[1]-e[1]],a=[r[0]-e[0],r[1]-e[1]],u=[i[0]-e[0],i[1]-e[1]],h=[e[0]-r[0],e[1]-r[1]],d=[n[0]-r[0],n[1]-r[1]],f=[i[0]-r[0],i[1]-r[1]];return o(s,a)*o(s,u)<=0&&o(f,h)*o(f,d)<=0},mf=(e,n)=>{if(e.length===1)return R.isPointInRectangle(n,e[0]);const r=R.getCornerPoints(n),i=e.length;for(let o=0;o<i;o++){const s=e[o],a=e[(o+1)%i];if(o===i-1&&We.isEquals(s,a))continue;if(P6(s,a,n)||es(s,r)||es(a,r))return!0}return!1},P6=(e,n,r)=>{const i=R.getCornerPoints(r);return md(e,n,i[0],i[1])||md(e,n,i[1],i[2])||md(e,n,i[2],i[3])||md(e,n,i[3],i[0])},es=(e,n)=>{const r=e[0],i=e[1];let o=!1;for(var s=0,a=n.length-1;s<n.length;a=s++){let u=n[s][0],h=n[s][1],d=n[a][0],f=n[a][1];h>i!=f>i&&r<(d-u)*(i-h)/(f-h)+u&&(o=!o)}return o},so=(e,n,r,i,o=0)=>{const s=Math.cos(o),a=Math.sin(o),u=(e[0]-n[0])*s+(e[1]-n[1])*a,h=(e[1]-n[1])*s-(e[0]-n[0])*a;return u*u/(r*r)+h*h/(i*i)<=1},wv=(e,n,r,i=0)=>{const{x:o,y:s,width:a,height:u}=n,h=e[0]>=o&&e[0]<=o+a&&e[1]>=s&&e[1]<=s+u,d=e[0]>=o&&e[0]<=o+r&&e[1]>=s&&e[1]<=s+r&&Math.hypot(e[0]-(o+r),e[1]-(s+r))>r,f=e[0]>=o&&e[0]<=o+r&&e[1]>=s+u&&e[1]<=s+u-r&&Math.hypot(e[0]-(o+r),e[1]-(s+u-r))>r,g=e[0]>=o+a-r&&e[0]<=o+a&&e[1]>=s&&e[1]<=s+r&&Math.hypot(e[0]-(o+a-r),e[1]-(s+r))>r,m=e[0]>=o+a-r&&e[0]<=o+a&&e[1]>=s+u-r&&e[1]<=s+u&&Math.hypot(e[0]-(o+a-r),e[1]-(s+u-r))>r;return h&&!(d||f||g||m)},Lc=function(e){let r,i,o,s,a,u,h,d,f,g,m,v,w;var C,P,D,x,k,T;const H=[];H.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var z=e.length,U=0;U<z-1;U++)r=U==0?e[0]:e[U-1],i=e[U],o=e[U+1],s=U+2<z?e[U+2]:o,h=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),f=Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)),C=Math.pow(f,.5),D=Math.pow(f,2*.5),P=Math.pow(d,.5),x=Math.pow(d,2*.5),T=Math.pow(h,.5),k=Math.pow(h,2*.5),g=2*k+3*T*P+x,m=2*D+3*C*P+x,v=3*T*(T+P),v>0&&(v=1/v),w=3*C*(C+P),w>0&&(w=1/w),a=[(-x*r[0]+g*i[0]+k*o[0])*v,(-x*r[1]+g*i[1]+k*o[1])*v],u=[(D*i[0]+m*o[0]-x*s[0])*w,(D*i[1]+m*o[1]-x*s[1])*w],a[0]==0&&a[1]==0&&(a=i),u[0]==0&&u[1]==0&&(u=o),H.push(a,u,o);return H};function Li(e,n,r,i){return Math.abs(n)===0?e>0?-1/0:1/0:-i*i*e/(r*r*n)}function Hi(e,n,r){if(r===1/0)return[0,-1];if(r===-1/0)return[0,1];let i=[1,-r];return n<0&&(i=[-i[0],-i[1]]),i}function xv(e,n){const r=Math.pow(10,n);return Math.ceil(e*r)/r}function lm(e,n,r=1e-6){return Math.abs(e-n)<=r}function dC(e,n,r,i,o,s,a=!0){if(o===0||s===0||e[0]===n[0]&&e[1]===n[1])return[];o=o<0?o:-o,s=s<0?s:-s,e[0]-=r,e[1]-=i,n[0]-=r,n[1]-=i;var u=(n[0]-e[0])*(n[0]-e[0])/o/o+(n[1]-e[1])*(n[1]-e[1])/s/s,h=2*e[0]*(n[0]-e[0])/o/o+2*e[1]*(n[1]-e[1])/s/s,d=e[0]*e[0]/o/o+e[1]*e[1]/s/s-1,f=[],g=h*h-4*u*d;return g===0?f.push(-h/2/u):g>0&&(f.push((-h+Math.sqrt(g))/2/u),f.push((-h-Math.sqrt(g))/2/u)),f.filter(m=>!a||m>=0&&m<=1).map(m=>[e[0]+(n[0]-e[0])*m+r,e[1]+(n[1]-e[1])*m+i])}function fC(e,n,r,i,o=.5){return[e+(r-e)*o,n+(i-n)*o]}function LD(e,n){const r=(n.endX-e[0])/2,i=(n.endY-e[1])/2,o=Math.cos(n.xAxisRotation),s=Math.sin(n.xAxisRotation),a=o*r+s*i,u=-s*r+o*i,h=Math.abs(n.rx),d=Math.abs(n.ry),f=a*a/(h*h)+u*u/(d*d),g=f>1?Math.sqrt(f):1,m=h*g,v=d*g,w=n.largeArcFlag===n.sweepFlag?-1:1,C=(m*m*v*v-m*m*u*u-v*v*a*a)/(m*m*u*u+v*v*a*a),P=w*Math.sqrt(Math.max(0,C)),D=P*(m*u/v),x=P*(-(v*a)/m),k=o*D-s*x+(e[0]+n.endX)/2,T=s*D+o*x+(e[1]+n.endY)/2;return{center:[k,T],rx:m,ry:v}}function a0(e,n,r){const{center:i,rx:o,ry:s}=LD(n,r),a=Gn(e,i,o,s),u=Math.atan2(n[1]-i[1],n[0]-i[0]),h=Math.atan2(r.endY-i[1],r.endX-i[0]),d=Math.atan2(a[1]-i[1],a[0]-i[0]);if(D6(d,u,h,r.sweepFlag===1))return a;const g=Ke(e[0],e[1],n[0],n[1]),m=Ke(e[0],e[1],r.endX,r.endY);return g<m?n:[r.endX,r.endY]}function D6(e,n,r,i){const o=h=>(h%(2*Math.PI)+2*Math.PI)%(2*Math.PI),s=o(e),a=o(n),u=o(r);return i?a<=u?s>=a&&s<=u:s>=a||s<=u:a>=u?s<=a&&s>=u:s<=a||s>=u}function S6(e,n,r){const o=O.getBoardContainer(e).getBoundingClientRect();return Ic(n,r,o)===0}function Cv(e){const{hideScrollbar:n}=e.options;let r=0;if(!n){const i=O.getViewportContainer(e);r=i.offsetWidth-i.clientWidth}return r}const Sl="http://www.w3.org/2000/svg";function st(){return document.createElementNS(Sl,"g")}function Ev(){return document.createElementNS(Sl,"path")}function _p(e,n){const r=document.createElementNS(Sl,"rect");r.setAttribute("x",`${e.x}`),r.setAttribute("y",`${e.y}`),r.setAttribute("width",`${e.width}`),r.setAttribute("height",`${e.height}`);for(let i in n){const o=i;r.setAttribute(i,`${n[o]}`)}return r}const ut=(e,n)=>{e.setAttribute("stroke-linecap",n)},T6=(e,n)=>{e.querySelectorAll("path").forEach(r=>{r.setAttribute("stroke-linecap",n)})};function A6(){return document.createElementNS(Sl,"mask")}function B6(e,n,r,i){var o=document.createElementNS(Sl,"text");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("fill",r),o.textContent=i,o}const M6=e=>R6(e)&&e.nodeType===1,R6=e=>e instanceof window.Node,k6=e=>!!(M6(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),bi=e=>e.button===RD.MAIN,b6=e=>e.button===RD.WHEEL;function Pv(e,n,r,i){var o=document.createElementNS(Sl,"foreignObject");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("width",`${xv(r,0)}`),o.setAttribute("height",`${i}`),o}function Nu(e,n,r,i,o){const s=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");s&&(s.setAttribute("width",`${xv(n,0)}`),s.setAttribute("height",`${r}`),s.setAttribute("x",`${i}`),s.setAttribute("y",`${o}`))}function F6(e,n){const r=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");r&&r.setAttribute("width",`${xv(n,0)}`)}const O6=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),I6=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,vf=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),L6=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),H6=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),N6=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),G6=(e,n)=>e.type==="set_viewport"&&e.type===(n==null?void 0:n.type),_6=(e,n)=>!(e.type==="set_selection"||e.type==="set_viewport"),j6=e=>e.type!=="set_selection",li={isSaving(e){return jp.get(e)},isMerging(e){return Tn.get(e)},isSplittingOnce(e){return yd.get(e)},setSplittingOnce(e,n){yd.set(e,n)},withMerging(e,n){const r=li.isMerging(e);Tn.set(e,!0),n(),Tn.set(e,r)},withNewBatch(e,n){const r=li.isMerging(e);Tn.set(e,!0),yd.set(e,!0),n(),Tn.set(e,r),yd.delete(e)},withoutMerging(e,n){const r=li.isMerging(e);Tn.set(e,!1),n(),Tn.set(e,r)},withoutSaving(e,n){const r=li.isSaving(e);jp.set(e,!1),n(),jp.set(e,r)}},z6={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},$6={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},W6={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},At=e=>{const n=z6[e],r=$6[e],i=W6[e],o=n&&ft.isKeyHotkey(n),s=r&&ft.isKeyHotkey(r),a=i&&ft.isKeyHotkey(i);return u=>!!(o&&o(u)||vf&&s&&s(u)||!vf&&a&&a(u))},Hn={isBold:At("bold"),isCompose:At("compose"),isArrow:At("arrow"),isMoveBackward:At("moveBackward"),isMoveForward:At("moveForward"),isMoveUp:At("moveUp"),isMoveDown:At("moveDown"),isDeleteBackward:At("deleteBackward"),isDeleteForward:At("deleteForward"),isDeleteLineBackward:At("deleteLineBackward"),isDeleteLineForward:At("deleteLineForward"),isDeleteWordBackward:At("deleteWordBackward"),isDeleteWordForward:At("deleteWordForward"),isExtendBackward:At("extendBackward"),isExtendForward:At("extendForward"),isExtendUp:At("extendUp"),isExtendDown:At("extendDown"),isExtendArrow:At("extendArrow"),isExtendLineBackward:At("extendLineBackward"),isExtendLineForward:At("extendLineForward"),isItalic:At("italic"),isMoveLineBackward:At("moveLineBackward"),isMoveLineForward:At("moveLineForward"),isMoveWordBackward:At("moveWordBackward"),isMoveWordForward:At("moveWordForward"),isRedo:At("redo"),isSplitBlock:At("splitBlock"),isTransposeCharacter:At("transposeCharacter"),isUndo:At("undo"),isShift:At("shift")};function St(e=5){const n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",r=n.length;let i="";for(let o=0;o<e;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}function kn(e,n,r,i){if(e.children&&(!r||r(e))){let o=[...e.children];o=i?o.reverse():o,o.forEach(s=>{kn(s,n,r)})}n(e)}const sa=e=>n=>!!(O.isBoard(n)||e.isRecursion(n)),fr="#6698FF",Dv="#6698FF25",dl={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},yt={isRootElement(e){const n=_s.get(e);return!!(n&&O.isBoard(n))},getElementRef(e){return Fu.get(e)},getElementG(e){const n=ku.get(e);if(!n)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return n},hasMounted(e){return!!yt.getContainerG(e,{suppressThrow:!0})},getContainerG(e,n){const r=bu.get(e)||null;if(!r){if(n.suppressThrow)return null;throw new Error("can not resolve container g")}return r}},l0=(e,n,r=!0)=>[...n].sort((i,o)=>{const s=O.findPath(e,i),a=O.findPath(e,o);return r?s[0]-a[0]:a[0]-s[0]}),HD=new Map,Su=e=>HD.get(e)||[],Tu=(e,n)=>{HD.set(e,n)};class V6{constructor(n){this.debugKey=n}isDebug(){return Wo(this.debugKey)}clear(){if(!this.isDebug())return;const n=Su(this.debugKey);Tu(this.debugKey,[]),n.forEach(r=>r.remove())}drawPolygon(n,r,i){if(!Wo(this.debugKey))return;const o=O.getRoughSVG(n).polygon(r,i||{stroke:"red"});o.classList.add(this.debugKey),O.getElementTopHost(n).append(o);const s=Su(this.debugKey);return s.push(o),Tu(this.debugKey,s),o}drawLine(n,r,i){if(!Wo(this.debugKey))return;const o=O.getRoughSVG(n).linearPath(r,i||{stroke:"red"});o.classList.add(this.debugKey),O.getElementTopHost(n).append(o);const s=Su(this.debugKey);return s.push(o),Tu(this.debugKey,s),o}drawRectangle(n,r,i){if(!Wo(this.debugKey))return;let o;r instanceof Array?o=R.getRectangleByPoints(r):o=r;const s=O.getRoughSVG(n).rectangle(o.x,o.y,o.width,o.height,i||{stroke:"red"});s.classList.add(this.debugKey),O.getElementTopHost(n).append(s);const a=Su(this.debugKey);return a.push(s),Tu(this.debugKey,a),s}drawCircles(n,r,i=0,o=!1,s){if(!Wo(this.debugKey))return;const a=[];return r.forEach((u,h)=>{const d=O.getRoughSVG(n).circle(u[0],u[1],o?i*(h+1):i,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},s||{}));d.classList.add(this.debugKey),O.getElementTopHost(n).append(d);const f=Su(this.debugKey);f.push(d),a.push(d),Tu(this.debugKey,f)}),a}}const Tl=e=>new V6(e),Wo=e=>localStorage.getItem(e||"debug:plait")==="true";var Ri;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Ri||(Ri={}));const ND=(e,n,r=()=>!0)=>{const i=n||e.selection,o=[];if(!i)return[];if(dl.isCollapsed(i)){const a=GD(e,i.anchor,r);return a!=null&&a.length?a:[]}return kn(e,a=>{if(!O.isBoard(a)&&r(a)){let u=!1;try{u=e.isRectangleHit(a,i)}catch(h){Wo()&&console.error("isRectangleHit",h,"node",a)}u&&o.push(a)}},sa(e),!0),o},GD=(e,n,r=()=>!0,i=!0)=>{let o=[];return kn(e,s=>{if(O.isBoard(s)||!r(s)||!yt.hasMounted(s))return;let a=!1;try{a=e.isHit(s,n,i)}catch(u){Wo()&&console.error("isHit",u,"node",s)}if(a){o.push(s);return}},sa(e),!0),o},Ni=(e,n,r=()=>!0,i=!0)=>{const o=GD(e,n,r,i);return e.getOneHitElement(o)},U6=(e,n)=>{const r=Me(e),i=r.length>0&&xt(e,r,!1);return i&&R.isPointInRectangle(i,n)?r:[]},Bi=(e,n)=>{const r=l0(e,n);bD.set(e,r)},Me=e=>bD.get(e)||[],aa=(e,n)=>{let r=[];Array.isArray(n)?r.push(...n):r.push(n);const i=Me(e);Bi(e,[...i,...r])},u0=(e,n,r=!1)=>{const i=Me(e);if(i.includes(n)){const o=[];e.isRecursion(n)&&r?kn(n,a=>{o.push(a)},a=>e.isRecursion(a)):o.push(n);const s=i.filter(a=>!o.includes(a));Bi(e,s)}},X6=(e,n,r)=>{const i=Me(e);i.splice(i.indexOf(n),1,r)},Al=e=>{Bi(e,[])},js=(e,n)=>!!Me(e).find(i=>i===n),um=e=>{const n=e.getPluginOptions(Ri.withSelection);e.setPluginOptions(Ri.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Ri.withSelection,{...n})},0)},K6=(e,n)=>U6(e,n).length>0,_D=(e,n)=>!!Ni(e,n)||K6(e,n);function Bl(e,n,r,i,o,s,a=!1,u){let h=u||0;const d=[n+h,r],f=[i-h,r],g=[i,r+h],m=[i,o-h],v=[i-h,o],w=[n+h,o],C=[n,o-h],P=[n,r+h],D=e.path(`M${f[0]} ${f[1]} A ${h} ${h}, 0, 0, 1, ${g[0]} ${g[1]} L ${m[0]} ${m[1]} A ${h} ${h}, 0, 0, 1, ${v[0]} ${v[1]} L ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${C[0]} ${C[1]} L ${P[0]} ${P[1]} A ${h} ${h}, 0, 0, 1, ${d[0]} ${d[1]} Z`,s);return ut(D,"round"),D}const vi=(e,n,r)=>{const o=O.getRoughSVG(e).rectangle(n.x,n.y,n.width,n.height,r);return ut(o,"round"),o};function Ml(e,n,r=40){const i=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]);let s=Math.hypot(i,o);const a=s/2,u=a/s*i,h=a/s*o,d=[n[0]>e[0]?n[0]-u:n[0]+u,n[1]>e[1]?n[1]-h:n[1]+h],f=hl(d[0],d[1],n[0],n[1],r*Math.PI/180);return{pointLeft:hl(d[0],d[1],n[0],n[1],-r*Math.PI/180),pointRight:f}}function la(e,n,r,i){return e.circle(n[0],n[1],r,i)}function vd(e,n,r,i){return e.linearPath([n,r],i)}function Ur(e,n,r){const i=st(),o=Ev();let s="";return e.forEach((a,u)=>{u===0?s+=`M ${a[0]} ${a[1]} `:s+=`L ${a[0]} ${a[1]} `}),r&&(s+="Z"),o.setAttribute("d",s),o.setAttribute("stroke",`${n==null?void 0:n.stroke}`),o.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),o.setAttribute("fill",`${(n==null?void 0:n.fill)||"none"}`),n!=null&&n.strokeLineDash&&o.setAttribute("stroke-dasharray",`${n.strokeLineDash}`),i.appendChild(o),i}function q6(e,n){const r=st(),i=Ev();let o="";for(let s=0;s<e.length-3;s+=3)s===0?o+=`M ${e[0][0]} ${e[0][1]} `:o+=`C ${e[s+1][0]} ${e[s+1][1]}, ${e[s+2][0]} ${e[s+2][1]}, ${e[s+3][0]} ${e[s+3][1]}`;return i.setAttribute("d",o),i.setAttribute("stroke",`${n==null?void 0:n.stroke}`),i.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),i.setAttribute("fill","none"),r.appendChild(i),r}function Sv(e,n){const r={type:"set_viewport",properties:e.viewport,newProperties:n};e.apply(r)}const Y6={setViewport:Sv};function Z6(e,n){const r={type:"set_theme",properties:e.theme,newProperties:n};e.apply(r)}function c0(e,n,r){r=r??e.viewport.zoom,Sv(e,{...e.viewport,zoom:r,origination:n}),ZD(e)}function Q6(e,n,r){n=lM(n);const o=O.getBoardContainer(e).getBoundingClientRect(),s=O.getBoardContainer(e).getBoundingClientRect();let a=[s.width/2,s.height/2];r&&Ic(r[0],r[1],o)===0&&(a=[r[0]-o.x,r[1]-o.y]);const u=e.viewport.zoom,h=Rl(e),d=h[0]+a[0]/u,f=h[1]+a[1]/u,g=[d-a[0]/n,f-a[1]/n];c0(e,g,n)}function J6(e){let n=Cv(e);const r=O.getBoardContainer(e).getBoundingClientRect(),i=xt(e,e.children,!0),o=e.viewport.zoom,s=16,a=r.width-2*s,u=r.height-2*s;let h=o;a<i.width||u<i.height?h=Math.min(a/i.width,u/i.height):h=1;const d=XD(e),f=[d[0]-r.width/2/h+n/2/o,d[1]-r.height/2/h+n/2/o];c0(e,f,h)}function eM(e,n){let r=Cv(e);const i=O.getBoardContainer(e),o=i.getBoundingClientRect();let s=0;n.maxWidth?s=n.maxWidth:s=o.width;const a=xt(e,e.children,!0),u=s-2*n.autoFitPadding;let h=0;u<a.width?h=Math.min(u/a.width):h=1;let d=a.height*h+2*n.autoFitPadding;if(d>n.limitHeight){const v=i.closest(`.${n.containerClass}`);v.style.height=`${d}px`,Av(e)}else d=n.limitHeight;const f=a.x+a.width/2,g=a.y+a.height/2,m=[f-s/2/h+r/2/h,g-d/2/h+r/2/h];c0(e,m,h)}function tM(e,n){n=n??e.theme.themeColorMode,Z6(e,{themeColorMode:n}),kn(e,r=>{e.applyTheme(r)})}const nM=(e,n)=>{e.pointer!==n&&(e.pointer=n)};function rM(e,n){var i;if((i=Me(e))==null?void 0:i[0]){const o=O.getBoardContainer(e).getBoundingClientRect(),s=Cv(e),a=XD(e),u=n[0]-a[0],h=n[1]-a[1],d=e.viewport.zoom,f=[u-o.width/2/d+s/2/d,h-o.height/2/d+s/2/d];Sv(e,{...e.viewport,origination:f}),ZD(e)}}const Pt={updatePointerType:nM,updateViewport:c0,fitViewport:J6,updateZoom:Q6,updateThemeColor:tM,fitViewportWidth:eM,moveToCenter:rM},Tv=e=>O.getHost(e).viewBox.baseVal;function Je(e,n,r){const o=O.getHost(e).getBoundingClientRect();return[n-o.x,r-o.y]}function Nn(e,n){const r=[n.x,n.y],i=[n.x+n.width,n.y+n.height],o=nc(e,r),s=nc(e,i);return R.getRectangleByPoints([o,s])}function nc(e,n){const r=oM(e,jD(e,n));return qs(e,r[0],r[1])}function qs(e,n,r){const o=O.getBoardContainer(e).getBoundingClientRect();return[n-o.x,r-o.y]}function iM(e,n){const i=O.getBoardContainer(e).getBoundingClientRect();return[i.x+n[0],i.y+n[1]]}function Ze(e,n){const r=Tv(e),{zoom:i}=e.viewport,o=n[0]/i+r.x,s=n[1]/i+r.y;return[o,s]}function oM(e,n){const i=O.getHost(e).getBoundingClientRect();return[n[0]+i.x,n[1]+i.y]}function jD(e,n){const{zoom:r}=e.viewport,i=Tv(e),o=(n[0]-i.x)*r,s=(n[1]-i.y)*r;return[o,s]}const zD=.75,$D=new WeakMap,WD=new WeakMap;function sM(e){const{hideScrollbar:n}=e.options,r=n?d6:0,i=O.getBoardContainer(e).getBoundingClientRect();return{width:i.width+r,height:i.height+r}}function aM(e,n){const r=xt(e,e.children,!0);let i,o,s,a;return i=r.x,o=r.x+r.width,s=r.y,a=r.y+r.height,{left:i,right:o,top:s,bottom:a}}function lM(e,n=AD,r=BD){return e<n?n:e>r?r:e}function VD(e,n){const r=O.getBoardContainer(e).getBoundingClientRect(),i=aM(e),o=r.width,s=r.height;let a=i.right-i.left,u=i.bottom-i.top;const h=o/2,d=s/2;if(a<h/n){const f=i.left+a/2;i.left=f-h/2/n,i.right=f+h/2/n,a=h/n}if(u<d/n){const f=i.top+u/2;i.top=f-d/2/n,i.bottom=f+d/2/n,u=d/n}return{elementHostBBox:i,containerWidth:o,containerHeight:s,width:a,height:u}}function cm(e,n,r,i,o,s,a=zD){const u=n*a/s,h=r*a/s;return[e.left-u,e.top-h,i+u*2,o+h*2]}function UD(e,n){const{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}=VD(e,n);return cm(r,i,o,s,a,n)}function XD(e){const n=xt(e,e.children,!0);return[n.x+n.width/2,n.y+n.height/2]}function KD(e,n){const r=e.viewport.zoom,i=O.getHost(e);i.style.display="block",i.style.width=`${n[2]*r}px`,i.style.height=`${n[3]*r}px`,n&&n[2]>0&&n[3]>0&&i.setAttribute("viewBox",n.join(" "))}function yf(e){const n=Rl(e);if(!n)return;const[r,i]=jD(e,n);qD(e,r,i)}function qD(e,n,r,i=!0){const o=O.getViewportContainer(e),s=o.scrollLeft,a=o.scrollTop;if(!lm(o.scrollLeft,n,1)||!lm(o.scrollTop,r,1)){o.scrollLeft=n,o.scrollTop=r;const u=o.offsetWidth,h=o.offsetHeight;if(s===o.scrollLeft&&a===o.scrollTop)YD(e,s,a);else{const d=n>0&&r>0&&n<o.scrollWidth-u&&r<o.scrollHeight-h;i&&d&&JD(e,!0)}}}function YD(e,n,r){const i=Ze(e,[n,r]);We.isEquals(i,Rl(e))||(Pt.updateViewport(e,i),QD(e,!0))}function Av(e){const{width:n,height:r}=sM(e),i=O.getViewportContainer(e);i.style.width=`${n}px`,i.style.height=`${r}px`}function Bv(e){const n=e.viewport.zoom,r=UD(e,n);KD(e,r)}function uM(e){const n=e.viewport.zoom,{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}=VD(e,n),u=cm(r,i,o,s,a,n,.5),h=Tv(e);if(u[0]<h.x||u[1]<h.y||u[0]+u[2]>h.x+h.width||u[1]+u[3]>h.y+h.height){const d=cm(r,i,o,s,a,n,zD);KD(e,d)}}function cM(e){var n;if(!((n=e.viewport)!=null&&n.origination)){const r=e.viewport.zoom,i=O.getBoardContainer(e).getBoundingClientRect(),o=UD(e,r),s=o[0]+o[2]/2,a=o[1]+o[3]/2,u=[s-i.width/2/r,a-i.height/2/r];hM(e,u),yf(e);return}yf(e)}const hM=(e,n)=>{pv.set(e,n)},ZD=e=>{pv.delete(e)},Rl=e=>{const n=pv.get(e);return n||e.viewport.origination},dM=e=>!!$D.get(e),QD=(e,n)=>{$D.set(e,n)},fM=e=>!!WD.get(e),JD=(e,n)=>{WD.set(e,n)};function gM(e,n,r){const i={type:"insert_node",node:n,path:r};e.apply(i)}function pM(e,n,r){const i={},o={},s=dt.get(e,r);for(const u in n)s[u]!==n[u]&&(s.hasOwnProperty(u)&&(i[u]=s[u]),n[u]!=null&&(o[u]=n[u]));const a={type:"set_node",properties:i,newProperties:o,path:r};e.apply(a)}function eS(e,n){const r=dt.get(e,n),i={type:"remove_node",path:n,node:r};e.apply(i)}function mM(e,n,r){const i={type:"move_node",path:n,newPath:r};e.apply(i)}const zs={insertNode:gM,setNode:pM,removeNode:eS,moveNode:mM},Wd=new WeakMap,vM=(e,n)=>tS(e)[n]||null,tS=e=>Wd.get(e)||{},mi=(e,n,r)=>{const i=()=>{let s=requestAnimationFrame(()=>{const u=Wd.get(e)||{};u[n]=null,Wd.set(e,u),O.isAlive(e)&&r()});const a=tS(e);a[n]=s,Wd.set(e,a)};let o=vM(e,n);o!==null&&cancelAnimationFrame(o),i()},h0=(e,n)=>(l0(e,n),n.map(r=>e.children.map(i=>i.id).indexOf(r.id)).filter(r=>r>=0)),yM=(e,n)=>{const r=h0(e,n);return r[r.length-1]},Hc=(e,n)=>{n.map(r=>{const i=O.findPath(e,r.element),o=e.pathRef(i);return()=>{o.current&&zs.moveNode(e,o.current,r.newPath),o.unref()}}).forEach(r=>{r()})},nS=new WeakMap,kl=e=>!!nS.get(e),vo=(e,n)=>{nS.set(e,n)},wM=e=>o0.get(e)||[],fl=e=>(o0.get(e)||[]).length>0,xM=e=>{o0.delete(e),vo(e,!1)},gC=(e,n)=>{o0.set(e,n),vo(e,!0)},hm="foreignObject[class^='foreign-object']";function pC(e){return e.nodeType===Node.ELEMENT_NODE}function CM(e){return new Promise((n,r)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>n(i),i.onerror=()=>r(new Error("Failed to load image")),i.src=e})}function EM(e,n,r="transparent"){const i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,i.style.width=`${e}px`,i.style.height=`${n}px`,o.strokeStyle="#ffffff",o.fillStyle=r,o.fillRect(0,0,e,n),{canvas:i,ctx:o}}async function PM(e){const r=await(await fetch(e)).blob();return new Promise((i,o)=>{const s=new FileReader;s.onloadend=()=>i(s.result),s.onerror=o,s.readAsDataURL(r)})}function DM(e,n){const r=n==null?void 0:n.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Array.from(i).forEach(o=>{let s=i.getPropertyValue(o);r.setProperty(o,s,i.getPropertyPriority(o))})}function SM(e,n,r){if(r){const i=r+`, ${hm}`,o=Array.from(e.querySelectorAll(i)),s=Array.from(n.querySelectorAll(i));o.forEach((a,u)=>{const h=Array.from(a.querySelectorAll("*")).filter(pC),d=Array.from(s[u].querySelectorAll("*")).filter(pC);o.push(...h),s.push(...d)}),o.map((a,u)=>{DM(a,s[u])})}}async function TM(e,n){const r=Array.from(e.querySelectorAll(`${hm}`)),i=Array.from(n.querySelectorAll(`${hm}`));await Promise.all(r.map((o,s)=>new Promise(a=>{const h=i[s].querySelector("img"),d=h==null?void 0:h.getAttribute("src");if(!d)return a(!0);PM(d).then(f=>{h==null||h.setAttribute("src",f),a(!0)})})))}async function AM(e,n,r,i){const{width:o,height:s,x:a,y:u}=r,{padding:h=4,inlineStyleClassNames:d}=i,f=O.getHost(e),g=n.map(C=>yt.getElementG(C)),m=f.cloneNode(),v=O.getElementHost(e).cloneNode();m.style.width=`${o}px`,m.style.height=`${s}px`,m.style.backgroundColor="",m.setAttribute("width",`${o}`),m.setAttribute("height",`${s}`),m.setAttribute("viewBox",[a-h,u-h,o+2*h,s+2*h].join(","));const w=new Array(g.length);return await Promise.all(g.map(async(C,P)=>{const D=C.cloneNode(!0);SM(C,D,d),await TM(C,D),w[P]=D})),v.append(...w),m.appendChild(v),m}async function BM(e,n){if(!e)return;const r=n.elements||bl(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),i=xt(e,r,!1),{ratio:o=2,fillStyle:s="transparent"}=n,{width:a,height:u}=i,h=a*o,d=u*o,f=await AM(e,r,i,n),{canvas:g,ctx:m}=EM(h,d,s),v=new XMLSerializer().serializeToString(f),w=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(v)}`;try{const C=await CM(w);return m.drawImage(C,0,0,h,d),g.toDataURL("image/png")}catch(C){console.error("Error converting SVG to image:",C);return}}var ao;(function(e){e.medias="medias",e.elements="elements"})(ao||(ao={}));var pi;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(pi||(pi={}));const Mv=(e,n)=>`<plait>${bM(JSON.stringify({type:e,data:n}))}</plait>`,Rv=e=>{var r;let n=(r=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:r[1];if(n){n=FM(n);try{const i=JSON.parse(n);if(i){if(i.type===ao.elements)return{elements:i.data};if(i.type===ao.medias)return{medias:i.data}}}catch(i){return console.error(i),null}}return null},mC=e=>{const n=document.implementation.createHTMLDocument("");return n.documentElement.innerHTML=e.trim(),n.body.textContent||n.body.innerText||""},rS=()=>"clipboard"in navigator&&"write"in navigator.clipboard,MM=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,iS=()=>"clipboard"in navigator&&"read"in navigator.clipboard,RM=(e,n,r)=>({type:e,elements:n,text:r}),kM=(e,n)=>{const{type:r,elements:i,text:o}=e;return r===n.type?{type:r,elements:i.concat(n.elements),text:o+" "+n.text}:e},d0=(e,n)=>e?kM(e,n):n,bM=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),FM=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),OM=(e,n,r)=>{e==null||e.setData("text/html",Mv(n,r))},IM=(e,n)=>{e==null||e.setData("text/plain",n)},LM=e=>{const n=e==null?void 0:e.getData("text/html");if(n){const r=Rv(n);if(r)return r}return{}},HM=e=>{if(!e)return{};const n=e==null?void 0:e.getData("text/plain");if(n){const r=Rv(n);if(r)return r}return{text:n}},NM=async(e,n,r="")=>{let i=r;rS()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([Mv(e,n)],{type:"text/html"}),"text/plain":new Blob([i??JSON.stringify(n)],{type:"text/plain"})})])},GM=async()=>{if(!iS())return{};const e=await navigator.clipboard.read();let n={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const r of e){if(_M(r)){const i=r.types.filter(u=>u.match(/^image\//)),s=(await Promise.all(i.map(u=>r.getType(u)))).filter(Boolean).map(u=>URL.createObjectURL(u));return{files:await Promise.all(s.map(async u=>{const h=await(await fetch(u)).blob();return new File([h],"plait-file",{type:h.type})}))}}if(r.types.includes("text/html")){const i=await vC(await r.getType("text/html")),o=Rv(i);if(o)return o;i&&i.trim()&&(n={text:mC(i)})}if(r.types.includes("text/plain")){const i=await vC(await r.getType("text/plain"));n={text:mC(i)}}}return n},_M=e=>e.types.find(n=>n.match(/^image\//)),vC=e=>new Promise((n,r)=>{const i=new FileReader;i.addEventListener("loadend",()=>{const o=i.result;n(o)}),i.addEventListener("error",()=>{r(i.error)}),i.readAsText(e)}),jM=async e=>{let n={};return e?e.files.length?{files:Array.from(e.files)}:(n=LM(e),Object.keys(n).length===0&&(n=HM(e)),n):iS()?await GM():n},zM=async(e,n)=>{if(!n)return;const{type:r,elements:i,text:o}=n;if(rS())return await NM(r,i,o);if(e){OM(e,r,i),IM(e,o);return}if(MM())return await navigator.clipboard.writeText(Mv(r,i))};function _n(e){return!!mv.get(e)}function $M(e){O.getBoardContainer(e).classList.add("selection-moving"),mv.set(e,!0),vo(e,!0)}function WM(e){O.getBoardContainer(e).classList.remove("selection-moving"),mv.delete(e),vo(e,!1)}function yC(e){const n=Vd(e);return e.pointer!==gt.hand&&!n.isDisabledSelection&&!O.isReadonly(e)}function wC(e){return!!e.operations.find(n=>jo.isSetSelectionOperation(n))}function VM(e){const n=i0.get(e);if(n)return n.elements}function UM(e){return i0.get(e)}function XM(e){i0.delete(e)}function KM(e){const n=Me(e),r=xt(e,n,!1),i=Nn(e,r);if(i.width>0&&i.height>0&&n.length>1){const o=vi(e,R.inflate(i,Jt),{stroke:fr,strokeWidth:Jt,fillStyle:"solid"});o.classList.add(Oc,l6);const s=cr(n);return s&&Vr(o,R.getCenterPoint(i),s),o}return null}function qM(e,n,r){if(!e.selection)return;const i=Me(e);if(!dl.isCollapsed(e.selection)){let o=[...i];n.forEach(s=>{s.groupId?o.push(...bv(e,s)):o.push(s)}),Bi(e,vv(o));return}if(dl.isCollapsed(e.selection)){const o=n[0],s=ss(e,o,!0);if(s.length>0){const a=Kr(e,s[s.length-1],!0)||[],u=i.some(h=>a.map(d=>d.id).includes(h.id));r?YM(e,n,u,a):ZM(e,n,u,s)}}}function YM(e,n,r,i){const o=Me(e);let s=[...o];const a=n[0];let u=[];if(!r)u=i;else{const h=o.some(f=>f.id===a.id),d=i.filter(f=>o.includes(f));h?u=d.filter(f=>f.id!==a.id):u.push(...d,...n)}i.forEach(h=>{s.includes(h)&&s.splice(s.indexOf(h),1)}),u.length&&s.push(...u),Bi(e,vv(s))}function ZM(e,n,r,i){let o=[...n];const s=oS(e,i);if(s.length>0)if(s.length>1)o=wf(e,s[s.length-2],!0);else{const a=e.getOneHitElement(n);a&&(o=[a])}else{const a=wf(e,i[i.length-1],!0);if(!r)o=a;else{const u=e.getOneHitElement(n);u&&(o=[u])}}Bi(e,vv(o))}const Vd=e=>e.getPluginOptions(Ri.withSelection),dm=(e,n)=>{e.setPluginOptions(Ri.withSelection,n)},Kr=(e,n,r,i)=>{let o=[];const s=e.children.filter(a=>a.groupId===n.id);return r?s.forEach(a=>{Xn.isGroup(a)?(i&&o.push(a),o.push(...Kr(e,a,r,i))):o.push(a)}):o=i?s:s.filter(a=>!Xn.isGroup(a)),o},wf=(e,n,r,i)=>{const o=Kr(e,n,r,i),s=[];return o.forEach(a=>{kn(a,u=>{s.push(u)},()=>!0)}),s},kv=(e,n,r)=>{const i=wf(e,n,r);return xt(e,i,!1)},ss=(e,n,r,i)=>{const o=(i||e.children).find(s=>s.id===(n==null?void 0:n.groupId));if(!o)return[];{const s=[o],a=ss(e,o,r,i);return a.length&&s.push(...a),s}},fm=(e,n)=>{const r=ss(e,n,!0);return r.length?r[r.length-1]:null},bv=(e,n)=>{const r=fm(e,n);return r?wf(e,r,!0):[n]},QM=e=>e.children.filter(r=>Xn.isGroup(r)),gm=(e,n,r)=>{const i=r!=null&&r.length?r:Me(e);return Xn.isGroup(n)?xf(e,n,r):i.map(o=>o.id).includes(n.id)},xf=(e,n,r)=>{const i=r!=null&&r.length?r:Me(e);return Kr(e,n,!0).every(s=>i.map(a=>a.id).includes(s.id))},oS=(e,n,r)=>{const i=[];return n.forEach(o=>{gm(e,o,r)&&i.push(o)}),i},JM=(e,n,r)=>{const i=as(e,n,r),o=[];return i.forEach(s=>{o.push(s);const a=Kr(e,s,!0,!0);o.push(...a.filter(u=>Xn.isGroup(u)))}),o},sS=(e,n,r,i)=>{const o=ss(e,n,!0,i),s=oS(e,o,r);return s.length?s[s.length-1]:null},as=(e,n,r)=>{let i=[];return(n!=null&&n.length?n:Me(e)).forEach(s=>{if(s.groupId){const a=sS(e,s,n,r);a&&!i.includes(a)&&i.push(a)}}),i},Fv=(e,n)=>{let r=[];return(n!=null&&n.length?n:Me(e)).filter(o=>!Xn.isGroup(o)).forEach(o=>{o.groupId&&sS(e,o,n)||r.push(o)}),r},Ov=(e,n)=>Fv(e,n).filter(i=>e.canAddToGroup(i)),e9=(e,n)=>[...as(e,n),...Fv(e,n)],t9=(e,n)=>{const r=Me(e).map(s=>s.id);let i=null;const o=_n(e);return n.forEach(s=>{const a=!r.includes(s.id)&&!o||o;if(s.groupId&&a){i||(i=st());const u=bv(e,s),h=xt(e,u,!1),d=vi(e,h,{stroke:fr,strokeWidth:Jt,strokeLineDash:[5]}),f=cr(u);f&&Vr(d,R.getCenterPoint(h),f),i.append(d)}}),i},n9=e=>({id:St(),type:"group"}),r9=e=>e.every(n=>!n.groupId),aS=e=>e.every(n=>n.groupId&&n.groupId===e[0].groupId),i9=(e,n)=>{const i=e9(e,n).filter(o=>e.canAddToGroup(o));return i.length>1?r9(i)||aS(i):!1},o9=(e,n,r)=>{const i=as(e,n,r);return Me(e).length>0&&i.length>0},lS=(e,n)=>{const r=ss(e,n,!0);let i=null;if(r!=null&&r.length){for(let o=0;o<(r==null?void 0:r.length);o++)if(!xf(e,r[o])){i=r[o];break}}return i},s9=(e,n,r)=>{const i=[...n];l0(e,i),i.pop(),Hc(e,i.map(o=>({element:o,newPath:r})))},Iv=e=>{const n=e.getDeletedFragment([]);e.deleteFragment(n)},xC=(e,n,r)=>{const i=Me(e),o=xt(e,i,!1),s=e.buildFragment(null,o,n);s&&zM(r,s)},Lv=(e,n,r)=>{const i=n!=null&&n.length?n:Me(e),o=xt(e,i,!1),s=e.buildFragment(null,o,pi.duplicate,i),a=s&&JSON.stringify(s),u=a&&JSON.parse(a);u&&e.insertFragment({...u,text:void 0},r||[o.x+o.width/2,o.y+o.height/2],pi.duplicate)},io=2,a9=24;function uS(e,n){return bl(e,{match:i=>e.isAlign(i)&&!n.some(o=>o.id===i.id),recursion:()=>!0,isReverse:!1}).map(i=>{const o=e.getRectangle(i);return Nc(o,i.angle||0)})}function l9(e,n){return n?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function Gu(e,n,r){let i=io;return e.forEach(o=>{const s=u9(n,o,r);Math.abs(s)<Math.abs(i)&&(i=s)}),i}const u9=(e,n,r)=>{const o=Ys(n,r).map(u=>u-e),s=o.map(u=>Math.abs(u)),a=s.indexOf(Math.min(...s));return o[a]},Ys=(e,n)=>{const r=n?"x":"y",i=n?"width":"height";return[e[r],e[r]+e[i]/2,e[r]+e[i]]};function Ga(e,n){let r=1/0,i=e[0];return e.forEach(o=>{const s=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2));s<r&&(r=s,i=o)}),i}const _a=(e,n,r)=>Ys(n,r).includes(e);function cS(e,n,r,i=!0,o=!0,s=!1){let a=[];const u=Ys(n,!0),h=Ys(n,!1),d=[{axis:u[0],isHorizontal:!0,pointRectangles:[]},{axis:u[1],isHorizontal:!0,pointRectangles:[]},{axis:u[2],isHorizontal:!0,pointRectangles:[]},{axis:h[0],isHorizontal:!1,pointRectangles:[]},{axis:h[1],isHorizontal:!1,pointRectangles:[]},{axis:h[2],isHorizontal:!1,pointRectangles:[]}];for(let g=0;g<r.length;g++){const m=r[g];_a(d[0].axis,m,d[0].isHorizontal)&&d[0].pointRectangles.push(m),_a(d[1].axis,m,d[1].isHorizontal)&&d[1].pointRectangles.push(m),_a(d[2].axis,m,d[2].isHorizontal)&&d[2].pointRectangles.push(m),_a(d[3].axis,m,d[3].isHorizontal)&&d[3].pointRectangles.push(m),_a(d[4].axis,m,d[4].isHorizontal)&&d[4].pointRectangles.push(m),_a(d[5].axis,m,d[5].isHorizontal)&&d[5].pointRectangles.push(m)}const f=(g,m,v)=>{const w=R.inflate(R.getBoundingRectangle([n,m]),a9);if(v){const C=[g,w.y],P=[g,w.y+w.height];a.push([C,P])}else{const C=[w.x,g],P=[w.x+w.width,g];a.push([C,P])}};if(i&&d[0].pointRectangles.length){const g=d[0].pointRectangles.length===1?d[0].pointRectangles[0]:Ga(d[0].pointRectangles,n);f(d[0].axis,g,d[0].isHorizontal)}if(i&&s&&d[1].pointRectangles.length){const g=d[1].pointRectangles.length===1?d[1].pointRectangles[0]:Ga(d[1].pointRectangles,n);f(d[1].axis,g,d[1].isHorizontal)}if(i&&d[2].pointRectangles.length){const g=d[2].pointRectangles.length===1?d[2].pointRectangles[0]:Ga(d[2].pointRectangles,n);f(d[2].axis,g,d[2].isHorizontal)}if(o&&d[3].pointRectangles.length){const g=d[3].pointRectangles.length===1?d[3].pointRectangles[0]:Ga(d[3].pointRectangles,n);f(d[3].axis,g,d[3].isHorizontal)}if(o&&s&&d[4].pointRectangles.length){const g=d[4].pointRectangles.length===1?d[4].pointRectangles[0]:Ga(d[4].pointRectangles,n);f(d[4].axis,g,d[4].isHorizontal)}if(o&&d[5].pointRectangles.length){const g=d[5].pointRectangles.length===1?d[5].pointRectangles[0]:Ga(d[5].pointRectangles,n);f(d[5].axis,g,d[5].isHorizontal)}return c9(e,a)}function c9(e,n){const r=st();return n.forEach(i=>{if(!i.length)return;const o=O.getRoughSVG(e).line(i[0][0],i[0][1],i[1][0],i[1][1],{stroke:fr,strokeWidth:1,strokeLineDash:[4,4]});r.appendChild(o)}),r}function hS(e,n){const r=st();return n.forEach(i=>{if(!i.length)return;let o=i[0][1]===i[1][1];const s=O.getRoughSVG(e).line(i[0][0],i[0][1],i[1][0],i[1][1],{stroke:fr,strokeWidth:1});r.appendChild(s),i.forEach(a=>{const u=l9(a,o),h=O.getRoughSVG(e).line(u[0][0],u[0][1],u[1][0],u[1][1],{stroke:fr,strokeWidth:1});r.appendChild(h)})}),r}const dS=(e,n)=>{const r=h0(e,Me(e));let i=gS(e,r);n==="up"&&(i=i.reverse());let o=[];return i.forEach((s,a)=>{const u=s[0],h=s[s.length-1],d=n==="down"?u:h,f=h9(e,d,n);f===-1||d===f||(n==="down"&&(s=s.reverse()),o.push(...s.map(g=>({element:e.children[g],newPath:[f]}))))}),o},fS=(e,n)=>{const r=h0(e,Me(e));let i=gS(e,r),o=[];return n==="down"&&(i=i.reverse()),i.forEach(s=>{const a=s[0],u=s[s.length-1],h=n==="down"?a:u,d=e.children[h],f=lS(e,d);let g=n==="down"?0:e.children.length-1;if(f){const m=l0(e,Kr(e,f,!0,!0));g=n==="down"?e.children.indexOf(m[0]):e.children.indexOf(m[m.length-1])}n==="down"&&(s=s.reverse()),o.push(...s.map(m=>({element:e.children[m],newPath:[g]})))}),o},gS=(e,n)=>{let r=0;return n.reduce((i,o,s)=>{if(s>0){const a=e.children[o],u=e.children[n[s-1]],h=o-1===n[s-1]?!0:e.children.every((f,g)=>g>n[s-1]&&g<=o-1?Xn.isGroup(f):!0);let d=!1;if(u!=null&&u.groupId||a!=null&&a.groupId&&(u==null?void 0:u.groupId)!==(a==null?void 0:a.groupId)){let f=!1,g=!1;if(u.groupId){const m=fm(e,u);f=!xf(e,m)}if(a.groupId){const m=fm(e,a);g=!xf(e,m)}d=f||g}(!h||d)&&(r=++r)}return(i[r]||(i[r]=[])).push(o),i},[])},h9=(e,n,r)=>{if(n===0&&r==="down"||n===e.children.length-1&&r==="up")return-1;const i=g=>!(g.isDeleted||Xn.isGroup(g)),o=r==="down"?m6(e.children,g=>i(g),Math.max(0,n-1)):v6(e.children,g=>i(g),n+1),s=e.children[o];if(!s)return-1;const a=[...e.children],u=a[n],h=lS(e,u),d=ss(e,s,!0)||[];if(h&&(u==null?void 0:u.groupId)!==(s==null?void 0:s.groupId)&&!d.find(g=>g.id===h.id))return-1;if(!s.groupId)return o;let f;if(h?f=d[d.indexOf(h)-1]:f=d[d.length-1],f){let g=Kr(e,f,!0,!1);if(g.length)return g.sort((m,v)=>{const w=e.children.findIndex(P=>P.id===m.id),C=e.children.findIndex(P=>P.id===v.id);return w-C}),r==="down"?a.indexOf(g[0]):a.indexOf(g[g.length-1])}return o},pS=e=>pm(e)||d9(e),pm=e=>e.pointerType==="pen",d9=e=>e.pointerType==="touch",f9=(e,n)=>{const r=as(e,n),i=Ov(e),o=[...r,...i],s=n9();if(i9(e)){o.forEach(f=>{const g=O.findPath(e,f);zs.setNode(e,{groupId:s.id},g)});const a=Me(e),u=yM(e,a),h=h0(e,o);if(y6(h)||s9(e,a,[u-1]),aS(o)){const f=i[0].groupId;zs.insertNode(e,{...s,groupId:f},[e.children.length])}else zs.insertNode(e,s,[e.children.length])}},g9=(e,n)=>{const r=as(e,n);o9(e)&&(r.forEach(i=>{bl(e,{match:s=>s.groupId===i.id,recursion:()=>!1}).forEach(s=>{const a=O.findPath(e,s);zs.setNode(e,{groupId:i.groupId||void 0},a)})}),r.map(i=>{const o=O.findPath(e,i),s=e.pathRef(o);return()=>{s.current&&zs.removeNode(e,s.current),s.unref()}}).forEach(i=>{i()}))},p9={addGroup:f9,removeGroup:g9};function mS(e,n){const r={type:"set_selection",properties:e.selection,newProperties:n};e.apply(r)}const m9={setSelection:mS,addSelectionWithTemporaryElements:vS};function vS(e,n){const r=setTimeout(()=>{mS(e,{anchor:[0,0],focus:[0,0]})},0);let i=UM(e);if(i){clearTimeout(i.timeoutId);const o=i.elements;i.elements.push(...n.filter(s=>!o.includes(s))),i.timeoutId=r}else i0.set(e,{timeoutId:r,elements:n})}const v9=e=>{const n=fS(e,"up");Hc(e,n)},y9=e=>{const n=fS(e,"down");Hc(e,n)},w9=e=>{const n=dS(e,"up");Hc(e,n)},x9=e=>{const n=dS(e,"down");Hc(e,n)},C9={moveUp:w9,moveDown:x9,moveToTop:v9,moveToBottom:y9},E9=(e,n)=>{n.map(r=>{const i=O.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&eS(e,o.current),o.unref(),u0(e,r,!0)}}).forEach(r=>{r()})},Hv={removeElements:E9},Te={...C6,...Y6,...m9,...zs,...p9,...C9},cn=(e,n,r)=>(r||(r=0),Array.isArray(e)&&typeof e[0]=="number"?hl(e[0],e[1],n[0],n[1],r):e.map(i=>hl(i[0],i[1],n[0],n[1],r||0))),cr=e=>{var r;let n=((r=e[0])==null?void 0:r.angle)||0;return e.forEach(i=>{i.angle!==n&&!lm((i.angle||0)%(Math.PI/2)-n%(Math.PI/2),0)&&(n=0)}),n},P9=e=>{if(!e.length)return!1;const n=e[0].angle;return n===void 0?!1:!e.some(r=>r.angle!==n)},D9=(e,n)=>{let r=[];for(let u=0;u<e.length;u++){const h=e[u],d=cn(h,[0,0],-n);r.push(R.getRectangleByPoints(d))}const i=R.getBoundingRectangle(r),o=R.getCornerPoints(i),s=cn(o,[0,0],n),a=R.getCenterPoint(R.getRectangleByPoints(s));return R.getRectangleByPoints(cn(s,a,-n))},S9=(e,n,r)=>{const i=R.getCenterPoint(e),[o]=cn([i],n,r),s=o[0]-i[0],a=o[1]-i[1];return{offsetX:s,offsetY:a}},mm=(e,n,r)=>{const{offsetX:i,offsetY:o}=S9(R.getRectangleByPoints(e),n,r);return e.map(s=>[s[0]+i,s[1]+o])},Fi=e=>yS(e.angle),yS=e=>e&&e!==0,Oi=(e,n)=>{if(Fi(n)){let r=R.getRectangleByPoints(n.points);const i=R.getCenterPoint(r);return cn(e,i,n.angle)}else return null},T9=(e,n)=>{if(yS(n)){let r=R.getRectangleByPoints(e);const i=R.getCenterPoint(r);return cn(e,i,n)}else return null},ts=(e,n,r,i=!1)=>{if(Fi(r)){let o=R.getRectangleByPoints(r.points);const s=i?Nn(e,o):o,a=R.getCenterPoint(s);return cn(n,a,r.angle?-r.angle:0)}else return null},Nc=(e,n)=>{if(n){const r=R.getCornerPoints(e),i=R.getCenterPoint(e);return R.getRectangleByPoints(cn(r,i,n))}return e},A9=e=>{const n=Math.abs(e)%Math.PI;return n>=1/4*Math.PI&&n<=3/4*Math.PI};function vm(e){return e/180*Math.PI}function B9(e,n,r){const i=xt(e,n,!1),o=R.getCenterPoint(i);n.forEach(s=>{const a=s.angle,u=mm(s.points,o,rc(r)),h=O.findPath(e,s);Te.setNode(e,{points:u,angle:rc((a||0)+r)},h)})}const rc=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,M9=(e,n,r)=>{const i=5*Math.PI/2+Math.atan2(e[1]-r[1],e[0]-r[0]),o=5*Math.PI/2+Math.atan2(n[1]-r[1],n[0]-r[0]);return rc(o-i)},R9=e=>e==null?void 0:e.angle,Vr=(e,n,r)=>{if(r===0){e.removeAttribute("transform");return}var i=n[0],o=n[1];let s=Math.cos(r),a=Math.sin(r),h="matrix("+[s,a,-a,s,i*(1-s)+o*a,o*(1-s)-i*a].join(",")+")";e.setAttribute("transform",`${h}`)};function xt(e,n,r){const i=[],o=s=>{const a=e.getRectangle(s);if(a){const u=R.getCornerPoints(a),h=Oi(u,s)||u;i.push(h)}else console.error("can not get rectangle of element:",s)};if(n.forEach(s=>{r?kn(s,a=>o(a),a=>e.isRecursion(a)):o(s)}),i.length>0)if(P9(n)){const s=cr(n);return D9(i,s)}else{const s=i.reduce((a,u)=>a.concat(u),[]);return R.getRectangleByPoints(s)}else return{x:0,y:0,width:0,height:0}}function $r(e,n,r){const i=!r&&Ud(e).get(n);return i||(r||(r=bl(e,{match:s=>!0,recursion:s=>!0})),r.find(s=>s.id===n))}function Ud(e){const n=tm.get(e);if(!n)throw new Error("can not resolve element map");return n}function bl(e,n){let r=[];const i=n.isReverse??!0;return kn(e,o=>{!O.isBoard(o)&&n.match(o)&&r.push(o)},o=>O.isBoard(o)?!0:sa(e)(o)&&n.recursion(o),i),r}var Zt;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(Zt||(Zt={}));const Yn="#333333",wS={mode:Zt.default,boardBackground:"#ffffff",textColor:Yn},xS={mode:Zt.colorful,boardBackground:"#ffffff",textColor:Yn},CS={mode:Zt.soft,boardBackground:"#f5f5f5",textColor:Yn},ES={mode:Zt.retro,boardBackground:"#f9f8ed",textColor:Yn},PS={mode:Zt.dark,boardBackground:"#141414",textColor:"#FFFFFF"},DS={mode:Zt.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},k9=[wS,xS,CS,ES,PS,DS],O={isBoard(e){const n=cC.get(e);if(n!==void 0)return n;const r=typeof e.onChange=="function"&&typeof e.apply=="function";return cC.set(e,r),r},isAlive(e){return!!sm.get(e)},findPath(e,n){const r=[];let i=n;for(;;){const o=_s.get(i);if(o==null){if(O.isBoard(i))return r;break}const s=rl.get(i);if(s==null)break;r.unshift(s),i=o}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(n)}`)},getHost(e){return im.get(e)},getElementLowerHost(e){var n;return(n=Yi.get(e))==null?void 0:n.lowerHost},getElementHost(e){var n;return(n=Yi.get(e))==null?void 0:n.host},getElementUpperHost(e){var n;return(n=Yi.get(e))==null?void 0:n.upperHost},getElementTopHost(e){var n;return(n=Yi.get(e))==null?void 0:n.topHost},getActiveHost(e){var n;return(n=Yi.get(e))==null?void 0:n.activeHost},getRoughSVG(e){return rm.get(e)},getBoardContainer(e){var n;return(n=Yi.get(e))==null?void 0:n.container},getBoardContext(e){return om.get(e)},getRectangle(e){return xt(e,e.children,!0)},getViewportContainer(e){var n;return(n=Yi.get(e))==null?void 0:n.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!nm.get(e)},getPointer(e){return e.pointer},isPointer(e,n){return e.pointer===n},isInPointer(e,n){const r=e.pointer;return n.includes(r)},getMovingPointInBoard(e){return am.get(e)},isMovingPointInBoard(e){const n=FD.get(e),r=O.getBoardContainer(e).getBoundingClientRect();return!!(n&&Ic(n[0],n[1],r)===0)},getThemeColors(e){return e.options.themeColors||k9}};var gt;(function(e){e.hand="hand",e.selection="selection"})(gt||(gt={}));const b9=e=>e.type==="set_viewport",F9=e=>e.type==="set_selection",O9=e=>e.type==="set_theme",I9=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:n,path:r}=e;if(Ue.equals(n,r))return e;const i=Ue.transform(r,e),o=Ue.transform(Ue.next(r),e);return{...e,path:i,newPath:o}}case"set_node":{const{properties:n,newProperties:r}=e;return{...e,properties:r,newProperties:n}}case"set_selection":{const{properties:n,newProperties:r}=e;return n==null?{...e,properties:r,newProperties:null}:r==null?{...e,properties:null,newProperties:n}:{...e,properties:r,newProperties:n}}case"set_viewport":{const{properties:n,newProperties:r}=e;return n==null?{...e,properties:r,newProperties:r}:r==null?{...e,properties:n,newProperties:n}:{...e,properties:r,newProperties:n}}case"set_theme":{const{properties:n,newProperties:r}=e;return{...e,properties:r,newProperties:n}}}},jo={isSetViewportOperation:b9,isSetSelectionOperation:F9,isSetThemeOperation:O9,inverse:I9},We={isEquals(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]},isHorizontal(e,n,r=0){return e&&n&&We.isOverHorizontal([e,n],r)},isOverHorizontal(e,n=0){return e.every(r=>Math.abs(r[1]-e[0][1])<=n)},isVertical(e,n,r=0){return e&&n&&We.isOverVertical([e,n],r)},isOverVertical(e,n=0){return e.every(r=>Math.abs(r[0]-e[0][0])<=n)},isAlign(e,n=0){return We.isOverHorizontal(e,n)||We.isOverVertical(e,n)},getOffsetX(e,n){return n[0]-e[0]},getOffsetY(e,n){return n[1]-e[1]}},jp=new WeakMap,Tn=new WeakMap,yd=new WeakMap;var tt;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(tt||(tt={}));const L9=e=>e===tt.left||e===tt.right,Xn={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function H9(e){return N9(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function N9(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function G9(e,n){if(Array.isArray(e))for(let r=0;r<e.length;r++)n(e[r]);else{const r=e[Symbol.iterator]();let i;for(;!(i=r.next()).done;)n(i.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const _9=(e,n)=>n;class j9{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||_9}forEachItem(n){let r;for(r=this._itHead;r!==null;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,i=this._removalsHead,o=0,s=null;for(;r||i;){const a=!i||r&&r.currentIndex<EC(i,o,s)?r:i,u=EC(a,o,s),h=a.currentIndex;if(a===i)o--,i=i._nextRemoved;else if(r=r._next,a.previousIndex==null)o++;else{s||(s=[]);const d=u-o,f=h-o;if(d!=f){for(let m=0;m<d;m++){const v=m<s.length?s[m]:s[m]=0,w=v+m;f<=w&&w<d&&(s[m]=v+1)}const g=a.previousIndex;s[g]=f-d}}u!==h&&n(a,u,h)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;r!==null;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;r!==null;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;r!==null;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;r!==null;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;r!==null;r=r._nextIdentityChange)n(r)}diff(n){if(n==null&&(n=[]),!H9(n))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._itHead,i=!1,o,s,a;if(Array.isArray(n)){this.length=n.length;for(let u=0;u<this.length;u++)s=n[u],a=this._trackByFn(u,s),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,s,a,u),i=!0):(i&&(r=this._verifyReinsertion(r,s,a,u)),Object.is(r.item,s)||this._addIdentityChange(r,s)),r=r._next}else o=0,G9(n,u=>{a=this._trackByFn(o,u),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,u,a,o),i=!0):(i&&(r=this._verifyReinsertion(r,u,a,o)),Object.is(r.item,u)||this._addIdentityChange(r,u)),r=r._next,o++}),this.length=o;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,i,o){let s;return n===null?s=this._itTail:(s=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,s,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,o),n!==null?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,s,o)):n=this._addAfter(new z9(r,i),s,o)),n}_verifyReinsertion(n,r,i,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?n=this._reinsertAfter(s,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,s=n._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(n,r,i),this._addToMoves(n,i),n}_moveAfter(n,r,i){return this._unlink(n),this._insertAfter(n,r,i),this._addToMoves(n,i),n}_addAfter(n,r,i){return this._insertAfter(n,r,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,r,i){const o=r===null?this._itHead:r._next;return n._next=o,n._prev=r,o===null?this._itTail=n:o._prev=n,r===null?this._itHead=n:r._next=n,this._linkedRecords===null&&(this._linkedRecords=new CC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);const r=n._prev,i=n._next;return r===null?this._itHead=i:r._next=i,i===null?this._itTail=r:i._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new CC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}}class z9{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $9{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let i;for(i=this._head;i!==null;i=i._nextDup)if((r===null||r<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const r=n._prevDup,i=n._nextDup;return r===null?this._head=i:r._nextDup=i,i===null?this._tail=r:i._prevDup=r,this._head===null}}class CC{constructor(){this.map=new Map}put(n){const r=n.trackById;let i=this.map.get(r);i||(i=new $9,this.map.set(r,i)),i.add(n)}get(n,r){const i=n,o=this.map.get(i);return o?o.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function EC(e,n,r){const i=e.previousIndex;if(i===null)return i;let o=0;return r&&i<r.length&&(o=r[i]),i+n+o}class SS{constructor(n){this.board=n,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(n,r){this.initialized=!0,this.children=n,n.forEach((i,o)=>{rl.set(i,o),_s.set(i,r.parent);const s=zp(this.board,i,o,r.parent),a=DC(this.board,s),u=PC(this.board,a,s,r);this.instances.push(u),this.contexts.push(s)}),this.differ=new j9(W9),this.differ.diff(n)}update(n,r){if(!this.initialized){this.initialize(n,r);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:i,parent:o}=r,s=this.differ.diff(n);if(s){const a=[],u=[];let h=null;s.forEachItem(d=>{var m;rl.set(d.item,d.currentIndex),_s.set(d.item,r.parent);const f=d.previousIndex===null?void 0:this.contexts[d.previousIndex],g=zp(i,d.item,d.currentIndex,o,f);if(d.previousIndex===null){const v=DC(i,g),w=PC(i,v,g,r);a.push(g),u.push(w)}else{const v=this.instances[d.previousIndex];v.context=g,u.push(v),a.push(g)}(d.item===this.children[0]||d.item.id===((m=this.children[0])==null?void 0:m.id))&&(h=d.currentIndex)}),s.forEachOperation(d=>{if(d.currentIndex===null){const f=this.instances[d.previousIndex];f==null||f.destroy()}d.previousIndex!==null&&d.currentIndex!==null&&AS(d.item,d.currentIndex,r,h)}),this.instances=u,this.contexts=a,this.children=n}else{const a=[];this.children.forEach((u,h)=>{rl.set(u,h),_s.set(u,r.parent);const d=this.contexts[h],f=this.instances[h],g=zp(i,u,h,o,d);f.context=g,a.push(g)}),this.contexts=a}}destroy(){this.children.forEach((n,r)=>{this.instances[r]&&this.instances[r].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const W9=(e,n)=>n.id,PC=(e,n,r,i)=>{const o=new n;o.context=r,e.normalizeElement(r);try{o.initialize()}catch(a){Wo()&&console.error("list-render-initialize",a,"context",r)}const s=o.getContainerG();return TS(r.index,s,i),o.initializeListRender(),o},DC=(e,n)=>e.drawElement(n),zp=(e,n,r,i,o)=>{var h;let s=js(e,n);const a=o&&o.element;return a&&a!==n&&js(e,a)&&(s=!0,X6(e,a,n)),{element:n,parent:i,board:e,selected:s,index:r,hasThemeChanged:!!((h=e.operations)!=null&&h.find(d=>d.type==="set_theme"))}},TS=(e,n,r,i=null)=>{const{parent:o,parentG:s}=r;if(O.isBoard(o))if(e>0){const a=o.children[e-1];yt.getContainerG(a,{suppressThrow:!1}).insertAdjacentElement("afterend",n)}else if(i!==null){const a=o.children[i],u=a&&yt.getContainerG(a,{suppressThrow:!0});if(a&&u)s.insertBefore(n,u);else throw new Error("fail to mount container on moving")}else s.append(n);else if(e>0){const a=o.children[e-1];yt.getElementG(a).insertAdjacentElement("afterend",n)}else if(i){const a=o.children[i],u=a&&O.findPath(r.board,a),h=u&&dt.first(r.board,u),d=h&&yt.getContainerG(h,{suppressThrow:!1});if(d)s.insertBefore(n,d);else throw new Error("fail to mount container on moving")}else{let a=yt.getElementG(o);s.insertBefore(n,a)}},AS=(e,n,r,i)=>{const o=yt.getContainerG(e,{suppressThrow:!1});TS(n,o,r,i),e.children&&!yt.isRootElement(e)&&r.board.isExpanded(e)&&e.children.forEach((s,a)=>{AS(s,a,{...r,parent:e},null)})};class V9{get hasChildren(){return!!this.element.children}set context(n){f6(this)&&this.beforeContextChange(n);const r=this._context;if(this._context=n,this.initialized){const i=this.getElementG(),o=this.getContainerG();ku.set(this.element,i),bu.set(this.element,o),Ud(this.board).set(this.element.id,this.element),Fu.set(this.element,this.ref),this.updateListRender(),g6(this)&&this.onContextChanged(n,r)}else yt.isRootElement(this.element)&&this.hasChildren?(this._g=st(),this._containerG=st(),this._containerG.append(this._g)):(this._g=st(),this._containerG=this._g),ku.set(this.element,this._g),bu.set(this.element,this._containerG),Fu.set(this.element,this.ref),Ud(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(n){this.ref=n,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(yt.isRootElement(this.element))this._rootContainerG=this._containerG;else{const n=O.findPath(this.board,this.element),r=dt.get(this.board,n.slice(0,1));this._rootContainerG=yt.getContainerG(r,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new SS(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var n;ku.get(this.element)===this._g&&ku.delete(this.element),Ud(this.board).delete(this.element.id),bu.get(this.element)===this._containerG&&bu.delete(this.element),Fu.get(this.element)===this.ref&&Fu.set(this.element,this.ref),u0(this.board,this.element),this.getContainerG().remove(),(n=this.listRender)==null||n.destroy()}}class U9{constructor(){this.uploadingFiles=[]}getUploadingFile(n){return this.uploadingFiles.find(r=>r.url===n)}setUploadingFile(n){return this.uploadingFiles.push(n)}removeUploadingFile(n){this.uploadingFiles=this.uploadingFiles.filter(r=>r.url!==n.url)}}const X9={transform(e,n){const{current:r}=e;if(r==null)return;const i=Ue.transform(r,n);e.current=i,i==null&&e.unref()}};function K9(e,n){const r={viewport:{zoom:1},children:e,theme:{themeColorMode:Zt.default},operations:[],history:{redos:[],undos:[]},selection:null,options:n||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:n!=null&&n.readonly?gt.hand:gt.selection,undo:()=>{},redo:()=>{},apply:i=>{for(const o of r.pathRefs())X9.transform(o,i);r.operations.push(i),Te.transform(r,i),$d.get(r)||($d.set(r,!0),Promise.resolve().then(()=>{$d.set(r,!1),r.onChange(),r.afterChange(),r.operations=[]}))},pathRef:(i,o)=>{const s=(o==null?void 0:o.affinity)||"forward",a={current:i,affinity:s,unref(){const{current:h}=a;return r.pathRefs().delete(a),a.current=null,h}};return r.pathRefs().add(a),a},pathRefs:()=>{let i=hC.get(r);return i||(i=new Set,hC.set(r,i)),i},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>KM(r),mousedown:i=>{},mousemove:i=>{},mouseleave:i=>{},globalMousemove:i=>{},mouseup:i=>{},globalMouseup:i=>{},keyDown:i=>{},globalKeyDown:i=>{},keyUp:i=>{},dblClick:i=>{},buildFragment:(i,o,s,a)=>i,insertFragment:(i,o,s)=>{},deleteFragment:i=>{Hv.removeElements(r,i)},getDeletedFragment:i=>i,getRelatedFragment:(i,o)=>i,normalizeElement:i=>{},drawElement:i=>{throw new Error(`can not resolve plugin element component type: ${i.element.type}`)},isWithinSelection:i=>!1,isRectangleHit:i=>!1,isHit:i=>!1,isInsidePoint:i=>!1,getOneHitElement:i=>i[0],isRecursion:i=>!0,isMovable:i=>!1,getRectangle:i=>null,applyTheme:i=>{},isAlign:i=>!1,pointerDown:i=>{},pointerMove:i=>{},pointerUp:i=>{},pointerCancel:i=>{},pointerOut:i=>{},pointerLeave:i=>{},globalPointerMove:i=>{},globalPointerUp:i=>{},drop:i=>!1,isImageBindingAllowed:i=>!1,canAddToGroup:i=>!0,canSetZIndex:i=>!0,isExpanded:i=>!0};return r}function q9(e){const{onChange:n,afterChange:r}=e;return e.onChange=()=>{const i=ff.get(e);i&&i(),n()},e.afterChange=()=>{const i=gf.get(e);i&&i(),r()},e}const SC=(e,n)=>O.isPointer(e,gt.selection)&&pS(n),TC="Space";function Y9(e){const{pointerDown:n,pointerMove:r,globalPointerUp:i,keyDown:o,keyUp:s,pointerUp:a}=e;let u=!1,h=null,d=null,f=!1,g=!1;return e.pointerDown=m=>{const v=e.getPluginOptions(Ri.withHand),w=Ze(e,Je(e,m.x,m.y)),C=_D(e,w);((v==null?void 0:v.isHandMode(e,m))||O.isPointer(e,gt.hand)||SC(e,m)&&!C||g)&&bi(m)?(h={x:m.x,y:m.y},O.isPointer(e,gt.hand)||O.getBoardContainer(e).classList.add("viewport-moving")):b6(m)&&(f=!0,m.preventDefault(),h={x:m.x,y:m.y},u=!0,O.getBoardContainer(e).classList.add("viewport-moving")),d=m,n(m)},e.pointerMove=m=>{const v=e.getPluginOptions(Ri.withHand),w=kD+4;if(h&&!u&&!_n(e)&&d&&Ke(d.x,d.y,m.x,m.y)>w&&!fl(e)&&(u=!0,O.getBoardContainer(e).classList.add("viewport-moving")),((v==null?void 0:v.isHandMode(e,m))||O.isPointer(e,gt.hand)||SC(e,m)||f||g)&&u&&h&&!_n(e)&&!fl(e)){const P=O.getViewportContainer(e),D=P.scrollLeft-(m.x-h.x),x=P.scrollTop-(m.y-h.y);qD(e,D,x,!1),h.x=m.x,h.y=m.y}r(m)},e.pointerUp=m=>{u||a(m)},e.globalPointerUp=m=>{h&&(h=null),u=!1,O.getBoardContainer(e).classList.remove("viewport-moving"),f=!1,i(m)},e.keyDown=m=>{m.code===TC&&(!e.options.readonly&&!O.isPointer(e,gt.hand)&&(g=!0,dm(e,{isDisabledSelection:!0}),O.getBoardContainer(e).classList.add("viewport-moving")),m.preventDefault()),o(m)},e.keyUp=m=>{!e.options.readonly&&m.code===TC&&(g=!1,dm(e,{isDisabledSelection:!1}),O.getBoardContainer(e).classList.remove("viewport-moving")),s(m)},e}function Z9(e){const{apply:n,keyDown:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:i}=e,{redos:o}=i;if(o.length>0){const s=o[o.length-1];li.withoutSaving(e,()=>{for(const a of s)e.apply(a)}),i.redos.pop(),i.undos.push(s)}},e.undo=()=>{const{history:i}=e,{undos:o}=i;if(o.length>0){const s=o[o.length-1];li.withoutSaving(e,()=>{const a=s.map(jo.inverse).reverse();for(const u of a)e.apply(u)}),i.redos.push(s),i.undos.pop()}},e.apply=i=>{const{operations:o,history:s}=e,{undos:a}=s,u=a[a.length-1],h=u&&u[u.length-1];let d=li.isSaving(e),f=li.isMerging(e);if(d==null&&(d=_6(i)),d){if(f||(u==null?f=!1:o.length!==0?f=!0:f=G6(i,h)),li.isSplittingOnce(e)&&(f=!1,li.setSplittingOnce(e,void 0)),u&&f)u.push(i);else{const g=[i];a.push(g)}for(;a.length>100;)a.shift();j6(i)&&(s.redos=[])}n(i)},e.keyDown=i=>{if(ft.isHotkey("mod+z",i)){e.undo();return}if(ft.isHotkey("mod+shift+z",i)){e.redo();return}r(i)},e}const Q9=e=>{const{keyDown:n,keyUp:r,globalKeyDown:i}=e;return e.keyDown=o=>{const s=e.getPluginOptions(Ri.withSelection);if(!O.isReadonly(e)&&s.isMultipleSelection&&ft.isHotkey("mod+a",o)){o.preventDefault();let u=[];kn(e,h=>{O.isBoard(h)||u.push(h)},h=>!!(O.isBoard(h)||e.isRecursion(h)),!0),Te.addSelectionWithTemporaryElements(e,u);return}if(!O.isReadonly(e)){if(ft.isKeyHotkey("mod+]",o)){o.preventDefault(),Te.moveUp(e);return}if(ft.isKeyHotkey("mod+[",o)){o.preventDefault(),Te.moveDown(e);return}if(ft.isKeyHotkey("mod+option+",o)){o.preventDefault(),Te.moveToTop(e);return}if(ft.isKeyHotkey("mod+option+",o)){o.preventDefault(),Te.moveToBottom(e);return}}const a=Me(e);if(!O.isReadonly(e)&&a.length>0&&ft.isKeyHotkey("mod+d",o)){o.preventDefault(),Lv(e);return}!O.isReadonly(e)&&a.length>0&&(Hn.isDeleteBackward(o)||Hn.isDeleteForward(o))&&(o.preventDefault(),Iv(e)),n(o)},e.keyUp=o=>{r(o)},e.globalKeyDown=o=>{if(O.getMovingPointInBoard(e)||O.isMovingPointInBoard(e)){if(ft.isHotkey(["mod+=","mod++"],{byKey:!0})(o)){o.preventDefault(),Pt.updateZoom(e,e.viewport.zoom+.1);return}if(ft.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(o)){o.preventDefault(),Pt.fitViewport(e);return}if(ft.isHotkey(["mod+-","mod+shift+-"])(o)){o.preventDefault(),Pt.updateZoom(e,e.viewport.zoom-.1);return}if(ft.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(o)){o.preventDefault(),Pt.updateZoom(e,1);return}}i(o)},e};function J9(e,n,r){const i=uS(e,r),o=st();let s=tR(n,i);const a=rR(e,s,n,i);o.append(a);const u=iR(e,s,n,i);return s=u.snapDelta,o.append(u.snapG),{...s,snapG:o}}function eR(e,n,r){const i=Ys(e,r),o=Gu(n,i[0],r),s=Gu(n,i[1],r),a=Gu(n,i[2],r);return[o,s,a]}function tR(e,n){let r={deltaX:0,deltaY:0};function i(o){let s=0;const a=eR(e,n,o);for(let u=0;u<a.length;u++)if(Math.abs(a[u])<io){s=a[u];break}return s}return r.deltaX=i(!0),r.deltaY=i(!1),r}function nR(e,n){const{deltaX:r,deltaY:i}=e,{x:o,y:s,width:a,height:u}=n;return{x:o+r,y:s+i,width:a,height:u}}function rR(e,n,r,i){const o=nR(n,r);return cS(e,o,i,!0,!0,!0)}function iR(e,n,r,i){let o=n.deltaX,s=n.deltaY;const a=AC(r,i,!0),u=AC(r,i,!1),h=[...a.lines,...u.lines];return a.delta&&(o=a.delta),u.delta&&(s=u.delta),{snapDelta:{deltaX:o,deltaY:s},snapG:hS(e,h)}}function AC(e,n,r){var x,k;let i=[],o=0,s=[];const a=r?"x":"y",u=r?"width":"height",h=e[a]+e[u]/2;n.forEach(T=>{(r?oR(T,e):sR(T,e))&&!R.isHit(T,e)&&s.push(T)}),s=[...s,e].sort((T,H)=>T[a]-H[a]);const d=[];let f=0,g,m;for(let T=0;T<s.length;T++)for(let H=T+1;H<s.length;H++){const z=s[T],U=s[H],q=U[a]-(z[a]+z[u]);let te=1/0;(x=d[T])!=null&&x.after?d[T].after.push({distance:q,index:H}):d[T]={...d[T],after:[{distance:q,index:H}]},(k=d[H])!=null&&k.before?d[H].before.push({distance:q,index:T}):d[H]={...d[H],before:[{distance:q,index:T}]};let ne=(z[a]+z[u]+U[a])/2;te=Math.abs(ne-h),te<io&&(f=(U[a]-(z[a]+z[u])-e[u])/2,o=ne-h,g=T,m=H);const le=U[a]-(z[a]+z[u]);ne=U[a]+U[u]+le+e[u]/2,te=Math.abs(ne-h),(!f||f!==le)&&te<io&&(f=le,g=H,o=ne-h);const Q=U[a]-(z[a]+z[u]);ne=z[a]-Q-e[u]/2,te=Math.abs(ne-h),!f&&te<io&&(f=Q,m=T,o=ne-h)}const v=s.indexOf(e);let w=[],C=[];if(g!==void 0&&(w.push(g),P(f,d[g],"before",w)),m!==void 0&&(C.push(m),P(f,d[m],"after",C)),w.length||C.length){const T=[...w.reverse(),v,...C];e[a]+=o;for(let H=1;H<T.length;H++)i.push(D(s[T[H-1]],s[T[H]]))}function P(T,H,z,U){const q=H[z],te=d.indexOf(H);if(!(te===0&&z==="before"||te===d.length-1&&z==="after")){for(let ne=0;ne<q.length;ne++)if(Math.abs(q[ne].distance-T)<.1){U.push(q[ne].index),P(T,d[q[ne].index],z,U);return}}}function D(T,H){const z=a==="x"?"y":"x",U=u==="width"?"height":"width",te=[T[z],T[z]+T[U],H[z],H[z]+H[U]].sort((Q,J)=>Q-J),ne=(te[1]+te[2])/2,le=3;return r?[[T.x+T.width+le,ne],[H.x-le,ne]]:[[ne,T.y+T.height+le],[ne,H.y-le]]}return{delta:o,lines:i}}function oR(e,n){return!(e.y+e.height<n.y||e.y>n.y+n.height)}function sR(e,n){return!(e.x+e.width<n.x||e.x>n.x+n.width)}function aR(e){const{pointerDown:n,pointerMove:r,globalPointerUp:i,globalPointerMove:o,globalKeyDown:s,keyUp:a}=e;let u=0,h=0,d=!1,f,g=[],m=null,v=null,w=null,C,P,D=null;e.globalKeyDown=k=>{O.isReadonly(e)||ft.isKeyHotkey("option",k)&&(k.preventDefault(),f&&g.length&&!O.hasBeenTextEditing(e)&&(D=BC(e,g,u,h),D&&O.getElementTopHost(e).append(D))),s(k)},e.keyUp=k=>{if(!O.isReadonly(e)&&D&&f&&g.length&&!O.hasBeenTextEditing(e)){k.preventDefault();const T=ym(e,g,u,h);O.getBoardContainer(e).classList.add("element-moving"),gC(e,T)}D==null||D.remove(),a(k)},e.pointerDown=k=>{if(O.isReadonly(e)||!O.isPointer(e,gt.selection)||!bi(k)){n(k);return}const T=Ze(e,Je(e,k.x,k.y));if(C=Ni(e,T,H=>e.isMovable(H)),w=BS(e),P=C&&w.includes(C),C&&P)f=T,g=w,v=xt(e,g,!0);else if(C){f=T;const H=e.getRelatedFragment([],[C]);g=[...bv(e,C),...H],v=xt(e,g,!0)}else{const H=w.length>0&&xt(e,w,!1);H&&R.isPointInRectangle(H,T)&&(f=T,g=w,v=H)}n(k)},e.pointerMove=k=>{if(f&&g.length&&!O.hasBeenTextEditing(e)){d||(d=!0),m==null||m.remove(),D==null||D.remove();const T=Ze(e,Je(e,k.x,k.y));u=T[0]-f[0],h=T[1]-f[1],(Ke(...T,...f)>fv||wM(e).length>0)&&(C&&!P&&w&&w.length>0&&(vS(e,[]),C=void 0,w=null,P=void 0),mi(e,"with-moving",()=>{if(!v)return;const z={...v,x:v.x+u,y:v.y+h},U=Nc(z,cr(g)),q=J9(e,U,g);if(u+=q.deltaX,h+=q.deltaY,m=q.snapG,m.classList.add(MD),O.getElementTopHost(e).append(m),k.altKey)D=BC(e,g,u,h),D&&O.getElementTopHost(e).append(D);else{const te=ym(e,g,u,h);O.getBoardContainer(e).classList.add("element-moving"),gC(e,te)}}))}d&&k.preventDefault(),r(k)},e.globalPointerMove=k=>{f&&(S6(e,k.x,k.y)||x(e)),o(k)},e.globalPointerUp=k=>{if(k.altKey&&g.length){const T=Nv(e,g),H=xt(e,T,!1);Lv(e,T,[H.x+u,H.y+h])}d=!1,C=void 0,w=null,P=void 0,f&&x(e),i(k)};function x(k){m==null||m.remove(),D==null||D.remove(),f=null,v=null,u=0,h=0,g=[],fl(k)&&xM(k),Tn.set(k,!1),O.getBoardContainer(k).classList.remove("element-moving")}return lR(e)}function lR(e){const{keyDown:n,keyUp:r}=e;return e.keyDown=i=>{const o=Me(e);if(!O.isReadonly(e)&&o.length>0&&(Hn.isArrow(i)||Hn.isExtendArrow(i))){i.preventDefault();const s=!!i.shiftKey,a=[0,0],u=s?10:1;switch(!0){case(Hn.isMoveUp(i)||Hn.isExtendUp(i)):{a[1]=-u;break}case(Hn.isMoveDown(i)||Hn.isExtendDown(i)):{a[1]=u;break}case(Hn.isMoveBackward(i)||Hn.isExtendBackward(i)):{a[0]=-u;break}case(Hn.isMoveForward(i)||Hn.isExtendForward(i)):{a[0]=u;break}}const h=BS(e);mi(e,"with-arrow-moving",()=>{ym(e,h,a[0],a[1])})}n(i)},e.keyUp=i=>{Tn.set(e,!1),r(i)},e}function BS(e){const n=Me(e),r=e.children.filter(s=>e.isMovable(s)),i=n.filter(s=>r.includes(s)),o=e.getRelatedFragment([]);return i.push(...o),i}function Nv(e,n){return[...n].filter(i=>!Xn.isGroup(i)&&yt.isRootElement(i))}function ym(e,n,r,i){return Nv(e,n).map(a=>{const h=(a.points||[]).map(f=>[f[0]+r,f[1]+i]),d=rl.get(a);return Te.setNode(e,{points:h},[d]),Tn.set(e,!0),dt.get(e,[d])})}function BC(e,n,r,i){let o=null;const s=[];return Nv(e,n).forEach(u=>{kn(u,h=>{s.push(h)},()=>!0)}),s.forEach(u=>{let h=e.getRectangle(u);if(h){h={x:h.x+r,y:h.y+i,width:h.width,height:h.height};const d=vi(e,h,{stroke:fr,strokeWidth:1,fill:Dv,fillStyle:"solid"});o||(o=st(),o.classList.add(MD));const f=R9(u);f&&Vr(d,R.getCenterPoint(h),f),o.append(d)}}),o}const uR=e=>{const n=new Map,r=e;return r.getPluginOptions=i=>n.get(i),r.setPluginOptions=(i,o)=>{const s=r.getPluginOptions(i)||{};n.set(i,{...s,...o})},r};function cR(e){const{buildFragment:n}=e;return e.buildFragment=(r,i,o,s)=>{let a=e.getRelatedFragment(s||[]);if(a&&(s!=null&&s.length&&(a=a.filter(u=>!s.map(h=>h.id).includes(u.id))),a.length)){const u={text:"",type:ao.elements,elements:a};r=d0(r,u)}return n(r,i,o,s)},e}function hR(e){const{pointerDown:n,pointerUp:r,pointerMove:i,globalPointerUp:o,onChange:s,afterChange:a,drawSelectionRectangle:u}=e;let h=null,d=null,f,g,m=!1,v=null,w=null;return e.pointerDown=C=>{!m&&C.shiftKey&&(m=!0),m&&!C.shiftKey&&(m=!1);const P=Ze(e,Je(e,C.x,C.y)),D=_D(e,P),x=Vd(e);O.isPointer(e,gt.selection)&&bi(C)&&!D&&x.isMultipleSelection&&!x.isDisabledSelection&&(pS(C)?v=setTimeout(()=>{h=[C.x,C.y],v=null},120):h=[C.x,C.y]),w=C,n(C)},e.pointerMove=C=>{if(v&&w&&Ke(w.x,w.y,C.x,C.y)>kD&&(clearTimeout(v),v=null),O.isPointer(e,gt.selection)&&h){C.preventDefault(),d=[C.x,C.y];const P=R.getRectangleByPoints([qs(e,...h),qs(e,...d)]);f==null||f.remove(),mi(e,"with-selection",()=>{h&&d&&Te.setSelection(e,{anchor:Ze(e,Je(e,h[0],h[1])),focus:Ze(e,Je(e,d[0],d[1]))})}),$M(e),f=vi(e,P,{stroke:fr,strokeWidth:1,fill:Dv,fillStyle:"solid"}),O.getActiveHost(e).append(f)}i(C)},e.pointerUp=C=>{const P=O.isPointer(e,gt.selection)||O.isPointer(e,gt.hand);if(!bi(C)||kl(e)||!P){r(C);return}const x=Ze(e,Je(e,C.x,C.y)),k={anchor:x,focus:x};Te.setSelection(e,k),r(C)},e.globalPointerUp=C=>{h&&d&&(f==null||f.remove(),WM(e),Te.setSelection(e,{anchor:Ze(e,Je(e,h[0],h[1])),focus:Ze(e,Je(e,d[0],d[1]))}));const P=Vd(e);if(O.isFocus(e)&&!P.isPreventClearSelection){const D=C.target instanceof Node&&O.getBoardContainer(e).contains(C.target),x=C.target instanceof Node&&document.contains(C.target),k=C.target instanceof Element&&C.target.closest(`.${dv}`);!D&&!h&&!k&&x&&Te.setSelection(e,null)}h=null,d=null,v&&(clearTimeout(v),v=null),w=null,o(C)},e.onChange=()=>{const C=Vd(e);if(C.isDisabledSelection&&Al(e),e.operations.forEach(P=>{P.type==="remove_node"&&u0(e,P.node,!0)}),yC(e)&&wC(e))try{m||g==null||g.remove();const P=VM(e);if(P)Bi(e,[...P]);else{let x=ND(e);!C.isMultipleSelection&&x.length>1&&(x=[x[0]]);const k=x.some(H=>H.groupId),T=Me(e);if(k)qM(e,x,m);else{if(e.selection&&dl.isCollapsed(e.selection)){const H=e.getOneHitElement(x);H&&(x=[H])}if(m){const H=[...T];e.selection&&dl.isCollapsed(e.selection)?(x.forEach(z=>{H.includes(z)?H.splice(H.indexOf(z),1):H.push(z)}),Bi(e,H)):(x.forEach(z=>{H.includes(z)||H.push(z)}),Bi(e,[...H]))}else Bi(e,[...x])}}const D=Me(e);XM(e),_n(e)||(g==null||g.remove(),D.length>1&&(g=e.drawSelectionRectangle(),O.getActiveHost(e).append(g)))}catch(P){console.error(P)}s()},e.afterChange=()=>{if(yC(e)&&!wC(e))try{const C=Me(e);C.length&&C.length>1?(g==null||g.remove(),g=e.drawSelectionRectangle(),O.getActiveHost(e).append(g)):g==null||g.remove()}catch(C){console.error(C)}a()},dm(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const dR=e=>{const n=e;return n.getI18nValue=r=>(console.warn(`I18n key "${r}" is not found.`),null),n},f0=(e,n,r="")=>e.getI18nValue(n)||r;var $p={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var MC;function fR(){return MC||(MC=1,function(e){(function(){var n={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var u=arguments[a];u&&(s=o(s,i(u)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var u in s)n.call(s,u)&&s[u]&&(a=o(a,u));return a}function o(s,a){return a?s?s+" "+a:s+a:s}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}($p)),$p.exports}var gR=fR();const jn=oa(gR);var pR=function(e){return typeof e=="function"};function RC(e,n){if(e===n)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],n[r]))return!1;return!0}function MS(e){var n=j.useRef(e);return n.current=e,n}var mR=function(e){var n=MS(e);j.useEffect(function(){return function(){n.current()}},[])},Wp,kC;function Gv(){if(kC)return Wp;kC=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return Wp=e,Wp}var Vp,bC;function vR(){if(bC)return Vp;bC=1;var e=typeof ud=="object"&&ud&&ud.Object===Object&&ud;return Vp=e,Vp}var Up,FC;function RS(){if(FC)return Up;FC=1;var e=vR(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return Up=r,Up}var Xp,OC;function yR(){if(OC)return Xp;OC=1;var e=RS(),n=function(){return e.Date.now()};return Xp=n,Xp}var Kp,IC;function wR(){if(IC)return Kp;IC=1;var e=/\s/;function n(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return Kp=n,Kp}var qp,LC;function xR(){if(LC)return qp;LC=1;var e=wR(),n=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(n,"")}return qp=r,qp}var Yp,HC;function kS(){if(HC)return Yp;HC=1;var e=RS(),n=e.Symbol;return Yp=n,Yp}var Zp,NC;function CR(){if(NC)return Zp;NC=1;var e=kS(),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=e?e.toStringTag:void 0;function s(a){var u=r.call(a,o),h=a[o];try{a[o]=void 0;var d=!0}catch{}var f=i.call(a);return d&&(u?a[o]=h:delete a[o]),f}return Zp=s,Zp}var Qp,GC;function ER(){if(GC)return Qp;GC=1;var e=Object.prototype,n=e.toString;function r(i){return n.call(i)}return Qp=r,Qp}var Jp,_C;function PR(){if(_C)return Jp;_C=1;var e=kS(),n=CR(),r=ER(),i="[object Null]",o="[object Undefined]",s=e?e.toStringTag:void 0;function a(u){return u==null?u===void 0?o:i:s&&s in Object(u)?n(u):r(u)}return Jp=a,Jp}var e1,jC;function DR(){if(jC)return e1;jC=1;function e(n){return n!=null&&typeof n=="object"}return e1=e,e1}var t1,zC;function SR(){if(zC)return t1;zC=1;var e=PR(),n=DR(),r="[object Symbol]";function i(o){return typeof o=="symbol"||n(o)&&e(o)==r}return t1=i,t1}var n1,$C;function TR(){if($C)return n1;$C=1;var e=xR(),n=Gv(),r=SR(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt;function h(d){if(typeof d=="number")return d;if(r(d))return i;if(n(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=n(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var g=s.test(d);return g||a.test(d)?u(d.slice(2),g?2:8):o.test(d)?i:+d}return n1=h,n1}var r1,WC;function bS(){if(WC)return r1;WC=1;var e=Gv(),n=yR(),r=TR(),i="Expected a function",o=Math.max,s=Math.min;function a(u,h,d){var f,g,m,v,w,C,P=0,D=!1,x=!1,k=!0;if(typeof u!="function")throw new TypeError(i);h=r(h)||0,e(d)&&(D=!!d.leading,x="maxWait"in d,m=x?o(r(d.maxWait)||0,h):m,k="trailing"in d?!!d.trailing:k);function T(J){var ie=f,N=g;return f=g=void 0,P=J,v=u.apply(N,ie),v}function H(J){return P=J,w=setTimeout(q,h),D?T(J):v}function z(J){var ie=J-C,N=J-P,A=h-ie;return x?s(A,m-N):A}function U(J){var ie=J-C,N=J-P;return C===void 0||ie>=h||ie<0||x&&N>=m}function q(){var J=n();if(U(J))return te(J);w=setTimeout(q,z(J))}function te(J){return w=void 0,k&&f?T(J):(f=g=void 0,v)}function ne(){w!==void 0&&clearTimeout(w),P=0,f=C=g=w=void 0}function le(){return w===void 0?v:te(n())}function Q(){var J=n(),ie=U(J);if(f=arguments,g=this,C=J,ie){if(w===void 0)return H(C);if(x)return clearTimeout(w),w=setTimeout(q,h),T(C)}return w===void 0&&(w=setTimeout(q,h)),v}return Q.cancel=ne,Q.flush=le,Q}return r1=a,r1}var AR=bS();const BR=oa(AR);var MR=!!(typeof window<"u"&&window.document&&window.document.createElement),i1,VC;function RR(){if(VC)return i1;VC=1;var e=bS(),n=Gv(),r="Expected a function";function i(o,s,a){var u=!0,h=!0;if(typeof o!="function")throw new TypeError(r);return n(a)&&(u="leading"in a?!!a.leading:u,h="trailing"in a?!!a.trailing:h),e(o,s,{leading:u,maxWait:s,trailing:h})}return i1=i,i1}var kR=RR();const bR=oa(kR);function FS(e,n){if(MR){if(!e)return n;var r;return pR(e)?r=e():"current"in e?r=e.current:r=e,r}}var FR=function(e){var n=function(r,i,o){var s=j.useRef(!1),a=j.useRef([]),u=j.useRef([]),h=j.useRef();e(function(){var d,f=Array.isArray(o)?o:[o],g=f.map(function(m){return FS(m)});if(!s.current){s.current=!0,a.current=g,u.current=i,h.current=r();return}(g.length!==a.current.length||!RC(a.current,g)||!RC(u.current,i))&&((d=h.current)===null||d===void 0||d.call(h),a.current=g,u.current=i,h.current=r())}),mR(function(){var d;(d=h.current)===null||d===void 0||d.call(h),s.current=!1})};return n},OR=FR(j.useEffect);function Sn(e,n,r){r===void 0&&(r={});var i=r.enable,o=i===void 0?!0:i,s=MS(n);OR(function(){if(o){var a=FS(r.target,window);if(a!=null&&a.addEventListener){var u=function(d){return s.current(d)},h=Array.isArray(e)?e:[e];return h.forEach(function(d){a.addEventListener(d,u,{capture:r.capture,once:r.once,passive:r.passive})}),function(){h.forEach(function(d){a.removeEventListener(d,u,{capture:r.capture})})}}}},[e,r.capture,r.once,r.passive,o],r.target)}const IR=(e,n,r)=>{Sn("pointerdown",i=>{e.pointerDown(i)},{target:r}),Sn("pointermove",i=>{am.set(e,[i.x,i.y]),e.pointerMove(i)},{target:n}),Sn("pointerleave",i=>{am.delete(e),e.pointerLeave(i)},{target:n}),Sn("pointerup",i=>{e.pointerUp(i)},{target:n}),Sn("dblclick",i=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&e.dblClick(i)},{target:r}),Sn("pointermove",i=>{FD.set(e,[i.x,i.y]),e.globalPointerMove(i)}),Sn("pointerup",i=>{e.globalPointerUp(i)}),Sn("keydown",i=>{e.globalKeyDown(i),O.isFocus(e)&&!O.hasBeenTextEditing(e)&&!k6(i.target)&&e.keyDown(i)}),Sn("keyup",i=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&(e==null||e.keyUp(i))}),Sn("copy",i=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&(i.preventDefault(),xC(e,pi.copy,i.clipboardData))}),Sn("paste",async i=>{if(O.isFocus(e)&&!O.isReadonly(e)&&!O.hasBeenTextEditing(e)){const o=O.getMovingPointInBoard(e);if(o){const s=Ze(e,Je(e,o[0],o[1])),a=await jM(i.clipboardData);e.insertFragment(a,s,pi.paste)}}}),Sn("cut",i=>{O.isFocus(e)&&!O.isReadonly(e)&&!O.hasBeenTextEditing(e)&&(i.preventDefault(),xC(e,pi.cut,i.clipboardData),Iv(e))}),Sn("drop",i=>{O.isReadonly(e)||(i.preventDefault(),e.drop(i))},{target:n}),Sn("dragover",i=>{i.preventDefault()},{target:n})},LR=(e,n)=>{Sn("scroll",i=>{if(fM(e))JD(e,!1);else{const{scrollLeft:o,scrollTop:s}=i.target;YD(e,o,s)}},{target:n}),Sn("touchstart",i=>{i.preventDefault()},{target:n,passive:!1}),Sn("wheel",i=>{if(i.metaKey||i.ctrlKey){i.preventDefault();const{deltaX:o,deltaY:s}=i,a=e.viewport.zoom,u=Math.sign(s),h=u6*100,d=Math.abs(s);let f=s;d>h&&(f=h*u);let g=a-f/100;g+=Math.log10(Math.max(1,a))*-u*Math.min(1,d/20),Pt.updateZoom(e,g,O.getMovingPointInBoard(e))}},{target:n,passive:!1});const r=j.useRef(!1);j.useEffect(()=>{const i=new ResizeObserver(()=>{if(!r.current){r.current=!0;return}Av(e),Bv(e),yf(e)});return i.observe(O.getBoardContainer(e)),()=>{i&&i.disconnect()}},[])},_v=j.createContext(null),qr=()=>{const e=j.useContext(_v);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:n}=e;return n},OS=()=>{const e=j.useContext(_v);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:n}=e;return n},IS=({style:e,className:n,children:r,afterInit:i})=>{var w,C;const o=j.useRef(null),s=j.useRef(null),a=j.useRef(null),u=j.useRef(null),h=j.useRef(null),d=j.useRef(null),f=j.useRef(null),g=j.useRef(null),m=qr(),v=OS();return j.useEffect(()=>{const P=q4.svg(o.current,{options:{roughness:.5,strokeWidth:1}});rm.set(m,P),im.set(m,o.current),sm.set(m,!0),Yi.set(m,{lowerHost:s.current,host:a.current,upperHost:u.current,topHost:h.current,activeHost:d.current,container:g.current,viewportContainer:f.current});const D=new U9;return om.set(m,D),tm.set(m,new Map),v.initialized||(v.initialize(m.children,{board:m,parent:m,parentG:O.getElementHost(m)}),i&&i(m)),Av(m),Bv(m),cM(m),()=>{om.delete(m),gf.delete(m),ff.delete(m),Yi.delete(m),sm.delete(m),im.delete(m),rm.delete(m),tm.delete(m)}},[]),IR(m,f,o),LR(m,f),G.jsx("div",{className:jn(n,c6,`${HR()}`,`theme-${(w=m.theme)==null?void 0:w.themeColorMode}`,`pointer-${m.pointer}`,{focused:O.isFocus(m),readonly:O.isReadonly(m),"disabled-scroll":((C=m.options)==null?void 0:C.disabledScrollOnNonFocus)&&!O.isFocus(m)}),ref:g,style:e,children:G.jsxs("div",{className:"viewport-container",ref:f,style:{width:"100%",height:"100%",overflow:"auto"},children:[G.jsxs("svg",{ref:o,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[G.jsx("g",{className:"element-lower-host",ref:s}),G.jsx("g",{className:"element-host",ref:a}),G.jsx("g",{className:"element-upper-host",ref:u}),G.jsx("g",{className:"element-top-host",ref:h})]}),G.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:G.jsx("g",{className:"active-host-g",ref:d})}),r]})})},HR=()=>H6?"safari":N6?"chrome":L6?"firefox":"";var NR={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=K.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},GR={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=Ct.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},_R={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=de.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},Cf=new WeakMap,Ef=new WeakMap,_u=new WeakMap,LS=new WeakMap,UC=new WeakMap,XC=new WeakMap,KC=new WeakMap,K={ancestors(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,i=K.levels(e,n);return r?i=i.slice(1):i=i.slice(0,-1),i},common(e,n){for(var r=[],i=0;i<e.length&&i<n.length;i++){var o=e[i],s=n[i];if(o!==s)break;r.push(o)}return r},compare(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1}return 0},endsAfter(e,n){var r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return K.equals(i,o)&&s>a},endsAt(e,n){var r=e.length,i=e.slice(0,r),o=n.slice(0,r);return K.equals(i,o)},endsBefore(e,n){var r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return K.equals(i,o)&&s<a},equals(e,n){return e.length===n.length&&e.every((r,i)=>r===n[i])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,n){return K.compare(e,n)===1},isAncestor(e,n){return e.length<n.length&&K.compare(e,n)===0},isBefore(e,n){return K.compare(e,n)===-1},isChild(e,n){return e.length===n.length+1&&K.compare(e,n)===0},isCommon(e,n){return e.length<=n.length&&K.compare(e,n)===0},isDescendant(e,n){return e.length>n.length&&K.compare(e,n)===0},isParent(e,n){return e.length+1===n.length&&K.compare(e,n)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,n){if(e.length!==n.length)return!1;var r=e.slice(0,-1),i=n.slice(0,-1),o=e[e.length-1],s=n[n.length-1];return o!==s&&K.equals(r,i)},levels(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,i=[],o=0;o<=e.length;o++)i.push(e.slice(0,o));return r&&i.reverse(),i},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return e.slice(0,-1).concat(n+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(n-1)},relative(e,n){if(!K.isAncestor(n,e)&&!K.equals(e,n))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(n,"], because it is not above or equal to the path."));return e.slice(n.length)},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var i=[...e],{affinity:o="forward"}=r;if(e.length===0)return i;switch(n.type){case"insert_node":{var{path:s}=n;(K.equals(s,i)||K.endsBefore(s,i)||K.isAncestor(s,i))&&(i[s.length-1]+=1);break}case"remove_node":{var{path:a}=n;if(K.equals(a,i)||K.isAncestor(a,i))return null;K.endsBefore(a,i)&&(i[a.length-1]-=1);break}case"merge_node":{var{path:u,position:h}=n;K.equals(u,i)||K.endsBefore(u,i)?i[u.length-1]-=1:K.isAncestor(u,i)&&(i[u.length-1]-=1,i[u.length]+=h);break}case"split_node":{var{path:d,position:f}=n;if(K.equals(d,i)){if(o==="forward")i[i.length-1]+=1;else if(o!=="backward")return null}else K.endsBefore(d,i)?i[d.length-1]+=1:K.isAncestor(d,i)&&e[d.length]>=f&&(i[d.length-1]+=1,i[d.length]-=f);break}case"move_node":{var{path:g,newPath:m}=n;if(K.equals(g,m))return i;if(K.isAncestor(g,i)||K.equals(g,i)){var v=m.slice();return K.endsBefore(g,m)&&g.length<m.length&&(v[g.length-1]-=1),v.concat(i.slice(g.length))}else K.isSibling(g,m)&&(K.isAncestor(m,i)||K.equals(m,i))?K.endsBefore(g,i)?i[g.length-1]-=1:i[g.length-1]+=1:K.endsBefore(m,i)||K.equals(m,i)||K.isAncestor(m,i)?(K.endsBefore(g,i)&&(i[g.length-1]-=1),i[m.length-1]+=1):K.endsBefore(g,i)&&(K.equals(m,i)&&(i[m.length-1]+=1),i[g.length-1]-=1);break}}return i}};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ic(e)}function jR(e,n){if(ic(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(ic(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function zR(e){var n=jR(e,"string");return ic(n)==="symbol"?n:String(n)}function Zn(e,n,r){return n=zR(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function qC(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Ht(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qC(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var YC=function(n,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return[...n.slice(0,r),...o,...n.slice(r)]},oc=function(n,r,i){for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return[...n.slice(0,r),...s,...n.slice(r+i)]},ZC=oc,jv=(e,n,r)=>{if(n.length===0)throw new Error("Cannot modify the editor");for(var i=De.get(e,n),o=n.slice(),s=r(i);o.length>1;){var a=o.pop(),u=De.get(e,o);s=Ht(Ht({},u),{},{children:oc(u.children,a,1,s)})}var h=o.pop();e.children=oc(e.children,h,1,s)},ja=(e,n,r)=>{n.length===0?e.children=r(e.children):jv(e,n,i=>{if(ke.isText(i))throw new Error("Cannot get the element at path [".concat(n,"] because it refers to a leaf node: ").concat(rn.stringify(i)));return Ht(Ht({},i),{},{children:r(i.children)})})},QC=(e,n,r)=>jv(e,n,i=>{if(!ke.isText(i))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(rn.stringify(i)));return r(i)}),$R={transform(e,n){var r=!1;switch(n.type){case"insert_node":{var{path:i,node:o}=n;ja(e,K.parent(i),ae=>{var fe=i[i.length-1];if(fe>ae.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(i,"] because the destination is past the end of the node."));return YC(ae,fe,o)}),r=!0;break}case"insert_text":{var{path:s,offset:a,text:u}=n;if(u.length===0)break;QC(e,s,ae=>{var fe=ae.text.slice(0,a),me=ae.text.slice(a);return Ht(Ht({},ae),{},{text:fe+u+me})}),r=!0;break}case"merge_node":{var{path:h}=n,d=h[h.length-1],f=K.previous(h),g=f[f.length-1];ja(e,K.parent(h),ae=>{var fe=ae[d],me=ae[g],Ne;if(ke.isText(fe)&&ke.isText(me))Ne=Ht(Ht({},me),{},{text:me.text+fe.text});else if(!ke.isText(fe)&&!ke.isText(me))Ne=Ht(Ht({},me),{},{children:me.children.concat(fe.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(h,"] to nodes of different interfaces: ").concat(rn.stringify(fe)," ").concat(rn.stringify(me)));return oc(ae,g,2,Ne)}),r=!0;break}case"move_node":{var{path:m,newPath:v}=n,w=m[m.length-1];if(K.isAncestor(m,v))throw new Error("Cannot move a path [".concat(m,"] to new path [").concat(v,"] because the destination is inside itself."));var C=De.get(e,m);ja(e,K.parent(m),ae=>ZC(ae,w,1));var P=K.transform(m,n),D=P[P.length-1];ja(e,K.parent(P),ae=>YC(ae,D,C)),r=!0;break}case"remove_node":{var{path:x}=n,k=x[x.length-1];if(ja(e,K.parent(x),ae=>ZC(ae,k,1)),e.selection){var T=Ht({},e.selection);for(var[H,z]of de.points(T)){var U=Ct.transform(H,n);if(T!=null&&U!=null)T[z]=U;else{var q=void 0,te=void 0;for(var[ne,le]of De.texts(e))if(K.compare(le,x)===-1)q=[ne,le];else{te=[ne,le];break}var Q=!1;q&&te&&(K.equals(te[1],x)?Q=!K.hasPrevious(te[1]):Q=K.common(q[1],x).length<K.common(te[1],x).length),q&&!Q?T[z]={path:q[1],offset:q[0].text.length}:te?T[z]={path:te[1],offset:0}:T=null}}e.selection=T}break}case"remove_text":{var{path:J,offset:ie,text:N}=n;if(N.length===0)break;QC(e,J,ae=>{var fe=ae.text.slice(0,ie),me=ae.text.slice(ie+N.length);return Ht(Ht({},ae),{},{text:fe+me})}),r=!0;break}case"set_node":{var{path:A,properties:b,newProperties:M}=n;if(A.length===0)throw new Error("Cannot set properties on the root node!");jv(e,A,ae=>{var fe=Ht({},ae);for(var me in M){if(me==="children"||me==="text")throw new Error('Cannot set the "'.concat(me,'" property of nodes!'));var Ne=M[me];Ne==null?delete fe[me]:fe[me]=Ne}for(var we in b)M.hasOwnProperty(we)||delete fe[we];return fe});break}case"set_selection":{var{newProperties:I}=n;if(I==null){e.selection=null;break}if(e.selection==null){if(!de.isRange(I))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(rn.stringify(I)," when there is no current selection."));e.selection=Ht({},I);break}var _=Ht({},e.selection);for(var B in I){var $=I[B];if($==null){if(B==="anchor"||B==="focus")throw new Error('Cannot remove the "'.concat(B,'" selection property'));delete _[B]}else _[B]=$}e.selection=_;break}case"split_node":{var{path:W,position:Y,properties:oe}=n,re=W[W.length-1];if(W.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(W,"] because the root node cannot be split."));ja(e,K.parent(W),ae=>{var fe=ae[re],me,Ne;if(ke.isText(fe)){var we=fe.text.slice(0,Y),it=fe.text.slice(Y);me=Ht(Ht({},fe),{},{text:we}),Ne=Ht(Ht({},oe),{},{text:it})}else{var Ie=fe.children.slice(0,Y),Be=fe.children.slice(Y);me=Ht(Ht({},fe),{},{children:Ie}),Ne=Ht(Ht({},oe),{},{children:Be})}return oc(ae,re,1,me,Ne)}),r=!0;break}}if(r&&e.selection){var ge=Ht({},e.selection);for(var[pe,X]of de.points(ge))ge[X]=Ct.transform(pe,n);e.selection=ge}}},WR={insertNodes(e,n,r){e.insertNodes(n,r)},liftNodes(e,n){e.liftNodes(n)},mergeNodes(e,n){e.mergeNodes(n)},moveNodes(e,n){e.moveNodes(n)},removeNodes(e,n){e.removeNodes(n)},setNodes(e,n,r){e.setNodes(n,r)},splitNodes(e,n){e.splitNodes(n)},unsetNodes(e,n,r){e.unsetNodes(n,r)},unwrapNodes(e,n){e.unwrapNodes(n)},wrapNodes(e,n,r){e.wrapNodes(n,r)}},VR={collapse(e,n){e.collapse(n)},deselect(e){e.deselect()},move(e,n){e.move(n)},select(e,n){e.select(n)},setPoint(e,n,r){e.setPoint(n,r)},setSelection(e,n){e.setSelection(n)}},An=e=>typeof e=="object"&&e!==null,HS=(e,n)=>{for(var r in e){var i=e[r],o=n[r];if(Array.isArray(i)&&Array.isArray(o)){if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!==o[s])return!1}else if(An(i)&&An(o)){if(!HS(i,o))return!1}else if(i!==o)return!1}for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!1;return!0};function UR(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function lo(e,n){if(e==null)return{};var r=UR(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var XR=["anchor","focus"];function JC(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function KR(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?JC(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var de={edges(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,{anchor:i,focus:o}=e;return de.isBackward(e)===r?[i,o]:[o,i]},end(e){var[,n]=de.edges(e);return n},equals(e,n){return Ct.equals(e.anchor,n.anchor)&&Ct.equals(e.focus,n.focus)},surrounds(e,n){var r=de.intersection(e,n);return r?de.equals(r,n):!1},includes(e,n){if(de.isRange(n)){if(de.includes(e,n.anchor)||de.includes(e,n.focus))return!0;var[r,i]=de.edges(e),[o,s]=de.edges(n);return Ct.isBefore(r,o)&&Ct.isAfter(i,s)}var[a,u]=de.edges(e),h=!1,d=!1;return Ct.isPoint(n)?(h=Ct.compare(n,a)>=0,d=Ct.compare(n,u)<=0):(h=K.compare(n,a.path)>=0,d=K.compare(n,u.path)<=0),h&&d},intersection(e,n){var r=lo(e,XR),[i,o]=de.edges(e),[s,a]=de.edges(n),u=Ct.isBefore(i,s)?s:i,h=Ct.isBefore(o,a)?o:a;return Ct.isBefore(h,u)?null:KR({anchor:u,focus:h},r)},isBackward(e){var{anchor:n,focus:r}=e;return Ct.isAfter(n,r)},isCollapsed(e){var{anchor:n,focus:r}=e;return Ct.equals(n,r)},isExpanded(e){return!de.isCollapsed(e)},isForward(e){return!de.isBackward(e)},isRange(e){return An(e)&&Ct.isPoint(e.anchor)&&Ct.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[n]=de.edges(e);return n},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:i="inward"}=r,o,s;if(i==="inward"){var a=de.isCollapsed(e);de.isForward(e)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?de.isForward(e)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var u=Ct.transform(e.anchor,n,{affinity:o}),h=Ct.transform(e.focus,n,{affinity:s});return!u||!h?null:{anchor:u,focus:h}}},eE=function(n){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!An(n))return!1;var i=typeof n.apply=="function";if(i)return!1;var o=r?De.isNodeList(n.children):Array.isArray(n.children);return o},be={isAncestor(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return An(e)&&De.isNodeList(e.children,{deep:n})},isElement:eE,isElementList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(r=>be.isElement(r,{deep:n}))},isElementProps(e){return e.children!==void 0},isElementType:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return eE(n)&&n[i]===r},matches(e,n){for(var r in n)if(r!=="children"&&e[r]!==n[r])return!1;return!0}},qR=["children"],YR=["text"],De={ancestor(e,n){var r=De.get(e,n);if(ke.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(n,"] because it refers to a text node instead: ").concat(rn.stringify(r)));return r},ancestors(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var i of K.ancestors(n,r)){var o=De.ancestor(e,i),s=[o,i];yield s}}()},child(e,n){if(ke.isText(e))throw new Error("Cannot get the child of a text node: ".concat(rn.stringify(e)));var r=e.children[n];if(r==null)throw new Error("Cannot get child at index `".concat(n,"` in node: ").concat(rn.stringify(e)));return r},children(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:i=!1}=r,o=De.ancestor(e,n),{children:s}=o,a=i?s.length-1:0;i?a>=0:a<s.length;){var u=De.child(o,a),h=n.concat(a);yield[u,h],a=i?a-1:a+1}}()},common(e,n,r){var i=K.common(n,r),o=De.get(e,i);return[o,i]},descendant(e,n){var r=De.get(e,n);if(F.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(n,"] because it refers to the root editor node instead: ").concat(rn.stringify(r)));return r},descendants(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of De.nodes(e,n))i.length!==0&&(yield[r,i])}()},elements(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of De.nodes(e,n))be.isElement(r)&&(yield[r,i])}()},extractProps(e){if(be.isAncestor(e)){var n=lo(e,qR);return n}else{var n=lo(e,YR);return n}},first(e,n){for(var r=n.slice(),i=De.get(e,r);i&&!(ke.isText(i)||i.children.length===0);)i=i.children[0],r.push(0);return[i,r]},fragment(e,n){if(ke.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(rn.stringify(e)));var r=s6({children:e.children},i=>{var[o,s]=de.edges(n),a=De.nodes(i,{reverse:!0,pass:m=>{var[,v]=m;return!de.includes(n,v)}});for(var[,u]of a){if(!de.includes(n,u)){var h=De.parent(i,u),d=u[u.length-1];h.children.splice(d,1)}if(K.equals(u,s.path)){var f=De.leaf(i,u);f.text=f.text.slice(0,s.offset)}if(K.equals(u,o.path)){var g=De.leaf(i,u);g.text=g.text.slice(o.offset)}}F.isEditor(i)&&(i.selection=null)});return r.children},get(e,n){var r=De.getIf(e,n);if(r===void 0)throw new Error("Cannot find a descendant at path [".concat(n,"] in node: ").concat(rn.stringify(e)));return r},getIf(e,n){for(var r=e,i=0;i<n.length;i++){var o=n[i];if(ke.isText(r)||!r.children[o])return;r=r.children[o]}return r},has(e,n){for(var r=e,i=0;i<n.length;i++){var o=n[i];if(ke.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ke.isText(e)||be.isElement(e,{deep:n})||F.isEditor(e,{deep:n})},isNodeList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(r=>De.isNode(r,{deep:n}))},last(e,n){for(var r=n.slice(),i=De.get(e,r);i&&!(ke.isText(i)||i.children.length===0);){var o=i.children.length-1;i=i.children[o],r.push(o)}return[i,r]},leaf(e,n){var r=De.get(e,n);if(!ke.isText(r))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(rn.stringify(r)));return r},levels(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var i of K.levels(n,r)){var o=De.get(e,i);yield[o,i]}}()},matches(e,n){return be.isElement(e)&&be.isElementProps(n)&&be.matches(e,n)||ke.isText(e)&&ke.isTextProps(n)&&ke.matches(e,n)},nodes(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:r,reverse:i=!1}=n,{from:o=[],to:s}=n,a=new Set,u=[],h=e;!(s&&(i?K.isBefore(u,s):K.isAfter(u,s)));){if(a.has(h)||(yield[h,u]),!a.has(h)&&!ke.isText(h)&&h.children.length!==0&&(r==null||r([h,u])===!1)){a.add(h);var d=i?h.children.length-1:0;K.isAncestor(u,o)&&(d=o[u.length]),u=u.concat(d),h=De.get(e,u);continue}if(u.length===0)break;if(!i){var f=K.next(u);if(De.has(e,f)){u=f,h=De.get(e,u);continue}}if(i&&u[u.length-1]!==0){var g=K.previous(u);u=g,h=De.get(e,u);continue}u=K.parent(u),h=De.get(e,u),a.add(h)}}()},parent(e,n){var r=K.parent(n),i=De.get(e,r);if(ke.isText(i))throw new Error("Cannot get the parent of path [".concat(n,"] because it does not exist in the root."));return i},string(e){return ke.isText(e)?e.text:e.children.map(De.string).join("")},texts(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of De.nodes(e,n))ke.isText(r)&&(yield[r,i])}()}};function tE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function jt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?tE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Qi={isNodeOperation(e){return Qi.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!An(e))return!1;switch(e.type){case"insert_node":return K.isPath(e.path)&&De.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&K.isPath(e.path);case"merge_node":return typeof e.position=="number"&&K.isPath(e.path)&&An(e.properties);case"move_node":return K.isPath(e.path)&&K.isPath(e.newPath);case"remove_node":return K.isPath(e.path)&&De.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&K.isPath(e.path);case"set_node":return K.isPath(e.path)&&An(e.properties)&&An(e.newProperties);case"set_selection":return e.properties===null&&de.isRange(e.newProperties)||e.newProperties===null&&de.isRange(e.properties)||An(e.properties)&&An(e.newProperties);case"split_node":return K.isPath(e.path)&&typeof e.position=="number"&&An(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(n=>Qi.isOperation(n))},isSelectionOperation(e){return Qi.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Qi.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return jt(jt({},e),{},{type:"remove_node"});case"insert_text":return jt(jt({},e),{},{type:"remove_text"});case"merge_node":return jt(jt({},e),{},{type:"split_node",path:K.previous(e.path)});case"move_node":{var{newPath:n,path:r}=e;if(K.equals(n,r))return e;if(K.isSibling(r,n))return jt(jt({},e),{},{path:n,newPath:r});var i=K.transform(r,e),o=K.transform(K.next(r),e);return jt(jt({},e),{},{path:i,newPath:o})}case"remove_node":return jt(jt({},e),{},{type:"insert_node"});case"remove_text":return jt(jt({},e),{},{type:"insert_text"});case"set_node":{var{properties:s,newProperties:a}=e;return jt(jt({},e),{},{properties:a,newProperties:s})}case"set_selection":{var{properties:u,newProperties:h}=e;return u==null?jt(jt({},e),{},{properties:h,newProperties:null}):h==null?jt(jt({},e),{},{properties:null,newProperties:u}):jt(jt({},e),{},{properties:h,newProperties:u})}case"split_node":return jt(jt({},e),{},{type:"merge_node",path:K.next(e.path)})}}},ZR=function(n){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!An(n))return!1;var i=typeof n.addMark=="function"&&typeof n.apply=="function"&&typeof n.deleteFragment=="function"&&typeof n.insertBreak=="function"&&typeof n.insertSoftBreak=="function"&&typeof n.insertFragment=="function"&&typeof n.insertNode=="function"&&typeof n.insertText=="function"&&typeof n.isElementReadOnly=="function"&&typeof n.isInline=="function"&&typeof n.isSelectable=="function"&&typeof n.isVoid=="function"&&typeof n.normalizeNode=="function"&&typeof n.onChange=="function"&&typeof n.removeMark=="function"&&typeof n.getDirtyPaths=="function"&&(n.marks===null||An(n.marks))&&(n.selection===null||de.isRange(n.selection))&&(!r||De.isNodeList(n.children))&&Qi.isOperationList(n.operations);return i},F={above(e,n){return e.above(n)},addMark(e,n,r){e.addMark(n,r)},after(e,n,r){return e.after(n,r)},before(e,n,r){return e.before(n,r)},deleteBackward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=n;e.deleteBackward(r)},deleteForward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=n;e.deleteForward(r)},deleteFragment(e,n){e.deleteFragment(n)},edges(e,n){return e.edges(n)},elementReadOnly(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(n)},end(e,n){return e.end(n)},first(e,n){return e.first(n)},fragment(e,n){return e.fragment(n)},hasBlocks(e,n){return e.hasBlocks(n)},hasInlines(e,n){return e.hasInlines(n)},hasPath(e,n){return e.hasPath(n)},hasTexts(e,n){return e.hasTexts(n)},insertBreak(e){e.insertBreak()},insertFragment(e,n,r){e.insertFragment(n,r)},insertNode(e,n){e.insertNode(n)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,n){e.insertText(n)},isBlock(e,n){return e.isBlock(n)},isEdge(e,n,r){return e.isEdge(n,r)},isEditor(e){return ZR(e)},isElementReadOnly(e,n){return e.isElementReadOnly(n)},isEmpty(e,n){return e.isEmpty(n)},isEnd(e,n,r){return e.isEnd(n,r)},isInline(e,n){return e.isInline(n)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,n){return e.isSelectable(n)},isStart(e,n,r){return e.isStart(n,r)},isVoid(e,n){return e.isVoid(n)},last(e,n){return e.last(n)},leaf(e,n,r){return e.leaf(n,r)},levels(e,n){return e.levels(n)},marks(e){return e.getMarks()},next(e,n){return e.next(n)},node(e,n,r){return e.node(n,r)},nodes(e,n){return e.nodes(n)},normalize(e,n){e.normalize(n)},parent(e,n,r){return e.parent(n,r)},path(e,n,r){return e.path(n,r)},pathRef(e,n,r){return e.pathRef(n,r)},pathRefs(e){return e.pathRefs()},point(e,n,r){return e.point(n,r)},pointRef(e,n,r){return e.pointRef(n,r)},pointRefs(e){return e.pointRefs()},positions(e,n){return e.positions(n)},previous(e,n){return e.previous(n)},range(e,n,r){return e.range(n,r)},rangeRef(e,n,r){return e.rangeRef(n,r)},rangeRefs(e){return e.rangeRefs()},removeMark(e,n){e.removeMark(n)},setNormalizing(e,n){e.setNormalizing(n)},start(e,n){return e.start(n)},string(e,n,r){return e.string(n,r)},unhangRange(e,n,r){return e.unhangRange(n,r)},void(e,n){return e.void(n)},withoutNormalizing(e,n){e.withoutNormalizing(n)},shouldMergeNodesRemovePrevNode:(e,n,r)=>e.shouldMergeNodesRemovePrevNode(n,r)},QR={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(K.isPath)}};function nE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function rE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?nE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Ct={compare(e,n){var r=K.compare(e.path,n.path);return r===0?e.offset<n.offset?-1:e.offset>n.offset?1:0:r},isAfter(e,n){return Ct.compare(e,n)===1},isBefore(e,n){return Ct.compare(e,n)===-1},equals(e,n){return e.offset===n.offset&&K.equals(e.path,n.path)},isPoint(e){return An(e)&&typeof e.offset=="number"&&K.isPath(e.path)},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:i="forward"}=r,{path:o,offset:s}=e;switch(n.type){case"insert_node":case"move_node":{o=K.transform(o,n,r);break}case"insert_text":{K.equals(n.path,o)&&(n.offset<s||n.offset===s&&i==="forward")&&(s+=n.text.length);break}case"merge_node":{K.equals(n.path,o)&&(s+=n.position),o=K.transform(o,n,r);break}case"remove_text":{K.equals(n.path,o)&&n.offset<=s&&(s-=Math.min(s-n.offset,n.text.length));break}case"remove_node":{if(K.equals(n.path,o)||K.isAncestor(n.path,o))return null;o=K.transform(o,n,r);break}case"split_node":{if(K.equals(n.path,o)){if(n.position===s&&i==null)return null;(n.position<s||n.position===s&&i==="forward")&&(s-=n.position,o=K.transform(o,n,rE(rE({},r),{},{affinity:"forward"})))}else o=K.transform(o,n,r);break}default:return e}return{path:o,offset:s}}},iE=void 0,rn={setScrubber(e){iE=e},stringify(e){return JSON.stringify(e,iE)}},JR=["text"],ek=["anchor","focus","merge"];function oE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function qi(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?oE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var ke={equals(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:i=!1}=r;function o(s){var a=lo(s,JR);return a}return HS(i?o(e):e,i?o(n):n)},isText(e){return An(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(n=>ke.isText(n))},isTextProps(e){return e.text!==void 0},matches(e,n){for(var r in n)if(r!=="text"&&(!e.hasOwnProperty(r)||e[r]!==n[r]))return!1;return!0},decorations(e,n){var r=[{leaf:qi({},e)}];for(var i of n){var{anchor:o,focus:s,merge:a}=i,u=lo(i,ek),[h,d]=de.edges(i),f=[],g=0,m=h.offset,v=d.offset,w=a??Object.assign;for(var{leaf:C}of r){var{length:P}=C.text,D=g;if(g+=P,m<=D&&g<=v){w(C,u),f.push({leaf:C});continue}if(m!==v&&(m===g||v===D)||m>g||v<D||v===D&&D!==0){f.push({leaf:C});continue}var x=C,k=void 0,T=void 0;if(v<g){var H=v-D;T={leaf:qi(qi({},x),{},{text:x.text.slice(H)})},x=qi(qi({},x),{},{text:x.text.slice(0,H)})}if(m>D){var z=m-D;k={leaf:qi(qi({},x),{},{text:x.text.slice(0,z)})},x=qi(qi({},x),{},{text:x.text.slice(z)})}w(x,u),k&&f.push(k),f.push({leaf:x}),T&&f.push(T)}r=f}if(r.length>1){var U=0;for(var[q,te]of r.entries()){var ne=U,le=ne+te.leaf.text.length,Q={start:ne,end:le};q===0&&(Q.isFirst=!0),q===r.length-1&&(Q.isLast=!0),te.position=Q,U=le}}return r}},zv=e=>e.selection?e.selection:e.children.length>0?F.end(e,[]):[0],Fl=(e,n)=>{var[r]=F.node(e,n);return i=>i===r},$v=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=!r,o=r?sk(n):n,s=at.None,a=at.None,u=0,h=null,d=null;for(var f of o){var g=f.codePointAt(0);if(!g)break;var m=yk(f,g);if([s,a]=i?[a,m]:[m,s],Ya(s,at.ZWJ)&&Ya(a,at.ExtPict)&&(i?h=sE(n.substring(0,u)):h=sE(n.substring(0,n.length-u)),!h)||Ya(s,at.RI)&&Ya(a,at.RI)&&(d!==null?d=!d:i?d=!0:d=Pk(n.substring(0,n.length-u)),!d)||s!==at.None&&a!==at.None&&xk(s,a))break;u+=f.length}return u||1},tk=/\s/,nk=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,rk=/['\u2018\u2019]/,ik=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0,o=!1;n.length>0;){var s=$v(n,r),[a,u]=Wv(n,s,r);if(ok(a,u,r))o=!0,i+=s;else if(!o)i+=s;else break;n=u}return i},Wv=(e,n,r)=>{if(r){var i=e.length-n;return[e.slice(i,e.length),e.slice(0,i)]}return[e.slice(0,n),e.slice(n)]},ok=function e(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(tk.test(n))return!1;if(rk.test(n)){var o=$v(r,i),[s,a]=Wv(r,o,i);if(e(s,a,i))return!0}return!nk.test(n)},sk=function*(n){for(var r=n.length-1,i=0;i<n.length;i++){var o=n.charAt(r-i);if(lk(o.charCodeAt(0))){var s=n.charAt(r-i-1);if(ak(s.charCodeAt(0))){yield s+o,i++;continue}}yield o}},ak=e=>e>=55296&&e<=56319,lk=e=>e>=56320&&e<=57343,at;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(at||(at={}));var uk=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ck=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,hk=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,dk=/^[\u1100-\u115F\uA960-\uA97C]$/,fk=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,gk=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,pk=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,mk=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,vk=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,yk=(e,n)=>{var r=at.Any;return e.search(uk)!==-1&&(r|=at.Extend),n===8205&&(r|=at.ZWJ),n>=127462&&n<=127487&&(r|=at.RI),e.search(ck)!==-1&&(r|=at.Prepend),e.search(hk)!==-1&&(r|=at.SpacingMark),e.search(dk)!==-1&&(r|=at.L),e.search(fk)!==-1&&(r|=at.V),e.search(gk)!==-1&&(r|=at.T),e.search(pk)!==-1&&(r|=at.LV),e.search(mk)!==-1&&(r|=at.LVT),e.search(vk)!==-1&&(r|=at.ExtPict),r};function Ya(e,n){return(e&n)!==0}var wk=[[at.L,at.L|at.V|at.LV|at.LVT],[at.LV|at.V,at.V|at.T],[at.LVT|at.T,at.T],[at.Any,at.Extend|at.ZWJ],[at.Any,at.SpacingMark],[at.Prepend,at.Any],[at.ZWJ,at.ExtPict],[at.RI,at.RI]];function xk(e,n){return wk.findIndex(r=>Ya(e,r[0])&&Ya(n,r[1]))===-1}var Ck=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,sE=e=>e.search(Ck)!==-1,Ek=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Pk=e=>{var n=e.match(Ek);if(n===null)return!1;var r=n[0].length/2;return r%2===1},Dk={delete(e,n){e.delete(n)},insertFragment(e,n,r){e.insertFragment(n,r)},insertText(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(e,()=>{var{voids:i=!1}=r,{at:o=zv(e)}=r;if(K.isPath(o)&&(o=F.range(e,o)),de.isRange(o))if(de.isCollapsed(o))o=o.anchor;else{var s=de.end(o);if(!i&&F.void(e,{at:s}))return;var a=de.start(o),u=F.pointRef(e,a),h=F.pointRef(e,s);ve.delete(e,{at:o,voids:i});var d=u.unref(),f=h.unref();o=d||f,ve.setSelection(e,{anchor:o,focus:o})}if(!(!i&&F.void(e,{at:o})||F.elementReadOnly(e,{at:o}))){var{path:g,offset:m}=o;n.length>0&&e.apply({type:"insert_text",path:g,offset:m,text:n})}})}};function aE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function wd(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?aE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var ve=wd(wd(wd(wd({},$R),WR),VR),Dk),Xd=new WeakMap,Sk=e=>Xd.get(e)||!1,Tk=(e,n,r)=>{var i=Xd.get(e)||!1;Xd.set(e,!0);try{n(),r()}finally{Xd.set(e,i)}};function NS(e,n,r){var i=Cf.get(e)||[],o=Ef.get(e)||new Set,s,a,u=g=>{if(g){var m=g.join(",");a.has(m)||(a.add(m),s.push(g))}};if(r){s=[],a=new Set;for(var h of i){var d=r(h);u(d)}}else s=i,a=o;for(var f of n)u(f);Cf.set(e,s),Ef.set(e,a)}var Ak=(e,n)=>{for(var r of F.pathRefs(e))NR.transform(r,n);for(var i of F.pointRefs(e))GR.transform(i,n);for(var o of F.rangeRefs(e))_R.transform(o,n);if(!Sk(e)){var s=K.operationCanTransformPath(n)?a=>K.transform(a,n):void 0;NS(e,e.getDirtyPaths(n),s)}ve.transform(e,n),e.operations.push(n),F.normalize(e,{operation:n}),n.type==="set_selection"&&(e.marks=null),_u.get(e)||(_u.set(e,!0),Promise.resolve().then(()=>{_u.set(e,!1),e.onChange({operation:n}),e.operations=[]}))},Bk=(e,n)=>{switch(n.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=n;return K.levels(r)}case"insert_node":{var{node:i,path:o}=n,s=K.levels(o),a=ke.isText(i)?[]:Array.from(De.nodes(i),ne=>{var[,le]=ne;return o.concat(le)});return[...s,...a]}case"merge_node":{var{path:u}=n,h=K.ancestors(u),d=K.previous(u);return[...h,d]}case"move_node":{var{path:f,newPath:g}=n;if(K.equals(f,g))return[];var m=[],v=[];for(var w of K.ancestors(f)){var C=K.transform(w,n);m.push(C)}for(var P of K.ancestors(g)){var D=K.transform(P,n);v.push(D)}var x=v[v.length-1],k=g[g.length-1],T=x.concat(k);return[...m,...v,T]}case"remove_node":{var{path:H}=n,z=K.ancestors(H);return[...z]}case"split_node":{var{path:U}=n,q=K.levels(U),te=K.next(U);return[...q,te]}default:return[]}},Mk=e=>{var{selection:n}=e;return n?De.fragment(e,n):[]},Rk=(e,n,r)=>{var[i,o]=n;if(!ke.isText(i)){if(be.isElement(i)&&i.children.length===0){var s={text:""};ve.insertNodes(e,s,{at:o.concat(0),voids:!0});return}for(var a=F.isEditor(i)?!1:be.isElement(i)&&(e.isInline(i)||i.children.length===0||ke.isText(i.children[0])||e.isInline(i.children[0])),u=0,h=0;h<i.children.length;h++,u++){var d=De.get(e,o);if(!ke.isText(d)){var f=d.children[u],g=d.children[u-1],m=h===i.children.length-1,v=ke.isText(f)||be.isElement(f)&&e.isInline(f);if(v!==a)v?r!=null&&r.fallbackElement?ve.wrapNodes(e,r.fallbackElement(),{at:o.concat(u),voids:!0}):ve.removeNodes(e,{at:o.concat(u),voids:!0}):ve.unwrapNodes(e,{at:o.concat(u),voids:!0}),u--;else if(be.isElement(f)){if(e.isInline(f)){if(g==null||!ke.isText(g)){var w={text:""};ve.insertNodes(e,w,{at:o.concat(u),voids:!0}),u++}else if(m){var C={text:""};ve.insertNodes(e,C,{at:o.concat(u+1),voids:!0}),u++}}}else{if(!ke.isText(f)&&!("children"in f)){var P=f;P.children=[]}g!=null&&ke.isText(g)&&(ke.equals(f,g,{loose:!0})?(ve.mergeNodes(e,{at:o.concat(u),voids:!0}),u--):g.text===""?(ve.removeNodes(e,{at:o.concat(u-1),voids:!0}),u--):f.text===""&&(ve.removeNodes(e,{at:o.concat(u),voids:!0}),u--))}}}}},kk=(e,n)=>{var{iteration:r,initialDirtyPathsLength:i}=n,o=i*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},bk=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:i=!1,mode:o="lowest",at:s=n.selection,match:a}=r;if(s){var u=F.path(n,s);if(!de.isRange(s)||K.equals(s.focus.path,s.anchor.path)){if(u.length===0)return;u=K.parent(u)}var h=o==="lowest",[d]=F.levels(n,{at:u,voids:i,match:a,reverse:h});return d}};function lE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function uE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Fk=(e,n,r)=>{var{selection:i}=e;if(i){var o=(g,m)=>{if(!ke.isText(g))return!1;var[v,w]=F.parent(e,m);return!e.isVoid(v)||e.markableVoid(v)},s=de.isExpanded(i),a=!1;if(!s){var[u,h]=F.node(e,i);if(u&&o(u,h)){var[d]=F.parent(e,h);a=d&&e.markableVoid(d)}}if(s||a)ve.setNodes(e,{[n]:r},{match:o,split:!0,voids:!0});else{var f=uE(uE({},F.marks(e)||{}),{},{[n]:r});e.marks=f,_u.get(e)||e.onChange()}}};function cE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function hE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?cE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Ok=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=F.point(n,r,{edge:"end"}),s=F.end(n,[]),a={anchor:o,focus:s},{distance:u=1}=i,h=0,d;for(var f of F.positions(n,hE(hE({},i),{},{at:a}))){if(h>u)break;h!==0&&(d=f),h++}return d};function dE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function fE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?dE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Ik=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=F.start(n,[]),s=F.point(n,r,{edge:"start"}),a={anchor:o,focus:s},{distance:u=1}=i,h=0,d;for(var f of F.positions(n,fE(fE({},i),{},{at:a,reverse:!0}))){if(h>u)break;h!==0&&(d=f),h++}return d},Lk=(e,n)=>{var{selection:r}=e;r&&de.isCollapsed(r)&&ve.delete(e,{unit:n,reverse:!0})},Hk=(e,n)=>{var{selection:r}=e;r&&de.isCollapsed(r)&&ve.delete(e,{unit:n})},Nk=function(n){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:i}=n;i&&de.isExpanded(i)&&ve.delete(n,{reverse:r==="backward"})},Gk=(e,n)=>[F.start(e,n),F.end(e,n)];function gE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function pE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var _k=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(n,pE(pE({},r),{},{match:i=>be.isElement(i)&&F.isElementReadOnly(n,i)}))},jk=(e,n)=>F.point(e,n,{edge:"end"}),zk=(e,n)=>{var r=F.path(e,n,{edge:"start"});return F.node(e,r)},$k=(e,n)=>{var r=F.range(e,n);return De.fragment(e,r)};function mE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function vE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?mE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Wk=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(n,vE(vE({},r),{},{match:i=>be.isElement(i)&&F.isVoid(n,i)}))},Vk=(e,n)=>n.children.some(r=>be.isElement(r)&&F.isBlock(e,r)),Uk=(e,n)=>n.children.some(r=>ke.isText(r)||F.isInline(e,r)),Xk=(e,n)=>De.has(e,n),Kk=(e,n)=>n.children.every(r=>ke.isText(r)),qk=e=>{ve.splitNodes(e,{always:!0})},Yk=(e,n,r)=>{ve.insertNodes(e,n,r)},Zk=e=>{ve.splitNodes(e,{always:!0})};function yE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Qk(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?yE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Jk=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:s}=n;if(o){if(s){var a=Qk({text:r},s);ve.insertNodes(n,a,{at:i.at,voids:i.voids})}else ve.insertText(n,r,i);n.marks=null}},eb=(e,n)=>!e.isInline(n),tb=(e,n,r)=>F.isStart(e,n,r)||F.isEnd(e,n,r),nb=(e,n)=>{var{children:r}=n,[i]=r;return r.length===0||r.length===1&&ke.isText(i)&&i.text===""&&!e.isVoid(n)},rb=(e,n,r)=>{var i=F.end(e,r);return Ct.equals(n,i)},ib=e=>{var n=LS.get(e);return n===void 0?!0:n},ob=(e,n,r)=>{if(n.offset!==0)return!1;var i=F.start(e,r);return Ct.equals(n,i)},sb=(e,n)=>{var r=F.path(e,n,{edge:"end"});return F.node(e,r)},ab=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=F.path(n,r,i),s=De.leaf(n,o);return[s,o]};function lb(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,reverse:i=!1,voids:o=!1}=n,{match:s}=n;if(s==null&&(s=()=>!0),!!r){var a=[],u=F.path(e,r);for(var[h,d]of De.levels(e,u))if(s(h,d)&&(a.push([h,d]),!o&&be.isElement(h)&&F.isVoid(e,h)))break;i&&a.reverse(),yield*a}}()}var ub=["text"],cb=["text"],hb=function(n){var{marks:r,selection:i}=n;if(!i)return null;var{anchor:o,focus:s}=i;if(r)return r;if(de.isExpanded(i)){var a=de.isBackward(i);a&&([s,o]=[o,s]);var u=F.isEnd(n,o,o.path);if(u){var h=F.after(n,o);h&&(o=h)}var[d]=F.nodes(n,{match:ke.isText,at:{anchor:o,focus:s}});if(d){var[f]=d,g=lo(f,ub);return g}else return{}}var{path:m}=o,[v]=F.leaf(n,m);if(o.offset===0){var w=F.previous(n,{at:m,match:ke.isText}),C=F.above(n,{match:H=>be.isElement(H)&&F.isVoid(n,H)&&n.markableVoid(H)});if(!C){var P=F.above(n,{match:H=>be.isElement(H)&&F.isBlock(n,H)});if(w&&P){var[D,x]=w,[,k]=P;K.isAncestor(k,x)&&(v=D)}}}var T=lo(v,cb);return T},db=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection}=r;if(a){var u=F.after(n,a,{voids:o});if(u){var[,h]=F.last(n,[]),d=[u.path,h];if(K.isPath(a)&&a.length===0)throw new Error("Cannot get the next node from the root node!");if(s==null)if(K.isPath(a)){var[f]=F.parent(n,a);s=m=>f.children.includes(m)}else s=()=>!0;var[g]=F.nodes(n,{at:d,match:s,mode:i,voids:o});return g}}},fb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=F.path(n,r,i),s=De.get(n,o);return[s,o]};function gb(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,mode:i="all",universal:o=!1,reverse:s=!1,voids:a=!1,pass:u,ignoreNonSelectable:h=!1}=n,{match:d}=n;if(d||(d=()=>!0),!!r){var f,g;if(QR.isSpan(r))f=r[0],g=r[1];else{var m=F.path(e,r,{edge:"start"}),v=F.path(e,r,{edge:"end"});f=s?v:m,g=s?m:v}var w=De.nodes(e,{reverse:s,from:f,to:g,pass:H=>{var[z,U]=H;return u&&u([z,U])?!0:be.isElement(z)?!!(!a&&(F.isVoid(e,z)||F.isElementReadOnly(e,z))||h&&!F.isSelectable(e,z)):!1}}),C=[],P;for(var[D,x]of w)if(!(h&&be.isElement(D)&&!F.isSelectable(e,D))){var k=P&&K.compare(x,P[1])===0;if(!(i==="highest"&&k)){if(!d(D,x)){if(o&&!k&&ke.isText(D))return;continue}if(i==="lowest"&&k){P=[D,x];continue}var T=i==="lowest"?P:[D,x];T&&(o?C.push(T):yield T),P=[D,x]}}i==="lowest"&&P&&(o?C.push(P):yield P),o&&(yield*C)}}()}var pb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:i=!1,operation:o}=r,s=f=>Cf.get(f)||[],a=f=>Ef.get(f)||new Set,u=f=>{var g=s(f).pop(),m=g.join(",");return a(f).delete(m),g};if(F.isNormalizing(n)){if(i){var h=Array.from(De.nodes(n),f=>{var[,g]=f;return g}),d=new Set(h.map(f=>f.join(",")));Cf.set(n,h),Ef.set(n,d)}s(n).length!==0&&F.withoutNormalizing(n,()=>{for(var f of s(n))if(De.has(n,f)){var g=F.node(n,f),[m,v]=g;be.isElement(m)&&m.children.length===0&&n.normalizeNode(g,{operation:o})}for(var w=s(n),C=w.length,P=0;w.length!==0;){if(!n.shouldNormalize({dirtyPaths:w,iteration:P,initialDirtyPathsLength:C,operation:o}))return;var D=u(n);if(De.has(n,D)){var x=F.node(n,D);n.normalizeNode(x,{operation:o})}P++,w=s(n)}})}},mb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=F.path(n,r,i),s=K.parent(o),a=F.node(n,s);return a},vb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,h=F.pathRefs(n);return h.delete(s),s.current=null,u}},a=F.pathRefs(n);return a.add(s),s},yb=e=>{var n=UC.get(e);return n||(n=new Set,UC.set(e,n)),n},wb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:s}=i;if(K.isPath(r)){if(s==="start"){var[,a]=De.first(n,r);r=a}else if(s==="end"){var[,u]=De.last(n,r);r=u}}return de.isRange(r)&&(s==="start"?r=de.start(r):s==="end"?r=de.end(r):r=K.common(r.anchor.path,r.focus.path)),Ct.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},xb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,h=F.pointRefs(n);return h.delete(s),s.current=null,u}},a=F.pointRefs(n);return a.add(s),s},Cb=e=>{var n=XC.get(e);return n||(n=new Set,XC.set(e,n)),n},Eb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=i;if(K.isPath(r)){var s;if(o==="end"){var[,a]=De.last(n,r);s=a}else{var[,u]=De.first(n,r);s=u}var h=De.get(n,s);if(!ke.isText(h))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:s,offset:o==="end"?h.text.length:0}}if(de.isRange(r)){var[d,f]=de.edges(r);return o==="start"?d:f}return r};function Pb(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,unit:i="offset",reverse:o=!1,voids:s=!1,ignoreNonSelectable:a=!1}=n;if(!r)return;var u=F.range(e,r),[h,d]=de.edges(u),f=o?d:h,g=!1,m="",v=0,w=0,C=0;for(var[P,D]of F.nodes(e,{at:r,reverse:o,voids:s,ignoreNonSelectable:a})){if(be.isElement(P)){if(!s&&(e.isVoid(P)||e.isElementReadOnly(P))){yield F.start(e,D);continue}if(e.isInline(P))continue;if(F.hasInlines(e,P)){var x=K.isAncestor(D,d.path)?d:F.end(e,D),k=K.isAncestor(D,h.path)?h:F.start(e,D);m=F.string(e,{anchor:k,focus:x},{voids:s}),g=!0}}if(ke.isText(P)){var T=K.equals(D,f.path);for(T?(w=o?f.offset:P.text.length-f.offset,C=f.offset):(w=P.text.length,C=o?w:0),(T||g||i==="offset")&&(yield{path:D,offset:C},g=!1);;){if(v===0){if(m==="")break;v=H(m,i,o),m=Wv(m,v,o)[1]}if(C=o?C-v:C+v,w=w-v,w<0){v=-w;break}v=0,yield{path:D,offset:C}}}}function H(z,U,q){return U==="character"?$v(z,q):U==="word"?ik(z,q):U==="line"||U==="block"?z.length:1}}()}var Db=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection}=r;if(a){var u=F.before(n,a,{voids:o});if(u){var[,h]=F.first(n,[]),d=[u.path,h];if(K.isPath(a)&&a.length===0)throw new Error("Cannot get the previous node from the root node!");if(s==null)if(K.isPath(a)){var[f]=F.parent(n,a);s=m=>f.children.includes(m)}else s=()=>!0;var[g]=F.nodes(n,{reverse:!0,at:d,match:s,mode:i,voids:o});return g}}},Sb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,h=F.rangeRefs(n);return h.delete(s),s.current=null,u}},a=F.rangeRefs(n);return a.add(s),s},Tb=e=>{var n=KC.get(e);return n||(n=new Set,KC.set(e,n)),n},Ab=(e,n,r)=>{if(de.isRange(n)&&!r)return n;var i=F.start(e,n),o=F.end(e,r||n);return{anchor:i,focus:o}};function wE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Bb(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Mb=(e,n)=>{var{selection:r}=e;if(r){var i=(f,g)=>{if(!ke.isText(f))return!1;var[m,v]=F.parent(e,g);return!e.isVoid(m)||e.markableVoid(m)},o=de.isExpanded(r),s=!1;if(!o){var[a,u]=F.node(e,r);if(a&&i(a,u)){var[h]=F.parent(e,u);s=h&&e.markableVoid(h)}}if(o||s)ve.unsetNodes(e,n,{match:i,split:!0,voids:!0});else{var d=Bb({},F.marks(e)||{});delete d[n],e.marks=d,_u.get(e)||e.onChange()}}},Rb=(e,n)=>{LS.set(e,n)},kb=(e,n)=>F.point(e,n,{edge:"start"}),bb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=i,s=F.range(n,r),[a,u]=de.edges(s),h="";for(var[d,f]of F.nodes(n,{at:s,match:ke.isText,voids:o})){var g=d.text;K.equals(f,u.path)&&(g=g.slice(0,u.offset)),K.equals(f,a.path)&&(g=g.slice(a.offset)),h+=g}return h},Fb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=i,[s,a]=de.edges(r);if(s.offset!==0||a.offset!==0||de.isCollapsed(r)||K.hasPrevious(a.path))return r;var u=F.above(n,{at:a,match:w=>be.isElement(w)&&F.isBlock(n,w),voids:o}),h=u?u[1]:[],d=F.start(n,s),f={anchor:d,focus:a},g=!0;for(var[m,v]of F.nodes(n,{at:f,match:ke.isText,reverse:!0,voids:o})){if(g){g=!1;continue}if(m.text!==""||K.isBefore(v,h)){a={path:v,offset:m.text.length};break}}return{anchor:s,focus:a}},Ob=(e,n)=>{var r=F.isNormalizing(e);F.setNormalizing(e,!1);try{n()}finally{F.setNormalizing(e,r)}F.normalize(e)},Ib=(e,n,r)=>{var[i,o]=n;return be.isElement(i)&&F.isEmpty(e,i)||ke.isText(i)&&i.text===""&&o[o.length-1]!==0},Lb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var i,o,{reverse:s=!1,unit:a="character",distance:u=1,voids:h=!1}=r,{at:d=n.selection,hanging:f=!1}=r;if(d){var g=!1;if(de.isRange(d)&&de.isCollapsed(d)&&(g=!0,d=d.anchor),Ct.isPoint(d)){var m=F.void(n,{at:d,mode:"highest"});if(!h&&m){var[,v]=m;d=v}else{var w={unit:a,distance:u},C=s?F.before(n,d,w)||F.start(n,[]):F.after(n,d,w)||F.end(n,[]);d={anchor:d,focus:C},f=!0}}if(K.isPath(d)){ve.removeNodes(n,{at:d,voids:h});return}if(!de.isCollapsed(d)){if(!f){var[,P]=de.edges(d),D=F.end(n,[]);Ct.equals(P,D)||(d=F.unhangRange(n,d,{voids:h}))}var[x,k]=de.edges(d),T=F.above(n,{match:we=>be.isElement(we)&&F.isBlock(n,we),at:x,voids:h}),H=F.above(n,{match:we=>be.isElement(we)&&F.isBlock(n,we),at:k,voids:h}),z=T&&H&&!K.equals(T[1],H[1]),U=K.equals(x.path,k.path),q=h?null:(i=F.void(n,{at:x,mode:"highest"}))!==null&&i!==void 0?i:F.elementReadOnly(n,{at:x,mode:"highest"}),te=h?null:(o=F.void(n,{at:k,mode:"highest"}))!==null&&o!==void 0?o:F.elementReadOnly(n,{at:k,mode:"highest"});if(q){var ne=F.before(n,x);ne&&T&&K.isAncestor(T[1],ne.path)&&(x=ne)}if(te){var le=F.after(n,k);le&&H&&K.isAncestor(H[1],le.path)&&(k=le)}var Q=[],J;for(var ie of F.nodes(n,{at:d,voids:h})){var[N,A]=ie;J&&K.compare(A,J)===0||(!h&&be.isElement(N)&&(F.isVoid(n,N)||F.isElementReadOnly(n,N))||!K.isCommon(A,x.path)&&!K.isCommon(A,k.path))&&(Q.push(ie),J=A)}var b=Array.from(Q,we=>{var[,it]=we;return F.pathRef(n,it)}),M=F.pointRef(n,x),I=F.pointRef(n,k),_="";if(!U&&!q){var B=M.current,[$]=F.leaf(n,B),{path:W}=B,{offset:Y}=x,oe=$.text.slice(Y);oe.length>0&&(n.apply({type:"remove_text",path:W,offset:Y,text:oe}),_=oe)}if(b.reverse().map(we=>we.unref()).filter(we=>we!==null).forEach(we=>ve.removeNodes(n,{at:we,voids:h})),!te){var re=I.current,[ge]=F.leaf(n,re),{path:pe}=re,X=U?x.offset:0,ae=ge.text.slice(X,k.offset);ae.length>0&&(n.apply({type:"remove_text",path:pe,offset:X,text:ae}),_=ae)}!U&&z&&I.current&&M.current&&ve.mergeNodes(n,{at:I.current,hanging:!0,voids:h}),g&&s&&a==="character"&&_.length>1&&_.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&ve.insertText(n,_.slice(0,_.length-u));var fe=M.unref(),me=I.unref(),Ne=s?fe||me:me||fe;r.at==null&&Ne&&ve.select(n,Ne)}}})},Hb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:s=!1}=i,{at:a=zv(n),batchDirty:u=!0}=i;if(r.length){if(de.isRange(a))if(o||(a=F.unhangRange(n,a,{voids:s})),de.isCollapsed(a))a=a.anchor;else{var[,h]=de.edges(a);if(!s&&F.void(n,{at:h}))return;var d=F.pointRef(n,h);ve.delete(n,{at:a}),a=d.unref()}else K.isPath(a)&&(a=F.start(n,a));if(!(!s&&F.void(n,{at:a}))){var f=F.above(n,{at:a,match:W=>be.isElement(W)&&F.isInline(n,W),mode:"highest",voids:s});if(f){var[,g]=f;if(F.isEnd(n,a,g)){var m=F.after(n,g);a=m}else if(F.isStart(n,a,g)){var v=F.before(n,g);a=v}}var w=F.above(n,{match:W=>be.isElement(W)&&F.isBlock(n,W),at:a,voids:s}),[,C]=w,P=F.isStart(n,a,C),D=F.isEnd(n,a,C),x=P&&D,[,k]=De.first({children:r},[]),[,T]=De.last({children:r},[]),H=W=>{var[Y,oe]=W,re=oe.length===0;return re?!1:x?!0:!(!P&&K.isAncestor(oe,k)&&be.isElement(Y)&&!n.isVoid(Y)&&!n.isInline(Y)||!D&&K.isAncestor(oe,T)&&be.isElement(Y)&&!n.isVoid(Y)&&!n.isInline(Y))},z=!0,U=[],q=[],te=[];for(var ne of De.nodes({children:r},{pass:H})){var[le,Q]=ne;z&&be.isElement(le)&&!n.isInline(le)&&!K.isAncestor(Q,k)&&(z=!1),H(ne)&&(be.isElement(le)&&!n.isInline(le)?(z=!1,q.push(le)):z?U.push(le):te.push(le))}var[J]=F.nodes(n,{at:a,match:W=>ke.isText(W)||F.isInline(n,W),mode:"highest",voids:s}),[,ie]=J,N=F.isStart(n,a,ie),A=F.isEnd(n,a,ie),b=F.pathRef(n,D&&!te.length?K.next(C):C),M=F.pathRef(n,A?K.next(ie):ie),I=te.length>0;ve.splitNodes(n,{at:a,match:W=>I?be.isElement(W)&&F.isBlock(n,W):ke.isText(W)||F.isInline(n,W),mode:I?"lowest":"highest",always:I&&(!P||U.length>0)&&(!D||te.length>0),voids:s});var _=F.pathRef(n,!N||N&&A?K.next(ie):ie);if(ve.insertNodes(n,U,{at:_.current,match:W=>ke.isText(W)||F.isInline(n,W),mode:"highest",voids:s,batchDirty:u}),x&&!U.length&&q.length&&!te.length&&ve.delete(n,{at:C,voids:s}),ve.insertNodes(n,q,{at:b.current,match:W=>be.isElement(W)&&F.isBlock(n,W),mode:"lowest",voids:s,batchDirty:u}),ve.insertNodes(n,te,{at:M.current,match:W=>ke.isText(W)||F.isInline(n,W),mode:"highest",voids:s,batchDirty:u}),!i.at){var B;if(te.length>0&&M.current?B=K.previous(M.current):q.length>0&&b.current?B=K.previous(b.current):_.current&&(B=K.previous(_.current)),B){var $=F.end(n,B);ve.select(n,$)}}_.unref(),b.unref(),M.unref()}}})},Nb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:i="anchor"}=r,{selection:o}=n;if(o){if(i==="anchor")ve.select(n,o.anchor);else if(i==="focus")ve.select(n,o.focus);else if(i==="start"){var[s]=de.edges(o);ve.select(n,s)}else if(i==="end"){var[,a]=de.edges(o);ve.select(n,a)}}else return},Gb=e=>{var{selection:n}=e;n&&e.apply({type:"set_selection",properties:n,newProperties:null})},_b=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:i}=n,{distance:o=1,unit:s="character",reverse:a=!1}=r,{edge:u=null}=r;if(i){u==="start"&&(u=de.isBackward(i)?"focus":"anchor"),u==="end"&&(u=de.isBackward(i)?"anchor":"focus");var{anchor:h,focus:d}=i,f={distance:o,unit:s,ignoreNonSelectable:!0},g={};if(u==null||u==="anchor"){var m=a?F.before(n,h,f):F.after(n,h,f);m&&(g.anchor=m)}if(u==null||u==="focus"){var v=a?F.before(n,d,f):F.after(n,d,f);v&&(g.focus=v)}ve.setSelection(n,g)}},jb=(e,n)=>{var{selection:r}=e;if(n=F.range(e,n),r){ve.setSelection(e,n);return}if(!de.isRange(n))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(rn.stringify(n)));e.apply({type:"set_selection",properties:r,newProperties:n})};function xE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function CE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var zb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=n,{edge:s="both"}=i;if(o){s==="start"&&(s=de.isBackward(o)?"focus":"anchor"),s==="end"&&(s=de.isBackward(o)?"anchor":"focus");var{anchor:a,focus:u}=o,h=s==="anchor"?a:u;ve.setSelection(n,{[s==="anchor"?"anchor":"focus"]:CE(CE({},h),r)})}},$b=(e,n)=>{var{selection:r}=e,i={},o={};if(r){for(var s in n)(s==="anchor"&&n.anchor!=null&&!Ct.equals(n.anchor,r.anchor)||s==="focus"&&n.focus!=null&&!Ct.equals(n.focus,r.focus)||s!=="anchor"&&s!=="focus"&&n[s]!==r[s])&&(i[s]=r[s],o[s]=n[s]);Object.keys(i).length>0&&e.apply({type:"set_selection",properties:i,newProperties:o})}},Wb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:s=!1,mode:a="lowest",batchDirty:u=!0}=i,{at:h,match:d,select:f}=i;if(De.isNode(r)&&(r=[r]),r.length!==0){var[g]=r;if(h||(h=zv(n),f!==!1&&(f=!0)),f==null&&(f=!1),de.isRange(h))if(o||(h=F.unhangRange(n,h,{voids:s})),de.isCollapsed(h))h=h.anchor;else{var[,m]=de.edges(h),v=F.pointRef(n,m);ve.delete(n,{at:h}),h=v.unref()}if(Ct.isPoint(h)){d==null&&(ke.isText(g)?d=ne=>ke.isText(ne):n.isInline(g)?d=ne=>ke.isText(ne)||F.isInline(n,ne):d=ne=>be.isElement(ne)&&F.isBlock(n,ne));var[w]=F.nodes(n,{at:h.path,match:d,mode:a,voids:s});if(w){var[,C]=w,P=F.pathRef(n,C),D=F.isEnd(n,h,C);ve.splitNodes(n,{at:h,match:d,mode:a,voids:s});var x=P.unref();h=D?K.next(x):x}else return}var k=K.parent(h),T=h[h.length-1];if(!(!s&&F.void(n,{at:k}))){if(u){var H=[],z=K.levels(k);Tk(n,()=>{var ne=function(){var J=k.concat(T);T++;var ie={type:"insert_node",path:J,node:le};n.apply(ie),h=K.next(h),H.push(ie),ke.isText(le)?z.push(J):z.push(...Array.from(De.nodes(le),N=>{var[,A]=N;return J.concat(A)}))};for(var le of r)ne()},()=>{NS(n,z,ne=>{var le=ne;for(var Q of H)if(K.operationCanTransformPath(Q)&&(le=K.transform(le,Q),!le))return null;return le})})}else for(var U of r){var q=k.concat(T);T++,n.apply({type:"insert_node",path:q,node:U}),h=K.next(h)}if(h=K.previous(h),f){var te=F.end(n,h);te&&ve.select(n,te)}}}})},Vb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var{at:i=n.selection,mode:o="lowest",voids:s=!1}=r,{match:a}=r;if(a==null&&(a=K.isPath(i)?Fl(n,i):T=>be.isElement(T)&&F.isBlock(n,T)),!!i){var u=F.nodes(n,{at:i,match:a,mode:o,voids:s}),h=Array.from(u,T=>{var[,H]=T;return F.pathRef(n,H)});for(var d of h){var f=d.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var g=F.node(n,K.parent(f)),[m,v]=g,w=f[f.length-1],{length:C}=m.children;if(C===1){var P=K.next(v);ve.moveNodes(n,{at:f,to:P,voids:s}),ve.removeNodes(n,{at:v,voids:s})}else if(w===0)ve.moveNodes(n,{at:f,to:v,voids:s});else if(w===C-1){var D=K.next(v);ve.moveNodes(n,{at:f,to:D,voids:s})}else{var x=K.next(f),k=K.next(v);ve.splitNodes(n,{at:x,voids:s}),ve.moveNodes(n,{at:f,to:k,voids:s})}}}})},Ub=["text"],Xb=["children"],GS=(e,n)=>{if(be.isElement(n)){var r=n;return F.isVoid(e,n)?!0:r.children.length===1?GS(e,r.children[0]):!1}else return!F.isEditor(n)},Kb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var{match:i,at:o=n.selection}=r,{hanging:s=!1,voids:a=!1,mode:u="lowest"}=r;if(o){if(i==null)if(K.isPath(o)){var[h]=F.parent(n,o);i=ne=>h.children.includes(ne)}else i=ne=>be.isElement(ne)&&F.isBlock(n,ne);if(!s&&de.isRange(o)&&(o=F.unhangRange(n,o,{voids:a})),de.isRange(o))if(de.isCollapsed(o))o=o.anchor;else{var[,d]=de.edges(o),f=F.pointRef(n,d);ve.delete(n,{at:o}),o=f.unref(),r.at==null&&ve.select(n,o)}var[g]=F.nodes(n,{at:o,match:i,voids:a,mode:u}),m=F.previous(n,{at:o,match:i,voids:a,mode:u});if(!(!g||!m)){var[v,w]=g,[C,P]=m;if(!(w.length===0||P.length===0)){var D=K.next(P),x=K.common(w,P),k=K.isSibling(w,P),T=Array.from(F.levels(n,{at:w}),ne=>{var[le]=ne;return le}).slice(x.length).slice(0,-1),H=F.above(n,{at:w,mode:"highest",match:ne=>T.includes(ne)&&GS(n,ne)}),z=H&&F.pathRef(n,H[1]),U,q;if(ke.isText(v)&&ke.isText(C)){var te=lo(v,Ub);q=C.text.length,U=te}else if(be.isElement(v)&&be.isElement(C)){var te=lo(v,Xb);q=C.children.length,U=te}else throw new Error("Cannot merge the node at path [".concat(w,"] with the previous sibling because it is not the same kind: ").concat(rn.stringify(v)," ").concat(rn.stringify(C)));k||ve.moveNodes(n,{at:w,to:D,voids:a}),z&&ve.removeNodes(n,{at:z.current,voids:a}),F.shouldMergeNodesRemovePrevNode(n,m,g)?ve.removeNodes(n,{at:P,voids:a}):n.apply({type:"merge_node",path:D,position:q,properties:U}),z&&z.unref()}}}})},qb=(e,n)=>{F.withoutNormalizing(e,()=>{var{to:r,at:i=e.selection,mode:o="lowest",voids:s=!1}=n,{match:a}=n;if(i){a==null&&(a=K.isPath(i)?Fl(e,i):v=>be.isElement(v)&&F.isBlock(e,v));var u=F.pathRef(e,r),h=F.nodes(e,{at:i,match:a,mode:o,voids:s}),d=Array.from(h,v=>{var[,w]=v;return F.pathRef(e,w)});for(var f of d){var g=f.unref(),m=u.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:m}),u.current&&K.isSibling(m,g)&&K.isAfter(m,g)&&(u.current=K.next(u.current))}u.unref()}})},Yb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest"}=r,{at:a=n.selection,match:u}=r;if(a){u==null&&(u=K.isPath(a)?Fl(n,a):v=>be.isElement(v)&&F.isBlock(n,v)),!i&&de.isRange(a)&&(a=F.unhangRange(n,a,{voids:o}));var h=F.nodes(n,{at:a,match:u,mode:s,voids:o}),d=Array.from(h,v=>{var[,w]=v;return F.pathRef(n,w)});for(var f of d){var g=f.unref();if(g){var[m]=F.node(n,g);n.apply({type:"remove_node",path:g,node:m})}}}})},Zb=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(n,()=>{var{match:o,at:s=n.selection,compare:a,merge:u}=i,{hanging:h=!1,mode:d="lowest",split:f=!1,voids:g=!1}=i;if(s){if(o==null&&(o=K.isPath(s)?Fl(n,s):q=>be.isElement(q)&&F.isBlock(n,q)),!h&&de.isRange(s)&&(s=F.unhangRange(n,s,{voids:g})),f&&de.isRange(s)){if(de.isCollapsed(s)&&F.leaf(n,s.anchor)[0].text.length>0)return;var m=F.rangeRef(n,s,{affinity:"inward"}),[v,w]=de.edges(s),C=d==="lowest"?"lowest":"highest",P=F.isEnd(n,w,w.path);ve.splitNodes(n,{at:w,match:o,mode:C,voids:g,always:!P});var D=F.isStart(n,v,v.path);ve.splitNodes(n,{at:v,match:o,mode:C,voids:g,always:!D}),s=m.unref(),i.at==null&&ve.select(n,s)}a||(a=(q,te)=>q!==te);for(var[x,k]of F.nodes(n,{at:s,match:o,mode:d,voids:g})){var T={},H={};if(k.length!==0){var z=!1;for(var U in r)U==="children"||U==="text"||a(r[U],x[U])&&(z=!0,x.hasOwnProperty(U)&&(T[U]=x[U]),u?r[U]!=null&&(H[U]=u(x[U],r[U])):r[U]!=null&&(H[U]=r[U]));z&&n.apply({type:"set_node",path:k,properties:T,newProperties:H})}}}})},Qb=(e,n)=>{if(de.isCollapsed(n))return n.anchor;var[,r]=de.edges(n),i=F.pointRef(e,r);return ve.delete(e,{at:n}),i.unref()},Jb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection,height:u=0,always:h=!1}=r;if(s==null&&(s=I=>be.isElement(I)&&F.isBlock(n,I)),de.isRange(a)&&(a=Qb(n,a)),K.isPath(a)){var d=a,f=F.point(n,d),[g]=F.parent(n,d);s=I=>I===g,u=f.path.length-d.length+1,a=f,h=!0}if(a){var m=F.pointRef(n,a,{affinity:"backward"}),v;try{var[w]=F.nodes(n,{at:a,match:s,mode:i,voids:o});if(!w)return;var C=F.void(n,{at:a,mode:"highest"}),P=0;if(!o&&C){var[D,x]=C;if(be.isElement(D)&&n.isInline(D)){var k=F.after(n,x);if(!k){var T={text:""},H=K.next(x);ve.insertNodes(n,T,{at:H,voids:o}),k=F.point(n,H)}a=k,h=!0}var z=a.path.length-x.length;u=z+1,h=!0}v=F.pointRef(n,a);var U=a.path.length-u,[,q]=w,te=a.path.slice(0,U),ne=u===0?a.offset:a.path[U]+P;for(var[le,Q]of F.levels(n,{at:te,reverse:!0,voids:o})){var J=!1;if(Q.length<q.length||Q.length===0||!o&&be.isElement(le)&&F.isVoid(n,le))break;var ie=m.current,N=F.isEnd(n,ie,Q);if(h||!m||!F.isEdge(n,ie,Q)){J=!0;var A=De.extractProps(le);n.apply({type:"split_node",path:Q,position:ne,properties:A})}ne=Q[Q.length-1]+(J||N?1:0)}if(r.at==null){var b=v.current||F.end(n,[]);ve.select(n,b)}}finally{var M;m.unref(),(M=v)===null||M===void 0||M.unref()}}})},eF=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var s of r)o[s]=null;ve.setNodes(n,o,i)},tF=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(n,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{at:a=n.selection,match:u}=r;if(a){u==null&&(u=K.isPath(a)?Fl(n,a):v=>be.isElement(v)&&F.isBlock(n,v)),K.isPath(a)&&(a=F.range(n,a));var h=de.isRange(a)?F.rangeRef(n,a):null,d=F.nodes(n,{at:a,match:u,mode:i,voids:s}),f=Array.from(d,v=>{var[,w]=v;return F.pathRef(n,w)}).reverse(),g=function(){var w=m.unref(),[C]=F.node(n,w),P=F.range(n,w);o&&h&&(P=de.intersection(h.current,P)),ve.liftNodes(n,{at:P,match:D=>be.isAncestor(C)&&C.children.includes(D),voids:s})};for(var m of f)g();h&&h.unref()}})};function EE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function PE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?EE(Object(r),!0).forEach(function(i){Zn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var nF=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(n,()=>{var{mode:o="lowest",split:s=!1,voids:a=!1}=i,{match:u,at:h=n.selection}=i;if(h){if(u==null&&(K.isPath(h)?u=Fl(n,h):n.isInline(r)?u=P=>be.isElement(P)&&F.isInline(n,P)||ke.isText(P):u=P=>be.isElement(P)&&F.isBlock(n,P)),s&&de.isRange(h)){var[d,f]=de.edges(h),g=F.rangeRef(n,h,{affinity:"inward"});ve.splitNodes(n,{at:f,match:u,voids:a}),ve.splitNodes(n,{at:d,match:u,voids:a}),h=g.unref(),i.at==null&&ve.select(n,h)}var m=Array.from(F.nodes(n,{at:h,match:n.isInline(r)?P=>be.isElement(P)&&F.isBlock(n,P):P=>F.isEditor(P),mode:"lowest",voids:a})),v=function(){var D=de.isRange(h)?de.intersection(h,F.range(n,C)):h;if(!D)return 0;var x=Array.from(F.nodes(n,{at:D,match:u,mode:o,voids:a}));if(x.length>0){var[k]=x,T=x[x.length-1],[,H]=k,[,z]=T;if(H.length===0&&z.length===0)return 0;var U=K.equals(H,z)?K.parent(H):K.common(H,z),q=F.range(n,H,z),te=F.node(n,U),[ne]=te,le=U.length+1,Q=K.next(z.slice(0,le)),J=PE(PE({},r),{},{children:[]});ve.insertNodes(n,J,{at:Q,voids:a}),ve.moveNodes(n,{at:q,match:ie=>be.isAncestor(ne)&&ne.children.includes(ie),to:Q.concat(0),voids:a})}},w;for(var[,C]of m)w=v()}})},rF=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ak(e,...i)},addMark:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Fk(e,...i)},deleteBackward:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Lk(e,...i)},deleteForward:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Hk(e,...i)},deleteFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Nk(e,...i)},getFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Mk(e,...i)},insertBreak:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return qk(e,...i)},insertSoftBreak:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Zk(e,...i)},insertFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Hb(e,...i)},insertNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Yk(e,...i)},insertText:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Jk(e,...i)},normalizeNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rk(e,...i)},removeMark:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Mb(e,...i)},getDirtyPaths:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bk(e,...i)},shouldNormalize:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return kk(e,...i)},above:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return bk(e,...i)},after:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ok(e,...i)},before:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ik(e,...i)},collapse:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Nb(e,...i)},delete:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Lb(e,...i)},deselect:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gb(e,...i)},edges:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gk(e,...i)},elementReadOnly:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _k(e,...i)},end:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return jk(e,...i)},first:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return zk(e,...i)},fragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return $k(e,...i)},getMarks:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return hb(e,...i)},hasBlocks:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vk(e,...i)},hasInlines:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Uk(e,...i)},hasPath:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Xk(e,...i)},hasTexts:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Kk(e,...i)},insertNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Wb(e,...i)},isBlock:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return eb(e,...i)},isEdge:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return tb(e,...i)},isEmpty:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return nb(e,...i)},isEnd:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return rb(e,...i)},isNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ib(e,...i)},isStart:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ob(e,...i)},last:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return sb(e,...i)},leaf:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ab(e,...i)},levels:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return lb(e,...i)},liftNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Vb(e,...i)},mergeNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Kb(e,...i)},move:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _b(e,...i)},moveNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return qb(e,...i)},next:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return db(e,...i)},node:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return fb(e,...i)},nodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return gb(e,...i)},normalize:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pb(e,...i)},parent:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mb(e,...i)},path:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return wb(e,...i)},pathRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vb(e,...i)},pathRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return yb(e,...i)},point:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Eb(e,...i)},pointRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return xb(e,...i)},pointRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Cb(e,...i)},positions:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Pb(e,...i)},previous:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Db(e,...i)},range:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ab(e,...i)},rangeRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Sb(e,...i)},rangeRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Tb(e,...i)},removeNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Yb(e,...i)},select:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return jb(e,...i)},setNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Zb(e,...i)},setNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Rb(e,...i)},setPoint:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return zb(e,...i)},setSelection:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return $b(e,...i)},splitNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Jb(e,...i)},start:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return kb(e,...i)},string:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return bb(e,...i)},unhangRange:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Fb(e,...i)},unsetNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return eF(e,...i)},unwrapNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return tF(e,...i)},void:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Wk(e,...i)},withoutNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ob(e,...i)},wrapNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return nF(e,...i)},shouldMergeNodesRemovePrevNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ib(e,...i)}};return e},o1,DE;function iF(){if(DE)return o1;DE=1,o1=o;var e="---",n="A-Za-z--------",r=new RegExp("^[^"+n+"]*["+e+"]"),i=new RegExp("^[^"+e+"]*["+n+"]");function o(s){return s=String(s||""),r.test(s)?"rtl":i.test(s)?"ltr":"neutral"}return o1}var oF=iF();const _S=oa(oF),SE=e=>typeof e=="object"&&e!=null&&e.nodeType===1,TE=(e,n)=>(!n||e!=="hidden")&&e!=="visible"&&e!=="clip",xd=(e,n)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return TE(r.overflowY,n)||TE(r.overflowX,n)||(i=>{const o=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!o&&(o.clientHeight<i.scrollHeight||o.clientWidth<i.scrollWidth)})(e)}return!1},Cd=(e,n,r,i,o,s,a,u)=>s<e&&a>n||s>e&&a<n?0:s<=e&&u<=r||a>=n&&u>=r?s-e-i:a>n&&u<r||s<e&&u>r?a-n+o:0,sF=e=>{const n=e.parentElement;return n??(e.getRootNode().host||null)},AE=(e,n)=>{var r,i,o,s;if(typeof document>"u")return[];const{scrollMode:a,block:u,inline:h,boundary:d,skipOverflowHiddenElements:f}=n,g=typeof d=="function"?d:A=>A!==d;if(!SE(e))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,v=[];let w=e;for(;SE(w)&&g(w);){if(w=sF(w),w===m){v.push(w);break}w!=null&&w===document.body&&xd(w)&&!xd(document.documentElement)||w!=null&&xd(w,f)&&v.push(w)}const C=(i=(r=window.visualViewport)==null?void 0:r.width)!=null?i:innerWidth,P=(s=(o=window.visualViewport)==null?void 0:o.height)!=null?s:innerHeight,{scrollX:D,scrollY:x}=window,{height:k,width:T,top:H,right:z,bottom:U,left:q}=e.getBoundingClientRect(),{top:te,right:ne,bottom:le,left:Q}=(A=>{const b=window.getComputedStyle(A);return{top:parseFloat(b.scrollMarginTop)||0,right:parseFloat(b.scrollMarginRight)||0,bottom:parseFloat(b.scrollMarginBottom)||0,left:parseFloat(b.scrollMarginLeft)||0}})(e);let J=u==="start"||u==="nearest"?H-te:u==="end"?U+le:H+k/2-te+le,ie=h==="center"?q+T/2-Q+ne:h==="end"?z+ne:q-Q;const N=[];for(let A=0;A<v.length;A++){const b=v[A],{height:M,width:I,top:_,right:B,bottom:$,left:W}=b.getBoundingClientRect();if(a==="if-needed"&&H>=0&&q>=0&&U<=P&&z<=C&&(b===m&&!xd(b)||H>=_&&U<=$&&q>=W&&z<=B))return N;const Y=getComputedStyle(b),oe=parseInt(Y.borderLeftWidth,10),re=parseInt(Y.borderTopWidth,10),ge=parseInt(Y.borderRightWidth,10),pe=parseInt(Y.borderBottomWidth,10);let X=0,ae=0;const fe="offsetWidth"in b?b.offsetWidth-b.clientWidth-oe-ge:0,me="offsetHeight"in b?b.offsetHeight-b.clientHeight-re-pe:0,Ne="offsetWidth"in b?b.offsetWidth===0?0:I/b.offsetWidth:0,we="offsetHeight"in b?b.offsetHeight===0?0:M/b.offsetHeight:0;if(m===b)X=u==="start"?J:u==="end"?J-P:u==="nearest"?Cd(x,x+P,P,re,pe,x+J,x+J+k,k):J-P/2,ae=h==="start"?ie:h==="center"?ie-C/2:h==="end"?ie-C:Cd(D,D+C,C,oe,ge,D+ie,D+ie+T,T),X=Math.max(0,X+x),ae=Math.max(0,ae+D);else{X=u==="start"?J-_-re:u==="end"?J-$+pe+me:u==="nearest"?Cd(_,$,M,re,pe+me,J,J+k,k):J-(_+M/2)+me/2,ae=h==="start"?ie-W-oe:h==="center"?ie-(W+I/2)+fe/2:h==="end"?ie-B+ge+fe:Cd(W,B,I,oe,ge+fe,ie,ie+T,T);const{scrollLeft:it,scrollTop:Ie}=b;X=we===0?0:Math.max(0,Math.min(Ie+X/we,b.scrollHeight-M/we+me)),ae=Ne===0?0:Math.max(0,Math.min(it+ae/Ne,b.scrollWidth-I/Ne+fe)),J+=Ie-X,ie+=it-ae}N.push({el:b,top:X,left:ae})}return N},aF=e=>e===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(e)?e:{block:"start",inline:"nearest"};function lF(e,n){if(!e.isConnected||!(o=>{let s=o;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;const r=(o=>{const s=window.getComputedStyle(o);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(e);if((o=>typeof o=="object"&&typeof o.behavior=="function")(n))return n.behavior(AE(e,n));const i=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:o,top:s,left:a}of AE(e,aF(n))){const u=s-r.top+r.bottom,h=a-r.left+r.right;o.scroll({top:u,left:h,behavior:i})}}var jS=globalThis.Node,uF=globalThis.Text,Vv=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,cF=e=>ns(e)&&e.nodeType===8,zr=e=>ns(e)&&e.nodeType===1,ns=e=>{var n=Vv(e);return!!n&&e instanceof n.Node},wm=e=>{var n=e&&e.anchorNode&&Vv(e.anchorNode);return!!n&&e instanceof n.Selection},zS=e=>ns(e)&&e.nodeType===3,hF=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,dF=e=>{var[n,r]=e;if(zr(n)&&n.childNodes.length){var i=r===n.childNodes.length,o=i?r-1:r;for([n,o]=$S(n,o,i?"backward":"forward"),i=o<r;zr(n)&&n.childNodes.length;){var s=i?n.childNodes.length-1:0;n=gF(n,s,i?"backward":"forward")}r=i&&n.textContent!=null?n.textContent.length:0}return[n,r]},fF=e=>{for(var n=e&&e.parentNode;n;){if(n.toString()==="[object ShadowRoot]")return!0;n=n.parentNode}return!1},$S=(e,n,r)=>{for(var{childNodes:i}=e,o=i[n],s=n,a=!1,u=!1;(cF(o)||zr(o)&&o.childNodes.length===0||zr(o)&&o.getAttribute("contenteditable")==="false")&&!(a&&u);){if(s>=i.length){a=!0,s=n-1,r="backward";continue}if(s<0){u=!0,s=n+1,r="forward";continue}o=i[s],n=s,s+=r==="forward"?1:-1}return[o,n]},gF=(e,n,r)=>{var[i]=$S(e,n,r);return i},WS=e=>{var n="";if(zS(e)&&e.nodeValue)return e.nodeValue;if(zr(e)){for(var r of Array.from(e.childNodes))n+=WS(r);var i=getComputedStyle(e).getPropertyValue("display");(i==="block"||i==="list"||e.tagName==="BR")&&(n+=`
`)}return n},pF=/data-slate-fragment="(.+?)"/m,mF=e=>{var n=e.getData("text/html"),[,r]=n.match(pF)||[];return r},ju=e=>e.getSelection!=null?e.getSelection():document.getSelection(),Uv=(e,n,r)=>{var{target:i}=n;if(zr(i)&&i.matches('[contentEditable="false"]'))return!1;var{document:o}=lt.getWindow(e);if(o.contains(i))return lt.hasDOMNode(e,i,{editable:!0});var s=r.find(a=>{var{addedNodes:u,removedNodes:h}=a;for(var d of u)if(d===i||d.contains(i))return!0;for(var f of h)if(f===i||f.contains(i))return!0});return!s||s===n?!1:Uv(e,s,r)},vF=()=>{for(var e=document.activeElement;(n=e)!==null&&n!==void 0&&n.shadowRoot&&(r=e.shadowRoot)!==null&&r!==void 0&&r.activeElement;){var n,r,i;e=(i=e)===null||i===void 0||(i=i.shadowRoot)===null||i===void 0?void 0:i.activeElement}return e},BE=(e,n)=>!!(e.compareDocumentPosition(n)&jS.DOCUMENT_POSITION_PRECEDING),yF=(e,n)=>!!(e.compareDocumentPosition(n)&jS.DOCUMENT_POSITION_FOLLOWING),s1,a1,wF=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ME=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Un=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Za=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Os=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),xF=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),VS=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),CF=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),EF=Un&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),PF=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),DF=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),SF=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Kd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((s1=navigator.userAgent.match(/Version\/(\d+)/))!==null&&s1!==void 0&&s1[1]&&parseInt((a1=navigator.userAgent.match(/Version\/(\d+)/))===null||a1===void 0?void 0:a1[1],10)<17);var No=(!CF||!EF)&&!xF&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function sc(e){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sc(e)}function TF(e,n){if(sc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(sc(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function AF(e){var n=TF(e,"string");return sc(n)==="symbol"?n:String(n)}function Xv(e,n,r){return n=AF(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var BF=0;class US{constructor(){Xv(this,"id",void 0),this.id="".concat(BF++)}}var il=new WeakMap,Qa=new WeakMap,zu=new WeakMap,XS=new WeakMap,qd=new WeakMap,xm=new WeakMap,ac=new WeakMap,$s=new WeakMap,Pf=new WeakMap,g0=new WeakMap,Cm=new WeakMap,Uo=new WeakMap,Ns=new WeakMap,$u=new WeakMap,Em=new WeakMap,Kv=new WeakMap,hi=new WeakMap,Ji=new WeakMap,ar=new WeakMap,zo=new WeakMap,$o=new WeakMap,KS=new WeakMap,gl=Symbol("placeholder"),qS=Symbol("mark-placeholder"),lt={androidPendingDiffs:e=>ar.get(e),androidScheduleFlush:e=>{var n;(n=Kv.get(e))===null||n===void 0||n()},blur:e=>{var n=lt.toDOMNode(e,e),r=lt.findDocumentOrShadowRoot(e);Uo.set(e,!1),r.activeElement===n&&n.blur()},deselect:e=>{var{selection:n}=e,r=lt.findDocumentOrShadowRoot(e),i=ju(r);i&&i.rangeCount>0&&i.removeAllRanges(),n&&ve.deselect(e)},findDocumentOrShadowRoot:e=>{var n=lt.toDOMNode(e,e),r=n.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:n.ownerDocument},findEventRange:(e,n)=>{"nativeEvent"in n&&(n=n.nativeEvent);var{clientX:r,clientY:i,target:o}=n;if(r==null||i==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var s=lt.toSlateNode(e,n.target),a=lt.findPath(e,s);if(be.isElement(s)&&F.isVoid(e,s)){var u=o.getBoundingClientRect(),h=e.isInline(s)?r-u.left<u.left+u.width-r:i-u.top<u.top+u.height-i,d=F.point(e,a,{edge:h?"start":"end"}),f=h?F.before(e,d):F.after(e,d);if(f){var g=F.range(e,f);return g}}var m,{document:v}=lt.getWindow(e);if(v.caretRangeFromPoint)m=v.caretRangeFromPoint(r,i);else{var w=v.caretPositionFromPoint(r,i);w&&(m=v.createRange(),m.setStart(w.offsetNode,w.offset),m.setEnd(w.offsetNode,w.offset))}if(!m)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var C=lt.toSlateRange(e,m,{exactMatch:!1,suppressThrow:!1});return C},findKey:(e,n)=>{var r=Pf.get(n);return r||(r=new US,Pf.set(n,r)),r},findPath:(e,n)=>{for(var r=[],i=n;;){var o=zu.get(i);if(o==null){if(F.isEditor(i))return r;break}var s=Qa.get(i);if(s==null)break;r.unshift(s),i=o}throw new Error("Unable to find the path for Slate node: ".concat(rn.stringify(n)))},focus:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Uo.get(n)){if(r.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(n.operations.length>0){setTimeout(()=>{lt.focus(n,{retries:r.retries-1})},10);return}var i=lt.toDOMNode(n,n),o=lt.findDocumentOrShadowRoot(n);if(o.activeElement!==i){if(n.selection&&o instanceof Document){var s=ju(o),a=lt.toDOMRange(n,n.selection);s==null||s.removeAllRanges(),s==null||s.addRange(a)}n.selection||ve.select(n,F.start(n,[])),Uo.set(n,!0),i.focus({preventScroll:!0})}}},getWindow:e=>{var n=XS.get(e);if(!n)throw new Error("Unable to find a host window element for this editor");return n},hasDOMNode:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=i,s=lt.toDOMNode(n,n),a;try{a=zr(r)?r:r.parentElement}catch(u){if(u instanceof Error&&!u.message.includes('Permission denied to access property "nodeType"'))throw u}return a?a.closest("[data-slate-editor]")===s&&(!o||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===s||!!a.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,n)=>ns(n)&&lt.hasDOMNode(e,n,{editable:!0}),hasRange:(e,n)=>{var{anchor:r,focus:i}=n;return F.hasPath(e,r.path)&&F.hasPath(e,i.path)},hasSelectableTarget:(e,n)=>lt.hasEditableTarget(e,n)||lt.isTargetInsideNonReadonlyVoid(e,n),hasTarget:(e,n)=>ns(n)&&lt.hasDOMNode(e,n),insertData:(e,n)=>{e.insertData(n)},insertFragmentData:(e,n)=>e.insertFragmentData(n),insertTextData:(e,n)=>e.insertTextData(n),isComposing:e=>!!Ns.get(e),isFocused:e=>!!Uo.get(e),isReadOnly:e=>!!Cm.get(e),isTargetInsideNonReadonlyVoid:(e,n)=>{if(Cm.get(e))return!1;var r=lt.hasTarget(e,n)&&lt.toSlateNode(e,n);return be.isElement(r)&&F.isVoid(e,r)},setFragmentData:(e,n,r)=>e.setFragmentData(n,r),toDOMNode:(e,n)=>{var r=g0.get(e),i=F.isEditor(n)?qd.get(e):r==null?void 0:r.get(lt.findKey(e,n));if(!i)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(rn.stringify(n)));return i},toDOMPoint:(e,n)=>{var[r]=F.node(e,n.path),i=lt.toDOMNode(e,r),o;F.void(e,{at:n})&&(n={path:n.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",a=Array.from(i.querySelectorAll(s)),u=0,h=0;h<a.length;h++){var d=a[h],f=d.childNodes[0];if(!(f==null||f.textContent==null)){var{length:g}=f.textContent,m=d.getAttribute("data-slate-length"),v=m==null?g:parseInt(m,10),w=u+v,C=a[h+1];if(n.offset===w&&C!==null&&C!==void 0&&C.hasAttribute("data-slate-mark-placeholder")){var P,D=C.childNodes[0];o=[D instanceof uF?D:C,(P=C.textContent)!==null&&P!==void 0&&P.startsWith("\uFEFF")?1:0];break}if(n.offset<=w){var x=Math.min(g,Math.max(0,n.offset-u));o=[f,x];break}u=w}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(rn.stringify(n)));return o},toDOMRange:(e,n)=>{var{anchor:r,focus:i}=n,o=de.isBackward(n),s=lt.toDOMPoint(e,r),a=de.isCollapsed(n)?s:lt.toDOMPoint(e,i),u=lt.getWindow(e),h=u.document.createRange(),[d,f]=o?a:s,[g,m]=o?s:a,v=zr(d)?d:d.parentElement,w=!!v.getAttribute("data-slate-zero-width"),C=zr(g)?g:g.parentElement,P=!!C.getAttribute("data-slate-zero-width");return h.setStart(d,w?1:f),h.setEnd(g,P?1:m),h},toSlateNode:(e,n)=>{var r=zr(n)?n:n.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var i=r?ac.get(r):null;if(!i)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return i},toSlatePoint:(e,n,r)=>{var{exactMatch:i,suppressThrow:o,searchDirection:s="backward"}=r,[a,u]=i?n:dF(n),h=a.parentNode,d=null,f=0;if(h){var g,m,v=lt.toDOMNode(e,e),w=h.closest('[data-slate-void="true"]'),C=w&&v.contains(w)?w:null,P=h.closest('[contenteditable="false"]'),D=P&&v.contains(P)?P:null,x=h.closest("[data-slate-leaf]"),k=null;if(x){if(d=x.closest('[data-slate-node="text"]'),d){var T=lt.getWindow(e),H=T.document.createRange();H.setStart(d,0),H.setEnd(a,u);var z=H.cloneContents(),U=[...Array.prototype.slice.call(z.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(z.querySelectorAll("[contenteditable=false]"))];U.forEach(W=>{if(Un&&!i&&W.hasAttribute("data-slate-zero-width")&&W.textContent.length>0&&W.textContext!=="\uFEFF"){W.textContent.startsWith("\uFEFF")&&(W.textContent=W.textContent.slice(1));return}W.parentNode.removeChild(W)}),f=z.textContent.length,k=d}}else if(C){for(var q=C.querySelectorAll("[data-slate-leaf]"),te=0;te<q.length;te++){var ne=q[te];if(lt.hasDOMNode(e,ne)){x=ne;break}}x?(d=x.closest('[data-slate-node="text"]'),k=x,f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})):f=1}else if(D){var le=W=>W?W.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],Q=D.closest('[data-slate-node="element"]');if(s==="forward"){var J,ie=[...le(Q),...le(Q==null?void 0:Q.nextElementSibling)];x=(J=ie.find(W=>yF(D,W)))!==null&&J!==void 0?J:null}else{var N,A=[...le(Q==null?void 0:Q.previousElementSibling),...le(Q)];x=(N=A.findLast(W=>BE(D,W)))!==null&&N!==void 0?N:null}x&&(d=x.closest('[data-slate-node="text"]'),k=x,s==="forward"?f=0:(f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})))}k&&f===k.textContent.length&&Un&&k.getAttribute("data-slate-zero-width")==="z"&&(g=k.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(h.hasAttribute("data-slate-zero-width")||Za&&(m=k.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&f--}if(Un&&!d&&!i){var b=h.hasAttribute("data-slate-node")?h:h.closest("[data-slate-node]");if(b&&lt.hasDOMNode(e,b,{editable:!0})){var M=lt.toSlateNode(e,b),{path:I,offset:_}=F.start(e,lt.findPath(e,M));return b.querySelector("[data-slate-leaf]")||(_=u),{path:I,offset:_}}}if(!d){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(n))}var B=lt.toSlateNode(e,d),$=lt.findPath(e,B);return{path:$,offset:f}},toSlateRange:(e,n,r)=>{var i,{exactMatch:o,suppressThrow:s}=r,a=wm(n)?n.anchorNode:n.startContainer,u,h,d,f,g;if(a)if(wm(n)){if(Za&&n.rangeCount>1){d=n.focusNode;var m=n.getRangeAt(0),v=n.getRangeAt(n.rangeCount-1);if(d instanceof HTMLTableRowElement&&m.startContainer instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement){let z=function(U){return U.childElementCount>0?z(U.children[0]):U};var w=m.startContainer,C=v.startContainer,P=z(w.children[m.startOffset]),D=z(C.children[v.startOffset]);f=0,D.childNodes.length>0?u=D.childNodes[0]:u=D,P.childNodes.length>0?d=P.childNodes[0]:d=P,D instanceof HTMLElement?h=D.innerHTML.length:h=0}else m.startContainer===d?(u=v.endContainer,h=v.endOffset,f=m.startOffset):(u=m.startContainer,h=m.endOffset,f=v.startOffset)}else u=n.anchorNode,h=n.anchorOffset,d=n.focusNode,f=n.focusOffset;VS&&fF(u)||Za?g=n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:g=n.isCollapsed}else u=n.startContainer,h=n.startOffset,d=n.endContainer,f=n.endOffset,g=n.collapsed;if(u==null||d==null||h==null||f==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(n));Za&&(i=d.textContent)!==null&&i!==void 0&&i.endsWith(`

`)&&f===d.textContent.length&&f--;var x=lt.toSlatePoint(e,[u,h],{exactMatch:o,suppressThrow:s});if(!x)return null;var k=BE(u,d)||u===d&&f<h,T=g?x:lt.toSlatePoint(e,[d,f],{exactMatch:o,suppressThrow:s,searchDirection:k?"forward":"backward"});if(!T)return null;var H={anchor:x,focus:T};return de.isExpanded(H)&&de.isForward(H)&&zr(d)&&F.void(e,{at:H.focus,mode:"highest"})&&(H=F.unhangRange(e,H,{voids:!0})),H}};function MF(e,n){var{path:r,diff:i}=n;if(!F.hasPath(e,r))return!1;var o=De.get(e,r);if(!ke.isText(o))return!1;if(i.start!==o.text.length||i.text.length===0)return o.text.slice(i.start,i.start+i.text.length)===i.text;var s=K.next(r);if(!F.hasPath(e,s))return!1;var a=De.get(e,s);return ke.isText(a)&&a.text.startsWith(i.text)}function YS(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>o.slice(0,s.start)+s.text+o.slice(s.end),e)}function RF(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++)if(e.charAt(i)!==n.charAt(i))return i;return r}function kF(e,n,r){for(var i=Math.min(e.length,n.length,r),o=0;o<i;o++)if(e.charAt(e.length-o-1)!==n.charAt(n.length-o-1))return o;return i}function ZS(e,n){var{start:r,end:i,text:o}=n,s=e.slice(r,i),a=RF(s,o),u=Math.min(s.length-a,o.length-a),h=kF(s,o,u),d={start:r+a,end:i-h,text:o.slice(a,o.length-h)};return d.start===d.end&&d.text.length===0?null:d}function bF(e,n,r){var i=Math.min(n.start,r.start),o=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),s=YS(e,n,r),a=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-o),u=s.slice(i,a),h=Math.max(n.end,r.end-n.text.length+(n.end-n.start));return ZS(e,{start:i,end:h,text:u})}function FF(e){var{path:n,diff:r}=e;return{anchor:{path:n,offset:r.start},focus:{path:n,offset:r.end}}}function Pm(e,n){var{path:r,offset:i}=n;if(!F.hasPath(e,r))return null;var o=De.get(e,r);if(!ke.isText(o))return null;var s=F.above(e,{match:u=>be.isElement(u)&&F.isBlock(e,u),at:r});if(!s)return null;for(;i>o.text.length;){var a=F.next(e,{at:r,match:ke.isText});if(!a||!K.isDescendant(a[1],s[1]))return null;i-=o.text.length,o=a[0],r=a[1]}return{path:r,offset:i}}function RE(e,n){var r=Pm(e,n.anchor);if(!r)return null;if(de.isCollapsed(n))return{anchor:r,focus:r};var i=Pm(e,n.focus);return i?{anchor:r,focus:i}:null}function Dm(e,n,r){var i=ar.get(e),o=i==null?void 0:i.find(f=>{var{path:g}=f;return K.equals(g,n.path)});if(!o||n.offset<=o.diff.start)return Ct.transform(n,r,{affinity:"backward"});var{diff:s}=o;if(n.offset<=s.start+s.text.length){var a={path:n.path,offset:s.start},u=Ct.transform(a,r,{affinity:"backward"});return u?{path:u.path,offset:u.offset+n.offset-s.start}:null}var h={path:n.path,offset:n.offset-s.text.length+s.end-s.start},d=Ct.transform(h,r,{affinity:"backward"});return d?r.type==="split_node"&&K.equals(r.path,n.path)&&h.offset<r.position&&s.start<r.position?d:{path:d.path,offset:d.offset+s.text.length-s.end+s.start}:null}function kE(e,n,r){var i=Dm(e,n.anchor,r);if(!i)return null;if(de.isCollapsed(n))return{anchor:i,focus:i};var o=Dm(e,n.focus,r);return o?{anchor:i,focus:o}:null}function OF(e,n){var{path:r,diff:i,id:o}=e;switch(n.type){case"insert_text":return!K.equals(n.path,r)||n.offset>=i.end?e:n.offset<=i.start?{diff:{start:n.text.length+i.start,end:n.text.length+i.end,text:i.text},id:o,path:r}:{diff:{start:i.start,end:i.end+n.text.length,text:i.text},id:o,path:r};case"remove_text":return!K.equals(n.path,r)||n.offset>=i.end?e:n.offset+n.text.length<=i.start?{diff:{start:i.start-n.text.length,end:i.end-n.text.length,text:i.text},id:o,path:r}:{diff:{start:i.start,end:i.end-n.text.length,text:i.text},id:o,path:r};case"split_node":return!K.equals(n.path,r)||n.position>=i.end?{diff:i,id:o,path:K.transform(r,n,{affinity:"backward"})}:n.position>i.start?{diff:{start:i.start,end:Math.min(n.position,i.end),text:i.text},id:o,path:r}:{diff:{start:i.start-n.position,end:i.end-n.position,text:i.text},id:o,path:K.transform(r,n,{affinity:"forward"})};case"merge_node":return K.equals(n.path,r)?{diff:{start:i.start+n.position,end:i.end+n.position,text:i.text},id:o,path:K.transform(r,n)}:{diff:i,id:o,path:K.transform(r,n)}}var s=K.transform(r,n);return s?{diff:i,path:s,id:o}:null}var bE=(e,n)=>{var r=(n.top+n.bottom)/2;return e.top<=r&&e.bottom>=r},FE=(e,n,r)=>{var i=lt.toDOMRange(e,n).getBoundingClientRect(),o=lt.toDOMRange(e,r).getBoundingClientRect();return bE(i,o)&&bE(o,i)},IF=(e,n)=>{var r=F.range(e,de.end(n)),i=Array.from(F.positions(e,{at:n})),o=0,s=i.length,a=Math.floor(s/2);if(FE(e,F.range(e,i[o]),r))return F.range(e,i[o],r);if(i.length<2)return F.range(e,i[i.length-1],r);for(;a!==i.length&&a!==o;)FE(e,F.range(e,i[a]),r)?s=a:o=a,a=Math.floor((o+s)/2);return F.range(e,i[o],r)};function OE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function IE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?OE(Object(r),!0).forEach(function(i){Xv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var LF=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",i=n,{apply:o,onChange:s,deleteBackward:a,addMark:u,removeMark:h}=i;return g0.set(i,new WeakMap),i.addMark=(d,f)=>{var g,m;(g=Kv.get(i))===null||g===void 0||g(),!hi.get(i)&&(m=ar.get(i))!==null&&m!==void 0&&m.length&&hi.set(i,null),Ji.delete(i),u(d,f)},i.removeMark=d=>{var f;!hi.get(i)&&(f=ar.get(i))!==null&&f!==void 0&&f.length&&hi.set(i,null),Ji.delete(i),h(d)},i.deleteBackward=d=>{if(d!=="line")return a(d);if(i.selection&&de.isCollapsed(i.selection)){var f=F.above(i,{match:w=>be.isElement(w)&&F.isBlock(i,w),at:i.selection});if(f){var[,g]=f,m=F.range(i,g,i.selection.anchor),v=IF(i,m);de.isCollapsed(v)||ve.delete(i,{at:v})}}},i.apply=d=>{var f=[],g=[],m=ar.get(i);if(m!=null&&m.length){var v=m.map(ie=>OF(ie,d)).filter(Boolean);ar.set(i,v)}var w=$o.get(i);w&&$o.set(i,kE(i,w,d));var C=zo.get(i);if(C!=null&&C.at){var P=Ct.isPoint(C==null?void 0:C.at)?Dm(i,C.at,d):kE(i,C.at,d);zo.set(i,P?IE(IE({},C),{},{at:P}):null)}switch(d.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...za(i,d.path));break}case"set_selection":{var D;(D=$u.get(i))===null||D===void 0||D.unref(),$u.delete(i);break}case"insert_node":case"remove_node":{f.push(...za(i,K.parent(d.path)));break}case"merge_node":{var x=K.previous(d.path);f.push(...za(i,x));break}case"move_node":{var k=K.common(K.parent(d.path),K.parent(d.newPath));f.push(...za(i,k));var T;K.isBefore(d.path,d.newPath)?(f.push(...za(i,K.parent(d.path))),T=d.newPath):(f.push(...za(i,K.parent(d.newPath))),T=d.path);var H=De.get(n,K.parent(T)),z=lt.findKey(i,H),U=F.pathRef(i,K.parent(T));g.push([U,z]);break}}switch(o(d),d.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":il.set(i,!0)}for(var[q,te]of f){var[ne]=F.node(i,q);Pf.set(ne,te)}for(var[le,Q]of g){if(le.current){var[J]=F.node(i,le.current);Pf.set(J,Q)}le.unref()}},i.setFragmentData=d=>{var{selection:f}=i;if(f){var[g,m]=de.edges(f),v=F.void(i,{at:g.path}),w=F.void(i,{at:m.path});if(!(de.isCollapsed(f)&&!v)){var C=lt.toDOMRange(i,f),P=C.cloneContents(),D=P.childNodes[0];if(P.childNodes.forEach(ne=>{ne.textContent&&ne.textContent.trim()!==""&&(D=ne)}),w){var[x]=w,k=C.cloneRange(),T=lt.toDOMNode(i,x);k.setEndAfter(T),P=k.cloneContents()}if(v&&(D=P.querySelector("[data-slate-spacer]")),Array.from(P.querySelectorAll("[data-slate-zero-width]")).forEach(ne=>{var le=ne.getAttribute("data-slate-zero-width")==="n";ne.textContent=le?`
`:""}),zS(D)){var H=D.ownerDocument.createElement("span");H.style.whiteSpace="pre",H.appendChild(D),P.appendChild(H),D=H}var z=i.getFragment(),U=JSON.stringify(z),q=window.btoa(encodeURIComponent(U));D.setAttribute("data-slate-fragment",q),d.setData("application/".concat(r),q);var te=P.ownerDocument.createElement("div");return te.appendChild(P),te.setAttribute("hidden","true"),P.ownerDocument.body.appendChild(te),d.setData("text/html",te.innerHTML),d.setData("text/plain",WS(te)),P.ownerDocument.body.removeChild(te),d}}},i.insertData=d=>{i.insertFragmentData(d)||i.insertTextData(d)},i.insertFragmentData=d=>{var f=d.getData("application/".concat(r))||mF(d);if(f){var g=decodeURIComponent(window.atob(f)),m=JSON.parse(g);return i.insertFragment(m),!0}return!1},i.insertTextData=d=>{var f=d.getData("text/plain");if(f){var g=f.split(/\r\n|\r|\n/),m=!1;for(var v of g)m&&ve.splitNodes(i,{always:!0}),i.insertText(v),m=!0;return!0}return!1},i.onChange=d=>{var f=Em.get(i);f&&f(d),s(d)},i},za=(e,n)=>{var r=[];for(var[i,o]of F.levels(e,{at:n})){var s=lt.findKey(e,i);r.push([o,s])}return r},HF=3,NF={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},GF={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},_F={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},zt=e=>{var n=NF[e],r=GF[e],i=_F[e],o=n&&ft.isHotkey(n),s=r&&ft.isHotkey(r),a=i&&ft.isHotkey(i);return u=>!!(o&&o(u)||ME&&s&&s(u)||!ME&&a&&a(u))},Kt={isBold:zt("bold"),isCompose:zt("compose"),isMoveBackward:zt("moveBackward"),isMoveForward:zt("moveForward"),isDeleteBackward:zt("deleteBackward"),isDeleteForward:zt("deleteForward"),isDeleteLineBackward:zt("deleteLineBackward"),isDeleteLineForward:zt("deleteLineForward"),isDeleteWordBackward:zt("deleteWordBackward"),isDeleteWordForward:zt("deleteWordForward"),isExtendBackward:zt("extendBackward"),isExtendForward:zt("extendForward"),isExtendLineBackward:zt("extendLineBackward"),isExtendLineForward:zt("extendLineForward"),isItalic:zt("italic"),isMoveLineBackward:zt("moveLineBackward"),isMoveLineForward:zt("moveLineForward"),isMoveWordBackward:zt("moveWordBackward"),isMoveWordForward:zt("moveWordForward"),isRedo:zt("redo"),isSoftBreak:zt("insertSoftBreak"),isSplitBlock:zt("splitBlock"),isTransposeCharacter:zt("transposeCharacter"),isUndo:zt("undo")};function jF(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function LE(e,n){if(e==null)return{};var r=jF(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var zF=["anchor","focus"],$F=["anchor","focus"];function HE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function NE(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?HE(Object(r),!0).forEach(function(i){Xv(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var WF=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(r=>n.hasOwnProperty(r)&&e[r]===n[r]),QS=(e,n)=>{var r=LE(e,zF),i=LE(n,$F);return e[gl]===n[gl]&&WF(r,i)},qv=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=n[r];if(!de.equals(i,o)||!QS(i,o))return!1}return!0},JS=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=n[r];if(i.anchor.offset!==o.anchor.offset||i.focus.offset!==o.focus.offset||!QS(i,o))return!1}return!0},VF=(e,n,r)=>{var i=Array.from(n.children,()=>[]);if(r.length===0)return i;var o=lt.findPath(e,n),s=o.length,a=F.range(e,o),u=new Array(n.children.length),h=k=>{var T=u[k];if(T)return T;var H=F.range(e,[...o,k]);return u[k]=H,H};for(var d of r){var f=de.intersection(a,d);if(f)for(var[g,m]=de.edges(f),v=g.path[s],w=m.path[s],C=v;C<=w;C++){var P=i[C];if(P){var D=h(C),x=de.intersection(D,d);x&&P.push(NE(NE({},d),x))}}}return i},Ws=[],UF=function(){return Ws.some(function(e){return e.activeTargets.length>0})},XF=function(){return Ws.some(function(e){return e.skippedTargets.length>0})},GE="ResizeObserver loop completed with undelivered notifications.",KF=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:GE}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=GE),window.dispatchEvent(e)},lc;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(lc||(lc={}));var Vs=function(e){return Object.freeze(e)},qF=function(){function e(n,r){this.inlineSize=n,this.blockSize=r,Vs(this)}return e}(),eT=function(){function e(n,r,i,o){return this.x=n,this.y=r,this.width=i,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Vs(this)}return e.prototype.toJSON=function(){var n=this,r=n.x,i=n.y,o=n.top,s=n.right,a=n.bottom,u=n.left,h=n.width,d=n.height;return{x:r,y:i,top:o,right:s,bottom:a,left:u,width:h,height:d}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),Yv=function(e){return e instanceof SVGElement&&"getBBox"in e},tT=function(e){if(Yv(e)){var n=e.getBBox(),r=n.width,i=n.height;return!r&&!i}var o=e,s=o.offsetWidth,a=o.offsetHeight;return!(s||a||e.getClientRects().length)},_E=function(e){var n;if(e instanceof Element)return!0;var r=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},YF=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Wu=typeof window<"u"?window:{},Ed=new WeakMap,jE=/auto|scroll/,ZF=/^tb|vertical/,QF=/msie|trident/i.test(Wu.navigator&&Wu.navigator.userAgent),Pi=function(e){return parseFloat(e||"0")},ol=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=!1),new qF((r?n:e)||0,(r?e:n)||0)},zE=Vs({devicePixelContentBoxSize:ol(),borderBoxSize:ol(),contentBoxSize:ol(),contentRect:new eT(0,0,0,0)}),nT=function(e,n){if(n===void 0&&(n=!1),Ed.has(e)&&!n)return Ed.get(e);if(tT(e))return Ed.set(e,zE),zE;var r=getComputedStyle(e),i=Yv(e)&&e.ownerSVGElement&&e.getBBox(),o=!QF&&r.boxSizing==="border-box",s=ZF.test(r.writingMode||""),a=!i&&jE.test(r.overflowY||""),u=!i&&jE.test(r.overflowX||""),h=i?0:Pi(r.paddingTop),d=i?0:Pi(r.paddingRight),f=i?0:Pi(r.paddingBottom),g=i?0:Pi(r.paddingLeft),m=i?0:Pi(r.borderTopWidth),v=i?0:Pi(r.borderRightWidth),w=i?0:Pi(r.borderBottomWidth),C=i?0:Pi(r.borderLeftWidth),P=g+d,D=h+f,x=C+v,k=m+w,T=u?e.offsetHeight-k-e.clientHeight:0,H=a?e.offsetWidth-x-e.clientWidth:0,z=o?P+x:0,U=o?D+k:0,q=i?i.width:Pi(r.width)-z-H,te=i?i.height:Pi(r.height)-U-T,ne=q+P+H+x,le=te+D+T+k,Q=Vs({devicePixelContentBoxSize:ol(Math.round(q*devicePixelRatio),Math.round(te*devicePixelRatio),s),borderBoxSize:ol(ne,le,s),contentBoxSize:ol(q,te,s),contentRect:new eT(g,h,q,te)});return Ed.set(e,Q),Q},rT=function(e,n,r){var i=nT(e,r),o=i.borderBoxSize,s=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(n){case lc.DEVICE_PIXEL_CONTENT_BOX:return a;case lc.BORDER_BOX:return o;default:return s}},JF=function(){function e(n){var r=nT(n);this.target=n,this.contentRect=r.contentRect,this.borderBoxSize=Vs([r.borderBoxSize]),this.contentBoxSize=Vs([r.contentBoxSize]),this.devicePixelContentBoxSize=Vs([r.devicePixelContentBoxSize])}return e}(),iT=function(e){if(tT(e))return 1/0;for(var n=0,r=e.parentNode;r;)n+=1,r=r.parentNode;return n},eO=function(){var e=1/0,n=[];Ws.forEach(function(a){if(a.activeTargets.length!==0){var u=[];a.activeTargets.forEach(function(d){var f=new JF(d.target),g=iT(d.target);u.push(f),d.lastReportedSize=rT(d.target,d.observedBox),g<e&&(e=g)}),n.push(function(){a.callback.call(a.observer,u,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,i=n;r<i.length;r++){var o=i[r];o()}return e},$E=function(e){Ws.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(iT(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})},tO=function(){var e=0;for($E(e);UF();)e=eO(),$E(e);return XF()&&KF(),e>0},l1,oT=[],nO=function(){return oT.splice(0).forEach(function(e){return e()})},rO=function(e){if(!l1){var n=0,r=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return nO()}).observe(r,i),l1=function(){r.textContent="".concat(n?n--:n++)}}oT.push(e),l1()},iO=function(e){rO(function(){requestAnimationFrame(e)})},Yd=0,oO=function(){return!!Yd},sO=250,aO={attributes:!0,characterData:!0,childList:!0,subtree:!0},WE=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],VE=function(e){return e===void 0&&(e=0),Date.now()+e},u1=!1,lO=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var r=this;if(n===void 0&&(n=sO),!u1){u1=!0;var i=VE(n);iO(function(){var o=!1;try{o=tO()}finally{if(u1=!1,n=i-VE(),!oO())return;o?r.run(1e3):n>0?r.run(n):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,r=function(){return n.observer&&n.observer.observe(document.body,aO)};document.body?r():Wu.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),WE.forEach(function(r){return Wu.addEventListener(r,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),WE.forEach(function(r){return Wu.removeEventListener(r,n.listener,!0)}),this.stopped=!0)},e}(),Sm=new lO,UE=function(e){!Yd&&e>0&&Sm.start(),Yd+=e,!Yd&&Sm.stop()},uO=function(e){return!Yv(e)&&!YF(e)&&getComputedStyle(e).display==="inline"},cO=function(){function e(n,r){this.target=n,this.observedBox=r||lc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=rT(this.target,this.observedBox,!0);return uO(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),hO=function(){function e(n,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=r}return e}(),Pd=new WeakMap,XE=function(e,n){for(var r=0;r<e.length;r+=1)if(e[r].target===n)return r;return-1},Dd=function(){function e(){}return e.connect=function(n,r){var i=new hO(n,r);Pd.set(n,i)},e.observe=function(n,r,i){var o=Pd.get(n),s=o.observationTargets.length===0;XE(o.observationTargets,r)<0&&(s&&Ws.push(o),o.observationTargets.push(new cO(r,i&&i.box)),UE(1),Sm.schedule())},e.unobserve=function(n,r){var i=Pd.get(n),o=XE(i.observationTargets,r),s=i.observationTargets.length===1;o>=0&&(s&&Ws.splice(Ws.indexOf(i),1),i.observationTargets.splice(o,1),UE(-1))},e.disconnect=function(n){var r=this,i=Pd.get(n);i.observationTargets.slice().forEach(function(o){return r.unobserve(n,o.target)}),i.activeTargets.splice(0,i.activeTargets.length)},e}(),dO=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Dd.connect(this,n)}return e.prototype.observe=function(n,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_E(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Dd.observe(this,n,r)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_E(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Dd.unobserve(this,n)},e.prototype.disconnect=function(){Dd.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Zv=fD();const fO=oa(Zv);function gO(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Df(e,n){if(e==null)return{};var r=gO(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uc(e)}function pO(e,n){if(uc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(uc(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function mO(e){var n=pO(e,"string");return uc(n)==="symbol"?n:String(n)}function $t(e,n,r){return n=mO(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var Qv=j.createContext(null),Gi=()=>{var e=j.useContext(Qv);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Pe=lt;function KE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Sd(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?KE(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var vO=25,yO=200,wO=function(){},xO=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function CO(e){var{editor:n,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:i}=e,o=!1,s=null,a=null,u=null,h=0,d=!1,f=()=>{var Q=$o.get(n);if($o.delete(n),Q){var{selection:J}=n,ie=RE(n,Q);ie&&(!J||!de.equals(ie,J))&&ve.select(n,ie)}},g=()=>{var Q=zo.get(n);if(zo.delete(n),!!Q){if(Q.at){var J=Ct.isPoint(Q.at)?Pm(n,Q.at):RE(n,Q.at);if(!J)return;var ie=F.range(n,J);(!n.selection||!de.equals(n.selection,ie))&&ve.select(n,J)}Q.run()}},m=()=>{if(a&&(clearTimeout(a),a=null),u&&(clearTimeout(u),u=null),!T()&&!k()){f();return}o||(o=!0,setTimeout(()=>o=!1)),k()&&(o="action");var Q=n.selection&&F.rangeRef(n,n.selection,{affinity:"forward"});Ji.set(n,n.marks),wO("flush",zo.get(n),ar.get(n));for(var J=T(),ie;ie=(N=ar.get(n))===null||N===void 0?void 0:N[0];){var N,A,b=hi.get(n);b!==void 0&&(hi.delete(n),n.marks=b),b&&d===!1&&(d=null);var M=FF(ie);(!n.selection||!de.equals(n.selection,M))&&ve.select(n,M),ie.diff.text?F.insertText(n,ie.diff.text):F.deleteFragment(n),ar.set(n,(A=ar.get(n))===null||A===void 0?void 0:A.filter(B=>{var{id:$}=B;return $!==ie.id})),MF(n,ie)||(J=!1,zo.delete(n),Ji.delete(n),o="action",$o.delete(n),r.cancel(),i.cancel(),Q==null||Q.unref())}var I=Q==null?void 0:Q.unref();if(I&&!$o.get(n)&&(!n.selection||!de.equals(I,n.selection))&&ve.select(n,I),k()){g();return}J&&r(),r.flush(),i.flush(),f();var _=Ji.get(n);Ji.delete(n),_!==void 0&&(n.marks=_,n.onChange())},v=Q=>{s&&clearTimeout(s),s=setTimeout(()=>{Ns.set(n,!1),m()},vO)},w=Q=>{Ns.set(n,!0),s&&(clearTimeout(s),s=null)},C=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ie=xm.get(n);if(ie){if(T()||J){ie.style.display="none";return}ie.style.removeProperty("display")}},P=(Q,J)=>{var ie,N=(ie=ar.get(n))!==null&&ie!==void 0?ie:[];ar.set(n,N);var A=De.leaf(n,Q),b=N.findIndex(_=>K.equals(_.path,Q));if(b<0){var M=ZS(A.text,J);M&&N.push({path:Q,diff:J,id:h++}),C();return}var I=bF(A.text,N[b].diff,J);if(!I){N.splice(b,1),C();return}N[b]=Sd(Sd({},N[b]),{},{diff:I})},D=function(J){var{at:ie}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d=!1,$o.delete(n),r.cancel(),i.cancel(),k()&&m(),zo.set(n,{at:ie,run:J}),u=setTimeout(m)},x=Q=>{var J;if(a&&(clearTimeout(a),a=null),!il.get(n)){var{inputType:ie}=Q,N=null,A=Q.dataTransfer||Q.data||void 0;d!==!1&&ie!=="insertText"&&ie!=="insertCompositionText"&&(d=!1);var[b]=Q.getTargetRanges();b&&(N=Pe.toSlateRange(n,b,{exactMatch:!1,suppressThrow:!0}));var M=Pe.getWindow(n),I=M.getSelection();if(!N&&I&&(b=I,N=Pe.toSlateRange(n,I,{exactMatch:!1,suppressThrow:!0})),N=(J=N)!==null&&J!==void 0?J:n.selection,!!N){var _=!0;if(ie.startsWith("delete")){if(de.isExpanded(N)){var[B,$]=de.edges(N),W=De.leaf(n,B.path);if(W.text.length===B.offset&&$.offset===0){var Y=F.next(n,{at:B.path,match:ke.isText});Y&&K.equals(Y[1],$.path)&&(N={anchor:$,focus:$})}}var oe=ie.endsWith("Backward")?"backward":"forward",[re,ge]=de.edges(N),[pe,X]=F.leaf(n,re.path),ae={text:"",start:re.offset,end:ge.offset},fe=ar.get(n),me=fe==null?void 0:fe.find(Vt=>K.equals(Vt.path,X)),Ne=me?[me.diff,ae]:[ae],we=YS(pe.text,...Ne);if(we.length===0&&(_=!1),de.isExpanded(N)){if(_&&K.equals(N.anchor.path,N.focus.path)){var it={path:N.anchor.path,offset:re.offset},Ie=F.range(n,it,it);return U(Ie),P(N.anchor.path,{text:"",end:ge.offset,start:re.offset})}return D(()=>F.deleteFragment(n,{direction:oe}),{at:N})}}switch(ie){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return D(()=>F.deleteFragment(n),{at:N});case"deleteContent":case"deleteContentForward":{var{anchor:Be}=N;if(_&&de.isCollapsed(N)){var et=De.leaf(n,Be.path);if(Be.offset<et.text.length)return P(Be.path,{text:"",start:Be.offset,end:Be.offset+1})}return D(()=>F.deleteForward(n),{at:N})}case"deleteContentBackward":{var _e,{anchor:ct}=N,rt=wm(b)?b.isCollapsed:!!((_e=b)!==null&&_e!==void 0&&_e.collapsed);return _&&rt&&de.isCollapsed(N)&&ct.offset>0?P(ct.path,{text:"",start:ct.offset-1,end:ct.offset}):D(()=>F.deleteBackward(n),{at:N})}case"deleteEntireSoftLine":return D(()=>{F.deleteBackward(n,{unit:"line"}),F.deleteForward(n,{unit:"line"})},{at:N});case"deleteHardLineBackward":return D(()=>F.deleteBackward(n,{unit:"block"}),{at:N});case"deleteSoftLineBackward":return D(()=>F.deleteBackward(n,{unit:"line"}),{at:N});case"deleteHardLineForward":return D(()=>F.deleteForward(n,{unit:"block"}),{at:N});case"deleteSoftLineForward":return D(()=>F.deleteForward(n,{unit:"line"}),{at:N});case"deleteWordBackward":return D(()=>F.deleteBackward(n,{unit:"word"}),{at:N});case"deleteWordForward":return D(()=>F.deleteForward(n,{unit:"word"}),{at:N});case"insertLineBreak":return D(()=>F.insertSoftBreak(n),{at:N});case"insertParagraph":return D(()=>F.insertBreak(n),{at:N});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(xO(A))return D(()=>Pe.insertData(n,A),{at:N});var wt=A??"";if(hi.get(n)&&(wt=wt.replace("\uFEFF","")),ie==="insertText"&&/.*\n.*\n$/.test(wt)&&(wt=wt.slice(0,-1)),wt.includes(`
`))return D(()=>{var Vt=wt.split(`
`);Vt.forEach((qt,Zr)=>{qt&&F.insertText(n,qt),Zr!==Vt.length-1&&F.insertSoftBreak(n)})},{at:N});if(K.equals(N.anchor.path,N.focus.path)){var[sn,Qn]=de.edges(N),an={start:sn.offset,end:Qn.offset,text:wt};if(wt&&d&&ie==="insertCompositionText"){var Yr=d.start+d.text.search(/\S|$/),Or=an.start+an.text.search(/\S|$/);Or===Yr+1&&an.end===d.start+d.text.length?(an.start-=1,d=null,ne()):d=!1}else ie==="insertText"?d===null?d=an:d&&de.isCollapsed(N)&&d.end+d.text.length===sn.offset?d=Sd(Sd({},d),{},{text:d.text+wt}):d=!1:d=!1;if(_){P(sn.path,an);return}}return D(()=>F.insertText(n,wt),{at:N})}}}}},k=()=>!!zo.get(n),T=()=>{var Q;return!!((Q=ar.get(n))!==null&&Q!==void 0&&Q.length)},H=()=>k()||T(),z=()=>o,U=Q=>{$o.set(n,Q),a&&(clearTimeout(a),a=null);var{selection:J}=n;if(Q){var ie=!J||!K.equals(J.anchor.path,Q.anchor.path),N=!J||!K.equals(J.anchor.path.slice(0,-1),Q.anchor.path.slice(0,-1));(ie&&d||N)&&(d=!1),(ie||T())&&(a=setTimeout(m,yO))}},q=()=>{(k()||!T())&&m()},te=Q=>{T()||(C(!0),setTimeout(C))},ne=()=>{k()||(u=setTimeout(m))},le=Q=>{if(!(T()||k())&&Q.some(ie=>Uv(n,ie,Q))){var J;(J=KS.get(n))===null||J===void 0||J()}};return{flush:m,scheduleFlush:ne,hasPendingDiffs:T,hasPendingAction:k,hasPendingChanges:H,isFlushing:z,handleUserSelect:U,handleCompositionEnd:v,handleCompositionStart:w,handleDOMBeforeInput:x,handleKeyDown:te,handleDomMutations:le,handleInput:q}}function EO(){var e=j.useRef(!1);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var uo=Kd?j.useLayoutEffect:j.useEffect;function PO(e,n,r){var[i]=j.useState(()=>new MutationObserver(n));uo(()=>{i.takeRecords()}),j.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return i.observe(e.current,r),()=>i.disconnect()},[i,e,r])}var DO=["node"];function qE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function SO(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qE(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var TO={subtree:!0,childList:!0,characterData:!0},AO=Un?e=>{var{node:n}=e,r=Df(e,DO);if(!Un)return null;var i=Gi(),o=EO(),[s]=j.useState(()=>CO(SO({editor:i},r)));return PO(n,s.handleDomMutations,TO),Kv.set(i,s.scheduleFlush),o&&s.flush(),s}:()=>null;function YE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function BO(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?YE(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var MO=e=>{var{isLast:n,leaf:r,parent:i,text:o}=e,s=Gi(),a=Pe.findPath(s,o),u=K.parent(a),h=!!r[qS];return s.isVoid(i)?Xe.createElement(c1,{length:De.string(i).length}):r.text===""&&i.children[i.children.length-1]===o&&!s.isInline(i)&&F.string(s,u)===""?Xe.createElement(c1,{isLineBreak:!0,isMarkPlaceholder:h}):r.text===""?Xe.createElement(c1,{isMarkPlaceholder:h}):n&&r.text.slice(-1)===`
`?Xe.createElement(ZE,{isTrailing:!0,text:r.text}):Xe.createElement(ZE,{text:r.text})},ZE=e=>{var{text:n,isTrailing:r=!1}=e,i=j.useRef(null),o=()=>"".concat(n??"").concat(r?`
`:""),[s]=j.useState(o);return uo(()=>{var a=o();i.current&&i.current.textContent!==a&&(i.current.textContent=a)}),Xe.createElement(RO,{ref:i},s)},RO=j.memo(j.forwardRef((e,n)=>Xe.createElement("span",{"data-slate-string":!0,ref:n},e.children))),c1=e=>{var{length:n=0,isLineBreak:r=!1,isMarkPlaceholder:i=!1}=e,o={"data-slate-zero-width":r?"n":"z","data-slate-length":n};return i&&(o["data-slate-mark-placeholder"]=!0),Xe.createElement("span",BO({},o),!Un||!r?"\uFEFF":null,r?Xe.createElement("br",null):null)};function QE(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function sT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?QE(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var kO=Un?300:0;function bO(e,n){e.current&&(e.current.disconnect(),n&&(e.current=null))}function JE(e){e.current&&(clearTimeout(e.current),e.current=null)}var FO=e=>Xe.createElement(LO,sT({},e)),OO=e=>{var{leaf:n,isLast:r,text:i,parent:o,renderPlaceholder:s,renderLeaf:a=FO,leafPosition:u}=e,h=Gi(),d=j.useRef(null),f=j.useRef(null),[g,m]=j.useState(!1),v=j.useRef(null),w=j.useCallback(k=>{if(bO(d,k==null),k==null){var T;xm.delete(h),(T=n.onPlaceholderResize)===null||T===void 0||T.call(n,null)}else{if(xm.set(h,k),!d.current){var H=window.ResizeObserver||dO;d.current=new H(()=>{var z;(z=n.onPlaceholderResize)===null||z===void 0||z.call(n,k)})}d.current.observe(k),f.current=k}},[f,n,h]),C=Xe.createElement(MO,{isLast:r,leaf:n,parent:o,text:i}),P=!!n[gl];if(j.useEffect(()=>(P?v.current||(v.current=setTimeout(()=>{m(!0),v.current=null},kO)):(JE(v),m(!1)),()=>JE(v)),[P,m]),P&&g){var D={children:n.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Os?"inherit":void 0},contentEditable:!1,ref:w}};C=Xe.createElement(Xe.Fragment,null,C,s(D))}var x={"data-slate-leaf":!0};return a({attributes:x,children:C,leaf:n,text:i,leafPosition:u})},IO=Xe.memo(OO,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&ke.equals(n.leaf,e.leaf)&&n.leaf[gl]===e.leaf[gl]),LO=e=>{var{attributes:n,children:r}=e;return Xe.createElement("span",sT({},n),r)};function HO(e,n){var[,r]=j.useReducer(d=>d+1,0),i=j.useRef(),o=j.useRef(()=>null),s=j.useRef(null),a;try{if(e!==o.current||i.current){var u=e();n(s.current,u)?a=s.current:a=u}else a=s.current}catch(d){throw i.current&&NO(d)&&(d.message+=`
The error may be correlated with this previous error:
`.concat(i.current.stack,`

`)),d}o.current=e,s.current=a,i.current=void 0;var h=j.useCallback(()=>{try{var d=o.current();if(n(s.current,d))return;s.current=d}catch(f){f instanceof Error?i.current=f:i.current=new Error(String(f))}r()},[]);return[a,h]}function NO(e){return e instanceof Error}var aT=j.createContext({}),lT=(e,n)=>{var r=Gi(),{decorate:i,addEventListener:o}=j.useContext(aT),s=()=>{var d=Pe.findPath(r,e);return i([e,d])},a=ke.isText(e)?JS:qv,[u,h]=HO(s,a);return uo(()=>{var d=o(h);return h(),d},[o,h]),j.useMemo(()=>[...u,...n],[u,n])},GO=e=>{var n=j.useRef(new Set),r=j.useRef(e);uo(()=>{r.current=e,n.current.forEach(s=>s())},[e]);var i=j.useCallback(s=>r.current(s),[]),o=j.useCallback(s=>(n.current.add(s),()=>{n.current.delete(s)}),[]);return j.useMemo(()=>({decorate:i,addEventListener:o}),[i,o])};function e3(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function uT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?e3(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var _O=e=>Xe.createElement(zO,uT({},e)),jO=e=>{for(var{decorations:n,isLast:r,parent:i,renderPlaceholder:o,renderLeaf:s,renderText:a=_O,text:u}=e,h=Gi(),d=j.useRef(null),f=lT(u,n),g=ke.decorations(u,f),m=Pe.findKey(h,u),v=[],w=0;w<g.length;w++){var{leaf:C,position:P}=g[w];v.push(Xe.createElement(IO,{isLast:r&&w===g.length-1,key:"".concat(m.id,"-").concat(w),renderPlaceholder:o,leaf:C,leafPosition:P,text:u,parent:i,renderLeaf:s}))}var D=j.useCallback(k=>{var T=g0.get(h);k?(T==null||T.set(m,k),$s.set(u,k),ac.set(k,u)):(T==null||T.delete(m),$s.delete(u),d.current&&ac.delete(d.current)),d.current=k},[d,h,m,u]),x={"data-slate-node":"text",ref:D};return a({text:u,children:v,attributes:x})},cT=Xe.memo(jO,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderText===e.renderText&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&JS(n.decorations,e.decorations)),zO=e=>{var{attributes:n,children:r}=e;return Xe.createElement("span",uT({},n),r)};function t3(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Tm(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?t3(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var $O=e=>Xe.createElement(UO,Tm({},e)),WO=e=>{var{decorations:n,element:r,renderElement:i=$O,renderChunk:o,renderPlaceholder:s,renderLeaf:a,renderText:u}=e,h=Gi(),d=nI(),f=h.isInline(r),g=lT(r,n),m=Pe.findKey(h,r),v=j.useCallback(T=>{var H=g0.get(h);T?(H==null||H.set(m,T),$s.set(r,T),ac.set(T,r)):(H==null||H.delete(m),$s.delete(r))},[h,m,r]),w=fT({decorations:g,node:r,renderElement:i,renderChunk:o,renderPlaceholder:s,renderLeaf:a,renderText:u}),C={"data-slate-node":"element",ref:v};if(f&&(C["data-slate-inline"]=!0),!f&&F.hasInlines(h,r)){var P=De.string(r),D=_S(P);D==="rtl"&&(C.dir=D)}if(F.isVoid(h,r)){C["data-slate-void"]=!0,!d&&f&&(C.contentEditable=!1);var x=f?"span":"div",[[k]]=De.texts(r);w=Xe.createElement(x,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Xe.createElement(cT,{renderPlaceholder:s,decorations:[],isLast:!1,parent:r,text:k})),Qa.set(k,0),zu.set(k,r)}return i({attributes:C,children:w,element:r})},VO=Xe.memo(WO,(e,n)=>e.element===n.element&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&e.renderText===n.renderText&&e.renderLeaf===n.renderLeaf&&e.renderPlaceholder===n.renderPlaceholder&&qv(e.decorations,n.decorations)),UO=e=>{var{attributes:n,children:r,element:i}=e,o=Gi(),s=o.isInline(i)?"span":"div";return Xe.createElement(s,Tm(Tm({},n),{},{style:{position:"relative"}}),r)};class XO{constructor(n,r){var{chunkSize:i,debug:o}=r;$t(this,"root",void 0),$t(this,"chunkSize",void 0),$t(this,"debug",void 0),$t(this,"reachedEnd",void 0),$t(this,"pointerChunk",void 0),$t(this,"pointerIndex",void 0),$t(this,"pointerIndexStack",void 0),$t(this,"cachedPointerNode",void 0),this.root=n,this.chunkSize=i,this.debug=o??!1,this.pointerChunk=n,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(n){this.returnToPreviousLeaf(),this.insertAfter(n),this.readLeaf()}insertAfter(n){if(n.length!==0){for(var r=0,i=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var o=this.chunkSize-this.pointerSiblings.length,s=Math.min(o,n.length);if(s>0){var a=n.splice(0,s);this.rawInsertAfter(a,r)}this.exitChunk(),r++}if(n.length!==0){var u=this.savePointer(),h=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var d=this.chunkSize-this.pointerSiblings.length,f=Math.min(d,n.length);if(f>0){var g=n.splice(-f,f);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(g,i),h||(h=this.savePointer())}this.exitChunk(),i++}this.restorePointer(u);var m=Math.max(r,i);this.rawInsertAfter(n,m),h&&this.restorePointer(h),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var n=this.pointerChunk;n.type==="chunk";n=n.parent)this.root.modifiedChunks.add(n)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var n=this.getPointerNode();return this.cachedPointerNode=n,n}getChunkPath(n){for(var r=[],i=n;i.type==="chunk";i=i.parent){var o=i.parent.children.indexOf(i);if(o===-1)return null;r.unshift(o)}return r}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(n){if(n==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:r,node:i}=n,o=r.children.indexOf(i);if(o===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var s=this.getChunkPath(r);if(!s)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=r,this.pointerIndex=o,this.pointerIndexStack=s,this.reachedEnd=!1,this.cachedPointerNode=i,this.validateState()}enterChunk(n){var r;if(((r=this.pointerNode)===null||r===void 0?void 0:r.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=n?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(n){for(;((r=this.pointerNode)===null||r===void 0?void 0:r.type)==="chunk";){var r;this.enterChunk(n)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var n=this.pointerChunk;this.pointerChunk=n.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(n,r){if(n.length!==0){for(var i=(f,g,m)=>{if(m===1)return f;for(var v=[],w=0;w<this.chunkSize;w++){var C=f.slice(w*m,(w+1)*m);if(C.length===0)break;var P={type:"chunk",key:new US,parent:g,children:[]};P.children=i(C,P,m/this.chunkSize),v.push(P)}return v},o=this.pointerSiblings.length+n.length,s=0,a=this.chunkSize;a<o;a*=this.chunkSize)s++;var u=Math.max(s,r),h=Math.pow(this.chunkSize,u),d=i(n,this.pointerChunk,h);this.pointerSiblings.splice(this.pointerIndex+1,0,...d),this.pointerIndex+=d.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var n=i=>{if(i.type==="chunk"){var{parent:o,children:s}=i;if(!o.children.includes(i))throw new Error("Debug: Chunk ".concat(i.key.id," has an incorrect parent property"));s.forEach(n)}};if(this.root.children.forEach(n),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var r=this.getChunkPath(this.pointerChunk);if(!r)throw new Error("Debug: The pointer chunk is not connected to the root");if(!K.equals(this.pointerIndexStack,r))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(r.join(", "),"]"))}}}class KO{constructor(n,r){$t(this,"editor",void 0),$t(this,"children",void 0),$t(this,"cachedKeys",void 0),$t(this,"pointerIndex",void 0),this.editor=n,this.children=r,this.cachedKeys=new Array(r.length),this.pointerIndex=0}read(n){if(n===1)return[this.children[this.pointerIndex++]];var r=this.remaining(n);return this.pointerIndex+=n,r}remaining(n){return n===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+n)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(n,r){var i=this.children.indexOf(n,this.pointerIndex);if(i>-1)return i-this.pointerIndex;for(var o=this.pointerIndex;o<this.children.length;o++){var s=this.children[o],a=this.findKey(s,o);if(a===r)return o-this.pointerIndex}return-1}toChunkLeaves(n,r){return n.map((i,o)=>({type:"leaf",node:i,key:this.findKey(i,r+o),index:r+o}))}findKey(n,r){var i=this.cachedKeys[r];if(i)return i;var o=Pe.findKey(this.editor,n);return this.cachedKeys[r]=o,o}}var qO=(e,n)=>{var{chunkTree:r,children:i,chunkSize:o,rerenderChildren:s=[],onInsert:a,onUpdate:u,onIndexChange:h,debug:d}=n;r.modifiedChunks.clear();for(var f=new XO(r,{chunkSize:o,debug:d}),g=new KO(e,i),m,v=function(){var D=g.lookAhead(m.node,m.key),x=D>0&&r.movedNodeKeys.has(m.key);if(D===-1||x)return f.remove(),1;var k=g.pointerIndex,T=g.read(D+1),H=T.pop();if(T.length){var z=g.toChunkLeaves(T,k);f.insertBefore(z),T.forEach((q,te)=>{a==null||a(q,k+te)})}var U=g.pointerIndex-1;m.node!==H&&(m.node=H,f.invalidateChunk(),u==null||u(H,U)),m.index!==U&&(m.index=U,h==null||h(H,U)),s.includes(U)&&f.invalidateChunk()};m=f.readLeaf();)v();if(!g.reachedEnd){var w=g.remaining(),C=g.toChunkLeaves(w,g.pointerIndex);f.returnToPreviousLeaf(),f.insertAfter(C),w.forEach((P,D)=>{a==null||a(P,g.pointerIndex+D)})}r.movedNodeKeys.clear()};function n3(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function YO(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?n3(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n3(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var r3=new WeakMap,hT=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Pe.findKey(n,r),s=r3.get(o);return s||(s={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},r3.set(o,s)),i.reconcile&&qO(n,YO({chunkTree:s,children:r.children},i.reconcile)),s},ZO=e=>{var{children:n}=e;return n},dT=e=>{var{root:n,ancestor:r,renderElement:i,renderChunk:o=ZO}=e;return r.children.map(s=>{if(s.type==="chunk"){var a=s.key.id,u=o({highest:r===n,lowest:s.children.some(d=>d.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Xe.createElement(JO,{root:n,ancestor:s,renderElement:i,renderChunk:o})});return Xe.createElement(j.Fragment,{key:a},u)}var h=s.node;return i(h,s.index,s.key)})},QO=dT,JO=Xe.memo(dT,(e,n)=>e.root===n.root&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&!n.root.modifiedChunks.has(n.ancestor)),eI=j.createContext(null),fT=e=>{var{decorations:n,node:r,renderElement:i,renderChunk:o,renderPlaceholder:s,renderText:a,renderLeaf:u}=e,h=Gi();il.set(h,!1);var d=F.isEditor(r),f=!d&&be.isElement(r)&&!h.isInline(r),g=f&&F.hasInlines(h,r),m=g?null:h.getChunkSize(r),v=!!m,{decorationsByChild:w,childrenToRedecorate:C}=tI(h,r,n);v||r.children.forEach((k,T)=>{Qa.set(k,T),zu.set(k,r)});var P=j.useCallback((k,T,H)=>{var z=H??Pe.findKey(h,k);return Xe.createElement(eI.Provider,{key:"provider-".concat(z.id),value:k},Xe.createElement(VO,{decorations:w[T],element:k,key:z.id,renderElement:i,renderChunk:o,renderPlaceholder:s,renderLeaf:u,renderText:a}))},[h,w,i,o,s,u,a]),D=(k,T)=>{var H=Pe.findKey(h,k);return Xe.createElement(cT,{decorations:w[T],key:H.id,isLast:T===r.children.length-1,parent:r,renderPlaceholder:s,renderLeaf:u,renderText:a,text:k})};if(!v)return r.children.map((k,T)=>ke.isText(k)?D(k,T):P(k,T));var x=hT(h,r,{reconcile:{chunkSize:m,rerenderChildren:C,onInsert:(k,T)=>{Qa.set(k,T),zu.set(k,r)},onUpdate:(k,T)=>{Qa.set(k,T),zu.set(k,r)},onIndexChange:(k,T)=>{Qa.set(k,T)}}});return Xe.createElement(QO,{root:x,ancestor:x,renderElement:P,renderChunk:o})},tI=(e,n,r)=>{var i=VF(e,n,r),o=j.useRef(i).current,s=[];o.length=i.length;for(var a=0;a<i.length;a++){var u,h=i[a],d=(u=o[a])!==null&&u!==void 0?u:null;qv(d,h)||(o[a]=h,s.push(a))}return{decorationsByChild:o,childrenToRedecorate:s}},gT=j.createContext(!1),nI=()=>j.useContext(gT),Jv=j.createContext({});function rI(){var e=j.useRef(new Set),n=j.useRef(new Set),r=j.useCallback(()=>{e.current.forEach(a=>a())},[]),i=j.useCallback(()=>{n.current.forEach(a=>a()),n.current.clear()},[]),o=j.useCallback(function(a){var{deferred:u=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=u?()=>n.current.add(a):a;return e.current.add(h),()=>{e.current.delete(h)}},[]),s=j.useMemo(()=>({addEventListener:o,flushDeferred:i}),[o,i]);return{selectorContext:s,onChange:r}}function iI(){var{flushDeferred:e}=j.useContext(Jv);uo(e)}var oI=()=>{var{addEventListener:e}=j.useContext(Jv),[,n]=j.useReducer(r=>r+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return uo(()=>e(n),[e]),Gi()};function sI(){var e=Gi(),n=j.useRef(!1),r=j.useRef(0),i=j.useCallback(()=>{if(!n.current){n.current=!0;var o=Pe.getWindow(e);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{n.current=!1})}},[e]);return j.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:n,onUserInput:i}}var aI=(e,n)=>{var r=[],i=()=>{r=[]},o=a=>{if(n.current){var u=a.filter(h=>Uv(e,h,a));r.push(...u)}};function s(){r.length>0&&(r.reverse().forEach(a=>{a.type!=="characterData"&&(a.removedNodes.forEach(u=>{a.target.insertBefore(u,a.nextSibling)}),a.addedNodes.forEach(u=>{a.target.removeChild(u)}))}),i())}return{registerMutations:o,restoreDOM:s,clear:i}},lI={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class pT extends j.Component{constructor(){super(...arguments),$t(this,"context",null),$t(this,"manager",null),$t(this,"mutationObserver",null)}observe(){var n,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(n=this.mutationObserver)===null||n===void 0||n.observe(r.current,lI)}componentDidMount(){var{receivedUserInput:n}=this.props,r=this.context;this.manager=aI(r,n),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var n,r,i,o=(n=this.mutationObserver)===null||n===void 0?void 0:n.takeRecords();if(o!=null&&o.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(i=this.manager)===null||i===void 0||i.restoreDOM(),null}componentDidUpdate(){var n;(n=this.manager)===null||n===void 0||n.clear(),this.observe()}componentWillUnmount(){var n;(n=this.mutationObserver)===null||n===void 0||n.disconnect()}render(){return this.props.children}}$t(pT,"contextType",Qv);var uI=Un?pT:e=>{var{children:n}=e;return Xe.createElement(Xe.Fragment,null,n)},cI=j.createContext(!1),hI=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],dI=["text"];function i3(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Ti(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?i3(Object(r),!0).forEach(function(i){$t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var fI=e=>Xe.createElement(Xe.Fragment,null,fT(e)),gI=j.forwardRef((e,n)=>{var r=j.useCallback(X=>Xe.createElement(pI,Ti({},X)),[]),{autoFocus:i,decorate:o=mI,onDOMBeforeInput:s,placeholder:a,readOnly:u=!1,renderElement:h,renderChunk:d,renderLeaf:f,renderText:g,renderPlaceholder:m=r,scrollSelectionIntoView:v=vI,style:w={},as:C="div",disableDefaultStyles:P=!1}=e,D=Df(e,hI),x=oI(),[k,T]=j.useState(!1),H=j.useRef(null),z=j.useRef([]),[U,q]=j.useState(),te=j.useRef(!1),{onUserInput:ne,receivedUserInput:le}=sI(),[,Q]=j.useReducer(X=>X+1,0);KS.set(x,Q),Cm.set(x,u);var J=j.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);j.useEffect(()=>{H.current&&i&&H.current.focus()},[i]);var ie=j.useRef(),N=j.useMemo(()=>bR(()=>{if(il.get(x)){N();return}var X=Pe.toDOMNode(x,x),ae=X.getRootNode();if(!te.current&&Os&&ae instanceof ShadowRoot){te.current=!0;var fe=vF();fe?document.execCommand("indent"):ve.deselect(x),te.current=!1;return}var me=ie.current;if((Un||!Pe.isComposing(x))&&(!J.isUpdatingSelection||me!=null&&me.isFlushing())&&!J.isDraggingInternally){var Ne=Pe.findDocumentOrShadowRoot(x),{activeElement:we}=Ne,it=Pe.toDOMNode(x,x),Ie=ju(Ne);if(we===it?(J.latestElement=we,Uo.set(x,!0)):Uo.delete(x),!Ie)return ve.deselect(x);var{anchorNode:Be,focusNode:et}=Ie,_e=Pe.hasEditableTarget(x,Be)||Pe.isTargetInsideNonReadonlyVoid(x,Be),ct=Pe.hasTarget(x,et);if(_e&&ct){var rt=Pe.toSlateRange(x,Ie,{exactMatch:!1,suppressThrow:!0});rt&&(!Pe.isComposing(x)&&!(me!=null&&me.hasPendingChanges())&&!(me!=null&&me.isFlushing())?ve.select(x,rt):me==null||me.handleUserSelect(rt))}u&&(!_e||!ct)&&ve.deselect(x)}},100),[x,u,J]),A=j.useMemo(()=>BR(N,0),[N]);ie.current=AO({node:H,onDOMSelectionChange:N,scheduleOnDOMSelectionChange:A}),uo(()=>{var X,ae,fe;H.current&&(fe=Vv(H.current))?(XS.set(x,fe),qd.set(x,H.current),$s.set(x,H.current),ac.set(H.current,x)):$s.delete(x);var{selection:me}=x,Ne=Pe.findDocumentOrShadowRoot(x),we=ju(Ne);if(!(!we||!Pe.isFocused(x)||(X=ie.current)!==null&&X!==void 0&&X.hasPendingAction())){var it=_e=>{var ct=we.type!=="None";if(!(!me&&!ct)){var rt=we.focusNode,wt;if(Za&&we.rangeCount>1){var sn=we.getRangeAt(0),Qn=we.getRangeAt(we.rangeCount-1);sn.startContainer===rt?wt=Qn.endContainer:wt=sn.startContainer}else wt=we.anchorNode;var an=qd.get(x),Yr=!1;if(an.contains(wt)&&an.contains(rt)&&(Yr=!0),ct&&Yr&&me&&!_e){var Or=Pe.toSlateRange(x,we,{exactMatch:!0,suppressThrow:!0});if(Or&&de.equals(Or,me)){var Vt;if(!J.hasMarkPlaceholder||(Vt=wt)!==null&&Vt!==void 0&&(Vt=Vt.parentElement)!==null&&Vt!==void 0&&Vt.hasAttribute("data-slate-mark-placeholder"))return}}if(me&&!Pe.hasRange(x,me)){x.selection=Pe.toSlateRange(x,we,{exactMatch:!1,suppressThrow:!0});return}J.isUpdatingSelection=!0;var qt=null;try{qt=me&&Pe.toDOMRange(x,me)}catch{}return qt?(Pe.isComposing(x)&&!Un?we.collapseToEnd():de.isBackward(me)?we.setBaseAndExtent(qt.endContainer,qt.endOffset,qt.startContainer,qt.startOffset):we.setBaseAndExtent(qt.startContainer,qt.startOffset,qt.endContainer,qt.endOffset),v(x,qt)):we.removeAllRanges(),qt}};we.rangeCount<=1&&it();var Ie=((ae=ie.current)===null||ae===void 0?void 0:ae.isFlushing())==="action";if(!Un||!Ie){setTimeout(()=>{J.isUpdatingSelection=!1});return}var Be=null,et=requestAnimationFrame(()=>{if(Ie){var _e=ct=>{try{var rt=Pe.toDOMNode(x,x);rt.focus(),it(ct)}catch{}};_e(),Be=setTimeout(()=>{_e(!0),J.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(et),Be&&clearTimeout(Be)}}});var b=j.useCallback(X=>{s3(x,X);var ae=Pe.toDOMNode(x,x),fe=ae.getRootNode();if(te!=null&&te.current&&Os&&fe instanceof ShadowRoot){var me=X.getTargetRanges(),Ne=me[0],we=new window.Range;we.setStart(Ne.startContainer,Ne.startOffset),we.setEnd(Ne.endContainer,Ne.endOffset);var it=Pe.toSlateRange(x,we,{exactMatch:!1,suppressThrow:!1});ve.select(x,it),X.preventDefault(),X.stopImmediatePropagation();return}if(ne(),!u&&Pe.hasEditableTarget(x,X.target)&&!yI(X,s)){var Ie;if(ie.current)return ie.current.handleDOMBeforeInput(X);A.flush(),N.flush();var{selection:Be}=x,{inputType:et}=X,_e=X.dataTransfer||X.data||void 0,ct=et==="insertCompositionText"||et==="deleteCompositionText";if(ct&&Pe.isComposing(x))return;var rt=!1;if(et==="insertText"&&Be&&de.isCollapsed(Be)&&X.data&&X.data.length===1&&/[a-z ]/i.test(X.data)&&Be.anchor.offset!==0&&(rt=!0,x.marks&&(rt=!1),!il.get(x))){var wt,sn,{anchor:Qn}=Be,[an,Yr]=Pe.toDOMPoint(x,Qn),Or=(wt=an.parentElement)===null||wt===void 0?void 0:wt.closest("a"),Vt=Pe.getWindow(x);if(rt&&Or&&Pe.hasDOMNode(x,Or)){var qt,Zr=Vt==null?void 0:Vt.document.createTreeWalker(Or,NodeFilter.SHOW_TEXT).lastChild();Zr===an&&((qt=Zr.textContent)===null||qt===void 0?void 0:qt.length)===Yr&&(rt=!1)}if(rt&&an.parentElement&&(Vt==null||(sn=Vt.getComputedStyle(an.parentElement))===null||sn===void 0?void 0:sn.whiteSpace)==="pre"){var yo=F.above(x,{at:Qn.path,match:ga=>be.isElement(ga)&&F.isBlock(x,ga)});yo&&De.string(yo[0]).includes("	")&&(rt=!1)}}if((!et.startsWith("delete")||et.startsWith("deleteBy"))&&!il.get(x)){var[th]=X.getTargetRanges();if(th){var Nl=Pe.toSlateRange(x,th,{exactMatch:!1,suppressThrow:!1});if(!Be||!de.equals(Be,Nl)){rt=!1;var Gl=!ct&&x.selection&&F.rangeRef(x,x.selection);ve.select(x,Nl),Gl&&$u.set(x,Gl)}}}if(ct)return;if(rt||X.preventDefault(),Be&&de.isExpanded(Be)&&et.startsWith("delete")){var $0=et.endsWith("Backward")?"backward":"forward";F.deleteFragment(x,{direction:$0});return}switch(et){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{F.deleteFragment(x);break}case"deleteContent":case"deleteContentForward":{F.deleteForward(x);break}case"deleteContentBackward":{F.deleteBackward(x);break}case"deleteEntireSoftLine":{F.deleteBackward(x,{unit:"line"}),F.deleteForward(x,{unit:"line"});break}case"deleteHardLineBackward":{F.deleteBackward(x,{unit:"block"});break}case"deleteSoftLineBackward":{F.deleteBackward(x,{unit:"line"});break}case"deleteHardLineForward":{F.deleteForward(x,{unit:"block"});break}case"deleteSoftLineForward":{F.deleteForward(x,{unit:"line"});break}case"deleteWordBackward":{F.deleteBackward(x,{unit:"word"});break}case"deleteWordForward":{F.deleteForward(x,{unit:"word"});break}case"insertLineBreak":F.insertSoftBreak(x);break;case"insertParagraph":{F.insertBreak(x);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{et==="insertFromComposition"&&Pe.isComposing(x)&&(T(!1),Ns.set(x,!1)),(_e==null?void 0:_e.constructor.name)==="DataTransfer"?Pe.insertData(x,_e):typeof _e=="string"&&(rt?z.current.push(()=>F.insertText(x,_e)):F.insertText(x,_e));break}}var gs=(Ie=$u.get(x))===null||Ie===void 0?void 0:Ie.unref();$u.delete(x),gs&&(!x.selection||!de.equals(x.selection,gs))&&ve.select(x,gs)}},[x,N,ne,s,u,A]),M=j.useCallback(X=>{X==null?(N.cancel(),A.cancel(),qd.delete(x),$s.delete(x),H.current&&No&&H.current.removeEventListener("beforeinput",b)):No&&X.addEventListener("beforeinput",b),H.current=X,typeof n=="function"?n(X):n&&(n.current=X)},[N,A,x,b,n]);uo(()=>{var X=Pe.getWindow(x),ae=me=>{var{target:Ne}=me,we=Ne instanceof HTMLElement?Ne:null,it=we==null?void 0:we.tagName;it==="INPUT"||it==="TEXTAREA"||A()};X.document.addEventListener("selectionchange",ae);var fe=()=>{J.isDraggingInternally=!1};return X.document.addEventListener("dragend",fe),X.document.addEventListener("drop",fe),()=>{X.document.removeEventListener("selectionchange",ae),X.document.removeEventListener("dragend",fe),X.document.removeEventListener("drop",fe)}},[A,J]);var I=o([x,[]]),_=GO(o),B=a&&x.children.length===1&&Array.from(De.texts(x)).length===1&&De.string(x)===""&&!k,$=j.useCallback(X=>{if(X&&B){var ae;q((ae=X.getBoundingClientRect())===null||ae===void 0?void 0:ae.height)}else q(void 0)},[B]);if(B){var W=F.start(x,[]);I.push({[gl]:!0,placeholder:a,onPlaceholderResize:$,anchor:W,focus:W})}var{marks:Y}=x;if(J.hasMarkPlaceholder=!1,x.selection&&de.isCollapsed(x.selection)&&Y){var{anchor:oe}=x.selection,re=De.leaf(x,oe.path),ge=Df(re,dI);if(!ke.equals(re,Y,{loose:!0})){J.hasMarkPlaceholder=!0;var pe=Object.fromEntries(Object.keys(ge).map(X=>[X,null]));I.push(Ti(Ti(Ti({[qS]:!0},pe),Y),{},{anchor:oe,focus:oe}))}}return j.useEffect(()=>{setTimeout(()=>{var{selection:X}=x;if(X){var{anchor:ae}=X,fe=De.leaf(x,ae.path);if(Y&&!ke.equals(fe,Y,{loose:!0})){hi.set(x,Y);return}}hi.delete(x)})}),iI(),Xe.createElement(gT.Provider,{value:u},Xe.createElement(cI.Provider,{value:k},Xe.createElement(aT.Provider,{value:_},Xe.createElement(uI,{node:H,receivedUserInput:le},Xe.createElement(C,Ti(Ti({role:u?void 0:"textbox","aria-multiline":u?void 0:!0},D),{},{spellCheck:No||!Kd?D.spellCheck:!1,autoCorrect:No||!Kd?D.autoCorrect:"false",autoCapitalize:No||!Kd?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:M,style:Ti(Ti({},P?{}:Ti({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},U?{minHeight:U}:{})),w),onBeforeInput:j.useCallback(X=>{if(!No&&!u&&!Wn(X,D.onBeforeInput)&&Pe.hasSelectableTarget(x,X.target)&&(X.preventDefault(),!Pe.isComposing(x))){var ae=X.data;F.insertText(x,ae)}},[D.onBeforeInput,x,u]),onInput:j.useCallback(X=>{if(!Wn(X,D.onInput)){if(ie.current){ie.current.handleInput();return}for(var ae of z.current)ae();z.current=[],Pe.isFocused(x)||s3(x,X.nativeEvent)}},[D.onInput,x]),onBlur:j.useCallback(X=>{if(!(u||J.isUpdatingSelection||!Pe.hasSelectableTarget(x,X.target)||Wn(X,D.onBlur))){var ae=Pe.findDocumentOrShadowRoot(x);if(J.latestElement!==ae.activeElement){var{relatedTarget:fe}=X,me=Pe.toDOMNode(x,x);if(fe!==me&&!(zr(fe)&&fe.hasAttribute("data-slate-spacer"))){if(fe!=null&&ns(fe)&&Pe.hasDOMNode(x,fe)){var Ne=Pe.toSlateNode(x,fe);if(be.isElement(Ne)&&!x.isVoid(Ne))return}if(Os){var we=ju(ae);we==null||we.removeAllRanges()}Uo.delete(x)}}}},[u,J.isUpdatingSelection,J.latestElement,x,D.onBlur]),onClick:j.useCallback(X=>{if(Pe.hasTarget(x,X.target)&&!Wn(X,D.onClick)&&ns(X.target)){var ae=Pe.toSlateNode(x,X.target),fe=Pe.findPath(x,ae);if(!F.hasPath(x,fe)||De.get(x,fe)!==ae)return;if(X.detail===HF&&fe.length>=1){var me=fe;if(!(be.isElement(ae)&&F.isBlock(x,ae))){var Ne,we=F.above(x,{match:rt=>be.isElement(rt)&&F.isBlock(x,rt),at:fe});me=(Ne=we==null?void 0:we[1])!==null&&Ne!==void 0?Ne:fe.slice(0,1)}var it=F.range(x,me);ve.select(x,it);return}if(u)return;var Ie=F.start(x,fe),Be=F.end(x,fe),et=F.void(x,{at:Ie}),_e=F.void(x,{at:Be});if(et&&_e&&K.equals(et[1],_e[1])){var ct=F.range(x,Ie);ve.select(x,ct)}}},[x,D.onClick,u]),onCompositionEnd:j.useCallback(X=>{if(Pe.hasSelectableTarget(x,X.target)){var ae;if(Pe.isComposing(x)&&Promise.resolve().then(()=>{T(!1),Ns.set(x,!1)}),(ae=ie.current)===null||ae===void 0||ae.handleCompositionEnd(X),Wn(X,D.onCompositionEnd)||Un)return;if(!Os&&!PF&&!wF&&!SF&&!DF&&X.data){var fe=hi.get(x);hi.delete(x),fe!==void 0&&(Ji.set(x,x.marks),x.marks=fe),F.insertText(x,X.data);var me=Ji.get(x);Ji.delete(x),me!==void 0&&(x.marks=me)}}},[D.onCompositionEnd,x]),onCompositionUpdate:j.useCallback(X=>{Pe.hasSelectableTarget(x,X.target)&&!Wn(X,D.onCompositionUpdate)&&(Pe.isComposing(x)||(T(!0),Ns.set(x,!0)))},[D.onCompositionUpdate,x]),onCompositionStart:j.useCallback(X=>{if(Pe.hasSelectableTarget(x,X.target)){var ae;if((ae=ie.current)===null||ae===void 0||ae.handleCompositionStart(X),Wn(X,D.onCompositionStart)||Un)return;T(!0);var{selection:fe}=x;if(fe&&de.isExpanded(fe)){F.deleteFragment(x);return}}},[D.onCompositionStart,x]),onCopy:j.useCallback(X=>{Pe.hasSelectableTarget(x,X.target)&&!Wn(X,D.onCopy)&&!o3(X)&&(X.preventDefault(),Pe.setFragmentData(x,X.clipboardData,"copy"))},[D.onCopy,x]),onCut:j.useCallback(X=>{if(!u&&Pe.hasSelectableTarget(x,X.target)&&!Wn(X,D.onCut)&&!o3(X)){X.preventDefault(),Pe.setFragmentData(x,X.clipboardData,"cut");var{selection:ae}=x;if(ae)if(de.isExpanded(ae))F.deleteFragment(x);else{var fe=De.parent(x,ae.anchor.path);F.isVoid(x,fe)&&ve.delete(x)}}},[u,x,D.onCut]),onDragOver:j.useCallback(X=>{if(Pe.hasTarget(x,X.target)&&!Wn(X,D.onDragOver)){var ae=Pe.toSlateNode(x,X.target);be.isElement(ae)&&F.isVoid(x,ae)&&X.preventDefault()}},[D.onDragOver,x]),onDragStart:j.useCallback(X=>{if(!u&&Pe.hasTarget(x,X.target)&&!Wn(X,D.onDragStart)){var ae=Pe.toSlateNode(x,X.target),fe=Pe.findPath(x,ae),me=be.isElement(ae)&&F.isVoid(x,ae)||F.void(x,{at:fe,voids:!0});if(me){var Ne=F.range(x,fe);ve.select(x,Ne)}J.isDraggingInternally=!0,Pe.setFragmentData(x,X.dataTransfer,"drag")}},[u,x,D.onDragStart,J]),onDrop:j.useCallback(X=>{if(!u&&Pe.hasTarget(x,X.target)&&!Wn(X,D.onDrop)){X.preventDefault();var ae=x.selection,fe=Pe.findEventRange(x,X),me=X.dataTransfer;ve.select(x,fe),J.isDraggingInternally&&ae&&!de.equals(ae,fe)&&!F.void(x,{at:fe,voids:!0})&&ve.delete(x,{at:ae}),Pe.insertData(x,me),Pe.isFocused(x)||Pe.focus(x)}},[u,x,D.onDrop,J]),onDragEnd:j.useCallback(X=>{!u&&J.isDraggingInternally&&D.onDragEnd&&Pe.hasTarget(x,X.target)&&D.onDragEnd(X)},[u,J,D,x]),onFocus:j.useCallback(X=>{if(!u&&!J.isUpdatingSelection&&Pe.hasEditableTarget(x,X.target)&&!Wn(X,D.onFocus)){var ae=Pe.toDOMNode(x,x),fe=Pe.findDocumentOrShadowRoot(x);if(J.latestElement=fe.activeElement,Za&&X.target!==ae){ae.focus();return}Uo.set(x,!0)}},[u,J,x,D.onFocus]),onKeyDown:j.useCallback(X=>{if(!u&&Pe.hasEditableTarget(x,X.target)){var ae;(ae=ie.current)===null||ae===void 0||ae.handleKeyDown(X);var{nativeEvent:fe}=X;if(Pe.isComposing(x)&&fe.isComposing===!1&&(Ns.set(x,!1),T(!1)),Wn(X,D.onKeyDown)||Pe.isComposing(x))return;var{selection:me}=x,Ne=x.children[me!==null?me.focus.path[0]:0],we=_S(De.string(Ne))==="rtl";if(Kt.isRedo(fe)){X.preventDefault();var it=x;typeof it.redo=="function"&&it.redo();return}if(Kt.isUndo(fe)){X.preventDefault();var Ie=x;typeof Ie.undo=="function"&&Ie.undo();return}if(Kt.isMoveLineBackward(fe)){X.preventDefault(),ve.move(x,{unit:"line",reverse:!0});return}if(Kt.isMoveLineForward(fe)){X.preventDefault(),ve.move(x,{unit:"line"});return}if(Kt.isExtendLineBackward(fe)){X.preventDefault(),ve.move(x,{unit:"line",edge:"focus",reverse:!0});return}if(Kt.isExtendLineForward(fe)){X.preventDefault(),ve.move(x,{unit:"line",edge:"focus"});return}if(Kt.isMoveBackward(fe)){X.preventDefault(),me&&de.isCollapsed(me)?ve.move(x,{reverse:!we}):ve.collapse(x,{edge:we?"end":"start"});return}if(Kt.isMoveForward(fe)){X.preventDefault(),me&&de.isCollapsed(me)?ve.move(x,{reverse:we}):ve.collapse(x,{edge:we?"start":"end"});return}if(Kt.isMoveWordBackward(fe)){X.preventDefault(),me&&de.isExpanded(me)&&ve.collapse(x,{edge:"focus"}),ve.move(x,{unit:"word",reverse:!we});return}if(Kt.isMoveWordForward(fe)){X.preventDefault(),me&&de.isExpanded(me)&&ve.collapse(x,{edge:"focus"}),ve.move(x,{unit:"word",reverse:we});return}if(No){if((VS||Os)&&me&&(Kt.isDeleteBackward(fe)||Kt.isDeleteForward(fe))&&de.isCollapsed(me)){var Be=De.parent(x,me.anchor.path);if(be.isElement(Be)&&F.isVoid(x,Be)&&(F.isInline(x,Be)||F.isBlock(x,Be))){X.preventDefault(),F.deleteBackward(x,{unit:"block"});return}}}else{if(Kt.isBold(fe)||Kt.isItalic(fe)||Kt.isTransposeCharacter(fe)){X.preventDefault();return}if(Kt.isSoftBreak(fe)){X.preventDefault(),F.insertSoftBreak(x);return}if(Kt.isSplitBlock(fe)){X.preventDefault(),F.insertBreak(x);return}if(Kt.isDeleteBackward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"backward"}):F.deleteBackward(x);return}if(Kt.isDeleteForward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"forward"}):F.deleteForward(x);return}if(Kt.isDeleteLineBackward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"backward"}):F.deleteBackward(x,{unit:"line"});return}if(Kt.isDeleteLineForward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"forward"}):F.deleteForward(x,{unit:"line"});return}if(Kt.isDeleteWordBackward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"backward"}):F.deleteBackward(x,{unit:"word"});return}if(Kt.isDeleteWordForward(fe)){X.preventDefault(),me&&de.isExpanded(me)?F.deleteFragment(x,{direction:"forward"}):F.deleteForward(x,{unit:"word"});return}}}},[u,x,D.onKeyDown]),onPaste:j.useCallback(X=>{!u&&Pe.hasEditableTarget(x,X.target)&&!Wn(X,D.onPaste)&&(!No||hF(X.nativeEvent)||Os)&&(X.preventDefault(),Pe.insertData(x,X.clipboardData))},[u,x,D.onPaste])}),Xe.createElement(fI,{decorations:I,node:x,renderElement:h,renderChunk:d,renderPlaceholder:m,renderLeaf:f,renderText:g}))))))}),pI=e=>{var{attributes:n,children:r}=e;return Xe.createElement("span",Ti({},n),r,Un&&Xe.createElement("br",null))},mI=()=>[],vI=(e,n)=>{if(n.getBoundingClientRect&&(!e.selection||e.selection&&de.isCollapsed(e.selection))){var r=n.startContainer.parentElement;r.getBoundingClientRect=n.getBoundingClientRect.bind(n),lF(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Wn=(e,n)=>{if(!n)return!1;var r=n(e);return r??(e.isDefaultPrevented()||e.isPropagationStopped())},o3=e=>ns(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),yI=(e,n)=>{if(!n)return!1;var r=n(e);return r??e.defaultPrevented},s3=(e,n)=>{var r=e;if(n.inputType==="historyUndo"&&typeof r.undo=="function"){r.undo();return}if(n.inputType==="historyRedo"&&typeof r.redo=="function"){r.redo();return}},wI=j.createContext(!1),mT=parseInt(Xe.version.split(".")[0],10),xI=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],CI=e=>{var{editor:n,children:r,onChange:i,onSelectionChange:o,onValueChange:s,initialValue:a}=e,u=Df(e,xI);Xe.useState(()=>{if(!De.isNodeList(a))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(rn.stringify(a)));if(!F.isEditor(n))throw new Error("[Slate] editor is invalid! You passed: ".concat(rn.stringify(n)));n.children=a,Object.assign(n,u)});var{selectorContext:h,onChange:d}=rI(),f=j.useCallback(v=>{var w;switch(i&&i(n.children),v==null||(w=v.operation)===null||w===void 0?void 0:w.type){case"set_selection":o==null||o(n.selection);break;default:s==null||s(n.children)}d()},[n,d,i,o,s]);j.useEffect(()=>(Em.set(n,f),()=>{Em.set(n,()=>{})}),[n,f]);var[g,m]=j.useState(Pe.isFocused(n));return j.useEffect(()=>{m(Pe.isFocused(n))},[n]),uo(()=>{var v=()=>m(Pe.isFocused(n));return mT>=17?(document.addEventListener("focusin",v),document.addEventListener("focusout",v),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",v)}):(document.addEventListener("focus",v,!0),document.addEventListener("blur",v,!0),()=>{document.removeEventListener("focus",v,!0),document.removeEventListener("blur",v,!0)})},[]),Xe.createElement(Jv.Provider,{value:h},Xe.createElement(Qv.Provider,{value:n},Xe.createElement(wI.Provider,{value:g},r)))},EI=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",i=n;i=LF(i,r);var{onChange:o,apply:s}=i;return i.getChunkSize=()=>null,i.onChange=a=>{var u=mT<18?fO.unstable_batchedUpdates:h=>h();u(()=>{o(a)})},i.apply=a=>{if(a.type==="move_node"){var u=De.parent(i,a.path),h=!!i.getChunkSize(u);if(h){var d=De.get(i,a.path),f=hT(i,u),g=Pe.findKey(i,d);f.movedNodeKeys.add(g)}}s(a)},i},PI={isHistory(e){return An(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Qi.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Qi.isOperationList(e.undos[0].operations))}},h1=new WeakMap,Bs=new WeakMap,Td=new WeakMap,Ai={isHistoryEditor(e){return PI.isHistory(e.history)&&F.isEditor(e)},isMerging(e){return Bs.get(e)},isSplittingOnce(e){return Td.get(e)},setSplittingOnce(e,n){Td.set(e,n)},isSaving(e){return h1.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,n){var r=Ai.isMerging(e);Bs.set(e,!0),n(),Bs.set(e,r)},withNewBatch(e,n){var r=Ai.isMerging(e);Bs.set(e,!0),Td.set(e,!0),n(),Bs.set(e,r),Td.delete(e)},withoutMerging(e,n){var r=Ai.isMerging(e);Bs.set(e,!1),n(),Bs.set(e,r)},withoutSaving(e,n){var r=Ai.isSaving(e);h1.set(e,!1);try{n()}finally{h1.set(e,r)}}},DI=e=>{var n=e,{apply:r}=n;return n.history={undos:[],redos:[]},n.redo=()=>{var{history:i}=n,{redos:o}=i;if(o.length>0){var s=o[o.length-1];s.selectionBefore&&ve.setSelection(n,s.selectionBefore),Ai.withoutSaving(n,()=>{F.withoutNormalizing(n,()=>{for(var a of s.operations)n.apply(a)})}),i.redos.pop(),n.writeHistory("undos",s)}},n.undo=()=>{var{history:i}=n,{undos:o}=i;if(o.length>0){var s=o[o.length-1];Ai.withoutSaving(n,()=>{F.withoutNormalizing(n,()=>{var a=s.operations.map(Qi.inverse).reverse();for(var u of a)n.apply(u);s.selectionBefore&&ve.setSelection(n,s.selectionBefore)})}),n.writeHistory("redos",s),i.undos.pop()}},n.apply=i=>{var{operations:o,history:s}=n,{undos:a}=s,u=a[a.length-1],h=u&&u.operations[u.operations.length-1],d=Ai.isSaving(n),f=Ai.isMerging(n);if(d==null&&(d=TI(i)),d){if(f==null&&(u==null?f=!1:o.includes(h)?f=!0:f=SI(i,h)),Ai.isSplittingOnce(n)&&(f=!1,Ai.setSplittingOnce(n,void 0)),u&&f)u.operations.push(i);else{var g={operations:[i],selectionBefore:n.selection};n.writeHistory("undos",g)}for(;a.length>100;)a.shift();s.redos=[]}r(i)},n.writeHistory=(i,o)=>{n.history[i].push(o)},n},SI=(e,n)=>!!(n&&e.type==="insert_text"&&n.type==="insert_text"&&e.offset===n.offset+n.text.length&&K.equals(e.path,n.path)||n&&e.type==="remove_text"&&n.type==="remove_text"&&e.offset+e.text.length===n.offset&&K.equals(e.path,n.path)),TI=(e,n)=>e.type!=="set_selection";const AI=e=>{const n=e,{insertData:r}=n;return n.insertBreak=()=>{e.insertText(`
`)},n.insertSoftBreak=()=>{e.insertText(`
`)},n.insertData=i=>{let o=i.getData("text/plain");if(!i.getData("application/x-slate-fragment")&&o){o.endsWith(`
`)&&(o=o.substring(0,o.length-1)),o=o.trim().replace(/\t+/g," "),n.insertText(o);return}r(i)},n},Ol="#6698FF",di=9,Am="plait-text-plugin-key",vT=30,Bm="transparent",Sf=20,Vu=18,sl="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",yT="none";var a3;(function(e){e.image="image"})(a3||(a3={}));const wT=["png","jpeg","gif","bmp"];var Mm;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(Mm||(Mm={}));var co;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(co||(co={}));class Fr{constructor(n,r){this.board=n,this.options=r}processDrawing(n,r,i){var o,s;if(this.canDraw&&this.canDraw(n,i)){const a=this.draw(n,i);if(a){this.g&&r.contains(this.g)?this.g.replaceWith(a):(this.g&&this.g.remove(),(o=this.options)!=null&&o.prepend?r.prepend(a):r.appendChild(a)),this.g=a;const u=this.board.getRectangle(n);if(!u)return;let h=R.getCenterPoint(u);if((s=this.options)!=null&&s.active){const f=Nn(this.board,u);h=R.getCenterPoint(f)}let d;Xn.isGroup(n)?d=cr(Kr(this.board,n,!0)):d=n.angle,d&&Vr(a,h,d)}else this.destroy();BI(this)&&this.afterDraw(n)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function BI(e){return!!e.afterDraw}const xT=(e,n)=>{const r={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},i=la(O.getRoughSVG(e),n,di,r);return i.classList.add(h6),i};function MI(e,n){return la(O.getRoughSVG(e),n,di,{stroke:"#FFFFFF",strokeWidth:1,fill:`${Ol}`,fillStyle:"solid"})}function l3(e,n){return la(O.getRoughSVG(e),n,di,{stroke:`${Ol}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Ms=6,u3=(e,n)=>{const r={stroke:Yn,strokeWidth:1,fillStyle:"solid"},i=[n.x-Sf-Vu/2,n.y+n.height+Sf+Vu/2],o=O.getRoughSVG(e),s=st(),a=o.path(`M ${i[0]+Ms} ${i[1]} A ${Ms} ${Ms}, 0, 1, 0, ${i[0]} ${i[1]+Ms}`,r),u=o.polygon([[i[0],i[1]+Ms-2],[i[0],i[1]+Ms+2],[i[0]+4.5,i[1]+Ms]],{...r,fill:Yn});return ut(u,"round"),s.append(a,u),s},Gc=(e,n)=>new Tf(e,{...n,active:!0}),Yy=class Yy extends Fr{constructor(n,r){super(n,{...r,active:!0}),this.board=n,this.options=r,this.hasResizeHandle=!1}canDraw(n,r){return!!r.selected}draw(n,r){const i=st(),o=Nn(this.board,this.options.getRectangle(n)),s=this.options.getStrokeWidth()*this.board.viewport.zoom,a=R.inflate(o,s),u=vi(this.board,a,{stroke:Ol,strokeWidth:Jt});return i.append(u),u.classList.add(Oc),u.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,R.getCornerPoints(a).forEach(h=>{const d=xT(this.board,h);i.append(d)})):this.hasResizeHandle=!1,i}};Yy.key="active-generator";let Tf=Yy;const Af=e=>`${e}`,Bf=e=>Number(e),RI=(e,n)=>{let i=(Rm(e,Af(n))?n-4:n)+2;return i>=4&&(i=i-4),Rm(e,Af(n))?i+4:i},c3=e=>{switch(e){case 0:case 2:return ci.nwse;case 1:case 3:return ci.nesw;case 4:case 6:return ci.ns;case 5:case 7:return ci.ew;default:return null}},kI=(e,n)=>{const r=Gp.indexOf(e);if(r>=0){const i=Math.round(n/(Math.PI/4));e=Gp[(r+i)%Gp.length]}return e},CT=(e,n)=>{const r=R.getCornerPoints(e),i=r.map((s,a)=>({rectangle:{x:s[0]-n/2,y:s[1]-n/2,width:n,height:n},handle:Af(a),cursorClass:c3(a)})),o=bI(r,n/2);return i.push(...o.map((s,a)=>({rectangle:s,handle:Af(a+4),cursorClass:c3(a+4)}))),i},h3=(e,n)=>n<=3?R.getCornerPoints(e)[n]:R.getEdgeCenterPoints(e)[n-4],bI=(e,n)=>{const r=[];for(let i=0;i<e.length;i++){let o=R.getRectangleByPoints([e[i],e[(i+1)%4]]);const s=new Array(2).fill(0);s[(i+1)%2]=n/2,o=R.expand(o,s[0],s[1]),r.push(o)}return r},p0=new WeakMap,eo=e=>!!p0.get(e),FI=(e,n)=>eo(e)&&n(p0.get(e)),OI=(e,n,r)=>{O.getBoardContainer(e).classList.add(`${r}-resizing`),p0.set(e,n),vo(e,!0)},II=(e,n)=>{O.getBoardContainer(e).classList.remove(`${n}-resizing`),p0.delete(e),vo(e,!1)},Rm=(e,n)=>Bf(n)>=4,Zd=(e,n)=>!Rm(e,n),ey=(e,n,r,i,o)=>{const s=cn([i],r,o)[0],a=cn([R.getCenterPoint(n)],r,o)[0],u=R.getPoints(n),h=R.getCenterPoint(e),d=cn([a],s,-o)[0],f=cn(u,h,o);return cn(f,d,-o)},LI=e=>{const n=e.points;return n&&n.length>1},m0=(e,n)=>{if(O.hasBeenTextEditing(e)||_n(e))return!1;const r=Me(e);return r.length===1&&r[0]===n&&LI(n)};function Nt(e,n){const r=n[0]-e[0],i=n[1]-e[1],o=Math.sqrt(r*r+i*i);if(o===0)throw new Error("Points must not be the same for a unit vector calculation.");const s=r/o,a=i/o;return[s,a]}function Ja(e,n,r){const i=Math.hypot(n[0],n[1]);return[e[0]+n[0]/i*r,e[1]+n[1]/i*r]}function d3(e,n,r,i){return i?[e[0]+r,e[1]+r/n[0]*n[1]]:[e[0]+r/n[1]*n[0],e[1]+r]}function f3(e){const n=e[0],i=e[1],o=-n;return[i,o]}function cc(e,n){if(!n)return e;const r=e[0],i=e[1],o=r*Math.cos(n)-i*Math.sin(n),s=r*Math.sin(n)+i*Math.cos(n);return[o,s]}function ET(e,n,r){const i=Ke(e[0],e[1],n[0],n[1]),o=Ke(e[0],e[1],r[0],r[1]),s=Ke(n[0],n[1],r[0],r[1]);return Math.abs(i+o-s)<.1}const HI=(e,n,r)=>{const i=[],o=[Math.min(n[0],r[0]),Math.max(n[0],r[0])],s=[Math.min(n[1],r[1]),Math.max(n[1],r[1])],a=Nt(n,r);if(e[0]>=o[0]&&e[0]<=o[1]){const u=d3(n,a,e[0]-n[0],!0);i.push(u)}else if(e[1]>=s[0]&&e[1]<=s[1]){const u=d3(n,a,e[1]-n[1],!1);i.push(u)}return i};function PT(e,n){const i=DT(e)*n;let o=0;for(let s=0;s<e.length-1;s++){const[a,u]=e[s],[h,d]=e[s+1],f=Ke(a,u,h,d);if(o+f>=i){const m=(i-o)/f,v=a+(h-a)*m,w=u+(d-u)*m;return[v,w]}o+=f}return e[e.length-1]}function DT(e){let n=0;for(let r=0;r<e.length-1;r++){const[i,o]=e[r],[s,a]=e[r+1];n+=Ke(i,o,s,a)}return n}function ST(e,n){const r=DT(e);let i=0;for(let o=0;o<e.length-1;o++){if(ET(n,e[o],e[o+1]))return i+=Ke(n[0],n[1],e[o][0],e[o][1]),i/r;i+=Ke(e[o][0],e[o][1],e[o+1][0],e[o+1][1])}throw new Error("Cannot get ratio by point")}const pl=e=>{const n=[];return e.forEach(r=>{n.findIndex(o=>We.isEquals(r,o))===-1&&n.push(r)}),n};function Zi(e){if(e.length<=2)return e;let n=[e[0]];for(let r=1;r<e.length-1;r++){const i=e[r-1],o=e[r],s=e[r+1];!(We.isOverHorizontal([i,o,s])||We.isOverVertical([i,o,s]))&&n.push(o)}return n.push(e[e.length-1]),n}const hc=(e,n,r)=>{const i=Ke(...e,...n),o=We.isEquals(e,n),s=o?1:(n[1]-e[1])/i,a=o?1:(n[0]-e[0])/i;return[e[0]+r*a,e[1]+r*s]},NI={[tt.left]:{x:-1,y:0},[tt.right]:{x:1,y:0},[tt.top]:{x:0,y:-1},[tt.bottom]:{x:0,y:1}};function GI(e){switch(e){case tt.left:return tt.right;case tt.right:return tt.left;case tt.top:return tt.bottom;case tt.bottom:return tt.top}}function TT(e){if(e[0]===0)return tt.left;if(e[0]===1)return tt.right;if(e[1]===0)return tt.top;if(e[1]===1)return tt.bottom}function Ka(e){const n=e[0],r=e[1];if(n===0&&r===0)return null;if(n===0)return r>0?tt.bottom:tt.top;if(r===0)return n>0?tt.right:tt.left;const i=Math.atan2(r,n);return i>-Math.PI/4&&i<=Math.PI/4?tt.right:i>Math.PI/4&&i<=3*Math.PI/4?tt.bottom:i>-3*Math.PI/4&&i<=-Math.PI/4?tt.top:tt.left}function Zs(e){return NI[e]}function ml(e){return e===0?e:e/Math.abs(e)}const _I=(e,n,r,i,o)=>{const s=Zs(n),a=Zs(i),u=[e[0]+s.x*o,e[1]+s.y*o],h=[r[0]+a.x*o,r[1]+a.y*o],d=jI(u,n,h),f=d.x!==0?"x":"y",g=d[f];let m=[],v,w;const[C,P]=zI({sourceX:e[0],sourceY:e[1],targetX:r[0],targetY:r[1]});if(s[f]*a[f]===-1){v=C,w=P;const D=[[v,u[1]],[v,h[1]]],x=[[u[0],w],[h[0],w]];s[f]===g?m=f==="x"?D:x:m=f==="x"?x:D}else{const D=[[u[0],h[1]]],x=[[h[0],u[1]]];f==="x"?m=s.x===g?x:D:m=s.y===g?D:x;let k;if(n!==i){const T=f==="x"?1:0,H=s[f]===a[f==="x"?"y":"x"],z=u[T]>h[T],U=u[T]<h[T];k=s[f]===1&&(!H&&z||H&&U)||s[f]!==1&&(!H&&U||H&&z),k&&(m=f==="x"?D:x)}}return[e,u,...m,h,r]},jI=(e,n=tt.bottom,r)=>n===tt.left||n===tt.right?e[0]<r[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<r[1]?{x:0,y:1}:{x:0,y:-1};function zI({sourceX:e,sourceY:n,targetX:r,targetY:i}){const o=Math.abs(r-e)/2,s=r<e?r+o:r-o,a=Math.abs(i-n)/2,u=i<n?i+a:i-a;return[s,u,o,a]}function ty(e){const n=e.ctrlKey||e.metaKey,r=ft.isKeyHotkey("alt",e),i=ft.isKeyHotkey("shift",e),o=e.key.includes("CapsLock"),s=e.key.includes("Tab"),a=e.key.includes("Escape"),u=e.key.startsWith("F"),h=!!e.key.includes("Arrow");return o||n||r||h||i||s||a||u}const $I=e=>ft.isKeyHotkey("mod+/",e),WI=e=>e.key==="Tab",VI=e=>e.key==="Enter",ny=e=>e.code==="Space",ry=e=>Hn.isDeleteBackward(e)||Hn.isDeleteForward(e);var wn;(function(e){e.dnd="dnd",e.drawing="drawing"})(wn||(wn={}));const AT=new WeakMap,BT=e=>AT.get(e),lr=(e,n)=>{AT.set(e,n)},v0=e=>BT(e)===wn.dnd,ua=e=>BT(e)===wn.drawing,_c=e=>{const n=yt.getElementRef(e);return(n==null?void 0:n.getTextManages())||[]},Il=e=>{const n=_c(e)[0];return n||console.warn("can not find textManage"),n},iy=e=>_c(e).map(n=>n.editor),MT=e=>{const n=iy(e)[0];return n||console.warn("can not find textManage"),n},RT=e=>e.map(n=>{try{const r=iy(n);return r.length?r.map(i=>{const o=De.texts(i);return Array.from(o).reduce((s,a)=>s+=a[0].text,"")}).join(" "):""}catch{return""}}).filter(n=>n).join(" "),ca=(e,n,r)=>{r=r||{};const i=typeof e=="string"?{children:[{text:e,...r}],type:"paragraph"}:e;return n&&(i.align=n),i},g3=e=>e===14?20:e===18?25:e*1.5,kT=async(e,n,r,i)=>{let o=0,s=0;await UI(n,r).then(d=>{o=d.width,s=d.height});let a=null;const u=URL.createObjectURL(n);O.getBoardContext(e).setUploadingFile({url:u,file:n}),a={url:u,width:o,height:s},i(a)};function UI(e,n){return new Promise((r,i)=>{const o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){const s=n,a=n*o.naturalHeight/o.naturalWidth;r(o.naturalWidth>n?{width:s,height:a}:{width:o.naturalWidth,height:o.naturalHeight})}})}const oy=new WeakMap,sr=e=>oy.get(e),bT=(e,n)=>{oy.set(e,n)},XI=e=>{oy.delete(e)};class KI{constructor(){this.list=[]}enqueue(n){this.list.push(n),this.list=this.list.sort((r,i)=>r.priority-i.priority)}dequeue(){return this.list.shift()}}class qI{constructor(n){this.graph=n,this.cameFrom=new Map}heuristic(n,r){return Math.abs(n[0]-r[0])+Math.abs(n[1]-r[1])}search(n,r,i){const o=new KI,s=this.graph.get(n);this.cameFrom=new Map;const a=new Map;for(a.set(s,0),o.enqueue({node:s,priority:0});o.list.length>0;){var u=o.dequeue();if(!u)throw new Error("can't find current");const h=u.node.data;if(h[0]===r[0]&&h[1]===r[1])break;u.node.adjacentNodes.forEach(d=>{let f=a.get(u.node)+this.heuristic(d.data,u.node.data);const g=this.cameFrom.get(u.node),m=g?g.data:i,v=m[0]===(u==null?void 0:u.node.data[0])&&m[0]===d.data[0],w=m[1]===(u==null?void 0:u.node.data[1])&&m[1]===d.data[1];if(!v&&!w&&(f=f+1),!a.has(d)||a.get(d)&&f<a.get(d)){a.set(d,f);const C=f+this.heuristic(d.data,r);o.enqueue({node:d,priority:C}),this.cameFrom.set(d,u.node)}})}}getRoute(n,r){const i=[];let o=r;for(;o[0]!==n[0]||o[1]!==n[1];){const s=this.graph.get(o),a=this.cameFrom.get(s);i.unshift(a.data),o=a.data}return i}}class YI{constructor(n){this.data=n,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class ZI{constructor(){this.index={}}add(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();o in this.index||(this.index[o]={}),s in this.index[o]||(this.index[o][s]=new YI(n))}connect(n,r){const i=this.get(n),o=this.get(r);if(!i||!o)throw new Error("A point was not found");i.adjacentNodes.push(o)}has(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();return o in this.index&&s in this.index[o]}get(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();return o in this.index&&s in this.index[o]?this.index[o][s]:null}}const FT=Tl("debug:plait:elbow-line-routing"),OT=(e,n)=>{const{nextSourcePoint:r,nextTargetPoint:i}=e,o=JI(e),s=eL(o),a=new qI(s);a.search(r,i,e.sourcePoint);let u=a.getRoute(r,i);u=[e.sourcePoint,...u,i,e.targetPoint];const h=R.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),d=R.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),f=h?void 0:R.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),g=d?void 0:R.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return u=QI(u,{centerX:f,centerY:g,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},n),u},QI=(e,n,r)=>{const{sourceRectangle:i,targetRectangle:o,centerX:s,centerY:a}=n;if(r&&FT.clear(),s!==void 0){const u=m3(e,s,!0),h=u.pointOfHit&&p3(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:i,targetRectangle:o},r);h&&(e=h)}if(a!==void 0){const u=m3(e,a,!1),h=u.pointOfHit&&p3(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:i,targetRectangle:o},r);h&&(e=h)}return e},p3=(e,n,r)=>{const{parallelPaths:i,pointOfHit:o,sourceRectangle:s,targetRectangle:a}=n;let u=null;return i.forEach(h=>{const d=[o,h[0],h[1]],f=R.getRectangleByPoints(d);if(!R.isHit(f,s)&&!R.isHit(f,a)){const g=R.getCornerPointsByPoints(d);r&&FT.drawRectangle(r,f);const m=[],v=[];e.forEach((T,H)=>{const z=g.findIndex(U=>We.isEquals(T,U));z!==-1&&(m.push(H),v.push(z))});const w=[...e],C=g.find((T,H)=>!v.includes(H)),P=Math.abs(m[0]-m[m.length-1])+1;w.splice(m[0]+1,P-2,C);const D=Zi([...e]).length-1;Zi([...w]).length-1<=D&&(u=w)}return null}),u},m3=(e,n,r)=>{const i=[];let o=null,s=null;const a=r?0:1;for(let u=0;u<e.length;u++){const h=e[u-1],d=e[u];o===null&&h&&h[a]===d[a]&&(o=h),o!==null&&h[a]!==d[a]&&(i.push([o,h]),o=null),d[a]===n&&(s=d)}return o&&i.push([o,e[e.length-1]]),{pointOfHit:s,parallelPaths:i}},JI=e=>{const{nextSourcePoint:n,nextTargetPoint:r,sourceOuterRectangle:i,targetOuterRectangle:o}=e,s=[],a=[];let u=[];[i,o].forEach(f=>{s.push(f.x,f.x+f.width/2,f.x+f.width),a.push(f.y,f.y+f.height/2,f.y+f.height)});const h=[i.x,i.x+i.width,o.x,o.x+o.width].sort((f,g)=>f-g);s.push((h[1]+h[2])/2,n[0],r[0]);const d=[i.y,i.y+i.height,o.y,o.y+o.height].sort((f,g)=>f-g);a.push((d[1]+d[2])/2,n[1],r[1]);for(let f=0;f<s.length;f++)for(let g=0;g<a.length;g++){const m=[s[f],a[g]],v=R.isPointInRectangle(i,m),w=R.isPointInRectangle(o,m);!v&&!w&&u.push(m)}return u=pl(u).filter(f=>{const g=R.isPointInRectangle(i,f),m=R.isPointInRectangle(o,f);return!g&&!m}),u},eL=e=>{const n=new ZI,r=[],i=[];e.forEach(s=>{const a=s[0],u=s[1];r.indexOf(a)<0&&r.push(a),i.indexOf(u)<0&&i.push(u),n.add(s)}),r.sort((s,a)=>s-a),i.sort((s,a)=>s-a);const o=s=>n.has(s);for(let s=0;s<r.length;s++)for(let a=0;a<i.length;a++){const u=[r[s],i[a]];if(o(u)){if(s>0){const h=[r[s-1],i[a]];o(h)&&(n.connect(h,u),n.connect(u,h))}if(a>0){const h=[r[s],i[a-1]];o(h)&&(n.connect(h,u),n.connect(u,h))}}}return n},tL=(e,n)=>{const r=vT;let i=new Array(4).fill(r),o=new Array(4).fill(r);const s=e.x-(n.x+n.width),a=n.x-(e.x+e.width);if(s>0&&s<r*2){const d=s/2;i[3]=d,o[1]=d}if(a>0&&a<r*2){const d=a/2;o[3]=d,i[1]=d}const u=e.y-(n.y+n.height),h=n.y-(e.y+e.height);if(u>0&&u<r*2){const d=u/2;i[0]=d,o[2]=d}if(h>0&&h<r*2){const d=h/2;i[2]=d,o[0]=d}return{sourceOffset:i,targetOffset:o}},v3=(e,n,r)=>{switch(r){case tt.top:return[e[0],n.y];case tt.bottom:return[e[0],n.y+n.height];case tt.right:return[n.x+n.width,e[1]];default:return[n.x,e[1]]}},nL=(e,n)=>{const{sourceOffset:r,targetOffset:i}=tL(e,n),o=R.expand(e,r[3],r[0],r[1],r[2]),s=R.expand(n,i[3],i[0],i[1],i[2]);return{sourceOuterRectangle:o,targetOuterRectangle:s}},rL=e=>{const{sourcePoint:n,nextSourcePoint:r,sourceRectangle:i,sourceOuterRectangle:o,targetPoint:s,nextTargetPoint:a,targetRectangle:u,targetOuterRectangle:h}=e;return R.isPointInRectangle(u,n)||R.isPointInRectangle(h,r)||R.isPointInRectangle(o,a)||R.isPointInRectangle(i,s)},Qd=new Map,sy=(e,n,r)=>{let i=Qd.has(e)?Qd.get(e):{};i[n]=r,Qd.set(e,i)},y0=e=>Qd.get(e),IT=new WeakMap,iL=(e,n)=>{O.getBoardContainer(e).classList.add("draw-elements-rotating"),IT.set(e,n),vo(e,!0)},oL=e=>{O.getBoardContainer(e).classList.remove("draw-elements-rotating"),IT.delete(e),vo(e,!1)},y3=(e,n)=>{const r=e.getRectangle(n);return r?r.width*r.height:0},sL=(e,n,r="asc")=>n.sort((i,o)=>{const s=y3(e,i),a=y3(e,o);return r==="asc"?s-a:a-s}),aL=e=>e&&e!==yT&&e!==Bm,ls=(e,n)=>{switch(e){case co.dashed:return[8,8+n];case co.dotted:return[2,4+n];default:return}},LT=(e,n,r,i)=>n.map(o=>{const s=i&&i(o);if(s)return s;if(o.points){const a=o.points.map(u=>[u[0]-r[0],u[1]-r[1]]);return{...o,points:a}}return o}),HT=(e,n,r,i)=>{const o={};n.forEach(s=>{o[s.id]=St()}),n.forEach(s=>{s.id=o[s.id],i&&i(s,o),s.points&&(s.points=s.points.map(a=>[r[0]+a[0],r[1]+a[1]])),Te.insertNode(e,s,[e.children.length])}),Te.addSelectionWithTemporaryElements(e,n)},Gt=(e,n,r=tt.right)=>r===tt.left?[e[0]-n,e[1]]:r===tt.bottom?[e[0],e[1]+n]:r===tt.top?[e[0],e[1]-n]:[e[0]+n,e[1]],Ad=(e,n,r=tt.right)=>r===tt.bottom?[e[0]+n,e[1]]:r===tt.top?[e[0]+n,e[1]]:[e[0],e[1]+n],lL=e=>e===0?tt.top:e===1?tt.right:e===2?tt.bottom:e===3?tt.left:tt.right,NT=(e,n,r)=>Math.abs(r?e[0]-n[0]:e[1]-n[1]),uL="foreign-object-image",Zy=class Zy extends Fr{constructor(n,r){super(n,r),this.board=n,this.options=r,this.isFocus=!1}canDraw(n){return!!this.options.getImageItem(n)}draw(n){this.element=n;const r=st(),i=this.options.getRectangle(n);this.foreignObject=Pv(i.x,i.y,i.width,i.height),this.foreignObject.classList.add(uL),r.append(this.foreignObject);const o={board:this.board,imageItem:this.options.getImageItem(n),element:n,getRectangle:()=>this.options.getRectangle(n)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,o),this.activeGenerator=Gc(this.board,{getStrokeWidth:()=>(Me(this.board).length===1&&!_n(this.board),Jt),getStrokeOpacity:()=>{const s=Me(this.board);return s.length===1&&!_n(this.board)||!s.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const s=m0(this.board,this.element);return!!sr(this.board)||s}}),r}updateImage(n,r,i){if(this.element=i,r!==i&&this.imageComponentRef){const a={imageItem:this.options.getImageItem(i),element:i,getRectangle:()=>this.options.getRectangle(i)};this.imageComponentRef.update(a)}const o=this.options.getRectangle(i);Nu(this.g,o.width,o.height,o.x,o.y),o&&i.angle!==void 0&&Vr(this.g,R.getCenterPoint(o),i.angle);const s=O.getActiveHost(this.board);this.activeGenerator.processDrawing(i,s,{selected:this.isFocus})}setFocus(n,r){this.isFocus=r;const i=O.getActiveHost(this.board);this.activeGenerator.processDrawing(n,i,{selected:r});const o={isFocus:r};this.imageComponentRef.update(o)}destroy(){var n,r;super.destroy(),(n=this.imageComponentRef)==null||n.destroy(),(r=this.activeGenerator)==null||r.destroy()}};Zy.key="image-generator";let ho=Zy;const jc=(e,n,r)=>{Me(e).forEach(o=>{if(r!=null&&r.match&&!(r!=null&&r.match(o)))return;const s=O.findPath(e,o),a=r!=null&&r.getMemorizeKey?r==null?void 0:r.getMemorizeKey(o):"";for(let u in n)a&&sy(a,u,n[u]);r!=null&&r.callback?r.callback(o,s):Te.setNode(e,n,s)})},cL=(e,n,r)=>{jc(e,{strokeStyle:n},r)},hL=(e,n,r)=>{jc(e,{fill:n},r)},dL=(e,n,r)=>{jc(e,{strokeColor:n},r)},fL=(e,n,r)=>{jc(e,{strokeWidth:n},r)},zc={setFillColor:hL,setStrokeStyle:cL,setProperty:jc,setStrokeWidth:fL,setStrokeColor:dL},Qs=(e,n=!1)=>{let r=e[0],i=e[1];if(n){const a=Math.abs(r[0]-i[0]),u=Math.abs(r[1]-i[1]),h=Math.max(u,a);i=[r[0]+(i[0]>r[0]?h:-h),r[1]+(i[1]>r[1]?h:-h)]}const o=[Math.min(r[0],i[0]),Math.min(r[1],i[1])];let s=[Math.max(r[0],i[0]),Math.max(r[1],i[1])];return[o,s]},w3=(e,n)=>!O.isReadonly(e)&&!O.hasBeenTextEditing(e)&&O.isPointer(e,gt.selection),ha=(e,n)=>{const{pointerDown:r,pointerMove:i,globalPointerUp:o}=e;let s=null,a=null,u=null,h=null;e.pointerDown=f=>{if(!n.canResize()||!w3(e)||!bi(f)){r(f);return}const g=Ze(e,Je(e,f.x,f.y));if(s=n.hitTest(g),s){s.cursorClass&&O.getBoardContainer(e).classList.add(`${s.cursorClass}`),u=[f.x,f.y],a={path:Array.isArray(s.element)?s.element.map(v=>O.findPath(e,v)):O.findPath(e,s.element),element:s.element,handle:s.handle,handleIndex:s.handleIndex,rectangle:s.rectangle,options:s.options};return}r(f)},e.pointerMove=f=>{if(!n.canResize()||!w3(e)){d(),i(f);return}if(u&&s&&!eo(e)){const g=[f.x,f.y];Ke(u[0],u[1],g[0],g[1])>fv&&(OI(e,a,n.key),Tn.set(e,!0),n.beforeResize&&n.beforeResize(a))}if(!eo(e)&&!kl(e)){const g=Ze(e,Je(e,f.x,f.y));mi(e,n.key+"-common-resize-hit-test",()=>{const m=n.hitTest(g);m?(h&&m.cursorClass!==h.cursorClass&&O.getBoardContainer(e).classList.remove(`${h.cursorClass}`),h=m,h.cursorClass&&O.getBoardContainer(e).classList.add(`${h.cursorClass}`)):d()})}else if(u&&eo(e)){f.preventDefault();const g=Ze(e,Je(e,f.x,f.y));mi(e,"with-common-resize",()=>{u&&a&&n.onResize(a,{startPoint:Ze(e,Je(e,u[0],u[1])),endPoint:g,isShift:!!f.shiftKey})});return}i(f)},e.globalPointerUp=f=>{o(f),(eo(e)||s)&&(n.afterResize&&n.afterResize(a),II(e,n.key),u=null,s=null,a=null,Tn.set(e,!1))};const d=()=>{h&&(h.cursorClass&&O.getBoardContainer(e).classList.remove(`${h.cursorClass}`),h=null)};return e},Qy=class Qy extends Fr{canDraw(n){return!0}draw(n,r){const i={stroke:"",strokeWidth:Jt,strokeLineDash:[5]};let o={x:0,y:0,width:0,height:0};return r&&(i.stroke="#999",o=kv(this.board,n,!0)),vi(this.board,o,i)}};Qy.key="GroupGenerator";let dc=Qy;class gL{constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(n,r){this.generatorMap.set(n,r)}getGenerator(n){return this.generatorMap.get(n)}initializeTextManage(n){this.textManages=[],Array.isArray(n)?this.textManages.push(...n):this.textManages.push(n)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(n=>{n.destroy()}),this.textManages=[]}}class us extends V9{constructor(n=new gL){super(n)}}class pL extends us{constructor(){super()}initializeGenerator(){this.activeGenerator=Gc(this.board,{getRectangle:n=>kv(this.board,n),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!_n(this.board)}),this.groupGenerator=new dc(this.board),this.getRef().addGenerator(dc.key,this.groupGenerator)}initialize(){super.initialize(),this.initializeGenerator()}onContextChanged(n,r){}}function GT(e){let n,r;const{drawElement:i,pointerMove:o,globalPointerUp:s,insertFragment:a,getDeletedFragment:u,deleteFragment:h,getRelatedFragment:d,getRectangle:f,keyDown:g,onChange:m}=e;return e.drawElement=v=>Xn.isGroup(v.element)?pL:i(v),e.pointerMove=v=>{mi(e,"with-group",()=>{n==null||n.remove();const w=Ze(e,Je(e,v.x,v.y));let C={anchor:w,focus:w};e.selection&&!dl.isCollapsed(e.selection)&&(C=e.selection);const P=O.getPointer(e);if(!eo(e)&&!fl(e)&&P===gt.selection){const D=ND(e,C);D.length&&(n=t9(e,D),n&&O.getElementTopHost(e).append(n))}}),o(v)},e.globalPointerUp=v=>{n==null||n.remove(),n=null,s(v)},e.getRelatedFragment=(v,w)=>{const C=JM(e,v,w);return d([...v,...C],w)},e.insertFragment=(v,w,C)=>{var x,k;let P=[];if((x=v==null?void 0:v.elements)!=null&&x.length){P=new Array((k=v==null?void 0:v.elements)==null?void 0:k.length);const T=as(e,v==null?void 0:v.elements);Fv(e,v==null?void 0:v.elements).forEach(z=>{const U=v.elements.map(q=>q.id).indexOf(z.id);P.splice(U,1,z.groupId?Mf(z,void 0):z)}),T.length&&T.forEach(z=>{const U=v.elements.map(te=>te.id).indexOf(z.id),q={...Mf(z,void 0),id:St()};P.splice(U,1,q),_T(z,v.elements,q.id,P)}),v.elements=P}a(v,w,C),(P==null?void 0:P.filter(T=>Xn.isGroup(T))).forEach(T=>{Te.insertNode(e,T,[e.children.length])})},e.getDeletedFragment=v=>(r=mL(e),r&&r.length&&v.push(...r),u(v)),e.deleteFragment=v=>{r!=null&&r.length&&yL(e,r),h(v),r=null},e.getRectangle=v=>Xn.isGroup(v)?kv(e,v,!0):f(v),e.keyDown=v=>{if(!O.isReadonly(e)){if(ft.isKeyHotkey("mod+g",v)){v.preventDefault(),Te.addGroup(e);return}if(ft.isKeyHotkey("mod+shift+g",v)){v.preventDefault(),Te.removeGroup(e);return}}g(v)},e.onChange=()=>{m(),QM(e).forEach(w=>{const C=Kr(e,w,!1,!0),P=C.some(k=>gm(e,k))&&!C.every(k=>gm(e,k)),D=yt.getElementRef(w),x=yt.getElementG(w);D.getGenerator(dc.key).processDrawing(w,x,P)})},e}const Mf=(e,n)=>({...e,groupId:n}),_T=(e,n,r,i)=>{const o=n.filter(s=>s.groupId===e.id);return o.length&&o.forEach(s=>{const a=n.map(u=>u.id).indexOf(s.id);if(Xn.isGroup(s)){const u={...Mf(s,r),id:St()};i.splice(a,1,u),_T(s,n,u.id,i)}else i.splice(a,1,Mf(s,r))}),i},mL=e=>{const r=[...e.getRelatedFragment([])],i=as(e),o=Ov(e),s=[...i,...o];return s.forEach(a=>{const u=ss(e,a,!0);if(u.length){const d=Kr(e,u[0],!1,!0).filter(f=>![...s,...r].map(g=>g.id).includes(f.id));if((d.length===1||d.length===0)&&(r.includes(u[0])||r.push(u[0]),d.length===1&&u.length>1)){const f=vL(e,u.slice(1,u.length),[...s,...r]);let g=u.length;f&&(g=u.findIndex(m=>m.id===f.id)),[...u.slice(1,g)].forEach(m=>{r.includes(m)||r.push(m)})}}}),r},vL=(e,n,r)=>{let i=null;for(let o=0;o<n.length;o++)if(Kr(e,n[o],!1,!0).filter(u=>!r.map(h=>h.id).includes(u.id)).length>0){i=n[o];break}return i},yL=(e,n)=>{const r=Ov(e),i=as(e),o=r.filter(s=>s.groupId);[...i,...o].forEach(s=>{const a=ss(e,s,!0);if(a.length){const h=Kr(e,a[0],!1,!0).filter(d=>d.id!==s.id);if(h.length===1){const d=n.map(f=>f.id);if(a.some(f=>d.includes(f.id))){const f=a.find(m=>!d.includes(m.id)),g=O.findPath(e,h[0]);Te.setNode(e,{groupId:(f==null?void 0:f.id)||void 0},g)}}}})},d1=new WeakMap,Rf=new WeakMap,wL=e=>{if(e){if(!d1.get(e)){const n=document.createElement("canvas");return d1.set(e,n),n}return d1.get(e)}return document.createElement("canvas")},f1=(e,n,r,i=1e4)=>{let o=Rf.get(n);return o||(o=$c(e,n,r,i),Rf.set(n,o),o)},xL=(e,n,r)=>{Rf.set(n,r)},CL=(e,n)=>{Rf.delete(n)};function $c(e,n,r,i=1e4){const s=wL(e).getContext("2d"),a=De.texts(n),u=[[]];for(const f of a){const[g]=f;De.string(g).split(`
`).forEach((w,C)=>{const P={...g,text:w};if(C===0)u[u.length-1].push(P);else{const D=[];D.push(P),u.push(D)}})}let h=0,d=0;return u.forEach((f,g)=>{let m=0,v=g3(r.fontSize);if(f.forEach((w,C)=>{const P=EL(w,{fontFamily:r.fontFamily,fontSize:r.fontSize});s.font=P,m+=s.measureText(w.text).width;const D=C===f.length-1;if(w["font-size"]&&(D||w.text!=="")){const x=g3(parseFloat(w["font-size"]));x>v&&(v=x)}}),m<=i)m>h&&(h=m),d+=v;else{h=i;const w=Math.ceil(m/i);d+=v*w}}),{width:h,height:d}}const EL=(e,n)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||n.fontSize}px ${n.fontFamily} `;class Wc{constructor(n,r){this.board=n,this.options=r,this.isEditing=!1,this.getSize=(i,o)=>{const s=window.getComputedStyle(this.foreignObject.children[0]),a=s.fontFamily,u=parseFloat(s.fontSize),h=i||this.editor.children[0];return $c(this.board,h,{fontSize:u,fontFamily:a},o||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(n){const r=this.options.getRectangle();this.g=st(),this.foreignObject=Pv(r.x,r.y,r.width,r.height),this.g.append(this.foreignObject),this.g.classList.add("text");const i={board:this.board,text:n,textPlugins:this.options.textPlugins,onChange:o=>{if(o.operations.some(s=>!Qi.isSelectionOperation(s))){const{width:s,height:a}=this.getSize();this.options.onChange&&this.options.onChange({...o,width:s,height:a}),Tn.set(this.board,!0)}},afterInit:o=>{this.editor=o},onComposition:o=>{if(o.type==="compositionend"){CL(this.board,this.editor.children[0]);return}const s=PL(this.editor,o.data);if(s){const a=this.getSize(s.children[0]);xL(this.board,this.editor.children[0],a),this.options.onChange&&this.options.onChange({...a}),Tn.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,i)}updateRectangleWidth(n){F6(this.g,n)}updateAngle(n,r=0){Vr(this.g,n,r)}updateRectangle(n){const{x:r,y:i,width:o,height:s}=n||this.options.getRectangle();Nu(this.g,o,s,r,i)}updateText(n){const r={text:n};this.textComponentRef.update(r)}edit(n,r){this.isEditing=!0,nm.set(this.board,!0);const i={readonly:!1};this.textComponentRef.update(i),ve.select(this.editor,[0]);const o=u=>{const h=Ze(this.board,Je(this.board,u.x,u.y)),d=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),f=R.isHit(R.getRectangleByPoints([h,h]),d),g=u.target.closest(".plait-board-attached");!f&&!g&&setTimeout(()=>{a()},0)},s=u=>{if(!u.isComposing&&(u.key==="Escape"||u.key==="Tab"||r&&r(u))){u.preventDefault(),u.stopPropagation(),a();return}},a=()=>{if(this.isEditing){this.updateRectangle(),document.removeEventListener("mousedown",o),document.removeEventListener("keydown",s),nm.set(this.board,!1),Tn.set(this.board,!1),n&&n();const u={readonly:!0};this.textComponentRef.update(u),this.isEditing=!1,this.exitCallback=void 0}};return document.addEventListener("mousedown",o),document.addEventListener("keydown",s),this.exitCallback=a,a}destroy(){var n,r;(n=this.g)==null||n.remove(),(r=this.textComponentRef)==null||r.destroy(),this.exitCallback&&this.exitCallback()}}const PL=(e,n)=>{if(e.selection&&de.isCollapsed(e.selection)){const[r,i]=F.node(e,e.selection),o=e.selection.anchor.offset,a={children:[JSON.parse(JSON.stringify(e.children[0]))]},u=r.text.slice(0,o+1)+n+r.text.slice(o+1),h=De.get(a,i);return h.text=u,a}return null},DL=e=>{const n=e;return n.renderText=(r,i)=>{throw new Error("No implementation for renderText method.")},n};var Rn;(function(e){e.left="left",e.center="center",e.right="right"})(Rn||(Rn={}));const SL=e=>{const n=e;return n.renderImage=(r,i)=>{throw new Error("No implementation for renderImage method.")},n},x3={isActive(e,n){const r=De.get(e,C3);if(r){const{align:i}=r;return i===n}return!1},setAlign(e,n){const r={align:n};ve.setNodes(e,r,{at:C3})}},C3=[0];var Vn;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Vn||(Vn={}));const E3=[Vn.bold,Vn.color,Vn.italic,Vn.strike,Vn.underline,Vn.fontSize];var kf;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(kf||(kf={}));Vn.bold,Vn.italic,Vn.underline,Vn.strike;const fc=14,km={getMarks(e){const n={};let r=[];e.selection?r=e.selection:e.children&&e.children.length>0&&(r={anchor:F.start(e,[0]),focus:F.end(e,[0])});const i=F.nodes(e,{match:ke.isText,at:r});for(const o of i){const[s]=o,{text:a,...u}=s;Object.assign(n,u)}for(const o in n)E3.includes(o)||delete n[o];return n},getMarksByElement(e){const n={},r=De.texts(e);for(const i of r){const[o]=i,{text:s,...a}=o;Object.assign(n,a)}for(const i in n)E3.includes(i)||delete n[i];return n},isMarkActive(e,n){var o,s;if(!(e!=null&&e.selection))return;const r=De.get(e,(s=(o=e==null?void 0:e.selection)==null?void 0:o.anchor)==null?void 0:s.path);if(!ke.isText(r))return!1;const i=km.getMarks(e);return!!(i&&i[n])},toggleMark(e,n){g1(e),km.isMarkActive(e,n)?F.removeMark(e,n):F.addMark(e,n,!0)},setFontSizeMark(e,n,r=fc){g1(e),Number(n)===r?F.removeMark(e,Vn.fontSize):F.addMark(e,Vn.fontSize,Number(n))},setColorMark(e,n,r=Yn){g1(e),n===r||n===null||n===void 0?F.removeMark(e,"color"):F.addMark(e,"color",n)}};function g1(e){e.selection||ve.select(e,[0])}const bf={wrapLink(e,n,r){bf.isLinkActive(e)&&bf.unwrapLink(e);const{selection:i}=e,o=i&&de.isCollapsed(i),s={type:"link",url:r,children:[{text:n}]};if(o||De.string(e)==="")ve.insertNodes(e,s);else if(i)ve.wrapNodes(e,s,{split:!0}),ve.collapse(e,{edge:"end"});else{const a={anchor:F.start(e,[0]),focus:F.end(e,[0])};ve.wrapNodes(e,s,{split:!0,at:a})}},unwrapLink(e,n){n||(n=e.selection,!n&&e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])})),ve.unwrapNodes(e,{at:n,match:r=>be.isElement(r)&&r.type==="link"})},isLinkActive(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[r]=F.nodes(e,{match:i=>be.isElement(i)&&i.type==="link",at:n});return!!r},getLinkElement(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[r]=F.nodes(e,{match:i=>be.isElement(i)&&i.type==="link",at:n});return r}},TL=20;function P3(e){const n=/^(?:\w+:)?\/\/(\S+)$/,r=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,i=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const s=e.match(r);if(s)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s[1]);const a=e.match(n);if(!a)return!1;const u=a[1];return u?!!(i.test(u)||o.test(u)):!1}const D3=()=>G.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),AL=({attributes:e,children:n,element:r})=>G.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":r.url,className:"plait-board-link",children:[G.jsx(D3,{}),n,G.jsx(D3,{})]}),BL=e=>{const{insertData:n,insertText:r,isInline:i}=e;return e.isInline=o=>o.type&&["link"].includes(o.type)||i(o),e.insertText=o=>{o&&P3(o)?bf.wrapLink(e,o,o):r(o)},e.insertData=o=>{const s=o.getData("text/plain");s&&P3(s)?bf.wrapLink(e,s,s):n(o)},e},S3=e=>{const{text:n,readonly:r,onChange:i,onComposition:o,afterInit:s}=e,a=j.useCallback(f=>G.jsx(kL,{...f}),[]),u=[n],h=j.useMemo(()=>{const f=BL(AI(DI(EI(rF()))));return s&&s(f),f},[]);j.useEffect(()=>{n!==h.children[0]&&(h.children=[n],h.onChange())},[n,h]);const d=f=>{const{selection:g}=h;if(g&&de.isCollapsed(g)){const{nativeEvent:m}=f;if(ft.isKeyHotkey("left",m)){f.preventDefault(),ve.move(h,{unit:"offset",reverse:!0});return}if(ft.isKeyHotkey("right",m)){f.preventDefault(),ve.move(h,{unit:"offset"});return}}};return G.jsx(CI,{editor:h,initialValue:u,onChange:f=>{i&&i({newText:h.children[0],operations:h.operations})},children:G.jsx(gI,{className:"slate-editable-container plait-text-container",renderElement:f=>G.jsx(ML,{...f}),renderLeaf:a,readOnly:r===void 0?!0:r,onCompositionStart:f=>{o&&o(f)},onCompositionUpdate:f=>{o&&o(f)},onCompositionEnd:f=>{o&&o(f)},onKeyDown:d})})},ML=e=>{const{attributes:n,children:r,element:i}=e;switch(i.type){case"link":return G.jsx(AL,{...e});default:return G.jsx(RL,{...e})}},RL=({attributes:e,children:n,element:r})=>{const i={textAlign:r.align};return G.jsx("div",{style:i,...e,children:n})},kL=({children:e,leaf:n,attributes:r})=>(n.bold&&(e=G.jsx("strong",{children:e})),n.code&&(e=G.jsx("code",{children:e})),n.italic&&(e=G.jsx("em",{children:e})),n.underlined&&(e=G.jsx("u",{children:e})),G.jsx("span",{style:{color:n.color},...r,children:e})),bL=e=>{const n=e;return n.renderText=(r,i)=>{const o=Qf.createRoot(r);let s;const a=G.jsx(S3,{...i,afterInit:d=>{s=d,i.afterInit&&i.afterInit(d)}});o.render(a);let u={...i};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:d=>{if(!(d&&u&&!Object.keys(d).every(m=>d[m]===u[m])))return;const g=Pe.isReadOnly(s);u={...u,...d},o.render(G.jsx(S3,{...u})),g===!0&&u.readonly===!1?setTimeout(()=>{Pe.focus(s)},0):g===!1&&u.readonly===!0&&(Pe.blur(s),Pe.deselect(s))}}},n},FL=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e,s=[];let a=!1;return e.pointerDown=u=>{const h=[u.clientX,u.clientY];s.length<2&&(e.viewport.zoom,s.push({pointerId:u.pointerId,lastPoint:h,currentPoint:h,hasMoved:!1})),n(u)},e.pointerMove=u=>{const h=[u.clientX,u.clientY];if(s.length>=2){const d=s.find(f=>f.pointerId===u.pointerId);if(d&&(d.currentPoint=h,d.hasMoved=!0,s.length===2&&s.every(f=>f.hasMoved))){const[f,g]=s,m=fC(...f.lastPoint,...g.lastPoint),v=fC(...f.currentPoint,...g.currentPoint),w=v[0]-m[0],C=v[1]-m[1],P=O.getBoardContainer(e).getBoundingClientRect(),D=P.width/2,x=P.height/2,k=e.viewport.zoom,T=Rl(e);let H=T[0]+D/k-w/k,z=T[1]+x/k-C/k,U=[H-P.width/2/k,z-P.height/2/k],q=k;const te=Ke(...f.lastPoint,...g.lastPoint),le=Ke(...f.currentPoint,...g.currentPoint)/te,Q=[f.currentPoint[0]-f.lastPoint[0],f.currentPoint[1]-f.lastPoint[1]],J=[g.currentPoint[0]-g.lastPoint[0],g.currentPoint[1]-g.lastPoint[1]],ie=Q[0]*J[0]+Q[1]*J[1],N=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]),A=Math.sqrt(J[0]*J[0]+J[1]*J[1]),b=ie/(N*A||1);if(b<-.7||b<=.8&&a&&le>=.01?a=!0:a=!1,a){q=Math.min(Math.max(e.viewport.zoom*le,AD),BD);const I=O.getBoardContainer(e).getBoundingClientRect(),_=v[0]-I.x,B=v[1]-I.y;H=U[0]+_/k,z=U[1]+B/k,U=[H-_/q,z-B/q]}Pt.updateViewport(e,U,q),s.forEach(M=>{M.lastPoint=M.currentPoint,M.hasMoved=!1})}return}r(u)},e.pointerUp=u=>{const h=s.findIndex(d=>d.pointerId===u.pointerId);h!==-1&&s.splice(h,1),i(u)},e.globalPointerUp=u=>{const h=s.findIndex(d=>d.pointerId===u.pointerId);h!==-1&&s.splice(h,1),o(u)},e},jT=({value:e,children:n,options:r,plugins:i,viewport:o,theme:s,onChange:a,onSelectionChange:u,onValueChange:h,onViewportChange:d,onThemeChange:f})=>{const[g,m]=j.useState(()=>{const D=OL(e,r,i,o,s),x=IL(D);return{v:0,board:D,listRender:x}}),{board:v,listRender:w}=g,C=j.useCallback(()=>{if(a){const H={children:v.children,operations:v.operations,viewport:v.viewport,selection:v.selection,theme:v.theme};a(H)}const D=v.operations.some(H=>jo.isSetSelectionOperation(H)),x=v.operations.some(H=>jo.isSetViewportOperation(H)),k=v.operations.some(H=>jo.isSetThemeOperation(H)),T=v.operations.length>0&&!v.operations.every(H=>jo.isSetSelectionOperation(H)||jo.isSetViewportOperation(H)||jo.isSetThemeOperation(H));h&&T&&h(v.children),u&&D&&u(v.selection),d&&x&&d(v.viewport),f&&k&&f(v.theme.themeColorMode),m(H=>({v:H.v+1,board:v,listRender:w}))},[v,a,u,h]);j.useEffect(()=>(ff.set(v,()=>{if(v.operations.length&&v.operations.every(T=>T.type==="set_selection")){w.update(v.children,{board:v,parent:v,parentG:O.getElementHost(v)});return}const x=v.operations.length&&v.operations.some(T=>T.type==="set_viewport");if(x&&dM(v)){QD(v,!1),w.update(v.children,{board:v,parent:v,parentG:O.getElementHost(v)});return}w.update(v.children,{board:v,parent:v,parentG:O.getElementHost(v)}),x?Bv(v):uM(v),yf(v),Me(v).forEach(T=>{yt.getElementRef(T).updateActiveSection()})}),gf.set(v,()=>{C()}),()=>{ff.delete(v),gf.delete(v)}),[v]);const P=j.useRef(!0);return j.useEffect(()=>{if(P.current){P.current=!1;return}e!==g.board.children&&!$d.get(v)&&(v.children=e,w.update(v.children,{board:v,parent:v,parentG:O.getElementHost(v)}),Pt.fitViewport(v))},[e]),G.jsx(_v.Provider,{value:g,children:n})},OL=(e,n,r,i,o)=>{let s=cR(Q9(Y9(Z9(hR(aR(q9(dR(uR(bL(SL(DL(K9(e,n)))))))))))));return r.forEach(a=>{s=a(s)}),FL(s),i&&(s.viewport=i),o&&(s.theme=o),s},IL=e=>new SS(e);function LL(e,n){return Math.sqrt(HL(e,n))}function HL(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function $a(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function NL(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let h=3*o[0]-2*s[0]-r[0];h*=h;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<h&&(a=h),u<d&&(u=d),a+u}function bm(e,n,r,i){const o=i||[];if(NL(e,n)<r){const s=e[n+0];o.length?LL(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],h=e[n+2],d=e[n+3],f=$a(a,u,.5),g=$a(u,h,.5),m=$a(h,d,.5),v=$a(f,g,.5),w=$a(g,m,.5),C=$a(v,w,.5);bm([a,f,v,C],0,r,o),bm([C,w,m,d],0,r,o)}return o}function gr(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;bm(e,a,n,i)}return i}var $e;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})($e||($e={}));var ze;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(ze||(ze={}));var He;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(He||(He={}));var br;(function(e){e.name="name",e.content="content"})(br||(br={}));var hr;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(hr||(hr={}));var fi;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(fi||(fi={}));var vl;(function(e){e.table="table"})(vl||(vl={}));const gc={isTable:e=>e.type==="table",isVerticalText:e=>{var n;return((n=e.text)==null?void 0:n.direction)==="vertical"}},zT="plait-draw-plugin-key";var yl;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(yl||(yl={}));const Fe={rectangleAndText:4},w0={strokeWidth:2,fill:yT},GL={selectionStrokeWidth:Jt},pc={width:100,height:100,strokeColor:Yn,strokeWidth:2},T3={width:120,height:50},_L={width:138,height:80},A3={width:100,height:80},jL={width:120,height:100},x0={height:20,text:""},$T={defaultTextMaxWidth:34*14},p1={width:44,height:44},Di={width:120,height:60},zL={width:70,height:80},$L={width:80,height:80},WL={width:140,height:70},VL={width:124,height:60},WT={width:120,height:70},m1={width:160,height:100},Fm={width:120,height:80},UL={width:117,height:59},XL={width:47,height:33},KL={width:68,height:100},qL={width:300,height:240},YL={width:210,height:150,texts:[{id:br.name,text:"",align:Rn.left},{id:br.content,text:"",align:Rn.left}]},ZL={width:18,height:80},Bd={width:120,height:60},QL={width:200,height:150},B3={width:40,height:40},JL={width:20,height:20},eH={width:70,height:56},tH={width:120,height:56},nH={width:70,height:34},rH={width:400,height:280,texts:[{id:br.name,text:"Opt | Alt | Loop",align:Rn.left},{id:br.content,text:"[Condition]",align:Rn.left}]},iH={width:230,height:180,texts:[{text:"Class",align:Rn.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:Rn.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Rn.left}]},oH={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:Rn.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Rn.left}]},VT={[$e.pentagonArrow]:T3,[$e.processArrow]:T3,[$e.cloud]:jL,[$e.twoWayArrow]:_L,[$e.leftArrow]:A3,[$e.rightArrow]:A3},UT={[ze.connector]:p1,[ze.process]:Di,[ze.decision]:WL,[ze.data]:VL,[ze.terminal]:Di,[ze.manualInput]:UL,[ze.preparation]:Di,[ze.manualLoop]:Di,[ze.merge]:XL,[ze.delay]:Di,[ze.storedData]:Di,[ze.or]:p1,[ze.summingJunction]:p1,[ze.predefinedProcess]:Di,[ze.offPage]:Di,[ze.document]:WT,[ze.multiDocument]:Fm,[ze.database]:zL,[ze.hardDisk]:Di,[ze.internalStorage]:$L,[ze.noteCurlyLeft]:m1,[ze.noteCurlyRight]:m1,[ze.noteSquare]:m1,[ze.display]:Di},XT={[He.actor]:KL,[He.useCase]:WT,[He.container]:qL,[He.note]:Bd,[He.package]:YL,[He.combinedFragment]:rH,[He.class]:iH,[He.interface]:oH,[He.activation]:ZL,[He.object]:Bd,[He.deletion]:B3,[He.activityClass]:Bd,[He.simpleClass]:Bd,[He.component]:Fm,[He.template]:Fm,[He.componentBox]:QL,[He.port]:JL,[He.branchMerge]:B3,[He.assembly]:tH,[He.providedInterface]:nH,[He.requiredInterface]:eH},sH={[He.package]:Object.keys(br),[He.combinedFragment]:Object.keys(br)},Ff=10,aH=6,lH=8,KT=[ze.or,ze.summingJunction,He.activation,He.deletion,He.port,He.branchMerge,He.assembly,He.providedInterface,He.requiredInterface],uH=[He.package,He.combinedFragment],cH=[ze.noteCurlyLeft,ze.noteCurlyRight,ze.noteSquare,He.requiredInterface,He.deletion],ay=()=>[...Object.keys($e),...Object.keys(ze),...Object.keys(He)],qT=()=>Object.keys(fi),hH=()=>Object.keys(ze),dH=()=>Object.keys(He),fH=()=>Object.keys(kt),gH=()=>Object.keys(Nf),pH=1e3,YT={[Zt.default]:{strokeColor:Yn,fill:"#FFFFFF"},[Zt.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[Zt.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[Zt.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[Zt.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[Zt.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},Au=42,mH={width:580,height:524},vH={width:524,height:580},yH={width:580,height:524},wH={width:524,height:580},ZT={[fi.swimlaneHorizontal]:wH,[fi.swimlaneVertical]:yH,[fi.swimlaneHorizontalWithHeader]:vH,[fi.swimlaneVerticalWithHeader]:mH},Of=5,QT={strokeWidth:2},xH=4,CH=6,EH=1,PH=1,DH=12,el=3,SH="",mc=new WeakMap,M3=(e,n,r,i)=>{const o=mc.get(e);return mc.set(e,{...o,[D5(n,r)]:i})},Uu=(e,n,r)=>mc.get(e)[D5(n,r)],R3=(e,n)=>{const r=mc.get(e);delete r[n],mc.set(e,r)};class ly{get shape(){return this.element.shape||this.element.type}constructor(n,r,i,o){this.board=n,this.texts=i,this.element=r,this.options=o}initialize(){const n=(this.board.getPluginOptions(Am)||{}).textPlugins;this.textManages=this.texts.map(i=>{const o=this.createTextManage(i,n);return M3(this.board,this.element,i,o),o}),yt.getElementRef(this.element).initializeTextManage(this.textManages)}draw(n){const r=R.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(i=>{const o=Uu(this.board,this.element,i);i.text&&o&&(o.draw(i.text),n.append(o.g),(this.element.angle||this.element.angle===0)&&o.updateAngle(r,this.element.angle))})}update(n,r,i,o){this.element=n;const s=R.getCenterPoint(this.board.getRectangle(this.element)),a=(this.board.getPluginOptions(Am)||{}).textPlugins,u=r.filter(h=>!i.find(d=>d.id===h.id));u.length&&u.forEach(h=>{const d=Uu(this.board,n,h),f=this.textManages.findIndex(g=>g===d);f>-1&&h.text&&h.textHeight&&this.textManages.splice(f,1),d==null||d.destroy(),R3(this.board,h.id)}),i.forEach(h=>{if(h.text){let d=Uu(this.board,this.element,h);d?(d.updateText(h.text),d.updateRectangle()):(d=this.createTextManage(h,a),M3(this.board,n,h,d),d.draw(h.text),o.append(d.g),this.textManages.push(d)),(this.element.angle||this.element.angle===0)&&d.updateAngle(s,this.element.angle)}})}createTextManage(n,r){return new Wc(this.board,{getRectangle:()=>this.getRectangle(n),onChange:o=>this.options.onChange(this.element,o,n),getMaxWidth:()=>this.getMaxWidth(n),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,n):this.getRectangle(n),textPlugins:r})}getRectangle(n){const r=bn(this.shape).getTextRectangle;return r?r(this.element,n):on(this.element)}getMaxWidth(n){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(n).width}destroy(){yt.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(r=>{R3(this.board,r.id)})}}const Om=e=>{const n=Me(e);return n&&n.length===1&&ce.isElementByTable(n[0])},TH=(e,n)=>(n!=null&&n.length?n:Me(e)).filter(i=>ce.isElementByTable(i)),uy=new WeakMap;function tl(e){return uy.get(e)}function JT(e,n){return uy.set(e,n)}function k3(e){return uy.delete(e)}function Vc(e,n){const r=e==null?void 0:e.buildTable(n);if(!r||!r.points||!r.columns||!r.rows)throw new Error("can not get table cells points");const i=R.getRectangleByPoints(r.points),o=r.columns.length,s=r.rows.length,a=b3(r.columns,i.width,o,!0),u=b3(r.rows,i.height,s,!1);return r.cells.map(d=>{const f=r.rows.findIndex(x=>x.id===d.rowId),g=r.columns.findIndex(x=>x.id===d.columnId);let m=i.x;for(let x=0;x<g;x++)m+=a[x];let v=i.y;for(let x=0;x<f;x++)v+=u[x];const w=F3(d,a,g,!0),C=m+w,P=F3(d,u,f,!1),D=v+P;return{...d,points:[[m,v],[C,D]]}})}function da(e,n,r){try{const i=Vc(e,n),o=i&&n.cells.findIndex(s=>s.id===r);return i[o]}catch{throw new Error("can not get table cell points")}}function b3(e,n,r,i){const o=[],s=i?"width":"height";let a=n;e.forEach((d,f)=>{d[s]&&(o[f]=d[s],a-=d[s])});const u=r-o.filter(d=>!!d).length,h=u>0?a/u:0;for(let d=0;d<r;d++)o[d]||(o[d]=h);return o}function F3(e,n,r,i){const o=i?e.colspan||1:e.rowspan||1;let s=0;for(let a=0;a<o;a++){const u=r+a;s+=n[u]}return s}function O3(e,n,r){const i=e.buildTable(n),o=Vc(e,i),s=R.getRectangleByPoints([r,r]),a=o.find(u=>{const h=R.getRectangleByPoints(u.points);return R.isHit(s,h)});return a?i.cells.find(u=>u.id===a.id):null}function I3(e,n){const r=e5(e,n);r&&r.edit()}function e5(e,n){return Uu(e,void 0,n)}const t5=(e,n,r,i)=>{const o=e.columns.map(a=>a.id===n?{...a,width:r}:a),s=[e.points[0],[e.points[1][0]+i,e.points[1][1]]];return{columns:o,points:s}},n5=(e,n,r,i)=>{const o=e.rows.map(a=>a.id===n?{...a,height:r}:a),s=[e.points[0],[e.points[1][0],e.points[1][1]+i]];return{rows:o,points:s}};function AH(e,n,r,i){const o=`${i}Id`;e.forEach(s=>{s[o]===n&&(s[o]=r)})}function L3(e,n){e[`${n}s`].forEach(r=>{const i=St();AH(e.cells,r.id,i,n),r.id=i})}function BH(e){e.forEach(n=>{const r=St();n.id=r})}function r5(e){return e.text&&e.textHeight}function MH(e,n,r){const i=Vc(e,n),o=r.map(s=>i.find(u=>u.id===s.id).points);return R.getRectangleByPoints(o)}const v1=(e,n,r=null)=>{const i={id:St(),rowId:e,columnId:n};return r!==null&&(i.textHeight=TL,i.text={children:[{text:r}],align:Rn.center}),i},RH=6,y1=new WeakMap,kH=e=>{let n="";switch(!0){case ce.isText(e):{n=Dr.text;break}case ce.isBasicShape(e):{n=Dr.basicShape;break}case ce.isFlowchart(e):{n=Dr.flowchart;break}case ce.isArrowLine(e):{n=Dr.arrowLine;break}case ce.isUML(e):n=Dr.UML}return n},i5=()=>({...y0(Dr.arrowLine)}),cs=e=>{let n="";ce.isBasicShape({shape:e})?n=e===$e.text?Dr.text:Dr.basicShape:ce.isUML({shape:e})?n=Dr.UML:n=Dr.flowchart;const r={...y0(n)},i={...r.text};return delete r.text,{textProperties:i,geometryProperties:r}},cy=(e,n)=>{var s;const r=kH(e);let i=((s=y0(r))==null?void 0:s.text)||{};const o=n.find(a=>a.type==="set_node");if(o){const{properties:a,newProperties:u}=o;for(const h in u){const d=u[h];d==null?delete i[h]:i[h]=d}for(const h in a)u.hasOwnProperty(h)||delete i[h];sy(r,"text",i)}},bH=(e,n)=>{const r=y1.has(e)?y1.get(e):[],i=r.indexOf(n);n===$e.text||i===0||(i!==-1?r.splice(i,1):r.length===RH&&r.pop(),r.unshift(n),y1.set(e,r))},FH="debug:plait:line-mirror",Md=Tl(FH),hy=(e,n)=>{const r=[...n];return We.isVertical(r,e,el)&&(r[0]=e[0]),We.isHorizontal(r,e,el)&&(r[1]=e[1]),r};function OH(e,n,r,i){const o={previous:null,next:null},s=e[i],a=e[i+1],u=We.isHorizontal(s,a),h=We.isVertical(s,a),d=e[i-1]??e[0],f=e[i-2]??n;(u&&We.isHorizontal(f,d)||h&&We.isVertical(f,d))&&(o.previous=d);const g=e[i+2]??e[e.length-1],m=e[i+3]??r;return(u&&We.isHorizontal(g,m)||h&&We.isVertical(g,m))&&(o.next=g),o}function IH(e,n,r,i){let o=e,s=n;if(We.isHorizontal(e,n)){const a=We.getOffsetY(r.startPoint,r.endPoint);let u=e[1]+a;i.previous&&Math.abs(i.previous[1]-u)<el?u=i.previous[1]:i.next&&Math.abs(i.next[1]-u)<el&&(u=i.next[1]),o=[e[0],u],s=[n[0],u]}if(We.isVertical(e,n)){const a=We.getOffsetX(r.startPoint,r.endPoint);let u=e[0]+a;i.previous&&Math.abs(i.previous[0]-u)<el?u=i.previous[0]:i.next&&Math.abs(i.next[0]-u)<el&&(u=i.next[0]),o=[u,e[1]],s=[u,n[1]]}return[o,s]}function o5(e,n,r,i,o){let s=null,a=null;const u=i[o],h=i[o+1];if(!u||!h)return{index:s,deleteCount:a};const d=r.slice(1,-1),f=d.findIndex(m=>We.isEquals(m,u)),g=d.findIndex(m=>We.isEquals(m,h));if(Math.max(f,g)>-1){if(f>-1&&g>-1)return{index:f,deleteCount:2};if(f>-1&&g===-1)return f<d.length-1&&We.isAlign([d[f],d[f+1],u,h])?{index:f,deleteCount:2}:{index:f,deleteCount:1};if(f===-1&&g>-1)return g>0&&We.isAlign([d[g],d[g-1],u,h])?{index:g-1,deleteCount:2}:{index:g,deleteCount:1}}else for(let m=0;m<d.length-1;m++){const v=d[m],w=d[m+1];if(We.isAlign([v,w,u,h])){s=m,a=2;break}if(We.isAlign([v,w,u])){s=Math.min(m+1,d.length-1),a=1;break}if(We.isAlign([v,w,h])){s=Math.max(m-1,0),a=1;break}}if(s===null)if(a=0,d.length>0){const m=Kc(e,n),v=qc(e,n,m),w=pl(OT(v,e)),C=Zi(w.slice(1,w.length-1)),P=[i[0],...d,i[i.length-1]],D=s5(e,P,C,v);for(let x=o-1;x>=0;x--){const k=D.slice(1,-1).findIndex(T=>We.isEquals(T,i[x]));if(k>-1){s=k+1;break}}s===null&&(s=0,We.isAlign(i)&&(a=d.length))}else s=0;return{index:s,deleteCount:a}}function s5(e,n,r,i){for(let o=1;o<n.length-2;o++)LH(e,o,n,r,i);return n}const LH=(e,n,r,i,o)=>{const s=r[n-1],a=r[n],u=r[n+1],h=r[n+2],d=[s,a],f=[u,h],g=We.isAlign(d),m=We.isAlign(f);let v=!1,w=!1;if(!g||!m){const C=Im(i,d[0],d[1]),P=Im(i,f[0],f[1]),D=C.length>0&&P.length>0;v=!g&&!D,w=!m&&!D}if(v||w){const C=[a,u],P=NH(C,i),D=GH(e,C,P,o.sourceRectangle,o.targetRectangle);if(D.length===1){const x=D[0];v&&r.splice(n,1,x[0]),w&&r.splice(n+1,1,x[1])}else{const k=We.isHorizontal(a,u)?0:1;if(v){const T=[a[0],a[1]];T[k]=s[k],r.splice(n,1,T)}if(w){const T=[u[0],u[1]];T[k]=h[k],r.splice(n+1,1,T)}}}};function HH(e,n,r,i,o){const{deleteCount:s}=o5(e,n,r,i,o);return s!==null&&s>1}function Im(e,n,r){let i=[],o=-1,s=-1;for(let a=0;a<e.length;a++)if(We.isAlign([e[a],n])&&(o=a),o>-1&&We.isAlign([e[a],r])){s=a;break}return o>-1&&s>-1&&(i=e.slice(o,s+1)),i}function NH(e,n){const r=We.isHorizontal(e[0],e[1]),i=[];for(let o=0;o<n.length-1;o++){const s=n[o],a=n[o+1],u=We.isHorizontal(s,a,.1);r&&u&&i.push([s,a]),!r&&!u&&i.push([s,a])}return i}function GH(e,n,r,i,o){Md.isDebug()&&Md.clear();const s=[];for(let a=0;a<r.length;a++){const u=r[a],h=[n[0][0],n[0][1]],d=[n[1][0],n[1][1]],g=We.isHorizontal(h,d)?0:1;h[g]=u[0][g],d[g]=u[1][g];const m=R.getRectangleByPoints([h,d,...u]);!R.isHit(m,i)&&!R.isHit(m,o)&&(s.push([h,d]),Md.isDebug()&&Md.drawPolygon(e,R.getCornerPoints(m)))}return s}const a5=e=>e.length===1?!0:e.some((n,r)=>{const i=e[r-1],o=e[r+1],s=i&&[i,n],a=o&&[n,o],u=s&&We.isAlign(s),h=a&&We.isAlign(a);return r===0?!h:r===e.length-1?!u:!u&&!h}),H3=20,_H=(e,n,r)=>{const i=st();if(Cn.isSourceMark(e,mn.none)&&Cn.isTargetMark(e,mn.none))return null;const o=ht(e),s=o*o/3;if(n.length===1&&(n=[n[0],[n[0][0]+.1,n[0][1]]]),!Cn.isSourceMark(e,mn.none)){const a=hc(n[0],n[1],H3+s),u=N3(e,{marker:e.source.marker,source:a,target:n[0],isSource:!0},r);u&&i.appendChild(u)}if(!Cn.isTargetMark(e,mn.none)){const a=hc(n[n.length-1],n[n.length-2],H3+s),u=N3(e,{marker:e.target.marker,source:a,target:n[n.length-1],isSource:!1},r);u&&i.appendChild(u)}return i},N3=(e,n,r)=>{const{marker:i,target:o,source:s,isSource:a}=n;let u;switch(i){case mn.openTriangle:{u=WH(e,s,o,r);break}case mn.solidTriangle:{u=$H(s,o,r);break}case mn.arrow:{u=zH(e,s,o,r);break}case mn.sharpArrow:{u=jH(s,o,r);break}case mn.oneSideUp:{u=G3(s,o,a?"down":"up",r);break}case mn.oneSideDown:{u=G3(s,o,a?"up":"down",r);break}case mn.hollowTriangle:{u=UH(s,o,r);break}case mn.singleSlash:{u=VH(s,o,a,r);break}}return u},jH=(e,n,r)=>{const i=n,{pointLeft:o,pointRight:s}=Ml(e,n,20),a=st(),u=Ev();let h=`M${s[0]},${s[1]}A25,25,20,0,1,${o[0]},${o[1]}L${i[0]},${i[1]}Z`;return u.setAttribute("d",h),u.setAttribute("stroke",`${r==null?void 0:r.stroke}`),u.setAttribute("stroke-width",`${r==null?void 0:r.strokeWidth}`),u.setAttribute("fill",`${r==null?void 0:r.stroke}`),a.appendChild(u),a},zH=(e,n,r,i)=>{const o=Nt(n,r),s=ht(e),a=[r[0]+s*o[0]/2,r[1]+s*o[1]/2],u=Ke(...n,...a),h=[a[0]-(u*3/5+s)/2*o[0],a[1]-(u*3/5+s)/2*o[1]],{pointLeft:d,pointRight:f}=Ml(n,a,30),g=Ur([d,a,f,h],{...i,fill:i.stroke},!0);return g.querySelector("path").setAttribute("stroke-linejoin","round"),g},$H=(e,n,r)=>{const i=n,{pointLeft:o,pointRight:s}=Ml(e,i,30);return Ur([o,i,s],{...r,fill:r.stroke},!0)},WH=(e,n,r,i)=>{const o=Nt(n,r),s=ht(e),a=[r[0]+s*o[0]/2,r[1]+s*o[1]/2],{pointLeft:u,pointRight:h}=Ml(n,a,40);return Ur([u,a,h],i)},G3=(e,n,r,i)=>{const{pointLeft:o,pointRight:s}=Ml(e,n,40);return Ur([r==="up"?s:o,n],i)},VH=(e,n,r,i)=>{const o=Ke(...e,...n),s=hc(n,e,o/2),a=r?120:60,u=hl(...e,...s,a*Math.PI/180),h=hl(...n,...s,a*Math.PI/180);return Ur([u,h],i)},UH=(e,n,r)=>{const{pointLeft:i,pointRight:o}=Ml(e,n,30);return Ur([i,o,n],{...r,fill:"white"},!0)};class l5 extends Fr{canDraw(n){return!0}draw(n){let r;return r=KH(this.board,n),r}}const XH=(e,n,r,i,o,s)=>({id:St(),type:"arrow-line",shape:e,source:r,texts:o||[],target:i,opacity:1,points:n,...s}),Kn=(e,n)=>{switch(n.shape){case kt.elbow:return D0(e,n);case kt.curve:return u5(e,n);default:{const r=Cn.getPoints(e,n),i=Kc(e,n);return r[0]=i.source.point,r[r.length-1]=i.target.point,r}}},u5=(e,n)=>{if(n.points.length===2){const r=Kc(e,n),{source:i,target:o}=r,s=r.source.boundElement,a=r.target.boundElement;let u=[i.point];const d=12+Ke(...i.point,...o.point)/3;if(s&&u.push(Ja(i.point,i.vector,d)),a&&u.push(Ja(o.point,o.vector,d)),s&&!a||!s&&a){u.push(o.point);const g=QH(u);return gr(g)}return!s&&!a&&(u.push(Ja(i.point,i.vector,d)),u.push(Ja(o.point,o.vector,d))),u.push(o.point),gr(u)}else{let r=Cn.getPoints(e,n);r=pl(r);const i=Lc(r);return gr(i)}},KH=(e,n)=>{const r=ht(n),i=C0(e,n),o=E0(e,n),s=ls(o,r),a={stroke:i,strokeWidth:r,strokeLineDash:s},u=st();let h=Kn(e,n),d;n.shape===kt.curve?d=O.getRoughSVG(e).curve(h,a):d=Ur(h,a);const f=St();d.setAttribute("mask",`url(#${f})`),n.strokeStyle===co.dotted&&ut(d,"round"),u.appendChild(d);const{mask:g,maskTargetFillRect:m}=JH(e,n,f);u.appendChild(g),d.appendChild(m);const v=_H(n,h,{stroke:i,strokeWidth:r});return v&&u.appendChild(v),u},wl=(e,n,r)=>{const i=yy(e,r,n),o=i.connectorPoint||i.edgePoint;return qH(o,r)},qH=(e,n)=>{let r=R.getRectangleByPoints(n.points);return[(e[0]-r.x)/r.width,(e[1]-r.y)/r.height]},YH=(e,n)=>{const r=R.getRectangleByPoints(n.points),i=hs(n);return bn(i).getConnectorPoints(r).find(s=>Ke(...s,...e)<=lH)},dy=(e,n,r)=>{const i=n.texts[r],o=Kn(e,n),s=PT(o,i.position);return{x:s[0]-i.width/2,y:s[1]-i.height/2,width:i.width,height:i.height}},ZH=e=>bl(e,{match:n=>ce.isArrowLine(n),recursion:n=>ce.isDrawElement(n)}),QH=e=>{const n=[],r=e.length/3;for(let i=0;i<r;i++){const o=e[i],s=e[i+1],a=e[i+2],u=Ke(...o,...s),h=Ke(...a,...s),d=hc(o,s,u*2/3),f=hc(a,s,h*2/3);n.push(o,d,f,a)}return n},fy=(e,n,r,i,o,s,a)=>{const u=vy(e,i),h=u?wl(e,i,u):void 0,d=o?wl(e,r,o):void 0,f=u?u.id:void 0,g=new l5(e),m=i5();let v,w;v=m.source,w=m.target,v&&delete m.source,w&&delete m.target;const C=XH(n,[r,i],{marker:v||mn.none,connection:d,boundId:o==null?void 0:o.id},{marker:w||mn.arrow,connection:h,boundId:f},[],{strokeWidth:QT.strokeWidth,...m,...a}),D=Kn(e,C)[0];return C.points[1]=hy(D,i),g.processDrawing(C,s),O.getElementTopHost(e).append(s),C};function JH(e,n,r){const i=A6();i.setAttribute("id",r);const o=Kn(e,n);let s=R.getRectangleByPoints(o);s=R.getOutlineRectangle(s,-30);const a=_p(s,{fill:"white"});i.appendChild(a),n.texts.forEach((d,f)=>{let g=dy(e,n,f);g=R.inflate(g,xH*2);const m=_p(g,{fill:"black"});i.appendChild(m)});const h=_p(s);return h.setAttribute("opacity","0"),h.setAttribute("fill","none"),{mask:i,maskTargetFillRect:h}}const gy=(e,n,r)=>{const i=n.texts;if(!i.length)return-1;const o=Kn(e,n);return i.findIndex(s=>{const a=PT(o,s.position),u={x:a[0]-s.width/2,y:a[1]-s.height/2,width:s.width,height:s.height};return R.isHit(u,R.getRectangleByPoints([r,r]))})},py=e=>uH.includes(e),oo=e=>ce.isGeometry(e)&&py(e.shape),eN=e=>sH[e],tN=(e,n,r={})=>{const i=St(),o=nN(e);return{id:i,type:"geometry",shape:e,angle:0,opacity:1,texts:o,points:n,...r}},nN=e=>{var u;const r={...cs(e).textProperties},i=r==null?void 0:r.align,o=(r==null?void 0:r.textHeight)||x0.height;r==null||delete r.align,r==null||delete r.textHeight;const s=((u=Py(e))==null?void 0:u.texts)||[];return(eN(e)||[]).map(h=>{const d=s==null?void 0:s.find(f=>(f==null?void 0:f.key)===h);return{id:h,text:ca((d==null?void 0:d.text)||"",i||(d==null?void 0:d.align)||Rn.center,r),textHeight:o}})},rN=(e,n)=>{const r=bn(e.shape),i=R.getRectangleByPoints([n,n]);let o;return r.getTextRectangle&&(o=e.texts.find(s=>{const a=r.getTextRectangle(e,{id:s.id});return R.isHit(i,a)})),o};class c5 extends Fr{canDraw(n){return!0}draw(n){let r;return r=sN(this.board,n),r}}const Yo=(e,n)=>{switch(n.shape){case xc.straight:return n.points;case xc.curve:{if(n.points.length===2)return gr(n.points);{let r=n.points;const i=Lc(r);return gr(i)}}default:return null}},iN=(e,n,r)=>({id:St(),type:"vector-line",shape:e,opacity:1,points:n,...r}),oN=(e,n,r,i,o)=>{const s=new c5(e),a=i5(),u=iN(n,[...r,i],{strokeWidth:QT.strokeWidth,...a}),h=r[r.length-1];return u.points[u.points.length-1]=hy(h,i),s.processDrawing(u,o),O.getElementTopHost(e).append(o),u},sN=(e,n)=>{const r=ht(n),i=C0(e,n),o=E0(e,n),s=ls(o,r),a=wy(e,n),u={stroke:i,strokeWidth:r,strokeLineDash:s,fill:a},h=st();let d=Yo(e,n);const f=Ur(d,u),g=St();return f.setAttribute("mask",`url(#${g})`),n.strokeStyle===co.dotted&&ut(f,"round"),h.appendChild(f),h},Ll=e=>{const n=[];for(let r=0;r<e.length;r++){let i=r==e.length-1?0:r+1;n.push([(e[r][0]+e[i][0])/2,(e[r][1]+e[i][1])/2])}return n},h5=(e,n)=>{const r=[];for(let i=1;i<=e.length;i++){let o=e[i-1],s=i===e.length?e[0]:e[i];const a=HI(n,o,s);r.push(...a)}return r},En=(e,n)=>{for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];if(ET(n,i,o))return[i,o]}return null};function Lm(e){const n=e.width/7,r=e.height/3.2,i=n/8.5,o=r/20,s=[e.x+n,e.y+r],a=[{rx:i,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2,endY:e.y+r/2},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*4.2,endY:e.y+r/2.2},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5.8,endY:e.y+r},{rx:i,ry:o*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*6,endY:e.y+r*2.2},{rx:i,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5,endY:e.y+r*2.8},{rx:i,ry:o/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2.8,endY:e.y+r*2.8},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+r*2.2},{rx:i,ry:o*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+r}];return{startPoint:s,arcCommands:a}}const d5={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,arcCommands:s}=Lm(n),a=`M ${o[0]} ${o[1]} `+s.map(h=>`A ${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`).join(`
`)+" Z",u=i.path(a,{...r,fillStyle:"solid"});return T6(u,"round"),u},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,arcCommands:i}=Lm(e);let o=1/0,s=n,a=r;for(const u of i){const h=a0(n,a,u),d=Ke(n[0],n[1],h[0],h[1]);d<o&&(o=d,s=h),a=[u.endX,u.endY]}return s},getEdgeByConnectionPoint(e,n){const r=d5.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2,s=o/1.5;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r+o/6,y:n.y+n.height/6+(n.height*4/6-i)/2}}},f5=(e,n,r)=>gy(e,n,r)!==-1,vc=(e,n)=>ID(n,e)<=gv,g5=(e,n,r)=>{const i=Kn(e,n);return f5(e,n,r)||vc(i,r)},p5=(e,n,r)=>{const i=Yo(e,n);return Uc(n.points)&&es(r,i)||vc(i,r)},aN=(e,n)=>{const r=bn(e.shape);if(oo(e))return e.texts.some(o=>{const s=r.getTextRectangle(e,{id:o.id});return If(n,R.getCornerPoints(s),e.angle)});{const i=r.getTextRectangle?r.getTextRectangle(e):on(e);return If(n,R.getCornerPoints(i),e.angle)}},m5=(e,n)=>{const r=bn(e.shape);if(oo(e))return e.texts.some(o=>{const s=r.getTextRectangle(e,{id:o.id});return R.isPointInRectangle(s,n)});{const i=r.getTextRectangle?r.getTextRectangle(e):on(e);return R.isPointInRectangle(i,n)}},v5=e=>{if(!C5(e))return!0;const n=MT(e);return F.isEmpty(n,n.children[0])},lN=(e,n,r)=>{const i=R.getRectangleByPoints([r.anchor,r.focus]);if(ce.isGeometry(n)){const o=_3(e,i,n);return o||!v5(n)&&aN(n,i)}if(ce.isImage(n))return _3(e,i,n);if(ce.isArrowLine(n)){const o=Kn(e,n);return mf(o,i)}if(ce.isVectorLine(n)){const o=Yo(e,n);return mf(o,i)}return null},_3=(e,n,r)=>{const i=R.getRectangleByPoints(r.points);return If(n,R.getCornerPoints(i),r.angle)},If=(e,n,r)=>{let i=T9(n,r)||n;return mf(i,e)},y5=(e,n)=>{let r=w5(e,n),i=n.length;r&&(i=n.indexOf(r)+1);const o=n.slice(0,i),s=cN(o);return s?s[0]:sL(e,o,"asc")[0]},w5=(e,n)=>{let r=null;for(let i=0;i<n.length;i++){const o=n[i];if(E5(e,o)||my(o)){const s=wy(e,o);if(aL(s)){r=o;break}}}return r},uN=(e,n)=>w5(e,[n])!==null,cN=e=>{const n=e.filter(r=>ce.isText(r)||ce.isLine(r)||ce.isImage(r));return n.length?n:null},hN="debug:plait:hit:shape:edge:sample-points",Wa=Tl(hN),dN=[$e.cloud],fN=(e,n,r,i=!0)=>{const o=e.getRectangle(n);if(r=ts(e,r,n)||r,ce.isGeometry(n)&&o){if(Wa.isDebug()&&dN.includes(n.shape)){Wa.clear();const{startPoint:u,arcCommands:h}=Lm(o),d=[u,...h.map(v=>[v.endX,v.endY])];Wa.drawCircles(e,d,5,!1);let f=1/0,g=r,m=u;for(const v of h){const w=a0(r,m,v),C=Ke(r[0],r[1],w[0],w[1]),{center:P}=LD(m,v);Wa.drawCircles(e,[P],8,!1,{fill:"yellow"}),C<f&&(f=C,g=w),m=[v.endX,v.endY]}Wa.drawCircles(e,[r],12,!1,{fill:"black",stroke:"black"}),Wa.drawCircles(e,[g],12,!1,{fill:"green",stroke:"green"})}if(x5(e,n,r,gv))return!0;const s=bn(hs(n));if(ce.isText(n)){const u=on(n);return R.isPointInRectangle(u,r)}return i&&v5(n)&&!uN(e,n)?!1:m5(n,r)||s.isInsidePoint(o,r)}if(ce.isImage(n)){const s=R.getRectangleByPoints(n.points);return R.isPointInRectangle(s,r)}return ce.isArrowLine(n)?g5(e,n,r):ce.isVectorLine(n)?p5(e,n,r):null},x5=(e,n,r,i)=>{const o=M5(n,r);return Ke(o[0],o[1],r[0],r[1])<=i},gN=(e,n,r,i)=>{const o=R.inflate(R.getRectangleByPoints(n.points),i);return bn(hs(n)).isInsidePoint(o,r)},pN=(e,n,r)=>{const i=e.getRectangle(n);if(r=ts(e,r,n)||r,ce.isGeometry(n)&&!ce.isGeometryByTable(n)){const o=bn(hs(n)),s=o.isInsidePoint(i,r);if(s)return s;if(o.getTextRectangle){const a=m5(n,r);if(a)return a}}if(ce.isImage(n)){const o=R.getRectangleByPoints(n.points);return R.isPointInRectangle(o,r)}return ce.isArrowLine(n)?g5(e,n,r):ce.isVectorLine(n)?p5(e,n,r):null},on=e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}},ht=e=>ce.isText(e)?0:e.strokeWidth||w0.strokeWidth,fo=(e,n)=>{bH(e,n.shape),Te.insertNode(e,n,[e.children.length]),Al(e),aa(e,n),Pt.updatePointerType(e,gt.selection)},C5=e=>ce.isText(e)?!0:ce.isImage(e)?!1:ce.isGeometry(e)?Sy(e):ce.isArrowLine(e)?iy(e).length>0:ce.isElementByTable(e)?e.cells.some(n=>r5(n)):!0,my=e=>ce.isDrawElement(e)?ce.isText(e)||ce.isArrowLine(e)||ce.isImage(e)?!1:ce.isVectorLine(e)?Uc(e.points):ce.isGeometry(e)?kN(e):!0:!1,E5=(e,n)=>ce.isCustomGeometryElement(e,n)&&Uc(n.points),vy=(e,n)=>{let r=P5(e,n);if(r){const i=yy(e,r,n);if(i.isHitConnector||i.isHitEdge)return r}return null},yy=(e,n,r)=>{const i=ts(e,r,n)||r,o=YH(i,n),s=M5(n,i);return{isHitEdge:x5(e,n,i,aH),isHitConnector:!!o,connectorPoint:o,edgePoint:s}},P5=(e,n,r=Ff)=>{let i=null;return mN(e,o=>{i===null&&gN(e,o,ts(e,n,o)||n,r*2)&&(i=o)}),i},mN=(e,n)=>{kn(e,r=>{!O.isBoard(r)&&ce.isShapeElement(r)&&n(r)},sa(e),!0)},j3=(e,n,r,i,o)=>bn(r).draw(e,n,i,o),vN=(e,n,r={hasMask:!0,hasConnector:!0})=>{const i=st(),o=R.getRectangleByPoints(n.points),s=R.inflate(o,em),a=hs(n);let u;ce.isElementByTable(n)&&(u={element:n});const h=j3(e,s,a,{stroke:fr,strokeWidth:em},u);if(i.appendChild(h),r.hasMask){const d=j3(e,s,a,{stroke:fr,strokeWidth:0,fill:my(n)?Dv:w0.fill,fillStyle:"solid"},u);i.appendChild(d)}return r.hasConnector&&bn(a).getConnectorPoints(o).forEach(f=>{const g=la(O.getRoughSVG(e),f,8,{stroke:fr,strokeWidth:Jt,fill:"#FFF",fillStyle:"solid"});i.appendChild(g)}),i},D5=(e,n)=>e&&oo(e)?`${e.id}-${n.id}`:n.id,Uc=e=>{const n=e[0],r=e[e.length-1];return n[0]===r[0]&&n[1]===r[1]},yc=e=>f0(e,yl.geometryText,x0.text),C0=(e,n)=>{const r=AN(e.theme.themeColorMode);return n.strokeColor||r},wy=(e,n)=>{const r=ce.isFlowchart(n)&&my(n)?BN(e.theme.themeColorMode):w0.fill;return n.fill||r},E0=(e,n)=>n.strokeStyle||co.solid;class S5 extends Fr{canDraw(n,r){return!0}draw(n,r){const i=R.getRectangleByPoints(n.points),o=n.shape;if(o===$e.text)return;const s=wy(this.board,n),a=ht(n),u=C0(this.board,n),h=E0(this.board,n),d=ls(h,a);return PN(this.board,R.inflate(i,-a),o,{stroke:u,strokeWidth:a,fill:s,strokeLineDash:d})}}function T5(e,n){const r=[],i=n.shape,o=10;if(i===kt.straight){const s=ce.isArrowLine(n)?Cn.getPoints(e,n):n.points;for(let a=0;a<s.length-1;a++)Ke(...s[a],...s[a+1])<o||r.push([(s[a][0]+s[a+1][0])/2,(s[a][1]+s[a+1][1])/2])}if(i===kt.curve){const s=ce.isArrowLine(n)?Cn.getPoints(e,n):n.points,a=ce.isArrowLine(n)?u5(e,n):Yo(e,n);if(s.length===2){const h=a.length-1,d=Math.round((0+h)/2);r.push(a[d])}else for(let u=0;u<s.length-1;u++){const h=a.findIndex(m=>m[0]===s[u][0]&&m[1]===s[u][1]),d=a.findIndex(m=>m[0]===s[u+1][0]&&m[1]===s[u+1][1]),f=Math.round((h+d)/2);Ke(...s[u],...s[u+1])<o||r.push(a[f])}}if(i===kt.elbow){const s=D0(e,n),a=qc(e,n);if(!Ty(n,a)){const[u,h]=b5(e,n);for(let d=0;d<s.length-1;d++){if(d==0&&We.isEquals(s[d+1],u)||d===s.length-2&&We.isEquals(s[s.length-2],h))continue;const[f,g]=s[d],[m,v]=s[d+1],w=[(f+m)/2,(g+v)/2];r.push(w)}}}return r}var yn;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(yn||(yn={}));const A5=(e,n,r)=>{let i=ce.isArrowLine(n)?Cn.getPoints(e,n):n.points;const o=Hm(i,r);if(o!==-1){const u=o;if(o===0)return{handle:yn.source,handleIndex:u};if(o===i.length-1)return{handle:yn.target,handleIndex:u};if(n.shape!==kt.elbow)return{handleIndex:u}}const s=T5(e,n),a=Hm(s,r);if(a!==-1)return{handle:yn.addHandle,handleIndex:a}};function Hm(e,n){const r=e.map(o=>({x:o[0]-di/2,y:o[1]-di/2,width:di,height:di})),i=r.find(o=>R.isHit(R.getRectangleByPoints([n,n]),o));return i?r.indexOf(i):-1}class B5 extends Fr{constructor(n,r={active:!0}){super(n,r),this.board=n,this.onlySelectedCurrentLine=!1}canDraw(n,r){return!!r.selected}draw(n,r){const i=st(),o=Me(this.board);if(this.onlySelectedCurrentLine=o.length===1,this.onlySelectedCurrentLine){i.classList.add(Oc);const s=ce.isArrowLine(n)?Cn.getPoints(this.board,n):n.points;let a=[...s],u=[];n.shape===kt.elbow&&(a=s.slice(0,1).concat(s.slice(-1)),u=F5(this.board,n,r.linePoints)),a.map(g=>nc(this.board,g)).forEach(g=>{const m=l3(this.board,g);i.appendChild(m)});const f=T5(this.board,n).map(g=>nc(this.board,g));if(!O.hasBeenTextEditing(this.board))for(let g=0;g<f.length;g++){const m=f[g];if(n.shape===kt.elbow&&u.length){const w=Hm(f,m);if(HH(this.board,n,[...s],u,w)){const P=l3(this.board,m);i.appendChild(P);continue}}const v=MI(this.board,m);i.appendChild(v)}}else{const s=this.board.getRectangle(n);if(s){const a=Nn(this.board,s);let u="0.5";(a.height===0||a.width===0)&&(u="0.8");const h=vi(this.board,a,{stroke:Ol,strokeWidth:GL.selectionStrokeWidth});h.style.opacity=u,i.appendChild(h)}}return i}needUpdate(){return Me(this.board).length===1!==this.onlySelectedCurrentLine}}const Jy=class Jy extends Fr{constructor(n){super(n,{active:!0}),this.board=n,this.hoverElement=null}canDraw(n,r){const i=Me(this.board);return!!(r.selected&&i.length===1&&!_n(this.board))}draw(n,r){return this.autoCompleteG=st(),Ey(this.board,n,!0).forEach((o,s)=>{const a=la(O.getRoughSVG(this.board),o,CH,{stroke:"none",fill:tc(Ol,EH),fillStyle:"solid"});a.classList.add(`line-auto-complete-${s}`),this.autoCompleteG.appendChild(a)}),this.autoCompleteG}removeAutoCompleteG(n){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${n}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};Jy.key="line-auto-complete-generator";let go=Jy;class yN extends ly{get textManage(){return this.textManages[0]}constructor(n,r,i,o){super(n,r,[{id:r.id,text:i,textHeight:r.textHeight}],o)}update(n,r,i,o){oo(n)||super.update(n,[{text:r,id:n.id,textHeight:n.textHeight}],[{text:i,id:n.id,textHeight:n.textHeight}],o)}}class P0 extends Fr{canDraw(n,r){return!0}draw(n,r){const i=R.getRectangleByPoints(n.points),o=ht(n),s=C0(this.board,n),a=E0(this.board,n),u=ls(a,o);return bn(vl.table).draw(this.board,i,{strokeWidth:o,stroke:s,strokeLineDash:u},{element:n})}}const hs=e=>ce.isImage(e)?$e.rectangle:ce.isTable(e)?vl.table:e.shape,xy=(e,n)=>ce.isUMLClassOrInterface({shape:n})?new P0(e):new S5(e),wN=(e,n,r)=>{const i=cs(n),o={id:St(),type:"geometry",angle:0,opacity:1,points:r,strokeWidth:pc.strokeWidth,...i.geometryProperties};let s,a;return n===He.class?(s=[{id:St(),height:30},{id:St()},{id:St()}],a=[{id:St()}]):(s=[{id:St(),height:50},{id:St()}],a=[{id:St()}]),{...o,shape:n,rows:s,columns:a,cells:xN(e,s,a,n)}},xN=(e,n,r,i)=>{var h;const o=cs(i),s=n.length*r.length,a=((h=Py(i))==null?void 0:h.texts)||[],u=a.map(d=>Xc(e,d.text||yc(e),o.textProperties["font-size"]).height);return new Array(s).fill("").map((d,f)=>{const g=Math.floor(f/r.length),m=f%r.length;return{id:St(),rowId:n[g].id,columnId:r[m].id,textHeight:u[f],text:{children:[{text:a[f].text}],align:a[f].align}}})},Cy=(e,n,r,i={},o={})=>KT.includes(e)?EN(e,n,i):CN(e,n,r,i,o),CN=(e,n,r,i={},o={})=>{let s={},a=Rn.center,u=x0.height;return e===$e.text&&(s={autoSize:!0},a=void 0),o={...o},o!=null&&o.align&&(a=o==null?void 0:o.align),o!=null&&o.textHeight&&(u=o==null?void 0:o.textHeight),o==null||delete o.align,o==null||delete o.textHeight,{id:St(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:u,text:ca(r,a,o),points:n,...s,...i}},EN=(e,n,r={})=>({id:St(),type:"geometry",shape:e,angle:0,opacity:1,points:n,...r}),PN=(e,n,r,i)=>bn(r).draw(e,n,i),M5=(e,n)=>{const r=R.getRectangleByPoints(e.points),i=hs(e);return bn(i).getNearestPoint(r,n)},DN=e=>UT[e],SN=e=>VT[e]||pc,TN=e=>XT[e],Ey=(e,n,r=!1)=>{const i=(12+di/2)*2,o=R.getRectangleByPoints(n.points),s=Nn(e,o),a=r?s:o;return R.getEdgeCenterPoints(R.inflate(a,i))},R5=(e,n)=>n.findIndex(r=>{const i=R.getRectangleByPoints([e]);let o=R.getRectangleByPoints([r]);return o=R.inflate(o,di),R.isHit(i,o)}),AN=e=>YT[e].strokeColor,BN=e=>YT[e].fill,Xc=(e,n,r)=>{r=r?Number(r):fc;const i=$c(e,ca(n),{fontSize:r,fontFamily:sl});return{width:i.width+Fe.rectangleAndText*2,height:i.height}},k5=(e,n)=>{const r=Py(e);return R.getPoints(R.getRectangleByCenterPoint(n,r.width,r.height))},Py=e=>{const n=hH().includes(e),r=dH().includes(e);return n?DN(e):r?TN(e):SN(e)},Dy=(e,n,r,i)=>{const o=cs($e.text);return i=i||R.getRectangleByPoints(n).height,Cy($e.text,n,r,o.geometryProperties,{...o.textProperties,textHeight:i})},wc=(e,n,r)=>{const i=cs(r),o=Xc(e,x0.text,i.textProperties["font-size"]).height;return ce.isUMLClassOrInterface({shape:r})?wN(e,r,n):py(r)?tN(r,n,{strokeWidth:pc.strokeWidth,...i.geometryProperties}):Cy(r,n,"",{strokeWidth:pc.strokeWidth,...i.geometryProperties},{...i.textProperties,textHeight:o})},w1=(e,n,r)=>{const i=r?Uu(e,n,r):Il(n);i&&i.edit(()=>{})},Sy=e=>RN(e)||oo(e),MN=e=>!KT.includes(e)&&!py(e),RN=e=>ce.isGeometry(e)&&MN(e.shape),kN=e=>!cH.includes(e.shape),bN=e=>e.source.boundId&&e.source.boundId===e.target.boundId,Ty=(e,n)=>rL(n)&&!bN(e),D0=(e,n)=>{const r=Kc(e,n),i=qc(e,n,r);if(Ty(n,i))return Zi(_I(r.source.point,r.source.direction,r.target.point,r.target.direction,vT));const o=pl(OT(i,e)),s=o.slice(1,o.length-1);if(n.points.length===2)return Zi(o);{const a=Zi(s),h=pl(Cn.getPoints(e,n)).slice(1,-1);if(a5(h))return Zi(o);const d=[a[0],...h,a[a.length-1]],f=s5(e,d,a,i),g=[o[0]];for(let v=0;v<f.length-1;v++){let w=f[v],C=f[v+1];if(We.isAlign([w,C]))g.push(w);else{const D=Im(a,w,C);D.length?(g.push(w),g.push(...D)):(g.push(w),console.log("unknown data points"))}}return g.push(o[o.length-2],o[o.length-1]),Zi(g)}},b5=(e,n)=>{const r=qc(e,n);return[r.nextSourcePoint,r.nextTargetPoint]},FN=(e,n,r)=>{let i=n.source.boundId?$r(e,n.source.boundId):void 0,o=n.target.boundId?$r(e,n.target.boundId):void 0;if(!i){const d=r.source;i=z3(d.point,d.vector)}if(!o){const d=r.target;o=z3(d.point,d.vector)}let s=R.getRectangleByPoints(i.points);const a=Oi(R.getCornerPoints(s),i)||R.getCornerPoints(s);s=R.getRectangleByPoints(a),s=R.inflate(s,ht(i)*2);let u=R.getRectangleByPoints(o.points);const h=Oi(R.getCornerPoints(u),o)||R.getCornerPoints(u);return u=R.getRectangleByPoints(h),u=R.inflate(u,ht(o)*2),{sourceRectangle:s,targetRectangle:u}},z3=(e,n)=>{const r=Ja(e,n,-25),i=R.getPoints(R.getRectangleByCenterPoint(r,50,50));return Cy($e.rectangle,i,"")};function F5(e,n,r){let i=r??D0(e,n);const[o,s]=b5(e,n);return i.splice(0,1,o),i.splice(-1,1,s),pl(i)}const Lf=(e,n)=>(n!=null&&n.length?n:Me(e)).filter(i=>ce.isDrawElement(i)),Ay=e=>Me(e).filter(r=>ce.isArrowLine(r)),O5=e=>Me(e).filter(r=>ce.isVectorLine(r)),ON=e=>{const n=Me(e);return n&&n.length===1&&ce.isSwimlane(n[0])},IN=e=>{const n=Me(e);return n&&n.length===1&&ce.isLine(n[0])},I5=(e,n,r)=>{const i=wc(e,n,r);return fo(e,i),i},LN=(e,n,r)=>{const i=cs($e.text),o=Xc(e,r,i.textProperties["font-size"]),s=[n,[n[0]+o.width,n[1]+o.height]],a=Dy(e,s,r);fo(e,a)},HN=(e,n,r,i)=>{const o=Qs(n),s=dt.get(e,i),a={points:o,textHeight:r};ce.isText(s)&&s.autoSize&&(a.autoSize=!1),Te.setNode(e,a,i)},NN=(e,n)=>{const r=Me(e),i=[];r.forEach(o=>{if(ce.isGeometry(o)&&!ce.isText(o)){const s=O.findPath(e,o);Te.setNode(e,{shape:n},s),S_(e,{...o,shape:n},i)}}),i.length&&i.forEach(o=>{qn.resizeArrowLine(e,o.property,o.path)})},L5=(e,n,r,i)=>{let o=n.points,s=n.autoSize;const a=Fe.rectangleAndText;if(s){const u=r<Of?Of:r,h=MT(n);if(x3.isActive(h,Rn.right))o=[[o[1][0]-(u+a*2),o[0][1]],[o[1][0],o[0][1]+i]];else if(x3.isActive(h,Rn.center)){const d=Math.abs(o[0][0]-o[1][0]),f=(u-d)/2;o=[[o[0][0]-f-a,o[0][1]],[o[1][0]+f+a,o[0][1]+i]]}else o=[o[0],[o[0][0]+u+a*2,o[0][1]+i]];Fi(n)&&(o=ey(R.getRectangleByPoints(n.points),R.getRectangleByPoints(o),R.getCenterPoint(R.getRectangleByPoints(n.points)),R.getCenterPoint(R.getRectangleByPoints(o)),n.angle))}return{points:o}},GN=(e,n,r,i,o)=>{const s={text:r,textHeight:o,...L5(e,n,i,o)},a=e.children.findIndex(u=>u===n);Te.setNode(e,s,[a])},_N=(e,n,r,i)=>{if(n.autoSize){const o={textHeight:i,...L5(e,n,r,i)},s=We.isEquals(n.points[0],o.points[0])&&We.isEquals(n.points[1],o.points[1]),a=Math.round(i)===Math.round(n.textHeight);if(!s||!a){const u=e.children.findIndex(h=>h===n);Te.setNode(e,o,[u])}}},jN=(e,n,r)=>{const{width:i,height:o,url:s}=n,a=O.getBoardContainer(e).clientWidth,u=O.getBoardContainer(e).clientHeight,h=Ze(e,Je(e,a/2,u/2)),d=r?[r,[r[0]+i,r[1]+o]]:[[h[0]-i/2,h[1]-o/2],[h[0]+i/2,h[1]+o/2]],f={id:St(),type:"image",points:d,url:s};Te.insertNode(e,f,[e.children.length]),Te.addSelectionWithTemporaryElements(e,[f])},H5=(e,n,r)=>{Te.setNode(e,n,r)},zN=(e,n,r)=>{const i=O.findPath(e,n);Te.setNode(e,{texts:r},i)},$N=(e,n,r)=>{var a;const i=O.findPath(e,n),s=[...(a=n.texts)!=null&&a.length?[...n.texts]:[]];s.splice(r,1),Te.setNode(e,{texts:s},i)},WN=(e,n,r)=>{sy(Dr.arrowLine,n,r),Ay(e).forEach(o=>{const s=O.findPath(e,o);let a=n===Wr.source?o.source:o.target;a={...a,marker:r},Te.setNode(e,{[n]:a},s)})},VN=(e,n)=>{Ay(e).map(i=>{const o={...n};if(i.shape===n.shape)return;const s=O.findPath(e,i);Te.setNode(e,o,s)})},UN=(e,n,r,i)=>{const o=Cn.getPoints(e,n),s=r===Wr.source?o[0]:o[o.length-1],a=wl(e,s,i);if(a){let u=n.source,h=n.target;r===Wr.source?u={...u,boundId:i.id,connection:a}:h={...h,boundId:i.id,connection:a};const d=O.findPath(e,n);H5(e,{source:u,target:h},d)}};function XN(e){const n={...e};return ce.isHorizontalSwimlane(e)?(n.cells=e.cells.map((r,i)=>(i===0&&e.header&&(r={...e.cells[0],rowspan:e.rows.length}),r.text&&r.textHeight&&!r.text.direction&&(r={...r,text:{...r.text,direction:"vertical"}}),r)),n):(e.header&&(n.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),n)}const N5=(e,n)=>{const r=ZT[e];return R.getPoints(R.getRectangleByCenterPoint(n,r.width,r.height))},Hf=(e,n)=>{const r=YN(e),i=ZN(e),o=n[1][0]-n[0][0],s=n[1][1]-n[0][1],a=$3(i,"row",r,s),u=$3(i,"column",r,o);return{id:St(),type:"swimlane",shape:i,points:n,rows:a,columns:u,header:r,cells:KN(i,a,u,r)}},$3=(e,n,r,i)=>{const o=a=>new Array(a).fill("").map(()=>({id:St()}));let s=o(3);if(n==="row"&&e===hr.swimlaneVertical||n==="column"&&e===hr.swimlaneHorizontal){s=r?s:o(2);const a=n==="row"?"height":"width";let u=Au;i<Au*s.length&&(u=Math.min(i/s.length/Au*Au,Au)),s=s.map((h,d)=>d===0||d===1&&r?{...h,[a]:u}:h)}return s},KN=(e,n,r,i)=>{let o=[],s=0;i&&(o=[v1(n[0].id,r[0].id,"New Swimlane")],s=1);const a=new Array(6).fill("").map((u,h)=>{if(h<3){const g=e===hr.swimlaneVertical?n[s].id:n[h].id,m=e===hr.swimlaneVertical?r[h].id:r[s].id;return v1(g,m,i?"Lane":"New Swimlane")}const d=e===hr.swimlaneVertical?n[s+1].id:n[h-3].id,f=e===hr.swimlaneVertical?r[h-3].id:r[s+1].id;return v1(d,f)});return[...o,...a]},qN=e=>ce.isHorizontalSwimlane(e)?e.rows.length:ce.isVerticalSwimlane(e)?e.columns.length:0,YN=e=>[fi.swimlaneHorizontalWithHeader,fi.swimlaneVerticalWithHeader].includes(e),ZN=e=>[fi.swimlaneHorizontalWithHeader,fi.swimlaneHorizontal].includes(e)?hr.swimlaneHorizontal:hr.swimlaneVertical,G5=(e,n=e.pointer)=>qT().includes(n),QN=(e,n,r)=>{if(r>0&&ce.isSwimlane(n)){const i=qN(n);if(ce.isHorizontalSwimlane(n))if(r>i)_5(e,n,n.rows.length,r-i);else{const o=n.rows.length-(i-r);z5(e,n,o,i-r)}if(ce.isVerticalSwimlane(n))if(r>i)j5(e,n,n.columns.length,r-i);else{const o=n.columns.length-(i-r);$5(e,n,o,i-r)}}},_5=(e,n,r,i=1)=>{if(ce.isHorizontalSwimlane(n)){const o=[...n.rows],s=[];for(let f=0;f<i;f++)s.push({id:St()});o.splice(r,0,...s);const a=[...n.cells];s.forEach(f=>{a.push(...W5(n,f.id,"column"))});const u=da(e,n,n.cells[n.cells.length-1].id).points,h=R.getRectangleByPoints(u).height,d=[n.points[0],[n.points[1][0],n.points[1][1]+h*i]];S0(e,n,n.columns,o,a,d)}},j5=(e,n,r,i=1)=>{if(ce.isVerticalSwimlane(n)){const o=[...n.columns],s=[];for(let f=0;f<i;f++)s.push({id:St()});o.splice(r,0,...s);const a=[...n.cells];s.forEach(f=>{a.push(...W5(n,f.id,"row"))});const u=da(e,n,n.cells[n.cells.length-1].id).points,h=R.getRectangleByPoints(u).width,d=[n.points[0],[n.points[1][0]+h*i,n.points[1][1]]];S0(e,n,o,n.rows,a,d)}},z5=(e,n,r,i=1)=>{if(ce.isHorizontalSwimlane(n)){if(i>n.rows.length)return;const o=[...n.rows];if(o.splice(r,i),o.length===0){const s=O.findPath(e,n);Te.removeNode(e,s)}else{let s=[...n.cells];const a=[];for(let d=r;d<i+r;d++){const f=n.rows[d];a.push(f),s=s.filter(g=>g.rowId!==f.id)}let u=0;a.forEach(d=>{if(d.height)u+=d.height;else{const f=n.cells.find(m=>m.rowId===d.id),g=da(e,n,f.id).points;u+=R.getRectangleByPoints(g).height}});const h=[n.points[0],[n.points[1][0],n.points[1][1]-u]];S0(e,n,n.columns,o,s,h)}}},$5=(e,n,r,i=1)=>{if(ce.isVerticalSwimlane(n)){if(i>n.columns.length)return;const o=[...n.columns];if(o.splice(r,i),o.length===0){const s=O.findPath(e,n);Te.removeNode(e,s)}else{let s=[...n.cells];const a=[];for(let d=r;d<i+r;d++){const f=n.columns[d];a.push(f),s=s.filter(g=>g.columnId!==f.id)}let u=0;a.forEach(d=>{if(d.width)u+=d.width;else{const f=n.cells.find(m=>m.columnId===d.id),g=da(e,n,f.id).points;u+=R.getRectangleByPoints(g).width}});const h=[n.points[0],[n.points[1][0]-u,n.points[1][1]]];S0(e,n,o,n.rows,s,h)}}},W5=(e,n,r)=>{const i=e[`${r}s`].map(o=>({id:St(),rowId:r==="row"?o.id:n,columnId:r==="row"?n:o.id}));return e.header&&i.shift(),i[0]={...i[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:Rn.center,direction:r==="row"?void 0:"vertical"},textHeight:20},i},S0=(e,n,r,i,o,s)=>{const a=O.findPath(e,n);Te.setNode(e,{columns:r,rows:i,cells:o,points:s},a)},JN=(e,n,r)=>{var a;const o={texts:(a=n.texts)==null?void 0:a.map(u=>u.id===r.id?{...u,...r}:u)},s=e.children.findIndex(u=>u===n);Te.setNode(e,o,[s])},eG=(e,n,r,i,o)=>{const s=dt.get(e,n),a=da(e,s,r),u=s.cells.findIndex(C=>C.id===a.id);let h=[...s.rows],d=[...s.columns],f=[...s.cells],g=[...s.points];const{width:m,height:v}=R.getRectangleByPoints(a.points),w=Fe.rectangleAndText;if(gc.isVerticalText(a)){const C=s.columns.findIndex(P=>P.id===a.columnId);if(o>m){const P=o+w*2,D=P-m,x=t5(s,s.columns[C].id,P,D);g=x.points,d=x.columns}}else{const C=s.rows.findIndex(x=>x.id===a.rowId),D=s.rows[C].height??Math.max(v,a.textHeight||0);if(o>D){const x=o+w*2,k=x-D,T=n5(s,s.rows[C].id,x,k);g=T.points,h=T.rows}}f[u]={...f[u],textHeight:o,text:i},Te.setNode(e,{rows:h,columns:d,cells:f,points:g},n)},tG=(e,n,r,i)=>{const o=tl(n);let s=n.cells;o!=null&&o.length?s=n.cells.map(a=>o.map(u=>u.id).includes(a.id)?W3(a,r):a):s=n.cells.map(a=>a.text&&a.textHeight?W3(a,r):a),Te.setNode(e,{cells:s},i)},W3=(e,n)=>{const r={...e};return n?r.fill=n:delete r.fill,r},nG=(e,n)=>{O5(e).map(i=>{if(i.shape===n.shape)return;const o=O.findPath(e,i);Te.setNode(e,{...n},o)})},rG=(e,n,r,i)=>{const s=qT().includes(r);let a=UT[r]||VT[r]||XT[r]||pc;s&&(a=ZT[r]);const u=Ka(i);if(u){let h=0;[tt.left,tt.right].includes(u)?h=-a.width/2:h=-a.height/2;const d=Ja(n,i,h),f=R.getPoints(R.getRectangleByCenterPoint(d,a.width,a.height));if(s){const g=Hf(r,f);return fo(e,g),g}return I5(e,f,r)}return null},qn={setText:GN,setDrawTexts:JN,insertGeometry:I5,resizeGeometry:HN,insertText:LN,setTextSize:_N,resizeArrowLine:H5,setArrowLineTexts:zN,removeArrowLineText:$N,setArrowLineMark:WN,setArrowLineShape:VN,setVectorLineShape:nG,insertImage:jN,connectArrowLineToDraw:UN,switchGeometryShape:NN,setTableText:eG,addSwimlaneRow:_5,addSwimlaneColumn:j5,removeSwimlaneRow:z5,removeSwimlaneColumn:$5,updateSwimlaneCount:QN,setTableFill:tG,insertDrawByVector:rG},Nm=(e,n,r,i=0)=>{const o=R.getCenterPoint(n),s=CT(n,di);if(i){const a=cn([r],o,-i)[0];let u=s.find(h=>R.isHit(R.getRectangleByPoints([a,a]),h.rectangle));return u&&(u.cursorClass=kI(u.cursorClass,i)),u}else return s.find(a=>R.isHit(R.getRectangleByPoints([r,r]),a.rectangle))},iG=e=>({x:e.x-Sf-Vu,y:e.y+e.height+Sf,width:Vu,height:Vu}),oG="debug:plait:resize-for-rotation",jr=Tl(oG);function sG(e){const{afterChange:n,drawSelectionRectangle:r}=e;let i,o,s=!1,a=null;const u=()=>{const d=Me(e);return d.length>=1&&d.every(f=>(ce.isDrawElement(f)||ce.isCustomGeometryElement(e,f)&&f.points.length>1)&&!IN(e)&&!ON(e))};return ha(e,{key:"draw-elements",canResize:u,hitTest:d=>{const f=Me(e),g=xt(e,f,!1),m=cr(f),v=Nm(e,g,d,m);return v?{element:[...f],rectangle:g,handle:v.handle,cursorClass:v.cursorClass}:null},onResize:(d,f)=>{i==null||i.remove(),jr.isDebug()&&jr.clear();const g=Zd(e,d.handle),m=f.isShift||d.element.length===1&&ce.isImage(d.element[0]),v=R.getCenterPoint(d.rectangle),w=Bf(d.handle),{originPoint:C,handlePoint:P}=Gm(e,w,d.rectangle),D=cr(d.element);let x;if(D){x={angle:D,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[H,z]=cn([f.startPoint,f.endPoint],v,-x.angle);f.startPoint=H,f.endPoint=z}const k=V5(e,d,f,{originPoint:C,handlePoint:P},m,g),T=T0(e,d.element,k);if(a=T.activePoints,i=T.snapG,O.getElementTopHost(e).append(i),x){const H=R.getPoints(d.rectangle),z=H.map(le=>to(le,C,T.xZoom,T.yZoom)),U=R.getRectangleByPoints(z);jr.isDebug()&&jr.drawRectangle(e,U,{stroke:"blue"});const q=R.getCenterPoint(U),te=ey(R.getRectangleByPoints(H),R.getRectangleByPoints(z),v,q,x.angle),ne=R.getCenterPoint(R.getRectangleByPoints(te));x=Object.assign(x,{offsetX:ne[0]-q[0],offsetY:ne[1]-q[1],newCenterPoint:ne}),jr.isDebug()&&jr.drawRectangle(e,te)}d.element.forEach(H=>{const z=O.findPath(e,H);let U;if(x){U=mm(H.points,v,-x.angle).map(ne=>to(ne,C,T.xZoom,T.yZoom));const te=U.map(ne=>[ne[0]+x.offsetX,ne[1]+x.offsetY]);U=mm(te,x.newCenterPoint,x.angle)}else Fi(H)&&(s=!0),Fi(H)&&A9(H.angle)?U=aG(e,H.points,C,T.xZoom,T.yZoom):U=H.points.map(q=>to(q,C,T.xZoom,T.yZoom));if(ce.isGeometry(H))if(ce.isGeometry(H)&&Sy(H)){const{height:q}=Il(H).getSize();qn.resizeGeometry(e,U,q,z)}else U=Qs(U),Te.setNode(e,{points:U},z);else if(ce.isLine(H)||ce.isCustomGeometryElement(e,H)||ce.isVectorLine(H))Te.setNode(e,{points:U},z);else if(ce.isImage(H))if(m)Te.setNode(e,{points:U},z);else{const q=R.getRectangleByPoints(H.points),te=R.getCenterPoint(q),ne=to(te,C,T.xZoom,T.yZoom),le=R.getRectangleByCenterPoint(ne,q.width,q.height);Te.setNode(e,{points:R.getPoints(le)},z)}})},afterResize:d=>{if(i==null||i.remove(),i=null,s){s=!1,a=null;const f=Me(e);Te.addSelectionWithTemporaryElements(e,f)}}}),e.afterChange=()=>{n(),o&&(o.remove(),o=null);const d=Me(e);u()&&!_n(e)&&d.length>1&&(o=lG(e,a,s),O.getActiveHost(e).append(o))},e.drawSelectionRectangle=()=>{if(s){const d=R.getRectangleByPoints(a),f=Nn(e,d);return vi(e,R.inflate(f,Jt),{stroke:fr,strokeWidth:Jt})}return r()},e}const Gm=(e,n,r)=>{const i=RI(e,n),o=h3(r,i),s=h3(r,n);return{originPoint:o,handlePoint:s}},By=(e,n,r,i,o)=>{const[s,a]=e;let u=0,h=0;if(i)if(o)u=We.getOffsetX(s,a)/(r[0]-n[0]),h=u;else{let d=We.getOffsetX(s,a),f=We.getOffsetY(s,a);u=d/(r[0]-n[0]),h=f/(r[1]-n[1])}else{const d=We.isHorizontal(n,r,.1)||!1;let f=d?We.getOffsetX(s,a):We.getOffsetY(s,a),g=d?r[0]-n[0]:r[1]-n[1];const m=f/g;o?(u=m,h=m):d?u=m:h=m}return{xZoom:u,yZoom:h}},to=(e,n,r,i)=>{const o=(e[0]-n[0])*r,s=(e[1]-n[1])*i;return[e[0]+o,e[1]+s]},aG=(e,n,r,i,o)=>{const s=R.getRectangleByPoints(n);jr.isDebug()&&jr.drawRectangle(e,s,{stroke:"black"});let a=n;a=cn(a,R.getCenterPoint(s),1/2*Math.PI),jr.isDebug()&&jr.drawRectangle(e,a,{stroke:"blue"}),a=a.map(h=>to(h,r,i,o)),jr.isDebug()&&jr.drawRectangle(e,a);const u=R.getRectangleByPoints(a);return cn(a,R.getCenterPoint(u),-.5*Math.PI)},lG=(e,n,r)=>{const i=st(),o=Me(e),s=r?R.getRectangleByPoints(n):xt(e,o,!1),a=Nn(e,s);let u=R.getCornerPoints(a);const h=cr(o);if(h){const d=R.getCenterPoint(a);u=cn(u,d,h)}return u.forEach(d=>{const f=xT(e,d);i.append(f)}),i},uG="debug:plait:point-for-geometry",V3=Tl(uG),Rd=10;function V5(e,n,r,i,o,s){const{originPoint:a,handlePoint:u}=i,h=[r.startPoint,r.endPoint],{xZoom:d,yZoom:f}=By(h,a,u,s,o);let g,m=[];if(Array.isArray(n.element)){g=n.element;const k=xt(e,n.element,!1);m=R.getPoints(k)}else g=[n.element],m=n.element.points;const v=m.map(k=>to(k,a,d,f)),w=R.getRectangleByPoints(v),C=Nc(w,cr(g)),P=to(u,a,d,f),[D,x]=Nt(a,P);return{resizePoints:h,resizeOriginPoint:m,activeRectangle:C,originPoint:a,handlePoint:u,directionFactors:[ml(D),ml(x)],isAspectRatio:o,isFromCorner:s}}function T0(e,n,r){const i=st(),o=uS(e,n);let s=dG(o,r);s.deltaX===0&&s.deltaY===0&&(s=cG(o,r));const a=cr(n),u=hG(s,r,a),h=gG(e,u.activePoints,o,r,a),d=fG(e,u.activePoints,o,r,a);return i.append(h,d),{...u,...s,snapG:i}}function cG(e,n){let r={deltaX:0,deltaY:0};const{isAspectRatio:i,activeRectangle:o,directionFactors:s}=n,a=s[0]!==0||i,u=s[1]!==0||i;if(a){const h=Ys(o,!0),d=s[0]===-1?h[0]:h[2],f=Gu(e,d,!0);if(Math.abs(f)<io&&(r.deltaX=f,r.deltaX!==0&&i))return r.deltaY=r.deltaX/(o.width/o.height),r}if(u){const h=Ys(o,!1),d=s[1]===-1?h[0]:h[2],f=Gu(e,d,!1);if(Math.abs(f)<io&&(r.deltaY=f,r.deltaY!==0&&i))return r.deltaX=r.deltaY*(o.width/o.height),r}return r}function hG(e,n,r){const{deltaX:i,deltaY:o}=e,{resizePoints:s,isCreate:a}=n,u=[s[0],[s[1][0]+i,s[1][1]+o]];let h=u,d=0,f=0;if(!a){const{originPoint:g,handlePoint:m,isFromCorner:v,isAspectRatio:w,resizeOriginPoint:C}=n,P=By(u,g,m,v,w);d=P.xZoom,f=P.yZoom,h=C.map(D=>to(D,g,d,f)),r&&(h=ey(R.getRectangleByPoints(C),R.getRectangleByPoints(h),R.getCenterPoint(R.getRectangleByPoints(C)),R.getCenterPoint(R.getRectangleByPoints(h)),r))}return{xZoom:d,yZoom:f,activePoints:h}}function dG(e,n){let r={deltaX:0,deltaY:0};const{isAspectRatio:i,activeRectangle:o}=n,s=e.find(u=>Math.abs(u.width-o.width)<io);if(s){const u=s.width-o.width;if(r.deltaX=u*n.directionFactors[0],i){const h=u/(o.width/o.height);return r.deltaY=h*n.directionFactors[1],r}}const a=e.find(u=>Math.abs(u.height-o.height)<io);if(a){const u=a.height-o.height;if(r.deltaY=u*n.directionFactors[1],i){const h=u*(o.width/o.height);return r.deltaX=h*n.directionFactors[0],r}}return r}function kd(e,n){return n?[[e.x,e.y-Rd],[e.x+e.width,e.y-Rd]]:[[e.x-Rd,e.y],[e.x-Rd,e.y+e.height]]}function fG(e,n,r,i,o){V3.isDebug()&&V3.clear();const s=R.getRectangleByPoints(n),a=Nc(s,o),{isAspectRatio:u,directionFactors:h}=i,d=h[0]!==0||u,f=h[1]!==0||u;return cS(e,a,r,d,f)}function gG(e,n,r,i,o){let s=[],a=[];const u=i.directionFactors[0]!==0||i.isAspectRatio,h=i.directionFactors[1]!==0||i.isAspectRatio,d=R.getRectangleByPoints(n),f=Nc(d,o);for(let m of r)f.width===m.width&&u&&s.push(kd(m,!0)),f.height===m.height&&h&&a.push(kd(m,!1));s.length&&u&&s.push(kd(f,!0)),a.length&&h&&a.push(kd(f,!1));const g=[...s,...a];return hS(e,g)}const pG=(e,n,r)=>LT(e,n,r,i=>{if(ce.isArrowLine(i)){let o={...i.source},s={...i.target},a=[...i.points];return i.source.boundId&&(a[0]=Xo($r(e,i.source.boundId),i.source.connection),$r(e,i.source.boundId,n)||(delete o.boundId,delete o.connection)),i.target.boundId&&(a[a.length-1]=Xo($r(e,i.target.boundId),i.target.connection),$r(e,i.target.boundId,n)||(delete s.boundId,delete s.connection)),a=a.map(u=>[u[0]-r[0],u[1]-r[1]]),{...i,points:a,source:o,target:s}}}),mG=(e,n,r)=>{HT(e,n,r,(i,o)=>{ce.isArrowLine(i)&&(i.source.boundId&&n.find(a=>[i.source.boundId,o[i.source.boundId]].includes(a.id))&&(i.source.boundId=o[i.source.boundId]),i.target.boundId&&n.find(a=>[i.target.boundId,o[i.target.boundId]].includes(a.id))&&(i.target.boundId=o[i.target.boundId])),ce.isElementByTable(i)&&(L3(i,"row"),L3(i,"column"),BH(i.cells))})},Ou=3/4,vG={draw(e,n,r){const i=Bu(n),s=O.getRoughSVG(e).polygon(i,{...r,fillStyle:"solid"});return ut(s,"round"),s},isInsidePoint(e,n){const r=Bu(e);return es(n,r)},getCornerPoints(e){return Bu(e)},getNearestPoint(e,n){return bt(n,Bu(e))},getEdgeByConnectionPoint(e,n){const r=Bu(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height*Ou-i)/2}}},Bu=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Ou],[e.x+e.width*3/5,e.y+e.height*Ou],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*Ou],[e.x,e.y+e.height*Ou]];function dn(e){const n=e.getPolygonPoints,r={draw(i,o,s){const a=n(o),h=O.getRoughSVG(i).polygon(a,{...s,fillStyle:"solid"});return ut(h,"round"),h},isInsidePoint(i,o){const s=n(i);return es(o,s)},getCornerPoints(i){return n(i)},getNearestPoint(i,o){return bt(o,n(i))},getNearestCrossingPoint(i,o){const s=n(i),a=h5(s,o);let u=a[0],h=Ke(o[0],o[1],u[0],u[1]);return a.filter((d,f)=>f>0).forEach(d=>{let f=Ke(o[0],o[1],d[0],d[1]);f<h&&(h=f,u=d)}),u},getEdgeByConnectionPoint(i,o){const s=n(i),a=R.getConnectionPoint(i,o);return En(s,a)},getConnectorPoints(i){return e.getConnectorPoints?e.getConnectorPoints(i):n(i)}};return e.getTextRectangle&&(r.getTextRectangle=e.getTextRectangle),r}const yG=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],wG=dn({getPolygonPoints:yG,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width/2,n.x+=r/4,n}}),x1=dn({getPolygonPoints:R.getEdgeCenterPoints,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=on(e);return n.width=n.width/2,n.x+=n.width/2,n}});function My(e){const n={draw(r,i,o){const s=[i.x+i.width/2,i.y+i.height/2],u=O.getRoughSVG(r).ellipse(s[0],s[1],i.width,i.height,{...o,fillStyle:"solid"});return ut(u,"round"),u},isInsidePoint(r,i){const o=[r.x+r.width/2,r.y+r.height/2];return so(i,o,r.width/2,r.height/2)},getCornerPoints(r){return R.getEdgeCenterPoints(r)},getNearestPoint(r,i){const o=[r.x+r.width/2,r.y+r.height/2];return Gn(i,o,r.width/2,r.height/2)},getTangentVectorByConnectionPoint(r,i){const o=R.getConnectionPoint(r,i),s=[r.x+r.width/2,r.y+r.height/2],a=[o[0]-s[0],-(o[1]-s[1])],u=r.width/2,h=r.height/2,d=Li(a[0],a[1],u,h);return Hi(a[0],a[1],d)},getConnectorPoints(r){return R.getEdgeCenterPoints(r)},getTextRectangle(r){const i=on(r),o=i.width;return i.width=i.width*3/4,i.x+=o/8,i}};return e!=null&&e.draw&&(n.draw=e.draw),e!=null&&e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const C1=My(),xG=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],CG=dn({getPolygonPoints:xG,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),EG=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],PG=dn({getPolygonPoints:EG,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*(1-.32),n.x+=r*.32,n}}),DG=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],SG=dn({getPolygonPoints:DG,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),U3=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],X3=dn({getPolygonPoints:U3,getConnectorPoints:e=>{const n=U3(e);return Ll(n)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width/2,n.x+=r/4,n}}),TG=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],AG=dn({getPolygonPoints:TG,getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2,s=o*3/5;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r+o/5,y:n.y+n.height/5+(n.height*4/5-i)/2}}}),BG=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},MG=dn({getPolygonPoints:BG,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=on(e),i=n.width>n.height/2+20;return r.width=i?n.width-n.height/2:r.width,r}}),RG=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(n?e.height/2:e.width),e.y+e.height/2]]},kG=dn({getPolygonPoints:RG,getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=on(e),i=n.width>n.height+20;return r.width=i?n.width-n.height:r.width,r.x=i?n.x+n.height/2:r.x,r}}),bG=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],FG=dn({getPolygonPoints:bG,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const n=on(e);return n.width=n.width*.68,n}}),vt={draw(e,n,r){return vi(e,n,{...r,fillStyle:"solid"})},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},OG={draw(e,n,r){return Bl(O.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid"},!1,al(n))},isInsidePoint(e,n){return wv(n,e,al(e))},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return U5(n,e,al(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},al=e=>Math.min(e.width*.1,e.height*.1);function U5(e,n,r){const{x:i,y:o,width:s,height:a}=n,u=R.getCornerPoints(n);let h=bt(e,u),d=null;return e[0]>=i&&e[0]<=i+r&&e[1]>=o&&e[1]<=o+r&&(d=[i+r,o+r]),e[0]>=i&&e[0]<=i+r&&e[1]>=o+a&&e[1]<=o+a-r&&(d=[i+r,o+a-r]),e[0]>=i+s-r&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+r&&(d=[i+s-r,o+r]),e[0]>=i+s-r&&e[0]<=i+s&&e[1]>=o+a-r&&e[1]<=o+a&&(d=[i+s-r,o+a-r]),d&&(h=Gn(e,d,r,r)),h}const Gs=3/4,IG={draw(e,n,r){const i=O.getRoughSVG(e),o=n.x,s=n.y,a=n.x+n.width,u=n.y+n.height*Gs,h=al(n),d=[o+h,s],f=[a-h,s],g=[a,s+h],m=[a,u-h],v=[a-h,u],w=[o+h,u],C=[o,u-h],P=[o,s+h],D=[o+n.width/4,u],x=[o+n.width/4,n.y+n.height],k=[o+n.width/2,u],T=i.path(`M${f[0]} ${f[1]} A ${h} ${h}, 0, 0, 1, ${g[0]} ${g[1]} L ${m[0]} ${m[1]} A ${h} ${h}, 0, 0, 1, ${v[0]} ${v[1]} L    ${k[0]} ${k[1]}  ${x[0]} ${x[1]}   ${D[0]} ${D[1]}   ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${C[0]} ${C[1]} L ${P[0]} ${P[1]} A ${h} ${h}, 0, 0, 1, ${d[0]} ${d[1]} Z`,{...r,fillStyle:"solid"});return ut(T,"round"),T},isInsidePoint(e,n){const r=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,es(n,r)||wv(n,e,al(e))},getCornerPoints(e){return E1(e)},getNearestPoint(e,n){return bt(n,E1(e))},getEdgeByConnectionPoint(e,n){const r=E1(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Gs],[e.x,e.y+e.height/2]]},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height*Gs-i)/2}}},E1=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Gs],[e.x+e.width/2,e.y+e.height*Gs],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Gs],[e.x,e.y+e.height*Gs]],K3=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],LG=dn({getPolygonPoints:K3,getConnectorPoints(e){const n=K3(e);return Ll(n)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),q3=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],HG=dn({getPolygonPoints:q3,getConnectorPoints(e){const n=q3(e);return[...Ll(n),...n]},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2,s=o*2/3;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r+o/6,y:n.y+n.height*3/5+(n.height*2/5-i)/2}}}),NG=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],GG=dn({getPolygonPoints:NG,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),Y3=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],_G=dn({getPolygonPoints:Y3,getConnectorPoints:e=>{const n=Y3(e);return[n[1],n[3],n[5],n[7],n[9]]},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2,s=o/2;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r+o/4,y:n.y+n.height*1/6+(n.height*4/5-i)/2}}}),jG={draw(e,n,r){return Bl(O.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid"},!1,bd(n))},isInsidePoint(e,n){return wv(n,e,bd(e))},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return zG(n,e,bd(e))},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n),i=bd(e),o=X5(e,i,r);if(o){const s=[r[0]-o[0],-(r[1]-o[1])],a=i,u=i,h=Li(s[0],s[1],a,u);return Hi(s[0],s[1],h)}return null},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},bd=e=>Math.min(e.width/2,e.height/2);function zG(e,n,r){let i=null,o=X5(n,r,e);if(o)i=Gn(e,o,r,r);else{const s=R.getCornerPoints(n);i=bt(e,s)}return i}function X5(e,n,r){const{x:i,y:o,width:s,height:a}=e;let u=null;return r[0]>=i&&r[0]<=i+n&&r[1]>=o&&r[1]<=o+n&&(u=[i+n,o+n]),r[0]>=i&&r[0]<=i+n&&r[1]>=o+a-n&&r[1]<=o+a&&(u=[i+n,o+a-n]),r[0]>=i+s-n&&r[0]<=i+s&&r[1]>=o&&r[1]<=o+n&&(u=[i+s-n,o+n]),r[0]>=i+s-n&&r[0]<=i+s&&r[1]>=o+a-n&&r[1]<=o+a&&(u=[i+s-n,o+a-n]),u}const Z3=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],$G=dn({getPolygonPoints:Z3,getConnectorPoints:e=>{const n=Z3(e);return Ll(n)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+n.height/4+(n.height*3/4-i)/2}}}),WG=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],VG=dn({getPolygonPoints:WG,getConnectorPoints:e=>R.getEdgeCenterPoints(e),getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*2/3,n.x+=r/6,n}}),Q3=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],UG=dn({getPolygonPoints:Q3,getConnectorPoints:e=>{const n=Q3(e);return Ll(n)},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),J3=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],XG=dn({getPolygonPoints:J3,getConnectorPoints:e=>{const n=J3(e);return[...Ll(n),...n]},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2,s=o*2/3;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r+o/6,y:n.y+(n.height*2/3-i)/2}}}),KG={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} L${n.x+n.width*3/4} ${n.y} A  ${n.width/4} ${n.height/2}, 0, 0, 1,${n.x+n.width*3/4} ${n.y+n.height} L${n.x} ${n.y+n.height} Z`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]),i=R.isHit({...e,width:e.width*3/4},r),o=so(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return i||o},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,vt.getCornerPoints(e));return r[0]>e.x+e.width*3/4?Gn(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):r},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width/4,a=e.height/2,u=Li(o[0],o[1],s,a);return Hi(o[0],o[1],u)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},qG={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x+n.width/10} ${n.y} L${n.x+n.width} ${n.y} A  ${n.width/10} ${n.height/2}, 0, 0, 0,${n.x+n.width} ${n.y+n.height} L${n.x+n.width/10} ${n.y+n.height}A  ${n.width/10} ${n.height/2}, 0, 0, 1,${n.x+n.width/10} ${n.y}`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]),i=R.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},r),o=so(n,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),s=!so(n,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return i&&s||o},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,vt.getCornerPoints(e));if(r[0]<e.x+e.width/10){const i=[e.x+e.width/10,e.y+e.height/2],o=Gn(n,i,e.width/10,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}if(r[0]>e.x+e.width*9/10){const i=[e.x+e.width,e.y+e.height/2],o=Gn(n,i,e.width/10,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}return r},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);let i=[e.x+e.width/10,e.y+e.height/2],o=e.width/10,s=e.height/2;const a=r[0]>e.x+e.width*9/10&&r[1]>e.y;a&&(i=[e.x+e.width,e.y+e.height/2]);const u=[r[0]-i[0],-(r[1]-i[1])],h=Li(u[0],u[1],o,s),d=Hi(u[0],u[1],h);return a?d.map(f=>-f):d},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const n=on(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}},YG={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.06} ${n.y} L${n.x+n.width*.06} ${n.y+n.height} M${n.x+n.width-n.width*.06} ${n.y} L${n.x+n.width-n.width*.06} ${n.y+n.height}`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},ZG=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],QG=dn({getPolygonPoints:ZG,getConnectorPoints:e=>R.getEdgeCenterPoints(e),getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{width:o>0?o:0,height:i,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-n.height/2-i)/2}}}),JG=My({draw(e,n,r){const i=O.getRoughSVG(e),o=n.width/2,s=n.height/2,a=[n.x+n.width,n.y+n.height/2],u=i.path(`M${a[0]} ${a[1]}
        A${o},${s} 0 1,1 ${a[0]} ${a[1]-.01}
        M${n.x} ${n.y+n.height/2}
        L${n.x+n.width} ${n.y+n.height/2}
        M${n.x+n.width/2} ${n.y}
        L${n.x+n.width/2} ${n.y+n.height}
        `,{...r,fillStyle:"solid"});return ut(u,"round"),u}}),e_=My({draw(e,n,r){const i=O.getRoughSVG(e),o=n.width/2,s=n.height/2,a=[n.x+n.width,n.y+n.height/2],u=[n.x+n.width/2,n.y+n.height/2],h=dC([n.x,n.y],[n.x+n.width,n.y+n.height],u[0],u[1],o,s),d=dC([n.x+n.width,n.y],[n.x,n.y+n.height],u[0],u[1],o,s),f=i.path(`M${a[0]} ${a[1]}
        A${o},${s} 0 1,1 ${a[0]} ${a[1]-.01}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        M${d[0][0]} ${d[0][1]}
        L${d[1][0]} ${d[1][1]}
        `,{...r,fillStyle:"solid"});return ut(f,"round"),f}}),t_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9}
            Q${n.x+n.width-n.width/4} ${n.y+n.height-n.height/9*3}, ${n.x+n.width/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}           
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){let r=bt(n,vt.getCornerPoints(e)),i=Lc([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(i=gr(i),r[1]>e.y+e.height-e.height/9){if(r[0]===e.x+e.width/2)return r[1]=e.y+e.height-e.height/9,r;r=bt(n,i,!1)}return r},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);return r[0]>e.x&&r[0]<e.x+e.width/4?Nt([e.x+e.width/4,e.y+e.height],r):r[0]>e.x+e.width/4&&r[0]<e.x+e.width/4*3?Nt([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):r[0]>e.x+e.width/4*3?Nt([e.x+e.width,e.y+e.height-e.height/9],r):Nt(r,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},eP=e=>{const n=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let r=Lc([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return r=gr(r),[...n,...r]},n_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y+10} H${n.x+5} V${n.y+5} H${n.x+10} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9-10-3} L${n.x+n.width-5} ${n.y+n.height-n.height/9-10-3-4} V${n.y+n.height-n.height/9-5-3}
                 L${n.x+n.width-10} ${n.y+n.height-n.height/9-5-3-4} V${n.y+n.height-n.height/9}
                
             Q${n.x+n.width-10-(n.width-10)/4} ${n.y+n.height-n.height/9*3}, ${n.x+(n.width-10)/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}
              
                M${n.x+5} ${n.y+10} H${n.x+n.width-10} V${n.y+n.height-n.height/9} 
                    
                M${n.x+10} ${n.y+5} H${n.x+n.width-5} V${n.y+n.height-n.height/9-10-3}
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,eP(e),!1)},getConnectorPoints(e){let n=Lc([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);n=gr(n);const r=bt([e.x+e.width/2,e.y+e.height],n);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[r[0],r[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,n){const r=h5(eP(e),n);let i=r[0],o=Ke(n[0],n[1],i[0],i[1]);return r.filter((s,a)=>a>0).forEach(s=>{let a=Ke(n[0],n[1],s[0],s[1]);a<o&&(o=a,i=s)}),i},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);if(r[0]>e.x&&r[0]<e.x+(e.width-10)/4)return Nt([e.x+(e.width-10)/4,e.y+e.height],r);if(r[0]>e.x+(e.width-10)/4&&r[0]<e.x+(e.width-10)/4*3)return Nt([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(r[0]>e.x+(e.width-10)/4*3&&r[0]<e.x+e.width-10)return Nt([e.x+(e.width-10),e.y+e.height-e.height/9],r);const i=TT(n)||tt.bottom,o=Zs(i);return[o.x,o.y]},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o-10:0,x:n.x+Fe.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},r_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y+n.height*.15}  
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x+n.width} ${n.y+n.height*.15} 
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x} ${n.y+n.height*.15} 
            V${n.y+n.height-n.height*.15}
            A${n.width/2} ${n.height*.15}, 0, 0, 0, ${n.x+n.width} ${n.y+n.height-n.height*.15}
            V${n.y+n.height*.15}`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]),i=R.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},r),o=so(n,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),s=so(n,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return i||o||s},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,vt.getCornerPoints(e));if(r[1]<e.y+e.height*.15){const i=[e.x+e.width/2,e.y+e.height*.15],o=Gn(n,i,e.width/2,e.height*.15);return o[1]>i[1]&&(o[1]=i[1]*2-o[1]),o}if(r[1]>e.y+e.height-e.height*.15){const i=[e.x+e.width/2,e.y+e.height-e.height*.15],o=Gn(n,i,e.width/2,e.height*.15);return o[1]<i[1]&&(o[1]=i[0]*2-o[1]),o}return r},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);let i=[e.x+e.width/2,e.y+e.height-e.height*.15],o=e.width/2,s=e.height*.15;r[1]<e.y+e.height*.15&&r[0]>e.x&&(i=[e.x+e.width/2,e.y+e.height*.15]);const u=[r[0]-i[0],-(r[1]-i[1])],h=Li(u[0],u[1],o,s);return Hi(u[0],u[1],h)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+n.height*.3+(n.height-n.height*.45-i)/2}}},i_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x+n.width-n.width*.15} ${n.y}  
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y+n.height} 
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y} 
            H${n.x+n.width*.15}
            A${n.width*.15} ${n.height/2}, 0, 0, 0, ${n.x+n.width*.15} ${n.y+n.height}
            H${n.x+n.width-n.width*.15}`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]),i=R.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},r),o=so(n,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),s=so(n,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return i||o||s},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,vt.getCornerPoints(e));if(r[0]<e.x+e.width*.15){const i=[e.x+e.width*.15,e.y+e.height/2],o=Gn(n,i,e.width*.15,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}if(r[0]>e.x+e.width-e.width*.15){const i=[e.x+e.width-e.width*.15,e.y+e.height/2],o=Gn(n,i,e.width*.15,e.height/2);return o[0]<i[0]&&(o[0]=i[0]*2-o[0]),o}return r},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);let i=[e.x+e.width*.15,e.y+e.height/2],o=e.width*.15,s=e.height/2;r[0]>e.x+e.width-e.width*.15&&r[1]>e.y&&(i=[e.x+e.width-e.width*.15,e.y+e.height/2]);const u=[r[0]-i[0],-(r[1]-i[1])],h=Li(u[0],u[1],o,s);return Hi(u[0],u[1],h)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-n.width*.45-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.15+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},o_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} h${n.width} v${n.height} h${-n.width} v${-n.height}
            M${n.x} ${n.y+n.height/10} h${n.width}
            M${n.x+n.width/10} ${n.y} v${n.height}
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-n.width*.1-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.1+Fe.rectangleAndText+r,y:n.y+n.height*.1+(n.height-n.height*.1-i)/2}}};function tP(e){const n=e.width*.09,r=e.x+e.width,i=e.y+e.height/2;return{startPoint:[r,e.y],upperCurve:{controlPoint1:[r-n,e.y],controlPoint2:[r,i],endPoint:[r-n,i]},lowerCurve:{controlPoint1:[r,i],controlPoint2:[r-n,e.y+e.height],endPoint:[r,e.y+e.height]}}}const s_={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,upperCurve:s,lowerCurve:a}=tP(n),u=[`M${o[0]} ${o[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),h=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return ut(h,"round"),h},getNearestPoint(e,n){const{startPoint:r,upperCurve:i,lowerCurve:o}=tP(e),s=gr([r,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=gr([i.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),u=[...s,...a];let h=1/0,d=n;for(const f of u){const g=Ke(n[0],n[1],f[0],f[1]);g<h&&(h=g,d=[...f])}return d},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-n.width*.09-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function nP(e){const n=e.width*.09,r=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+n,e.y],controlPoint2:[e.x,r],endPoint:[e.x+n,r]},lowerCurve:{controlPoint1:[e.x,r],controlPoint2:[e.x+n,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const a_={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,upperCurve:s,lowerCurve:a}=nP(n),u=[`M${o[0]} ${o[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),h=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return ut(h,"round"),h},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,upperCurve:i,lowerCurve:o}=nP(e),s=gr([r,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=gr([i.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),u=[...s,...a];let h=1/0,d=[...n];for(const f of u){const g=Ke(n[0],n[1],f[0],f[1]);g<h&&(h=g,d=[...f])}return d},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-n.width*.09-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.09+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},l_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x+n.width*.075} ${n.y+n.height} H${n.x} V${n.y} H${n.x+n.width*.075}
           `,{...r,fillStyle:"solid",fill:"transparent"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},u_=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],c_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x+n.width*.15} ${n.y} 
            H${n.x+n.width-n.width*.1} 
            A ${n.width*.1} ${n.height/2}, 0, 0, 1,${n.x+n.width-n.width*.1} ${n.y+n.height}
            H${n.x+n.width*.15}
            L${n.x} ${n.y+n.height/2}
            Z
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],i=es(n,r),o=so(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return i||o},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,u_(e));return r[0]>e.x+e.width-e.width*.1?Gn(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):r},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n),i=[e.x+e.width-e.width*.1,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width*.1,a=e.height/2,u=Li(o[0],o[1],s,a);return Hi(o[0],o[1],u)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-r*2-n.width*.25;return{width:o>0?o:0,height:i,x:n.x+r+n.width*.15,y:n.y+(n.height-i)/2}}},qa={draw(e,n,r,i){const o=st();try{const s=Vc(e,{...i==null?void 0:i.element});if(s){const a=O.getRoughSVG(e),{x:u,y:h,width:d,height:f}=n,g=vd(a,[u,h],[u+d,h],r),m=vd(a,[u,h],[u,h+f],r);o.append(g,m),s.forEach(v=>{const w=R.getRectangleByPoints(v.points),{x:C,y:P,width:D,height:x}=w,k=vi(e,{x:C+Jt,y:P+Jt,width:D-Jt*2,height:x-Jt*2},{fill:v.fill,fillStyle:"solid",strokeWidth:0}),T=vd(a,[C+D,P],[C+D,P+x],r),H=vd(a,[C,P+x],[C+D,P+x],r);o.append(k,T,H)}),ut(o,"round")}}catch(s){console.error(s)}return o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return U5(n,e,al(e))},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e,n){try{if(n&&n.id){const r=da(n==null?void 0:n.board,e,n.id);if(r)return gc.isVerticalText(r)?h_(r):K5(r)}}catch(r){console.error(r)}return{x:0,y:0,width:0,height:0}}};function h_(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight||0,o=n.height-Fe.rectangleAndText*2-r*2;return{width:o>0?o:0,height:i,x:n.x-o/2+n.width/2,y:n.y+(n.height-i)/2}}function K5(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight||0,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}function rP(e){const n=e.x+e.width/2,r={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:r.width,ry:r.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:n,endY:e.y},bodyLine:[[n,e.y+e.height/4],[n,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const d_={draw(e,n,r){const i=O.getRoughSVG(e),{headArcCommand:o,bodyLine:s,armsLine:a,leftLegLine:u,rightLegLine:h}=rP(n),d=[`M${s[0][0]} ${s[0][1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${s[0][0]} ${s[0][1]}`,`V${s[1][1]}`,`M${a[0][0]} ${a[0][1]} H${a[1][0]}`,`M${u[0][0]} ${u[0][1]} L${u[1][0]} ${u[1][1]}`,`M${h[0][0]} ${h[0][1]} L${h[1][0]} ${h[1][1]}`].join(" "),f=i.path(d,{...r,fillStyle:"solid"});return ut(f,"round"),f},getNearestPoint(e,n){const{headArcCommand:r,bodyLine:i,armsLine:o,leftLegLine:s,rightLegLine:a}=rP(e),u=[e.x+e.width/2,e.y+e.height/4/2],h=Gn(n,u,r.rx,r.ry),d=Ke(...n,...h),g=yv(n,[i,o,s,a]),m=Ke(...n,...g);return d<m?h:g},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);if(r[1]>=e.y&&r[1]<=e.y+e.height/4){const i=[e.x+e.width/2,e.y+e.height/4/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width/2,a=e.height/2,u=Li(o[0],o[1],s,a);return Hi(o[0],o[1],u)}return r[1]>=e.y+e.height/4&&r[1]<e.y+e.height/4*3?r[0]<e.x+e.width/2?cc(Nt([e.x,e.y+e.height/2],r),-(Math.PI/2)):cc(Nt([e.x+e.width,e.y+e.height/2],r),-(Math.PI/2)):r[1]>=e.y+e.height/4*3?r[0]<e.x+e.width/2?Nt(r,[e.x+e.width/12,e.y+e.height]):Nt([e.x+e.width/12*11,e.y+e.height],r):Nt(r,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=e.textHeight,i=n.width+40;return{height:r,width:i>0?i:0,x:n.x-20,y:n.y+n.height+4}}},f_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+40} ${n.y} L${n.x+40} ${n.y+n.height} `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=40-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function iP(e){const r=e.width*.7,i=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+r,e.y],cornerPoint:[i,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[i,e.y+25]}}}const g_={draw(e,n,r){const i=O.getRoughSVG(e),{points:o}=iP(n),s=[`M${o.leftTop[0]} ${o.leftTop[1]}`,`V${o.topStart[1]}`,`H${o.topEnd[0]}`,`L${o.cornerPoint[0]} ${o.cornerPoint[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.leftBottom[0]}`,`V${o.leftMiddle[1]}`,`H${o.middlePoint[0]}`].join(" "),a=i.path(s,{...r,fillStyle:"solid"});return ut(a,"round"),a},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const{points:r}=iP(e),i=[[r.topStart,r.leftTop],[r.leftTop,r.leftBottom],[r.leftBottom,r.rightBottom],[r.rightBottom,r.rightTop],[r.topStart,r.topEnd],[r.topEnd,r.cornerPoint],[r.cornerPoint,r.rightTop],[r.leftMiddle,r.middlePoint]];return yv(n,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);return r[0]>e.x+e.width*.7&&r[1]<e.y+25?Nt([e.x+e.width*.7,e.y],r):Nt([e.x+e.width*.8,e.y+25],r)},getTextRectangle(e,n){var s,a;const r=R.getRectangleByPoints(e.points),i=ht(e),o=(a=(s=e.texts)==null?void 0:s.find(u=>u.id===(n==null?void 0:n.id)))==null?void 0:a.textHeight;if((n==null?void 0:n.id)===br.name){const u=r.width*.7-Fe.rectangleAndText-i;return{height:o,width:u>0?u:0,x:r.x+Fe.rectangleAndText+i,y:r.y+(25-o)/2}}if((n==null?void 0:n.id)===br.content){const u=r.width-Fe.rectangleAndText*2-i*2;return{height:o,width:u>0?u:0,x:r.x+Fe.rectangleAndText+i,y:r.y+25+(r.height-25-o)/2}}return r}},p_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y+25} 
            V${n.y}
            H${n.x+n.width} 
            V${n.y+n.height}
            H${n.x}
            V${n.y+25}
            H${n.x+n.width/3-8}
            L${n.x+n.width/3} ${n.y+16}
            V${n.y}
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e,n){var s,a;const r=R.getRectangleByPoints(e.points),i=ht(e),o=(a=(s=e.texts)==null?void 0:s.find(u=>u.id===(n==null?void 0:n.id)))==null?void 0:a.textHeight;if((n==null?void 0:n.id)===br.name){const u=r.width/3-8-Fe.rectangleAndText-i;return{height:o,width:u>0?u:0,x:r.x+Fe.rectangleAndText+i,y:r.y+(25-o)/2}}if((n==null?void 0:n.id)===br.content){const u=r.width-Fe.rectangleAndText*2-i*2;return{height:o,width:u>0?u:0,x:r.x+Fe.rectangleAndText+i,y:r.y+25+Fe.rectangleAndText+i}}return r}};function oP(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const m_={draw(e,n,r){const i=O.getRoughSVG(e),o=oP(n),s=i.path(o.map(([a,u])=>`M${a[0]} ${a[1]} L${u[0]} ${u[1]}`).join(" "),{...r,fillStyle:"solid",strokeWidth:4});return ut(s,"round"),s},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=oP(e);let i=1/0,o=n;return r.forEach(s=>{const a=s0(n,s),u=Ke(n[0],n[1],a[0],a[1]);u<i&&(i=u,o=a)}),o},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},v_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.125} ${n.y} L${n.x+n.width*.125} ${n.y+n.height} M${n.x+n.width-n.width*.125} ${n.y} L${n.x+n.width-n.width*.125} ${n.y+n.height}`,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2-n.width*.125*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r+n.width*.125,y:n.y+(n.height-i)/2}}},y_={draw(e,n,r){const o=O.getRoughSVG(e).path(`M${n.x} ${n.y} 
            h${n.width-16}
            v16
            h16
            v${n.height-16}
            h${-n.width}
            Z
            M${n.x+n.width-16} ${n.y} 
            A16 16, 0,0,1, ${n.x+n.width} ${n.y+16}
            `,{...r,fillStyle:"solid"});return ut(o,"round"),o},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const r=bt(n,vt.getCornerPoints(e));return r[0]>e.x+e.width-16&&r[1]<e.y+16?Gn(n,[e.x+e.width-16,e.y+16],16,16):r},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=Li(o[0],o[1],16,16);return Hi(o[0],o[1],s)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r-15;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function sP(e){const n=e.y+e.height/2,r=e.x+e.width*.3,i=e.width*.13,o=e.height*.285,s=r+i,a=e.width*.233;return{startPoint:[e.x,n],line1:[[e.x,n],[r,n]],circleArcCommand:{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:r,endY:n},verticalArcCommand:{rx:a,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:s,endY:e.y+e.height},line2:[[s+a,n],[e.x+e.width,n]]}}const w_={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,line1:s,circleArcCommand:a,verticalArcCommand:u,line2:h}=sP(n),d=[`M${o[0]} ${o[1]}`,`H${s[1][0]}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${s[1][0]+a.rx*2} ${a.endY}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${u.endX} ${n.y}`,`A${u.rx} ${u.ry} ${u.xAxisRotation} ${u.largeArcFlag} ${u.sweepFlag} ${u.endX} ${u.endY}`,`M${h[0][0]} ${h[0][1]} H${h[1][0]}`].join(" "),f=i.path(d,{...r,fillStyle:"solid"});return ut(f,"round"),f},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line1:r,line2:i,circleArcCommand:o,verticalArcCommand:s}=sP(e),a=bt(n,[...r,...i]),u=Ke(...n,...a),h=[r[1][0]+o.rx,r[1][1]],d=Gn(n,h,o.rx,o.ry),f=Ke(...n,...d),g=[s.endX,e.y],m=a0(n,g,s),v=Ke(...n,...m),w=Math.min(u,f,v);return w===u?a:w===f?d:m},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n);return r[0]>e.x+e.width*.43&&r[1]<e.y+e.height/2?cc(Nt(r,[e.x,e.y+e.height/2]),-Math.PI):r[0]>e.x+e.width*.43&&r[1]>e.y+e.height/2?Nt(r,[e.x,e.y+e.height/2]):Nt(r,[e.x,e.y+e.height/2])}};function aP(e){const n=e.width*.39,r=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:n,ry:r,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const x_={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,leftArcCommand:s,line:a}=aP(n),u=[`M${o[0]} ${o[1]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${a.startX} ${a.startY} H${a.endX}`].join(" "),h=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return ut(h,"round"),h},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,leftArcCommand:i,line:o}=aP(e);let s=1/0,a=n;const u=a0(n,r,i),h=Ke(n[0],n[1],u[0],u[1]);h<s&&(s=h,a=u);const d=[o.startX,o.startY],f=[o.endX,o.endY],g=s0(n,[d,f]),m=Ke(n[0],n[1],g[0],g[1]);return m<s&&(s=m,a=g),a},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},lP=.54;function uP(e){const n=e.y+e.height/2,r=e.width*(1-lP)/2,i=e.height/2,o=[e.x,n],s=e.x+e.width*lP;return{startPoint:o,line:{startX:o[0],startY:n,endX:s,endY:n},arcCommands:[{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:n},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:s,endY:n}]}}const C_={draw(e,n,r){const i=O.getRoughSVG(e),{startPoint:o,line:s,arcCommands:a}=uP(n),u=[`M${o[0]} ${o[1]}`,`H${s.endX}`,...a.map(d=>`A${d.rx} ${d.ry} ${d.xAxisRotation} ${d.largeArcFlag} ${d.sweepFlag} ${d.endX} ${d.endY}`)].join(" "),h=i.path(u,{...r,fillStyle:"solid"});return ut(h,"round"),h},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line:r,arcCommands:i}=uP(e),o=[r.startX,r.startY],s=[r.endX,r.endY],a=bt(n,[o,s]),u=Ke(...n,...a),h=[e.x+3*e.width/4,r.startY],d=Gn(n,h,i[0].rx,i[0].ry),f=Ke(...n,...d);return u<f?a:d},getTangentVectorByConnectionPoint(e,n){const r=R.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2];if(r[0]>e.x+e.width*.54){const o=[r[0]-i[0],-(r[1]-i[1])],s=e.width*.46/2,a=e.height/2,u=Li(o[0],o[1],s,a);return Hi(o[0],o[1],u)}return Nt(r,[e.x,e.y+e.height/2])}};function Fd(e){const n=e.x+12,r=e.width>70?24:e.width*.2,i=e.height-28-e.height*.35>1?14:e.height*.175,o=e.y+e.height*.175,s=e.y+e.height-e.height*.175-i;return{boxSize:{width:r,height:i},points:{mainStart:[n,e.y],topBoxStart:[n,o],topBoxEnd:[n,o+i],bottomBoxStart:[n,s],bottomBoxEnd:[n,s+i],mainEnd:[n,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const q5={draw(e,n,r){const i=O.getRoughSVG(e),{boxSize:o,points:s}=Fd(n),a=[`M${s.mainStart[0]} ${s.mainStart[1]}`,`H${s.rightTop[0]}`,`V${s.rightBottom[1]}`,`H${s.mainEnd[0]}`,`M${s.topBoxStart[0]} ${s.topBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${s.bottomBoxStart[0]} ${s.bottomBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${s.mainStart[0]} ${s.mainStart[1]}`,`V${s.topBoxStart[1]}`,`M${s.topBoxEnd[0]} ${s.topBoxEnd[1]}`,`V${s.bottomBoxStart[1]}`,`M${s.bottomBoxEnd[0]} ${s.bottomBoxEnd[1]}`,`V${s.mainEnd[1]}`].join(" "),u=i.path(a,{...r,fillStyle:"solid"});return ut(u,"round"),u},getNearestPoint(e,n){const{boxSize:r,points:i}=Fd(e),o=[[i.mainStart,[i.rightTop[0],i.mainStart[1]]],[[i.rightTop[0],i.mainStart[1]],i.rightBottom],[i.rightBottom,[i.mainEnd[0],i.rightBottom[1]]],[[i.mainEnd[0],i.rightBottom[1]],i.mainStart],[i.topBoxStart,[i.topBoxStart[0]+r.width/2,i.topBoxStart[1]]],[[i.topBoxStart[0]+r.width/2,i.topBoxStart[1]],[i.topBoxStart[0]+r.width/2,i.topBoxEnd[1]]],[[i.topBoxStart[0]+r.width/2,i.topBoxEnd[1]],[i.topBoxStart[0]-r.width/2,i.topBoxEnd[1]]],[[i.topBoxStart[0]-r.width/2,i.topBoxEnd[1]],[i.topBoxStart[0]-r.width/2,i.topBoxStart[1]]],[[i.topBoxStart[0]-r.width/2,i.topBoxStart[1]],i.topBoxStart],[i.bottomBoxStart,[i.bottomBoxStart[0]+r.width/2,i.bottomBoxStart[1]]],[[i.bottomBoxStart[0]+r.width/2,i.bottomBoxStart[1]],[i.bottomBoxStart[0]+r.width/2,i.bottomBoxEnd[1]]],[[i.bottomBoxStart[0]+r.width/2,i.bottomBoxEnd[1]],[i.bottomBoxStart[0]-r.width/2,i.bottomBoxEnd[1]]],[[i.bottomBoxStart[0]-r.width/2,i.bottomBoxEnd[1]],[i.bottomBoxStart[0]-r.width/2,i.bottomBoxStart[1]]],[[i.bottomBoxStart[0]-r.width/2,i.bottomBoxStart[1]],i.bottomBoxStart],[i.mainStart,i.topBoxStart],[i.topBoxEnd,i.bottomBoxStart],[i.bottomBoxEnd,i.mainEnd]];return yv(n,o)},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,n){const{points:r}=Fd(e),i=R.getConnectionPoint(e,n);return Nt(r.mainStart,i)},getConnectorPoints(e){const{points:n}=Fd(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[n.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-24-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+24+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},E_={draw(e,n,r){const i=O.getRoughSVG(e),o=n.width-45*2-18>1?45:n.width*.25,s=n.height-30-8*2>1?30:n.height*.2,a={x:n.x+n.width-18-o,y:n.y+8,width:o,height:s},u=i.path(`M${n.x} ${n.y} 
            H${n.x+n.width} 
            V${n.y+n.height} 
            H${n.x} Z

            `,{...r,fillStyle:"solid"}),h=q5.draw(e,a,r);return u.append(h),ut(u,"round"),u},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-45*2-18>1?45:n.width*.25,s=n.width-18-o-Fe.rectangleAndText-r*2;return{height:i,width:s>0?s:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},P_={draw(e,n,r){const i=O.getRoughSVG(e);return Bl(i,n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,n){const r=R.getRectangleByPoints([n,n]);return R.isHit(e,r)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,n){return bt(n,vt.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=vt.getCornerPoints(e),i=R.getConnectionPoint(e,n);return En(r,i)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const n=R.getRectangleByPoints(e.points),r=ht(e),i=e.textHeight,o=n.width-Fe.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+Fe.rectangleAndText+r,y:n.y+(n.height-i)/2}}},D_={[$e.rectangle]:vt,[$e.diamond]:x1,[$e.ellipse]:C1,[$e.parallelogram]:X3,[$e.roundRectangle]:OG,[$e.text]:vt,[$e.triangle]:HG,[$e.leftArrow]:PG,[$e.trapezoid]:LG,[$e.rightArrow]:FG,[$e.cross]:wG,[$e.star]:_G,[$e.pentagon]:AG,[$e.hexagon]:CG,[$e.octagon]:SG,[$e.pentagonArrow]:MG,[$e.processArrow]:kG,[$e.twoWayArrow]:GG,[$e.comment]:vG,[$e.roundComment]:IG,[$e.cloud]:d5,[ze.process]:vt,[ze.decision]:x1,[ze.connector]:C1,[ze.data]:X3,[ze.terminal]:jG,[ze.database]:r_,[ze.hardDisk]:i_,[ze.internalStorage]:o_,[ze.manualInput]:$G,[ze.preparation]:VG,[ze.manualLoop]:UG,[ze.merge]:XG,[ze.delay]:KG,[ze.storedData]:qG,[ze.or]:JG,[ze.summingJunction]:e_,[ze.predefinedProcess]:YG,[ze.offPage]:QG,[ze.document]:t_,[ze.multiDocument]:n_,[ze.noteCurlyLeft]:s_,[ze.noteCurlyRight]:a_,[ze.noteSquare]:l_,[ze.display]:c_,[hr.swimlaneHorizontal]:qa,[hr.swimlaneVertical]:qa,[vl.table]:qa,[He.actor]:d_,[He.useCase]:C1,[He.container]:f_,[He.note]:y_,[He.package]:g_,[He.combinedFragment]:p_,[He.class]:qa,[He.interface]:qa,[He.activation]:vt,[He.object]:vt,[He.deletion]:m_,[He.activityClass]:v_,[He.simpleClass]:vt,[He.component]:q5,[He.componentBox]:E_,[He.template]:P_,[He.port]:vt,[He.branchMerge]:x1,[He.assembly]:w_,[He.requiredInterface]:x_,[He.providedInterface]:C_},bn=e=>D_[e],Kc=(e,n)=>{const r=ht(n),i=n.source.boundId?$r(e,n.source.boundId):void 0,o=n.target.boundId?$r(e,n.target.boundId):void 0;let s=i?Xo(i,n.source.connection):n.points[0],a=o?Xo(o,n.target.connection):n.points[n.points.length-1],u=Ka([a[0]-s[0],a[1]-s[1]])||tt.right,h=GI(u);const d=Zs(u),f=Zs(h),g={key:Wr.source,point:s,direction:u,vector:[d.x,d.y]},m={key:Wr.target,point:a,direction:h,vector:[f.x,f.y]};if(i){const v=Cn.isSourceMarkOrTargetMark(n,mn.none,Wr.source)?0:r,w=cP(i,n.source.connection);if(g.vector=w,g.boundElement=i,Fi(i)){const C=Ka(cc(w,i.angle));u=C||u}else{const C=Ka(w);u=C||u}g.direction=u,s=Xo(i,n.source.connection,u,v),g.point=Oi(s,i)||s}if(o){const v=Cn.isSourceMarkOrTargetMark(n,mn.none,Wr.target)?0:r,w=cP(o,n.target.connection);if(m.vector=w,m.boundElement=o,Fi(o)){const C=Ka(cc(w,o.angle));h=C||h}else{const C=Ka(w);h=C||h}m.direction=h,a=Xo(o,n.target.connection,h,v),m.point=Oi(a,o)||a}return{source:g,target:m}},Xo=(e,n,r,i)=>{const o=R.getRectangleByPoints(e.points);if(r&&i){const s=Zs(r),a=R.getConnectionPoint(o,n);return[a[0]+s.x*i,a[1]+s.y*i]}else return R.getConnectionPoint(o,n)},cP=(e,n)=>{const r=R.getRectangleByPoints(e.points),i=hs(e),o=bn(i);let s=[0,0];const a=TT(n);if(a&&e.shape!==$e.ellipse){const u=Zs(a);return[u.x,u.y]}if(o.getEdgeByConnectionPoint){const u=o.getEdgeByConnectionPoint(r,n);if(u){const h=[u[1][0]-u[0][0],u[1][1]-u[0][1]];return f3(h)}}if(o.getTangentVectorByConnectionPoint){const u=o.getTangentVectorByConnectionPoint(r,n);if(u)return f3(u)}return s},qc=(e,n,r)=>{r=r??Kc(e,n);const{sourceRectangle:i,targetRectangle:o}=FN(e,n,r),{sourceOuterRectangle:s,targetOuterRectangle:a}=nL(i,o),u=r.source.point,h=r.target.point,d=v3(u,s,r.source.direction),f=v3(h,a,r.target.direction);return{sourcePoint:u,nextSourcePoint:d,sourceRectangle:i,sourceOuterRectangle:s,targetPoint:h,nextTargetPoint:f,targetRectangle:o,targetOuterRectangle:a}},S_=(e,n,r)=>{const i=bl(e,{match:o=>ce.isArrowLine(o)?o.source.boundId===o.id||o.target.boundId===o.id:!1,recursion:o=>!0});i.length&&i.forEach(o=>{const s=o.source.boundId===n.id,a=s?"source":"target",u={...o[a]},h=Kn(e,o),d=s?h[0]:h[h.length-1];u.connection=wl(e,d,n);const f=O.findPath(e,o),g=r.findIndex(m=>Ue.equals(m.path,f));g===-1?r.push({property:{[a]:u},path:f}):r[g].property={...r[g].property,[a]:u}})};var mn;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(mn||(mn={}));var kt;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(kt||(kt={}));var Wr;(function(e){e.source="source",e.target="target"})(Wr||(Wr={}));const Cn={isSourceMarkOrTargetMark(e,n,r){return r===Wr.source?e.source.marker===n:e.target.marker===n},isSourceMark(e,n){return Cn.isSourceMarkOrTargetMark(e,n,Wr.source)},isTargetMark(e,n){return Cn.isSourceMarkOrTargetMark(e,n,Wr.target)},isBoundElementOfSource(e,n){return e.source.boundId===n.id},isBoundElementOfTarget(e,n){return e.target.boundId===n.id},getPoints(e,n){let r;if(n.source.boundId){const s=$r(e,n.source.boundId),a=Xo(s,n.source.connection);r=Oi(a,s)||a}else r=n.points[0];let i;if(n.target.boundId){const s=$r(e,n.target.boundId),a=Xo(s,n.target.connection);i=Oi(a,s)||a}else i=n.points[n.points.length-1];const o=n.points.length>2?n.points.slice(1,n.points.length-1):[];return[r,...o,i]}};var Dr;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Dr||(Dr={}));var Nf;(function(e){e.vectorLine="vectorLine"})(Nf||(Nf={}));var xc;(function(e){e.straight="straight",e.curve="curve"})(xc||(xc={}));const ce={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>ce.isArrowLine(e)||ce.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===$e.text,isImage:e=>e.type==="image",isTable:e=>gc.isTable(e),isDrawElement:e=>!!(ce.isGeometry(e)||ce.isLine(e)||ce.isImage(e)||ce.isTable(e)||ce.isSwimlane(e)),isCustomGeometryElement:(e,n)=>{const r=e.getPluginOptions(zT);return!!((r==null?void 0:r.customGeometryTypes)||[]).includes(n.type)},isShapeElement:e=>ce.isImage(e)||ce.isGeometry(e)||ce.isTable(e)||ce.isSwimlane(e),isBasicShape:e=>Object.keys($e).includes(e.shape),isFlowchart:e=>Object.keys(ze).includes(e.shape),isUML:e=>Object.keys(He).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>ce.isSwimlane(e)&&e.shape===hr.swimlaneVertical,isHorizontalSwimlane:e=>ce.isSwimlane(e)&&e.shape===hr.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(He).includes(e.shape)&&[He.class,He.interface].includes(e.shape),isGeometryByTable:e=>ce.isUMLClassOrInterface(e),isElementByTable:e=>ce.isTable(e)||ce.isSwimlane(e)||ce.isGeometryByTable(e)};class hP extends us{constructor(){super()}initializeGenerator(){this.activeGenerator=Gc(this.board,{getStrokeWidth:()=>(Me(this.board).length===1&&!_n(this.board),Jt),getStrokeOpacity:()=>Me(this.board).length===1&&!_n(this.board)?1:.5,getRectangle:n=>R.getRectangleByPoints(n.points),hasResizeHandle:()=>m0(this.board,this.element)}),this.lineAutoCompleteGenerator=new go(this.board),this.shapeGenerator=new S5(this.board),Sy(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(go.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(Tf.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(n,r){n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(r.element,n.element)):(!(n.selected===r.selected)||n.selected)&&(this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}))}updateText(n,r){oo(this.element)?this.textGenerator.update(this.element,n.texts,r.texts,this.getElementG()):this.textGenerator.update(this.element,n.text,r.text,this.getElementG())}initializeTextManage(){const n=(r,i,o)=>{i.newText?oo(r)?qn.setDrawTexts(this.board,r,{id:o.id,text:i.newText,textHeight:i.height}):qn.setText(this.board,r,i.newText,i.width,i.height):qn.setTextSize(this.board,r,i.width,i.height),i.operations&&cy(r,i.operations)};oo(this.element)?this.textGenerator=new ly(this.board,this.element,this.element.texts,{onChange:n}):this.textGenerator=new yN(this.board,this.element,this.element.text,{onChange:n,getMaxWidth:()=>{var o;let r=on(this.element).width;const i=bn(this.element.shape).getTextRectangle;return i&&(r=i(this.element).width),(o=this.element)!=null&&o.autoSize?$T.defaultTextMaxWidth:r}}),this.textGenerator.initialize()}destroy(){var n;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(n=this.textGenerator)==null||n.destroy()}}const T_="debug:plait:line-turning",dP=Tl(T_);class A_ extends us{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new l5(this.board),this.activeGenerator=new B5(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=Kn(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const r=Kn(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:r})},dP.isDebug()&&dP.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const n={};if(this.element.source.boundId){const r=$r(this.board,this.element.source.boundId);r&&(n.source=r)}if(this.element.target.boundId){const r=$r(this.board,this.element.target.boundId);r&&(n.target=r)}return n}onContextChanged(n,r){const i=this.getBoundedElements(),o=i.source!==this.boundedElements.source||i.target!==this.boundedElements.target;this.boundedElements=i;const s=Kn(this.board,this.element);if(n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:s}),this.updateText(r.element.texts,n.element.texts),this.updateTextRectangle()):(n.selected!==r.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:s}),o){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:s}),this.updateTextRectangle();return}}initializeTextManages(){var n;if((n=this.element.texts)!=null&&n.length){const r=[];this.element.texts.forEach((i,o)=>{const s=this.createTextManage(i,o);r.push(s)}),this.getRef().initializeTextManage(r)}}drawText(){var n;(n=this.element.texts)!=null&&n.length&&this.getRef().getTextManages().forEach((r,i)=>{r.draw(this.element.texts[i].text),this.getElementG().append(r.g)})}createTextManage(n,r){return new Wc(this.board,{getRectangle:()=>dy(this.board,this.element,r),onChange:i=>{const o=O.findPath(this.board,this.element),a=[...dt.get(this.board,o).texts],u=i.width<Of?Of:i.width;a.splice(r,1,{text:i.newText?i.newText:this.element.texts[r].text,position:this.element.texts[r].position,width:u,height:i.height}),qn.setArrowLineTexts(this.board,this.element,a),i.operations&&cy(this.element,i.operations)},getMaxWidth:()=>$T.defaultTextMaxWidth,textPlugins:[]})}updateText(n,r){if(n===r)return;const i=n.length,o=r.length,s=this.getRef().getTextManages();if(o===i)for(let a=0;a<i;a++)n[a].text!==r[a].text&&s[a].updateText(r[a].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(r=>{r.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class B_ extends us{constructor(){super()}initializeGenerator(){this.shapeGenerator=new c5(this.board),this.activeGenerator=new B5(this.board),this.getRef().updateActiveSection=()=>{const n=Yo(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:n})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=Yo(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize()}onContextChanged(n,r){const i=Yo(this.board,this.element);n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:i})):(n.selected!==r.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:i})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const M_=e=>{const{keyDown:n,dblClick:r}=e;return e.keyDown=i=>{const o=Me(e),s=o.length===1,a=o[0];if(!O.isReadonly(e)&&!ty(i)&&!ry(i)&&!ny(i)&&s&&ce.isGeometry(a)){i.preventDefault(),w1(e,a);return}n(i)},e.dblClick=i=>{if(i.preventDefault(),!O.isReadonly(e)){const o=Ze(e,Je(e,i.x,i.y)),s=Ni(e,o,void 0,!1);if(s&&ce.isGeometry(s)&&C5(s))if(oo(s)){const a=rN(s,o)||s.texts.find(u=>u.id.includes(br.content))||s.texts[0];w1(e,s,a)}else w1(e,s)}r(i)},e},fP=e=>{const n=ay();return O.isInPointer(e,n)&&v0(e)},P1=e=>{const n=ay();return O.isInPointer(e,n)&&ua(e)},R_=e=>{const{pointerMove:n,globalPointerUp:r,pointerUp:i}=e;let o=null,s=null,a=null;return e.pointerMove=u=>{o==null||o.remove(),o=st();const h=ay(),f=O.isInPointer(e,h)&&v0(e),g=Ze(e,Je(e,u.x,u.y)),m=O.getPointer(e),v=xy(e,m);if(f){const w=cs(m);if(m===$e.text){const C=Xc(e,yc(e),w.textProperties["font-size"]),P=R.getPoints(R.getRectangleByCenterPoint(g,C.width,C.height));if(s=Dy(e,P,yc(e)),a)a.textManage.updateRectangle(),a.g.append(a.textManage.g);else{const D=new Wc(e,{getRectangle:()=>on(s)});D.draw(s.text),a={g:st(),textManage:D},O.getHost(e).append(a.g),a.g.append(D.g)}}else{const C=k5(m,g);s=wc(e,C,m),v.processDrawing(s,o),O.getElementTopHost(e).append(o)}}n(u)},e.pointerUp=u=>{fP(e)&&s||i(u)},e.globalPointerUp=u=>{fP(e)&&s&&(fo(e,s),a==null||a.textManage.destroy(),a==null||a.g.remove(),a=null),s=null,o==null||o.remove(),o=null,r(u)},e},k_=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,keyDown:o,keyUp:s}=e;let a=null,u=null,h=null,d=!1,f;return e.keyDown=g=>{d=ft.isKeyHotkey("shift",g),o(g)},e.keyUp=g=>{d=!1,s(g)},e.pointerDown=g=>{if(!O.isReadonly(e)&&P1(e)){const m=Ze(e,Je(e,g.x,g.y));a=m;const v=O.getPointer(e);if(v===$e.text){const w=cs(v),C=Xc(e,yc(e),w.textProperties["font-size"]),P=R.getPoints(R.getRectangleByCenterPoint(m,C.width,C.height)),D=Dy(e,P,yc(e));fo(e,D),a=null}}n(g)},e.pointerMove=g=>{u==null||u.remove(),u=st();const m=Ze(e,Je(e,g.x,g.y)),v=O.getPointer(e),w=xy(e,v);if(f==null||f.remove(),a&&P1(e)){let C=Qs([a,m],d);const P=R.getRectangleByPoints(C),[D,x]=Nt(a,m),k=T0(e,[],{resizePoints:C,activeRectangle:P,directionFactors:[ml(D),ml(x)],isAspectRatio:d,isFromCorner:!0,isCreate:!0});f=k.snapG,O.getElementTopHost(e).append(f),C=Qs(k.activePoints,d),h=wc(e,C,v),w.processDrawing(h,u),O.getElementTopHost(e).append(u)}r(g)},e.pointerUp=g=>{if(P1(e)&&a){const m=Ze(e,Je(e,g.x,g.y)),{width:v,height:w}=R.getRectangleByPoints([a,m]);if(Math.hypot(v,w)<8){const C=O.getPointer(e);if(C!==$e.text){const P=k5(C,m);h=wc(e,P,C)}}h&&fo(e,h),f==null||f.remove(),u==null||u.remove(),u=null,a=null,h=null;return}i(g)},e},b_=e=>{const n=e,{getDeletedFragment:r,buildFragment:i,insertFragment:o}=n;return n.getDeletedFragment=s=>{const a=Lf(n);if(a.length){const u=a.filter(w=>ce.isGeometry(w)),h=a.filter(w=>ce.isArrowLine(w)),d=a.filter(w=>ce.isVectorLine(w)),f=a.filter(w=>ce.isImage(w)),g=a.filter(w=>ce.isTable(w)),m=a.filter(w=>ce.isSwimlane(w)),v=[...Mu(n,u),...Mu(n,f),...Mu(n,g),...Mu(n,m)].filter(w=>!h.includes(w));s.push(...u,...h,...d,...f,...g,...m,...v.filter(w=>!h.includes(w)))}return r(s)},n.buildFragment=(s,a,u,h)=>{const d=Lf(n,h);let f=[];if(d.length){if(u===pi.cut){const C=d.filter(D=>ce.isGeometry(D)),P=d.filter(D=>ce.isArrowLine(D));f=Mu(n,C).filter(D=>!P.includes(D))}const g=[...d,...f],m=pG(n,g,a?[a.x,a.y]:[0,0]),w={text:RT(g),type:ao.elements,elements:m};s=d0(s,w)}return i(s,a,u,h)},n.insertFragment=(s,a,u)=>{var d,f,g;const h=Me(n);if((d=s==null?void 0:s.files)!=null&&d.length){const m=wT.map(w=>"image/"+w),v=!sr(n)&&!(h.length===1&&n.isImageBindingAllowed(h[0]));if(m.includes(s.files[0].type)&&v){const w=s.files[0];kT(n,w,pH,C=>{qn.insertImage(n,C,a)});return}}if((f=s==null?void 0:s.elements)!=null&&f.length){const m=(g=s.elements)==null?void 0:g.filter(v=>ce.isDrawElement(v));s.elements&&s.elements.length>0&&m.length>0&&mG(n,m,a)}if(s!=null&&s.text&&(!s.elements||s.elements.length===0)&&!(h.length===1&&h[0].children)){qn.insertText(n,a,s.text);return}o(s,a,u)},n},Mu=(e,n)=>ZH(e).filter(i=>n.find(o=>Cn.isBoundElementOfSource(i,o)||Cn.isBoundElementOfTarget(i,o))),F_=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s,a=null,u=null;return e.pointerDown=h=>{const d=fH(),f=O.isInPointer(e,d);if(!O.isReadonly(e)&&f&&ua(e)){const g=Ze(e,Je(e,h.x,h.y));o=g;const m=vy(e,g);m&&(s=m)}n(h)},e.pointerMove=h=>{a==null||a.remove(),a=st();let d=Ze(e,Je(e,h.x,h.y));if(o){const f=O.getPointer(e);u=fy(e,f,o,d,s,a)}r(h)},e.globalPointerUp=h=>{u&&(Te.insertNode(e,u,[e.children.length]),Al(e),aa(e,u),Pt.updatePointerType(e,gt.selection)),a==null||a.remove(),a=null,s=null,o=null,u=null,i(h)},e},O_=e=>{let n,r,i,o,s;return ha(e,{key:"draw-line",canResize:()=>!0,hitTest:u=>{const h=Ay(e);if(h.length>0){let d=null;return h.forEach(f=>{const g=A5(e,f,u);g&&(d={element:f,handle:g.handle,handleIndex:g.handleIndex})}),d}return null},beforeResize:u=>{if(u.element.shape===kt.elbow&&u.handle!==yn.source&&u.handle!==yn.target){const h=qc(e,u.element);if(Ty(u.element,h))return;const d=[...u.element.points],f=u.handleIndex,g=D0(e,u.element);i=g[0],o=g[g.length-1],s=F5(e,u.element,g);const m=o5(e,u.element,[...d],s,f);n=m.index,r=m.deleteCount}},onResize:(u,h)=>{let d=[...u.element.points],f={...u.element.source},g={...u.element.target},m=u.handleIndex;const v=vy(e,h.endPoint);if(u.handle===yn.source||u.handle===yn.target){const w=u.handle===yn.source?f:g;d[m]=h.endPoint,v?(w.connection=wl(e,h.endPoint,v),w.boundId=v.id):(w.connection=void 0,w.boundId=void 0)}else if(u.element.shape===kt.elbow){if(s&&i&&o){const w=OH(s,i,o,m),C=s[m],P=s[m+1],[D,x]=IH(C,P,h,w);let k=[...d].slice(1,d.length-1);n!==null&&r!==null&&(a5(k)?k=[D,x]:k.splice(n,r,D,x),d=[i,...k,o])}}else u.handle===yn.addHandle?d.splice(m+1,0,h.endPoint):d[m]=h.endPoint;if(!v){m=u.handle===yn.addHandle?m+1:m;const w=Kn(e,u.element),C=[...d];C[0]=w[0],C[C.length-1]=w[w.length-1],(u.element.shape!==kt.elbow||u.element.shape===kt.elbow&&C.length===2)&&C.forEach((P,D)=>{D!==m&&d[m]&&(d[m]=hy(P,d[m]))})}qn.resizeArrowLine(e,{points:d,source:f,target:g},u.path)},afterResize:u=>{if(u.element.shape===kt.elbow){const h=dt.get(e,u.path);let d=h&&[...h.points];if(d.length>2&&s&&i&&o){const f=s[0],g=s[s.length-1];d.splice(0,1,f),d.splice(-1,1,g),d=Zi(d),We.isEquals(d[0],f)&&d.splice(0,1),We.isEquals(d[d.length-1],g)&&d.pop(),d.length===1&&(d=[]),d=[i,...d,o],qn.resizeArrowLine(e,{points:d},u.path)}}n=null,r=null,i=null,o=null,s=null}}),e},I_=e=>{const{pointerMove:n,pointerUp:r}=e;let i=null;return e.pointerMove=o=>{if(i==null||i.remove(),O.isReadonly(e)){n(o);return}const s=Object.keys(kt),a=O.isInPointer(e,s),u=Ze(e,Je(e,o.x,o.y)),h=FI(e,d=>{const{element:f,handle:g}=d,m=g===yn.target||g===yn.source;return ce.isArrowLine(f)&&m});if(a||h){const d=P5(e,u);if(d){const f=yy(e,d,u),g=f.isHitEdge||f.isHitConnector;if(i=vN(e,d,{hasMask:g,hasConnector:!0}),g){const m=la(O.getRoughSVG(e),f.connectorPoint||f.edgePoint,6,{stroke:fr,strokeWidth:em,fill:fr,fillStyle:"solid"});i.appendChild(m)}Fi(d)&&Vr(i,R.getCenterPointByPoints(d.points),d.angle),O.getElementTopHost(e).append(i)}}n(o)},e.pointerUp=o=>{i==null||i.remove(),i=null,r(o)},e},Y5=e=>f0(e,yl.lineText,SH),L_=e=>{const{dblClick:n}=e;return e.dblClick=r=>{var i,o;if(!O.isReadonly(e)){const s=Ze(e,Je(e,r.x,r.y)),a=Ni(e,s);if(a&&ce.isArrowLine(a)){const u=a&&O.findPath(e,a),h=Kn(e,a),d=bt(s,h),f=(i=a.texts)!=null&&i.length?[...a.texts]:[],g=gy(e,a,s);if(f5(e,a,s))gP(e,a,g);else{const v=Y5(e),w=((o=y0("arrow-line"))==null?void 0:o.text)||{},C=ca(v,void 0,w),{width:P,height:D}=$c(e,C,{fontSize:fc,fontFamily:sl}),x=ST(h,d);f.push({text:C,position:x,width:P,height:D}),qn.setArrowLineTexts(e,a,f),setTimeout(()=>{if(u){const k=dt.get(e,u),T=_c(k);gP(e,k,T.length-1,!0)}})}}}n(r)},e};function gP(e,n,r,i=!1){const s=_c(n)[r];s.edit(()=>{const a=De.string(s.getText()),u=Y5(e);(!a||i&&a===u)&&qn.removeArrowLineText(e,n,r)})}class H_ extends us{constructor(){super()}initializeGenerator(){this.imageGenerator=new ho(this.board,{getRectangle:n=>({x:n.points[0][0],y:n.points[0][1],width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]}),getImageItem:n=>({url:n.url,width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]})}),this.lineAutoCompleteGenerator=new go(this.board),this.getRef().addGenerator(go.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}onContextChanged(n,r){n.element!==r.element?(this.imageGenerator.updateImage(this.getElementG(),r.element,n.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})):(!(n.selected===r.selected)||n.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const N_="plait-arrow-line-auto-complete-plugin-key",nl=new WeakMap,G_=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,a,u;return e.pointerDown=h=>{const d=Lf(e),f=d.length===1&&d[0],g=qs(e,h.x,h.y);if(!O.isReadonly(e)&&f&&ce.isShapeElement(f)){const m=Ey(e,f,!0),v=R5(ts(e,g,f,!0)||g,m),w=m[v];if(w){um(e);const C=iM(e,w);o=Ze(e,Je(e,C[0],C[1])),a=f,Pt.updatePointerType(e,kt.elbow)}}n(h)},e.pointerMove=h=>{s==null||s.remove(),s=st();let d=Ze(e,Je(e,h.x,h.y));if(o&&a&&Ke(...ts(e,d,a)||d,...o)>fv*2){const g=R.getRectangleByPoints(a.points),m=hs(a),v=bn(m);let w=o;v.getNearestCrossingPoint&&(w=v.getNearestCrossingPoint(g,o));const C=Oi(w,a)||w;u=fy(e,kt.elbow,C,d,a,s),Te.addSelectionWithTemporaryElements(e,[])}r(h)},e.globalPointerUp=h=>{var d;if(u){Te.insertNode(e,u,[e.children.length]),Al(e),aa(e,u);const f=(d=e.getPluginOptions(N_))==null?void 0:d.afterComplete;f&&f(u)}else{const f=nl.get(e);f&&(Te.insertNode(e,f.temporaryArrowLineElement,[e.children.length]),fo(e,f.temporaryShapeElement),nl.delete(e))}o&&(Pt.updatePointerType(e,gt.selection),o=null),s==null||s.remove(),s=null,a=null,u=null,i(h)},e},pP=100,__=e=>{const{pointerMove:n,pointerLeave:r,globalPointerUp:i}=e;let o=null,s=null,a=null,u=null,h=null;e.pointerMove=f=>{o==null||o.remove(),O.getBoardContainer(e).classList.remove(Hu.crosshair);const g=Lf(e);u==null||u.remove(),h==null||h.remove();const m=g.length===1&&g[0],v=qs(e,f.x,f.y);if(!O.isReadonly(e)&&!_n(e)&&m&&ce.isShapeElement(m)){const w=Ey(e,m,!0),C=R5(ts(e,v,m,!0)||v,w),P=w[C];if(yt.getElementRef(m).getGenerator(go.key).recoverAutoCompleteG(),P){if(o=la(O.getRoughSVG(e),P,DH,{stroke:"none",fill:tc(Ol,PH),fillStyle:"solid"}),O.getActiveHost(e).append(o),O.getBoardContainer(e).classList.add(Hu.crosshair),Fi(m)){const k=e.getRectangle(m),T=Nn(e,k);Vr(o,R.getCenterPoint(T),m.angle)}if(ce.isGeometry(m)&&!ce.isText(m)){const k=R.getRectangleByPoints(m.points);let T=R.getEdgeCenterPoints(k)[C];const H=lL(C);let z=Gt(T,pP,H);const U=xy(e,m.shape),q=m.points.map(Q=>Gt(Q,pP+NT(m.points[0],m.points[1],L9(H)),H));u=st(),h=st(),u.style.opacity="0.6",h.style.opacity="0.6",a=wc(e,q,m.shape),a.angle=m.angle,a.fill=m.fill,a.strokeColor=m.strokeColor,a.strokeStyle=m.strokeStyle,a.strokeWidth=m.strokeWidth,a.groupId=m.groupId;const te=Oi(T,m)||T,ne=Oi(z,a)||z;s=fy(e,kt.elbow,te,ne,m,u),nl.set(e,{temporaryArrowLineElement:s,temporaryShapeElement:a});const le=wl(e,ne,a);s.target.boundId=a.id,s.target.connection=le,U.processDrawing(a,h),O.getElementTopHost(e).append(h)}return}}nl.delete(e),n(f)},e.pointerLeave=f=>{d(),r(f)};const d=()=>{o&&(o==null||o.remove(),O.getBoardContainer(e).classList.remove(Hu.crosshair),u==null||u.remove(),h==null||h.remove()),nl.get(e)&&nl.delete(e)};return e.globalPointerUp=f=>{i(f),d()},e},j_=e=>{let n=0;const r=100;return ha(e,{key:"line-text",canResize:()=>!0,hitTest:o=>{let s=null;const a=Ni(e,o,u=>ce.isArrowLine(u));if(a){const u=gy(e,a,o),d=_c(a)[u];if(u!==-1&&!d.isEditing)return n=u,{element:a,handle:Mm.e}}return s},onResize:(o,s)=>{const a=o.element;if(a){const u=s.endPoint,h=Kn(e,a);if(ID(u,h)<=r){const f=bt(u,h,!1),g=ST(h,f),m=[...a.texts];m[n]={...m[n],position:g},qn.setArrowLineTexts(e,a,m)}}}}),e},z_=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i,afterChange:o,drawSelectionRectangle:s}=e;let a=null,u,h=!1;const d=()=>{const f=Me(e);return f.length>0&&f.every(g=>ce.isDrawElement(g)&&!ce.isArrowLine(g)||ce.isCustomGeometryElement(e,g))};return e.pointerDown=f=>{if(!d()||O.isReadonly(e)||O.hasBeenTextEditing(e)||!bi(f)){n(f);return}const g=qs(e,f.x,f.y),m=Me(e),v=xt(e,m,!1),w=Nn(e,v),C=iG(w),P=cr(m),D=P?cn(g,R.getCenterPoint(w),-P):g;C&&R.isHit(R.getRectangleByPoints([D,D]),C)&&(a={elements:[...m],startPoint:g}),n(f)},e.pointerMove=f=>{if(a){f.preventDefault();const g=!!f.shiftKey;iL(e,a);const m=qs(e,f.x,f.y),v=xt(e,a.elements,!1),w=Nn(e,v),C=R.getCenterPoint(w);!cr(a.elements)&&a.elements.length>1&&(h=!0),mi(e,"with-common-rotate",()=>{if(a&&a.startPoint){let P=M9(a.startPoint,m,C);const D=cr(a.elements);P=rc(D+P),g&&(P+=Math.PI/12/2,P-=P%(Math.PI/12));let x=P%(Math.PI/2);if(Math.PI/2-x<=vm(5)){const k=Math.PI/2-x;P+=k}if(x<=vm(5)){const k=-x;P+=k}a.angle=rc(P-D)||0,B9(e,a.elements,a.angle),Tn.set(e,!0),O.getBoardContainer(e).classList.add("element-rotating")}});return}r(f)},e.globalPointerUp=f=>{if(i(f),h){h=!1;const g=Me(e);Te.addSelectionWithTemporaryElements(e,g)}O.getBoardContainer(e).classList.remove("element-rotating"),oL(e),a=null,Tn.set(e,!1)},e.afterChange=()=>{if(o(),u&&(u.remove(),u=null),d()&&!_n(e)){if(h&&a){const f=xt(e,a.elements,!1),g=Nn(e,f);u=u3(e,g),u.classList.add(uC),a.angle&&Vr(u,R.getCenterPoint(g),a.angle)}else{const f=Me(e),g=xt(e,f,!1),m=Nn(e,g);u=u3(e,m),u.classList.add(uC),Vr(u,R.getCenterPoint(m),cr(f))}O.getActiveHost(e).append(u)}},e.drawSelectionRectangle=()=>{if(h&&a){const f=xt(e,a.elements,!1),g=Nn(e,f),m=vi(e,R.inflate(g,Jt),{stroke:fr,strokeWidth:Jt});return m.classList.add(Oc),a.angle&&Vr(m,R.getCenterPoint(g),a.angle),m}return s()},e};class Z5 extends us{constructor(){super()}initializeGenerator(){this.activeGenerator=Gc(this.board,{getStrokeWidth:()=>Jt,getStrokeOpacity:()=>1,getRectangle:n=>{const r=tl(n);return r!=null&&r.length?MH(this.board,this.element,r):R.getRectangleByPoints(n.points)},hasResizeHandle:()=>{const n=tl(this.element);return n!=null&&n.length?!1:m0(this.board,this.element)}}),this.tableGenerator=new P0(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new go(this.board),this.getRef().addGenerator(go.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(r=>{if(gc.isVerticalText(r)){const i=e5(this.board,r);if(i){const s=bn(vl.table).getTextRectangle(this.element,{id:r.id,board:this.board});i.g.classList.add("vertical-cell-text"),Vr(i.g,R.getCenterPoint(s),vm(-90))}}})}getDrawShapeTexts(n){return n.filter(r=>r5(r)).map(r=>({id:r.id,text:r.text,textHeight:r.textHeight,board:this.board}))}initializeTextManage(){const n=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new ly(this.board,this.element,n,{onChange:(r,i,o)=>{const s=O.findPath(this.board,r);i.newText&&qn.setTableText(this.board,s,o.id,i.newText,i.height),i.operations&&cy(r,i.operations)},getRenderRectangle:(r,i)=>{const o=da(this.board,r,i.id);if(gc.isVerticalText(o)){const s=R.getRectangleByPoints(o.points),a=ht(o),u=o.textHeight||0,h=s.height-Fe.rectangleAndText*2-a*2;return{width:u,height:h>0?h:0,x:s.x+Fe.rectangleAndText+a,y:s.y+(s.height-h)/2}}else return K5(o)}}),this.textGenerator.initialize()}onContextChanged(n,r){if(n.element!==r.element||n.hasThemeChanged){const i=tl(r.element);i!=null&&i.length&&(k3(r.element),JT(n.element,i)),this.tableGenerator.processDrawing(n.element,this.getElementG()),this.activeGenerator.processDrawing(n.element,O.getActiveHost(this.board),{selected:this.selected});const o=this.getDrawShapeTexts(r.element.cells),s=this.getDrawShapeTexts(n.element.cells);this.textGenerator.update(n.element,o,s,this.getElementG()),this.rotateVerticalText()}else{const i=n.selected===r.selected,o=tl(n.element);(!i||o!=null&&o.length||n.selected)&&this.activeGenerator.processDrawing(n.element,O.getActiveHost(this.board),{selected:this.selected}),this.selected||k3(n.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const mP=20;function $_(e){let n;return ha(e,{key:"draw-table",canResize:()=>{const i=Me(e);return Om(e)&&!Fi(i[0])},hitTest:i=>{const s=Me(e)[0];if(s&&ce.isElementByTable(s)){let a=e.getRectangle(s),u=Nm(e,a,i,s.angle);if(u){const d=js(e,s);if(d&&Om(e)||!d&&!Zd(e,u.handle))return{element:s,handle:u.handle,cursorClass:u.cursorClass,rectangle:a}}const h=Vc(e,s);for(let d=0;d<h.length;d++)if(a=R.getRectangleByPoints(h[d].points),u=Nm(e,a,i,0),u&&!Zd(e,u.handle))return{element:s,handle:u.handle,cursorClass:u.cursorClass,rectangle:a,options:{cell:h[d]}}}return null},onResize:(i,o)=>{var a,u,h,d;n==null||n.remove();const s=O.findPath(e,i.element);if((a=i.options)!=null&&a.cell&&i.rectangle){const f=Bf(i.handle),{originPoint:g,handlePoint:m}=Gm(e,f,i.rectangle),v=[o.startPoint,o.endPoint],{xZoom:w,yZoom:C}=By(v,g,m,!1,!1),P=(u=i.options)==null?void 0:u.cell.points,D=P.map(z=>to(z,g,w,C)),x=D[1][0]-P[1][0],k=D[1][1]-P[1][1],T=D[1][0]-D[0][0],H=D[1][1]-D[0][1];if(x!==0&&T>=mP){const{columns:z,points:U}=t5(i.element,(h=i.options)==null?void 0:h.cell.columnId,T,x);Te.setNode(e,{columns:z,points:U},s)}else if(k!==0&&H>=mP){const{rows:z,points:U}=n5(i.element,(d=i.options)==null?void 0:d.cell.rowId,H,k);Te.setNode(e,{rows:z,points:U},s)}}else{const f=Zd(e,i.handle),g=o.isShift,m=Bf(i.handle),{originPoint:v,handlePoint:w}=Gm(e,m,i.rectangle),C=V5(e,i,o,{originPoint:v,handlePoint:w},g,f),P=T0(e,[i.element],C);n=P.snapG,O.getElementTopHost(e).append(n);const D=P.activePoints,x=i.element.points,k=R.getRectangleByPoints(x),T=R.getRectangleByPoints(D),H=T.width-k.width,z=T.height-k.height;let U=[...i.element.columns],q=[...i.element.rows];H!==0&&(U=U.map(te=>te.width?{...te,width:te.width+H*(te.width/k.width)}:te)),z!==0&&(q=q.map(te=>te.height?{...te,height:te.height+z*(te.height/k.height)}:te)),Te.setNode(e,{points:Qs(D),columns:U,rows:q},s)}},afterResize:i=>{n==null||n.remove(),n=null}}),e}const W_=e=>{const n=e,{drawElement:r,getRectangle:i,isRectangleHit:o,isHit:s,isMovable:a,dblClick:u,keyDown:h,pointerUp:d}=n;return n.drawElement=f=>ce.isElementByTable(f.element)?Z5:r(f),n.isHit=(f,g,m)=>{if(ce.isElementByTable(f)){const v=R.getRectangleByPoints(f.points),w=qa.getNearestPoint(v,g);return Ke(w[0],w[1],g[0],g[1])<=gv||R.isPointInRectangle(v,g)}return s(f,g,m)},n.getRectangle=f=>ce.isElementByTable(f)?R.getRectangleByPoints(f.points):i(f),n.isMovable=f=>ce.isElementByTable(f)?!0:a(f),n.isRectangleHit=(f,g)=>{if(ce.isElementByTable(f)){const m=R.getRectangleByPoints([g.anchor,g.focus]),v=R.getRectangleByPoints(f.points);return mf(R.getCornerPoints(v),m)}return o(f,g)},n.keyDown=f=>{const g=Me(e),m=g.length===1,v=g[0];if(!O.isReadonly(e)&&!O.hasBeenTextEditing(n)&&!ty(f)&&!ry(f)&&!ny(f)&&m&&(f.preventDefault(),ce.isElementByTable(v))){const w=tl(v);let C=v.cells.find(P=>P.text&&P.textHeight);if(w!=null&&w.length&&(C=w.find(P=>P.text&&P.textHeight)),C){I3(e,C);return}}h(f)},n.dblClick=f=>{if(f.preventDefault(),!O.isReadonly(e)){const g=Ze(e,Je(e,f.x,f.y)),m=Ni(e,g);if(m&&ce.isElementByTable(m)){const v=O3(n,m,g);if(v&&v.text&&v.textHeight){I3(e,v);return}}}u(f)},n.pointerUp=f=>{const g=O.isPointer(n,gt.selection)||O.isPointer(n,gt.hand);if(!bi(f)||kl(n)||!g){d(f);return}if(Om(n)){const v=Ze(n,Je(n,f.x,f.y)),w=TH(n)[0],C=O3(n,w,v);C&&C.text&&C.textHeight&&JT(w,[C])}d(f)},n.buildTable=f=>f,$_(n)},D1=e=>G5(e)&&v0(e),S1=e=>G5(e)&&ua(e),V_=e=>{const{pointerMove:n,globalPointerUp:r,pointerUp:i}=e;let o=null,s=null;return e.pointerMove=a=>{o==null||o.remove(),o=st();const u=new P0(e),h=O.getPointer(e),d=D1(e),f=Ze(e,Je(e,a.x,a.y));if(d){const g=N5(h,f);s=Hf(h,g),u.processDrawing(s,o),O.getElementTopHost(e).append(o)}n(a)},e.pointerUp=a=>{D1(e)&&s||i(a)},e.globalPointerUp=a=>{D1(e)&&s&&fo(e,s),s=null,o==null||o.remove(),o=null,r(a)},e},U_=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,keyDown:o,keyUp:s}=e;let a=null,u=null,h=null,d=!1,f;return e.keyDown=g=>{d=ft.isKeyHotkey("shift",g),o(g)},e.keyUp=g=>{d=!1,s(g)},e.pointerDown=g=>{!O.isReadonly(e)&&S1(e)&&(a=Ze(e,Je(e,g.x,g.y))),n(g)},e.pointerMove=g=>{u==null||u.remove(),u=st();const m=new P0(e),v=Ze(e,Je(e,g.x,g.y)),w=O.getPointer(e);if(f==null||f.remove(),a&&S1(e)){let C=Qs([a,v],d);const P=R.getRectangleByPoints(C),[D,x]=Nt(a,v),k=T0(e,[],{resizePoints:C,activeRectangle:P,directionFactors:[ml(D),ml(x)],isAspectRatio:d,isFromCorner:!0,isCreate:!0});f=k.snapG,O.getElementTopHost(e).append(f),C=Qs(k.activePoints,d),h=Hf(w,C),m.processDrawing(h,u),O.getElementTopHost(e).append(u)}r(g)},e.pointerUp=g=>{if(S1(e)&&a){const m=Ze(e,Je(e,g.x,g.y)),{width:v,height:w}=R.getRectangleByPoints([a,m]);if(Math.hypot(v,w)<8){const C=O.getPointer(e),P=N5(C,m);h=Hf(C,P)}h&&fo(e,h),f==null||f.remove(),u==null||u.remove(),u=null,a=null,h=null;return}i(g)},e},X_=e=>{const{drawElement:n,buildTable:r,pointerUp:i}=e;return e.drawElement=o=>ce.isSwimlane(o.element)?Z5:n(o),e.buildTable=o=>ce.isSwimlane(o)?XN(o):r(o),U_(V_(e))},K_=e=>{const{pointerDown:n,pointerMove:r,dblClick:i,globalKeyDown:o}=e;let s=null,a=null,u=[];const h=()=>{a&&Te.insertNode(e,a,[e.children.length]),O.getBoardContainer(e).classList.remove("vector-line-closed"),s==null||s.remove(),s=null,a=null,u=[]};return e.pointerDown=d=>{const f=gH(),g=O.isInPointer(e,f);if(!O.isReadonly(e)&&g&&ua(e)){let m=Ze(e,Je(e,d.x,d.y));if(u.length>1&&Ke(...m,...u[0])<=Ff){u.push(u[0]),h();return}u.push(m);return}n(d)},e.pointerMove=d=>{s==null||s.remove(),s=st();let f=Ze(e,Je(e,d.x,d.y));O.getPointer(e)===Nf.vectorLine&&u.length>0&&(Ke(...f,...u[0])<=Ff?(f=u[0],O.getBoardContainer(e).classList.add("vector-line-closed")):O.getBoardContainer(e).classList.remove("vector-line-closed"),a=oN(e,xc.straight,u,f,s)),r(d)},e.dblClick=d=>{if(!O.isReadonly(e)&&a){h(),Pt.updatePointerType(e,gt.selection);return}i(d)},e.globalKeyDown=d=>{if(!O.isReadonly(e)){const f=ft.isKeyHotkey("esc",d),g=ft.isKeyHotkey("v",d);(f||g)&&a&&(h(),g&&Pt.updatePointerType(e,gt.selection))}o(d)},e},q_=e=>(ha(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:r=>{const i=O5(e);if(i.length>0){let o=null;return i.forEach(s=>{const a=A5(e,s,r);a&&(o={element:s,handle:a.handle,handleIndex:a.handleIndex})}),o}return null},onResize:(r,i)=>{let o=[...r.element.points],s=r.handleIndex;if(r.handle===yn.source||r.handle===yn.target)if(o[s]=i.endPoint,Uc(r.element.points))o[o.length-1]=i.endPoint;else{const a=r.handle===yn.source?o[o.length-1]:o[0];Ke(...i.endPoint,...a)<=Ff&&(o[s]=a)}else r.handle===yn.addHandle?o.splice(s+1,0,i.endPoint):o[s]=i.endPoint;Te.setNode(e,{points:o},r.path)}}),e),Q5=e=>{const{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isInsidePoint:s,isMovable:a,isAlign:u,getRelatedFragment:h,getOneHitElement:d}=e;return e.drawElement=f=>ce.isGeometry(f.element)?(ce.isUML(f.element),hP):ce.isArrowLine(f.element)?A_:ce.isVectorLine(f.element)?B_:ce.isImage(f.element)?H_:n(f),e.getRectangle=f=>{if(ce.isGeometry(f))return R.getRectangleByPoints(f.points);if(ce.isArrowLine(f)){const g=Kn(e,f),m=f.texts.map((w,C)=>dy(e,f,C)),v=R.getRectangleByPoints(g);return R.getBoundingRectangle([v,...m])}if(ce.isVectorLine(f)){const g=Yo(e,f),m=R.getRectangleByPoints(g);return R.getBoundingRectangle([m])}return ce.isImage(f)?R.getRectangleByPoints(f.points):r(f)},e.isRectangleHit=(f,g)=>{const m=lN(e,f,g);return m!==null?m:i(f,g)},e.isHit=(f,g,m)=>{const v=fN(e,f,g,m);return v!==null?v:o(f,g,m)},e.getOneHitElement=f=>f.every(m=>ce.isDrawElement(m))?y5(e,f):d(f),e.isInsidePoint=(f,g)=>{const m=pN(e,f,g);return m!==null?m:s(f,g)},e.isMovable=f=>{if(ce.isGeometry(f)||ce.isImage(f)||ce.isVectorLine(f))return!0;if(ce.isArrowLine(f)){const g=Me(e),m=v=>!!g.find(w=>w.id===v);return!!(!f.source.boundId&&!f.target.boundId||f.source.boundId&&m(f.source.boundId)&&g.includes(f)||f.target.boundId&&m(f.target.boundId)&&g.includes(f))}return a(f)},e.isAlign=f=>ce.isGeometry(f)||ce.isImage(f)?!0:u(f),e.getRelatedFragment=(f,g)=>{const m=g!=null&&g.length?g:Me(e),w=e.children.filter(C=>ce.isArrowLine(C)).filter(C=>{const P=m.find(k=>k.id===C.source.boundId),D=m.find(k=>k.id===C.target.boundId),x=m.includes(C);return P&&D&&!x});return h([...f,...w],g)},X_(W_(sG(K_(__(I_(q_(O_(j_(L_(z_(F_(G_(R_(k_(b_(M_(e)))))))))))))))))},Ve={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var Ae;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(Ae||(Ae={}));var dr;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(dr||(dr={}));function _m(e){return e.origin.layout?e.origin.layout:Ve.isAbstract(e.origin)?Ry(_m(e.parent)):e.parent?_m(e.parent):null}const Ii=e=>e===Ae.rightBottomIndented||e===Ae.rightTopIndented||e===Ae.leftBottomIndented||e===Ae.leftTopIndented,Y_=e=>e===Ae.right||e===Ae.left||e===Ae.downward||e===Ae.upward,pr=e=>e===Ae.standard,Bn=e=>e===Ae.right||e===Ae.left||e===Ae.standard||Ii(e),Cc=e=>e===Ae.right||e===Ae.left||e===Ae.standard,jm=e=>e===Ae.upward||e===Ae.downward,Ko=e=>e===Ae.leftTopIndented||e===Ae.rightTopIndented||e===Ae.upward,Z_=e=>e===Ae.leftBottomIndented||e===Ae.rightBottomIndented||e===Ae.downward,Ec=e=>e===Ae.left||e===Ae.leftTopIndented||e===Ae.leftBottomIndented,Gf=e=>e===Ae.right||e===Ae.rightTopIndented||e===Ae.rightBottomIndented,T1=e=>Ii(e)?dr.indented:(pr(e)||Y_(e),dr.logic),Ry=e=>Ii(e)?Gf(e)?Ae.right:Ae.left:e;class Pc{constructor(n,r,i,o){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const s=r.getHorizontalGap(n,o),a=r.getVerticalGap(n,o);this.origin=n,this.width=r.getWidth(n),this.height=r.getHeight(n),this.x=this.y=0,o&&(this.parent=o);const u=_m(this);this.layout=u&&u!==Ae.standard?u:i.rootLayoutType;const h=r.getVerticalConnectingPosition(n,o);h&&(this.verticalConnectingPosition=h),this.addGap(s,a)}isRoot(){return this.depth===0}addGap(n,r){const i=this;i.hGap+=n,i.vGap+=r,i.width+=2*n,i.height+=2*r}eachNode(n){J5(this,n)}getBoundingBox(){const n={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(r=>{n.left=Math.min(n.left,r.x),n.top=Math.min(n.top,r.y),n.right=Math.max(n.right,r.x+r.width),n.bottom=Math.max(n.bottom,r.y+r.height)}),n.width=n.right-n.left,n.height=n.bottom-n.top,n}translate(n=0,r=0){this.eachNode(i=>{i.x+=n,i.y+=r})}right2left(){const n=this,r=n.getBoundingBox();n.eachNode(i=>{i.x=i.x-(i.x-r.left)*2-i.width,i.left=!0}),n.translate(r.width,0)}down2up(){const n=this,r=n.getBoundingBox();n.eachNode(i=>{i.y=i.y-(i.y-r.top)*2-i.height,i.up=!0}),n.translate(0,r.height)}}function J5(e,n){var r;(r=e.children)==null||r.forEach(i=>{J5(i,n)}),n(e)}class Q_{constructor(n,r,i,o,s,a,u,h,d,f){this.left=n,this.right=r,this.top=i,this.bottom=o,this.width=s,this.height=a,this.rootX=u,this.rootY=h,this.rootWidth=d,this.rootHeight=f}}function J_(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var zm;(function(e){e.middle="middle",e.bottom="bottom"})(zm||(zm={}));class Js{constructor(n,r,i,o,s){this.width=n,this.height=r,this.y=i,this.children=o,this.childrenCount=o.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=s}}const ds=e=>{var n;return e.children?(n=e.children)==null?void 0:n.filter(r=>r instanceof Pc?!Ve.isAbstract(r.origin):r instanceof Js?!Ve.isAbstract(r.origin.origin):!Ve.isAbstract(r)):[]},eA=(e,n)=>{const r=e.children.indexOf(n);return e.children.find(i=>{if(i instanceof Pc)return Ve.isAbstract(i.origin)&&i.origin.end===r;if(i instanceof Js&&e instanceof Js){if(Ve.isAbstract(i.origin.origin)){const{end:o}=Zo(i.origin.origin,e.origin);return o===r}return!1}return Ve.isAbstract(i)&&i.end===r})},ej=(e,n)=>{const r=e.children.indexOf(n);return e.children.find(i=>{if(i instanceof Pc)return Ve.isAbstract(i.origin)&&i.origin.start===r;if(i instanceof Js&&e instanceof Js){if(Ve.isAbstract(i.origin.origin)){const{start:o}=Zo(i.origin.origin,e.origin);return o===r}return!1}return Ve.isAbstract(i)&&i.start===r})},Zo=(e,n)=>{let r=e.start,i=e.end;if(pr(n.layout)){const o=n.origin.rightNodeCount;r>=o&&(i-=o,r-=o)}return{start:r,end:i}};function _f(e,n,r){e.children[n].modifier+=r}function tj(e){return e.childrenCount===0?null:e.children[0]}function tA(e){let n=ds(e);return e.childrenCount===0?null:n[n.length-1]}function nj(e,n){if(Ve.isAbstract(e.children[n].origin.origin))return;let r=e.children[n-1],i=e.children[n],o=r.modifier+r.preliminary+r.width,s=i.modifier+i.preliminary,a=0,u=e,h=e;for(;r||i;){if(r){let f=a+r.modifier+r.preliminary+r.width;f>o&&(o=f),o=rA(u,r,o,a),u=r,a=r.modifier+a,r=tA(r)}if(i){let f=i.modifier+i.preliminary;f<s&&(s=f),s=oj(h,i,s),h=i,i=tj(i)}}const d=o-s;d>0&&_f(e,n,d)}function rj(e){const n=e.children[0];let r=n.preliminary+n.modifier;const i=ds(e),o=i[i.length-1];let s=o.modifier+o.preliminary+o.width;n.origin.blackNode&&n.origin.blackNode.rootX>n.origin.blackNode.left&&(r=r+(n.origin.blackNode.rootX-n.origin.blackNode.left)),o.origin.blackNode&&o.origin.blackNode.rootX+o.origin.blackNode.rootWidth<o.origin.blackNode.right&&(s=s-(o.origin.blackNode.right-(o.origin.blackNode.rootX+o.origin.blackNode.rootWidth))),n.origin.verticalConnectingPosition&&o.origin.verticalConnectingPosition&&(r=r+n.width-n.origin.vGap,s=s-o.origin.vGap);let a=e.width/2;e.origin.verticalConnectingPosition&&(a=e.width-e.origin.vGap);const u=(r+s)/2-a;u>0?e.preliminary=u:e.children.forEach((h,d)=>{_f(e,d,Math.abs(u))})}function $m(e){if(e.childrenCount!==0){$m(e.children[0]);for(let n=1;n<e.childrenCount;n++){const r=e.children.find(i=>{let o=null;if(Ve.isAbstract(i.origin.origin)){let{end:s}=Zo(i.origin.origin,e.origin);o=s}return o===n-1});r&&ij(e,r),$m(e.children[n]),nj(e,n)}rj(e)}}function nA(e,n){n+=e.modifier,e.x=e.preliminary+n;for(let r=0;r<e.childrenCount;r++)nA(e.children[r],n)}function ij(e,n,r){const{start:i,end:o}=Zo(n.origin.origin,e.origin),s=e.children.indexOf(n),a=e.children[i];let u=e.children[o];const h=a.modifier;let d=u.modifier+u.preliminary+u.width,f=u.modifier,g=e;for(e.children[s].modifier=a.modifier;u.childrenCount;){g=u;const w=tA(u);u=w||u;let C=f+u.modifier+u.preliminary+u.width;d=rA(g,u,d,f),f+=u.modifier,C>d&&(d=C)}const m=n.origin.blackNode?n.origin.blackNode.rootX*2+n.origin.blackNode.rootWidth:n.width,v=d-h;if(v>m){const w=(v-m)/2;_f(e,s,w)}else{const w=(m-v)/2;for(let C=i;C<o+1;C++)_f(e,C,w)}}function rA(e,n,r,i){const o=eA(e,n);return o?Math.max(o.modifier+o.width+i,r):r}function oj(e,n,r){const i=ej(e,n);return i?Math.min(i.modifier+i.preliminary,r):r}function sj(e){$m(e),nA(e,0)}function Wm(e,n=0){e.x=n,e.children.forEach(r=>{if(Ve.isAbstract(r.origin)){let i=0;for(let o=r.origin.start;o<=r.origin.end;o++){const s=e.children[o].getBoundingBox();i=Math.max(s.width,i)}Wm(r,e.x+e.width/2+i)}else Wm(r,e.x+e.width/2)})}function aj(e,n){let r=e.y+e.height,i=null;o(e);function o(s){s.children.forEach((a,u)=>{const h=s.children.find(f=>Ve.isAbstract(f.origin)&&f.origin.end===u-1);if(h){const f=i!=null&&i.origin.isCollapsed?n.getExtendHeight(a.origin):0;r=lj(s,h)+f}if(Ve.isAbstract(a.origin))return;let d=r+a.vGap;i&&!Cc(i.layout)&&i.origin.children.length>0&&(i.origin.isCollapsed?d=d+n.getExtendHeight(a.origin):d=d+n.getIndentedCrossLevelGap()),a.y=d,i=a,r=a.y+a.height,o(a)})}}function lj(e,n){const r=n.origin,i=e.children.indexOf(n),o=e.children[r.start],s=e.children[r.end];e.children[i].y=o.y;const a=o.y;let u=s.y+s.height,h=s,d=e;for(;h!=null&&h.children.length;){d=h;const v=ds(d);h=v[v.length-1];const w=eA(d,h);u=w?Math.max(w.y+w.height,h.y+h.height):h.y+h.height}const f=u-a,g=n.blackNode?n.blackNode.height:n.height,m=n.blackNode?n.blackNode.rootY*2+n.blackNode.rootHeight:n.height;if(m>f){const v=(m-f)/2;for(let w=r.start;w<=r.end;w++)e.children[w].eachNode(C=>{C.y+=v})}else{const v=(f-m)/2;e.children[i].y+=v}return Math.max(n.y+g,o.y+f)}function iA(e,n,r){r?n.y=e.x:n.x=e.x,e.children.forEach((i,o)=>{iA(i,n.children[o],r)})}function oA(e,n,r=0){var i,o;if(n){if(Ve.isAbstract(e.origin)){const{start:s,end:a}=Zo(e.origin,e.parent);for(let u=s;u<=a;u++){const h=(i=e.parent)==null?void 0:i.children[u].getBoundingBox().right;r=Math.max(h,r)}}e.x=r,r+=e.width}else{if(Ve.isAbstract(e.origin))for(let s=e.origin.start;s<=e.origin.end;s++){const a=(o=e.parent)==null?void 0:o.children[s].getBoundingBox().bottom;r=Math.max(a,r)}e.y=r,r+=e.height}e.children.forEach(s=>{oA(s,n,r)})}const sA=(e,n)=>{const r=[];return e.children.forEach(i=>{r.push(sA(i,n))}),n?(e.blackNode&&(e.blackNode=J_(e.blackNode)),new Js(e.height,e.width,e.x,r,e)):new Js(e.width,e.height,e.y,r,e)};class uj{constructor(){}layout(n,r,i,o,s=!1,a){const u=[],h=[],d=this.buildLayoutNode(n,i,o,u,a);switch(u.filter(g=>g.origin.children.length>0).forEach(g=>{const m=g.layout,v=o.toTop||Bn(o.rootLayoutType)&&Ko(m),w=o.toLeft||!Bn(o.rootLayoutType)&&Ec(m),C=Bn(m),P=this.layout(g.origin,T1(m),i,{toTop:v,toLeft:w,rootLayoutType:o.rootLayoutType},C,g.parent);!o.toTop&&v&&r!==dr.indented&&P.down2up(),!o.toLeft&&w&&P.right2left();const D=P.getBoundingBox();g.width=D.width,g.height=D.height,g.blackNode=new Q_(D.left,D.right,D.top,D.bottom,D.width,D.height,P.x,P.y,P.width,P.height),h.push(P)}),r){case dr.indented:Wm(d),aj(d,i);break;case dr.fishBone:break;case dr.logic:default:oA(d,s);const g=sA(d,s);sj(g),iA(g,d,s);break}const f=[];return u.filter(g=>g.origin.children.length>0).forEach((g,m)=>{if(g.parent){const v=h[m];v.parent=g.parent;let w,C;Bn(g.parent.layout)?(w=v.x,C=0):(w=0,C=v.y),v.translate(g.x-w,g.y-C);const D=g.parent.children.indexOf(g),x=g.parent.children[D];g.parent.children[D]=Object.assign(x,v);const k=f.find(T=>T.parent===g.parent&&!Ve.isAbstract(g.origin));k?(k.offsetX<w&&(k.offsetX=w),k.offsetX<C&&(k.offsetX=C)):Ve.isAbstract(g.origin)||f.push({parent:g.parent,offsetX:w,offsetY:C})}}),f.forEach(g=>{g.parent.children.forEach(m=>m.translate(g.offsetX,g.offsetY))}),d}buildLayoutNode(n,r,i,o,s){const a=new Pc(n,r,i,s);if(!a.origin.isCollapsed){const u=[a];let h;for(;h=u.pop();)if(!h.origin.isCollapsed){const d=h.origin.children,f=d?d.length:0;if(h.children=[],d&&f)for(let g=0;g<f;g++){const m=new Pc(d[g],r,i,h);h.children.push(m),m.depth=h.depth+1,(h.layout!==m.layout&&(T1(h.layout)!==T1(m.layout)||Bn(h.layout)!==Bn(m.layout))||Ve.isAbstract(m.origin))&&!m.origin.isCollapsed?o.push(m):u.push(m)}}}return a}}class cj{static layout(n,r,i){const o=new uj;if(pr(i)){const g=n.children.length,m=[],v=[],w={...n};for(let x=0;x<g;x++){const k=n.children[x];if(Ve.isAbstract(k)&&k.end<n.rightNodeCount){m.push(k);continue}if(Ve.isAbstract(k)&&k.start>=n.rightNodeCount){v.push(k);continue}x<n.rightNodeCount?m.push(k):v.push(k)}w.children=m;const C=o.layout(w,dr.logic,r,{toLeft:!1,toTop:!1,rootLayoutType:i},!0);w.children=v;const P=o.layout(w,dr.logic,r,{toLeft:!0,toTop:!1,rootLayoutType:i},!0);P.right2left(),C.translate(P.x-C.x,P.y-C.y);const D=C.children.filter(x=>Ve.isAbstract(x.origin));return C.children=C.children.filter(x=>!Ve.isAbstract(x.origin)),P.children.forEach(x=>{C.children.push(x),x.parent=C}),C.children=C.children.concat(D),C.x=P.x,C.origin=n,C}const s=Ii(i),a=s?dr.indented:dr.logic,u=s?!0:Bn(i),h=Ko(i),d=Ec(i),f=o.layout(n,a,r,{toTop:h,toLeft:d,rootLayoutType:i},u);return h&&f.down2up(),d&&f.right2left(),f}}const Dc=new WeakMap;var mt;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(mt||(mt={}));const jf={[Ae.right]:[mt.right],[Ae.left]:[mt.left],[Ae.upward]:[mt.top],[Ae.downward]:[mt.bottom],[Ae.rightBottomIndented]:[mt.right,mt.bottom],[Ae.rightTopIndented]:[mt.right,mt.top],[Ae.leftBottomIndented]:[mt.left,mt.bottom],[Ae.leftTopIndented]:[mt.left,mt.top]};var no;(function(e){e.mind="mind"})(no||(no={}));const hj=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],dj=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],fj=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],gj=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],pj=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],mj=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],aA={...wS,branchColors:hj,rootFill:"#f5f5f5",rootTextColor:Yn},vj={...xS,branchColors:dj,rootFill:Yn,rootTextColor:"#FFFFFF"},yj={...CS,branchColors:fj,rootFill:"#FFFFFF",rootTextColor:Yn},wj={...ES,branchColors:gj,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},xj={...PS,branchColors:pj,rootFill:"#FFFFFF",rootTextColor:Yn},Cj={...DS,branchColors:mj,rootFill:"#FFFFFF",rootTextColor:Yn},lA=[aA,vj,yj,wj,xj,Cj],Ej={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},A0="plait-mind-plugin-key",vn=4,ll="#6698FF",vP="#AAAAAA",Vm=2,yP=8,uA=10,Rs=2,Mi=20,Ru=10,Pj=tc("#000000",.2),Dj="#6698FF",wP="white",Sj=240;var xl;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(xl||(xl={}));function Um(e,n){const r=e.getPluginOptions(A0),i=n.data.emojis.length;return{width:cA(n)*i+i*2*r.emojiPadding+(i-1)*r.spaceBetweenEmojis,height:n.height}}function cA(e){return Qe.isMind(e)?20:16}const ea=(e,n,r)=>n[r],Cl={branch:{color:vP,width:2},shape:{strokeColor:vP,strokeWidth:2}},B0={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},Tj=e=>{const n=e.rightNodeCount,r=e.children;let i=[],o=[];for(let s=0;s<r.length;s++){const a=r[s];if(Ve.isAbstract(a)&&a.end<n){i.push(a);continue}if(Ve.isAbstract(a)&&a.start>=n){o.push(a);continue}s<n?i.push(a):o.push(a)}return{leftChildren:o,rightChildren:i}},Yc=e=>{const n=ye.findParent(e);if(!n)return;const r=n.children.indexOf(e);return n.children.find(i=>Ve.isAbstract(i)&&r>=i.start&&r<=i.end)},hA=e=>{const n=ye.findParent(e);if(!n)return[];const r=n.children.indexOf(e);return n.children.filter(i=>Ve.isAbstract(i)&&i.start>r)},dA=(e,n)=>{const r=[];return n.filter(i=>!Ve.isAbstract(i)&&!Qe.isMind(i)).forEach(i=>{const o=Yc(i);if(o&&n.indexOf(o)===-1&&r.indexOf(o)===-1){const{start:s,end:a}=o;ye.getParent(i).children.slice(s,a+1).every(d=>n.indexOf(d)>-1)&&r.push(o)}}),r},fA=(e,n)=>{const r=[];return n.filter(i=>!Ve.isAbstract(i)&&!Qe.isMind(i)).forEach(i=>{const o=Yc(i);if(o&&n.indexOf(o)>0){const s=r.findIndex(a=>a.abstract===o);s===-1?r.push({abstract:o,references:[i]}):r[s].references.push(i)}}),r};function gA(e,n){const r=n.indexOf(e.references[0]),i=n.indexOf(e.references[e.references.length-1]);return{start:r,end:i}}const pA=(e,n,r=1,i=!0,o=new Map)=>{const s=dt.parent(e,n),a=n[n.length-1]!==0;let u;if(!a)u=s.children.filter(g=>Ve.isAbstract(g));else{const g=dt.get(e,Ue.previous(n));u=hA(g)}if(u.length&&u.forEach(g=>{let m=o.get(g);m||(m={start:0,end:0},o.set(g,m)),m.start=m.start+r,m.end=m.end+r}),!a)return o;const h=dt.get(e,Ue.previous(n)),d=Yc(h),f=!i&&d&&d.end===n[n.length-1]-1;if(d&&!f){let g=o.get(d);g||(g={start:0,end:0},o.set(d,g)),g.end=g.end+r}return o},mA=(e,n,r=new Map)=>(n.forEach(i=>{if(!Qe.isMind(i)){const o=hA(i).filter(a=>!n.includes(a));o.length&&o.forEach(a=>{let u=r.get(a);u||(u={start:0,end:0},r.set(a,u)),u.start=u.start-1,u.end=u.end-1});const s=Yc(i);if(s&&!n.includes(s)){let a=r.get(s);a||(a={start:0,end:0},r.set(s,a)),a.end=a.end-1}}}),r),vA=(e,n)=>!!ye.getAncestors(e,n).find(i=>Ve.isAbstract(i)),ky=(e,n)=>Ve.isAbstract(n)||vA(e,n)?wA(e,n):ea(e,n,"branchColor")||ea(e,n,"strokeColor")||xA(e,n),by=(e,n)=>ea(e,n,"branchShape")||ta.bight,yA=(e,n)=>ea(e,n,"branchWidth")||ea(e,n,"strokeWidth")||Vm,Aj=(e,n)=>pf(n.branchWidth)?Cl.branch.width:n.branchWidth,wA=(e,n)=>n.branchColor||n.strokeColor?n.branchColor||n.strokeColor:Cl.branch.color,xA=(e,n)=>{const r=O.findPath(e,n);return Bj(e,r[1])},Bj=(e,n)=>{const r=Fy(e),i=r.branchColors.length,o=n%i;return r.branchColors[o]},Fy=e=>{const r=O.getThemeColors(e).find(i=>i.mode===e.theme.themeColorMode);return r&&Ej.isMindThemeColor(r)?r:aA},Mj=(e,n)=>{if(Qe.isMind(n)){const r=Fy(e).rootFill;return n.strokeColor||r}return Ve.isAbstract(n)||vA(e,n)?n.strokeColor||Cl.shape.strokeColor:ea(e,n,"strokeColor")||xA(e,n)},M0=(e,n)=>n.strokeStyle||co.solid,Zc=(e,n)=>n.strokeWidth||(Ve.isAbstract(n)?Cl.shape.strokeWidth:B0.shape.strokeWidth),Rj=(e,n)=>{if(n.fill)return n.fill;const r=Fy(e).rootFill;return Qe.isMind(n)?r:B0.shape.fill},Sc=(e,n)=>ea(e,n,"shape")||po.roundRectangle;function Oy(e){const n=Il(e);n==null||n.edit(()=>{},r=>{const i=r;return i.key==="Enter"&&!i.shiftKey})}const A1=(e,n)=>(n!=null&&n.length?n:Me(e)).filter(i=>ye.isMindElement(e,i)),xP=e=>{const n=[];return e.forEach(r=>{jf[r].forEach(o=>{!n.includes(o)&&!n.includes(Ly(o))&&n.push(o)})}),n},kj=(e,n)=>{const r=jf[e],i=jf[n];if(!i)throw new Error(`unexpected layout: ${n} on correct layout`);return i.find(o=>r.includes(Ly(o)))},bj=(e,n)=>{const r=n===mt.left||n===mt.right;let i=Ae.standard;switch(e){case Ae.left:i=Ae.right;break;case Ae.right:i=Ae.left;break;case Ae.downward:i=Ae.upward;break;case Ae.upward:i=Ae.downward;break;case Ae.rightBottomIndented:i=r?Ae.leftBottomIndented:Ae.rightTopIndented;break;case Ae.leftBottomIndented:i=r?Ae.rightBottomIndented:Ae.leftTopIndented;break;case Ae.rightTopIndented:i=r?Ae.leftTopIndented:Ae.rightBottomIndented;break;case Ae.leftTopIndented:i=r?Ae.rightTopIndented:Ae.leftBottomIndented;break}return i},Iy=()=>Ae.standard,CP=e=>{const n=[],r=e.map(Ly);for(const i in Ae){const o=Ae[i],s=jf[o];if(s){const a=s.some(h=>e.includes(h)),u=s.some(h=>r.includes(h));a&&!u&&n.push(o)}}return n},Ly=e=>{let n=mt.right;switch(e){case mt.top:n=mt.bottom;break;case mt.bottom:n=mt.top;break;case mt.right:n=mt.left;break;case mt.left:n=mt.right;break}return n},rs=e=>e.layout||Iy(),Fj=e=>{function n(i,o){return Qe.isMind(i)?vn*12:(o&&o.isRoot(),vn*3)}function r(i,o){return Qe.isMind(i)?vn*12:vn*8.5}return{getHeight(i){return Bt.getNodeHeight(e,i)},getWidth(i){return Bt.getNodeWidth(e,i)},getHorizontalGap(i,o){const s=o&&o.layout||rs(i),a=Bn(s);return Ii(s)?vn*6:a?r(i):n(i,o)},getVerticalGap(i,o){const s=o&&o.layout||rs(i);return Ii(s)?vn*3.5:Bn(s)?n(i,o):r(i)},getVerticalConnectingPosition(i,o){if(i.shape===po.underline&&o&&Cc(o.layout))return zm.bottom},getExtendHeight(i){return 0},getIndentedCrossLevelGap(){return vn*1}}},Oj="",Ij="",Lj=e=>f0(e,xl.mindCentralText,Oj),Hj=e=>f0(e,xl.abstractNodeText,Ij),EP=(e,n)=>{const r=Lj(e),i=R0(r,{layout:Ae.right});i.type="mind";const o=Bt.getNodeWidth(e,i),s=Bt.getNodeHeight(e,i);return i.points=[[n[0]-o/2,n[1]-s/2]],i},R0=(e,n)=>{const r={id:St(),type:"mind_child",data:{topic:ca(e)},children:[]};let i;for(i in n)pf(n[i])||(r[i]=n[i]);return r},Nj=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],Gj=14,_j=18,jj=34,CA=e=>e.children.reduce((r,i)=>r+CA(i),0)+e.children.length,EA=(e,n)=>{let r=ye.findParent(n);for(;r;){if(r===e)return!0;r=ye.findParent(r)}return!1},Xu=e=>{let n=[];return e.forEach(r=>{e.some(o=>EA(o,r))||n.push(r)}),n},PP=(e,n)=>e.y>n.y,PA=e=>{const n={...e};n.id=St(),n.children=[];for(const r of e.children)n.children.push(PA(r));return n},Hy=(e,n,r)=>{const i={};Qe.isMind(n)||(Nj.forEach(s=>{i[s]=n[s]}),delete i.layout);const o=R0("",i);Te.insertNode(e,o,r),Al(e),aa(e,o),setTimeout(()=>{Oy(o)})},zj=e=>{const n=[],r=[];for(let i=0;i<e.length;i++){const o=ye.getParent(e[i]),s=r.indexOf(o);s===-1?(r.push(o),n.push([e[i]])):n[s].push(e[i])}return{parentElements:r,abstractIncludedGroups:n}},Xm=e=>{if(Qe.isMind(e))return _j;if(ye.isMindElement(null,e))return Gj;throw new Error("can not find default font-size")},$j="#6698FF80",Go=3.5,DP=10,Od=8,Tc={horizontal:{nodeAndText:vn*2.5,emojiAndText:vn*1.5},vertical:{nodeAndText:vn,nodeAndImage:vn,imageAndText:vn*1.5}},Ny={horizontal:{nodeAndText:vn*4,emojiAndText:vn*2},vertical:{nodeAndText:vn*2}},B1=(e,n)=>{const i=Qe.isMind(n)?Ny.horizontal.nodeAndText:Tc.horizontal.nodeAndText,o=Zc(e,n);return i+o},M1=(e,n)=>{const r=Qe.isMind(n),i=Zc(e,n);return(r?Ny.vertical.nodeAndText:Tc.vertical.nodeAndText)+i},SP=e=>Qe.isMind(e)?Ny.horizontal.emojiAndText:Tc.horizontal.emojiAndText,Bt={getNodeWidth(e,n){const r=B1(e,n);return ye.hasEmojis(n)?Bt.getEmojiLeftSpace(e,n)+Um(e,n).width+SP(n)+Bt.getTopicDynamicWidth(e,n)+r:r+Bt.getTopicDynamicWidth(e,n)+r},getNodeHeight(e,n){const r=f1(e,n.data.topic,{fontSize:fc,fontFamily:sl},Bt.getTopicMaxDynamicWidth(e,n)),i=Jd(e,n,r.width,r.height),o=M1(e,n);return ye.hasImage(n)?Bt.getTextTopSpace(e,n)+i.height+o:o+i.height+o},getTopicDynamicWidth(e,n){var a;const r=f1(e,n.data.topic,{fontSize:Xm(n),fontFamily:sl},Bt.getTopicMaxDynamicWidth(e,n)),i=Jd(e,n,r.width,r.width),o=n.manualWidth||i.width,s=ye.hasImage(n)?(a=n.data.image)==null?void 0:a.width:0;return Math.max(o,s)},getTopicHeight(e,n){const r=f1(e,n.data.topic,{fontSize:fc,fontFamily:sl},Bt.getTopicMaxDynamicWidth(e,n));return Jd(e,n,r.width,r.height).height},getTopicMaxDynamicWidth(e,n){var i,o;const r=Xm(n);return n.manualWidth?Math.max(n.manualWidth,ye.hasImage(n)?(i=n.data.image)==null?void 0:i.width:0):Math.max(r*jj,ye.hasImage(n)?(o=n.data.image)==null?void 0:o.width:0)},getNodeResizableMinWidth(e,n){const r=Bt.getNodeTopicMinWidth(e,n);return ye.hasImage(n)&&n.data.image.width>r?n.data.image.width:r},getNodeTopicMinWidth(e,n){return Wj(e,n)},getTextLeftSpace(e,n){const r=B1(e,n);return ye.hasEmojis(n)?Bt.getEmojiLeftSpace(e,n)+Um(e,n).width+SP(n):r},getTextTopSpace(e,n){const r=M1(e,n);return ye.hasImage(n)?Bt.getImageTopSpace(e,n)+n.data.image.height+Tc.vertical.imageAndText:r},getImageTopSpace(e,n){return Zc(e,n)+Tc.vertical.nodeAndImage},getEmojiLeftSpace(e,n){const r=e.getPluginOptions(A0);return B1(e,n)-r.emojiPadding},getEmojiTopSpace(e,n){return M1(e,n)}},Wj=(e,n)=>{const r=Xm(n);return km.getMarksByElement(n.data.topic)[Vn.fontSize]||r},Jd=(e,n,r,i)=>{const o=Bt.getNodeTopicMinWidth(e,n);return{width:r<o?o:r,height:i}};function Wt(e){const n=e.x+e.hGap;let r=e.y+e.vGap;const i=e.width-e.hGap*2,o=e.height-e.vGap*2;return{x:n,y:r,width:i,height:o}}function Vj(e,n){const r=Bt.getNodeWidth(e,n),i=Bt.getNodeHeight(e,n);return{x:n.points[0][0],y:n.points[0][1],width:r,height:i}}function DA(e,n,r){const i=Dc.get(r);return!!(i&&Ic(n[0],n[1],Wt(i))===0)}function SA(e,n){let{x:r,y:i}=Wt(ye.getNode(n));r=r+Bt.getEmojiLeftSpace(e,n);const{width:o}=Um(e,n);return{x:r,y:i,width:o,height:Bt.getNodeHeight(e,n)}}function TA(e,n){let r=Wt(n);return AA(e,r,n.origin)}function AA(e,n,r){const i=n.x+Bt.getTextLeftSpace(e,r),o=n.y+Bt.getTextTopSpace(e,r),s=Bt.getTopicDynamicWidth(e,r);return{height:Bt.getTopicHeight(e,r),width:s,x:i,y:o}}function k0(e,n){let{x:r,y:i}=Wt(ye.getNode(n));const o=n.manualWidth||n.width;r=o>n.data.image.width?r+Bt.getTextLeftSpace(e,n)+(o-n.data.image.width)/2:r+Bt.getTextLeftSpace(e,n),i=Bt.getImageTopSpace(e,n)+i;const{width:s,height:a}=n.data.image;return{x:r,y:i,width:s,height:a}}const BA=(e,n,r)=>{const i=k0(e,n),o=R.getOutlineRectangle(i,-9/2);return R.isPointInRectangle(o,r)},Uj=(e,n,r)=>{const i=k0(e,n);return CT(i,di).find(a=>R.isHit(R.getRectangleByPoints([r,r]),a.rectangle))},Xj=(e,n)=>{const r={...n};return delete r.rightNodeCount,r.type="mind_child",r.layout===Ae.standard&&delete r.layout,r},Km=e=>{const n={...e};return delete n.start,delete n.end,n},Kj=(e,n)=>{const r={...n};return De.string(r.data.topic)||(r.data.topic={children:[{text:""}]}),r==null||delete r.strokeColor,r==null||delete r.fill,r==null||delete r.shape,r==null||delete r.strokeWidth,r==null||delete r.isCollapsed,{...r,layout:r.layout??Ae.right,type:"mind"}},qj=(e,n)=>{bT(e,n),yt.getElementRef(n).getGenerator(ho.key).setFocus(n,!0)},ef=(e,n)=>{XI(e),yt.getElementRef(n).getGenerator(ho.key).setFocus(n,!1)},MA=e=>{yt.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{MA(n)})},RA=e=>{yt.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{RA(n)})},TP=(e,n)=>{vo(e,n),n?O.getBoardContainer(e).classList.add("mind-node-dragging"):O.getBoardContainer(e).classList.remove("mind-node-dragging")},Yj=(e,n,r)=>{let i=ds(e);if(Qe.isMind(e)&&pr(rs(e))){const a=kA(e,n);a&&(i=i.slice(0,e.rightNodeCount)),a||(i=i.slice(e.rightNodeCount,i.length),r=[...r,r[r.length-1]-e.rightNodeCount])}let o=r[r.length-1]!==0,s=r[r.length-1]!==((i==null?void 0:i.length)||0);return e.isCollapsed&&(s=!1,o=!1),{hasPreviousNode:o,hasNextNode:s}},kA=(e,n)=>{const r=n.target;return Qe.isMind(e)&&pr(rs(e))&&e.children.indexOf(r)!==-1&&e.children.indexOf(r)<e.rightNodeCount||Qe.isMind(r)&&pr(rs(r))&&n.detectResult==="right"},Zj=(e,n,r)=>{if(!Qe.isMind(n.origin)&&!Ve.isAbstract(n.origin)){const i=mr.getCorrectLayoutByElement(e,n==null?void 0:n.parent.origin);if(pr(i)){const s=n.parent.children.findIndex(a=>a===n)>=(n.parent.origin.rightNodeCount||0);return Si(r,[s?"right":"left"])}if(Ec(i))return Si(r,["right"]);if(Gf(i))return Si(r,["left"]);if(i===Ae.upward)return Si(r,["bottom"]);if(i===Ae.downward)return Si(r,["top"])}else{const i=mr.getCorrectLayoutByElement(e,n==null?void 0:n.origin);if(pr(i))return Si(r,["top","bottom"]);if(i===Ae.upward)return Si(r,["left","right","bottom"]);if(i===Ae.downward)return Si(r,["left","right","top"]);if(Ec(i))return Si(r,["right","top","bottom"]);if(Gf(i))return Si(r,["left","top","bottom"])}return null},Si=(e,n)=>{const r=e;return n.forEach(i=>{const o=r.findIndex(s=>s===i);o!==-1&&r.splice(o,1)}),r.length?r:null},Qj=(e,n,r,i)=>{let o=null;return kn(e,s=>{if(!ye.isMindElement(e,s)||o)return;const a=ye.getNode(s),u=Jj(a,n);u&&(o=Zj(e,a,u)),r=null;const h=i.every(d=>ez(d,a.origin));o&&h&&(r={target:a.origin,detectResult:o[0]})},sa(e)),r},Jj=(e,n)=>{const{x:r,y:i,width:o,height:s}=Wt(e),a=i+s/2,u=r+o/2,h=e.y,d=e.y+e.height,f=e.x,g=e.x+e.width,m=[];return n[1]>i&&n[1]<i+s?(n[0]>f&&n[0]<u&&m.push("left"),n[0]>u&&n[0]<g&&m.push("right"),(n[0]>r&&n[0]<u||n[0]>u&&n[0]<r+o)&&(n[1]<a?m.push("top"):m.push("bottom")),m.length?m:null):n[0]>r&&n[0]<r+o?(n[1]>h&&n[1]<a&&m.push("top"),n[1]>a&&n[1]<d&&m.push("bottom"),(n[1]>i&&n[1]<i+s||n[1]>a&&n[1]<i+s)&&(n[0]<u?m.push("left"):m.push("right")),m.length?m:null):null},ez=(e,n)=>e!==n&&!EA(e,n),tz=(e,n)=>{let r=O.findPath(e,n==null?void 0:n.target);const i=Qe.isMind(n==null?void 0:n.target)?rs(n==null?void 0:n.target):mr.getCorrectLayoutByElement(e,ye.getParent(n==null?void 0:n.target)),o=ds(n.target);return jm(i)&&((n.detectResult==="top"||n.detectResult==="bottom")&&r.push(o.length),n.detectResult==="right"&&(r=Ue.next(r))),Cc(i)&&(n.detectResult==="right"&&(Qe.isMind(n==null?void 0:n.target)&&pr(i)?r.push(n==null?void 0:n.target.rightNodeCount):r.push(o.length)),n.detectResult==="left"&&r.push(o.length),n.detectResult==="bottom"&&(r=Ue.next(r))),Ii(i)&&(Ko(i)&&n.detectResult==="top"&&(r=Ue.next(r)),Z_(i)&&n.detectResult==="bottom"&&(r=Ue.next(r)),Ec(i)&&n.detectResult==="left"&&r.push(o.length),Gf(i)&&n.detectResult==="right"&&r.push(o.length)),r};function nz(e,n){const r=Wt(n);return Gy(e,r,n.origin)}function Gy(e,n,r){const i=Rj(e,r),o=Mj(e,r),s=Zc(e,r),a=M0(e,r),u=ls(a,s),h=R.inflate(n,-s);return Bl(O.getRoughSVG(e),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:o,strokeWidth:s,fill:i,fillStyle:"solid",strokeLineDash:u},!1,B0.shape.rectangleRadius)}var Ft;(function(e){e.left="left",e.center="center",e.right="right"})(Ft||(Ft={}));var Tt;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(Tt||(Tt={}));const ur=(e,n)=>{let r=e.x,i=e.y;return n[0]===Ft.center&&(r=e.x+e.width/2),n[0]===Ft.right&&(r=e.x+e.width),n[1]===Tt.middle&&(i=e.y+e.height/2),n[1]===Tt.bottom&&(i=e.y+e.height),[r,i]},qo=(e,n)=>n?e.left?mt.left:mt.right:e.up?mt.top:mt.bottom,Sr=(e,n)=>{if(n===mt.left&&(e[0]===Ft.right?e[0]=Ft.left:e[0]===Ft.left&&(e[0]=Ft.right)),n===mt.bottom||n===mt.top){let r=Ft.center,i=Tt.middle;e[1]===Tt.top&&(r=Ft.left),e[1]===Tt.bottom&&(r=Ft.right),e[0]===Ft.left&&(i=Tt.top),e[0]===Ft.right&&(i=Tt.bottom),e[0]=r,e[1]=i}n===mt.top&&(e[1]===Tt.bottom?e[1]=Tt.top:e[1]===Tt.top&&(e[1]=Tt.bottom))};function rz(e,n,r,i=!0,o=null,s,a){const u=by(e,n.origin),h=s||yA(e,r.origin),d=o||ky(e,r.origin),f=M0(e,r.origin),g=Sc(e,r.origin)===po.underline;let m,v,w,C,P=n,D=r;const x=Wt(P),k=Wt(D);m=P.x+P.width/2,v=PP(n,r)?x.y:x.y+x.height,w=n.left?D.x+D.hGap+k.width:D.x+D.hGap,C=g?D.y+D.height-D.vGap:D.y+D.height/2;let T=PP(n,r)?n.left?[-1,-1]:[1,-1]:n.left?[-1,1]:[1,1],H=[[m,v],[m,v],[m,v],[m,C-D.hGap*3*T[1]/5],[m,C-D.hGap*T[1]/5],[m+D.hGap*T[0]/4,C],[m+D.hGap*T[0]*3/5,C],g&&i?[w+(D.width-D.hGap*2)*T[0],C]:[w,C],g&&i?[w+(D.width-D.hGap*2)*T[0],C]:[w,C],g&&i?[w+(D.width-D.hGap*2)*T[0],C]:[w,C]];const z=ls(f,h);if(u===ta.polyline){const q=[[m,v],[m,C],[w,C],g&&i?[w+(D.width-D.hGap*2)*T[0],C]:[w,C]];return Ur(q,{stroke:d,strokeWidth:h,strokeLineDash:z})}const U=gr(H,.001);return q6(U,{stroke:d,strokeWidth:h})}function iz(e,n,r,i,o=null,s,a){const u=by(e,n.origin),h=o||ky(e,r.origin),d=s||yA(e,r.origin),f=M0(e,r.origin),g=u===ta.polyline?!0:!Qe.isMind(n.origin),m=Sc(e,n.origin),w=Sc(e,r.origin)===po.underline,C=m===po.underline,P=Wt(r),D=Wt(n),x=qo(r,i),k=[Ft.right,Tt.middle],T=[Ft.left,Tt.middle];Sr(k,x),Sr(T,x),i&&C&&!Qe.isMind(n.origin)&&(k[1]=Tt.bottom),i&&w&&(T[1]=Tt.bottom);let H=ur(D,k),z=ur(P,T);const q=g?Gt(H,8,x):H;let te=g?[H,q,q]:[];const ne=(n.hGap+r.hGap)/3,le=-(n.hGap+r.hGap)/2.4;let Q=[q,Gt(q,ne,x),Gt(z,le,x),z];const J=Gt(z,P.width,x),ie=w&&i?[J,J,J]:[],N=gr([...te,...Q,...ie]),A=ls(f,d);let b;if(u===ta.polyline){const I=Gt(q,8,x),_=[...te,I,i?[I[0],z[1]]:[z[0],I[1]],z,...ie];b=Ur(_,{stroke:h,strokeWidth:d,strokeLineDash:A})}else b=O.getRoughSVG(e).curve(N,{stroke:h,strokeWidth:d,strokeLineDash:A});return f===co.dotted&&ut(b,"round"),b}function bA(e,n,r,i,o,s,a,u){return ye.isIndentedLayout(n.origin)?rz(e,n,r,o,s,a):iz(e,n,r,i,s,a)}const oz="foreign-object-emoji";class sz{constructor(n){this.board=n,this.emojiComponentRef=null}draw(n,r,i){this.destroy();const o={board:this.board,emojiItem:r,element:i,fontSize:cA(i)};this.emojiComponentRef=this.board.renderEmoji(n,o)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const ew=class ew{constructor(n){this.board=n,this.emojiGenerators=[]}drawEmojis(n){if(this.destroy(),ye.hasEmojis(n)){this.g=st(),this.g.classList.add("emojis");const r=SA(this.board,n),i=Pv(r.x,r.y,r.width,r.height);i.classList.add(oz),this.g.append(i);const o=document.createElement("div");return o.classList.add("node-emojis-container"),i.append(o),this.emojiGenerators=n.data.emojis.map(s=>{const a=new sz(this.board);return a.draw(o,s,n),a}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(n=>n.destroy()),this.emojiGenerators=[]}};ew.key="node-emojis-generator";let Ac=ew;const az=(e,n,r,i)=>{const o=yt.getElementRef(n),s=ye.getNode(n),a=st();a.classList.add("dragging","fake-node","plait-board-attached");const u={...s,x:s.x+r,y:s.y+i},h=TA(e,s),d=nz(e,u),f=Il(n).g.cloneNode(!0);if(Nu(f,h.width,h.height,h.x+r,h.y+i),a==null||a.append(d),a==null||a.append(f),ye.hasEmojis(n)){const m=o.getGenerator(Ac.key).g.cloneNode(!0),v=SA(e,n);Nu(m,v.width,v.height,v.x+r,v.y+i),a==null||a.append(m)}if(ye.hasImage(n)){const m=o.getGenerator(ho.key).g.cloneNode(!0),v=k0(e,n);Nu(m,v.width,v.height,v.x+r,v.y+i),a==null||a.append(m)}return a},lz=(e,n,r)=>{const i=n.target,o=st(),s=dt.get(e,Ue.parent(r)),a=mr.getLayoutByElement(s),u=Bn(a),{hasNextNode:h,hasPreviousNode:d}=Yj(s,n,r),f=30,g=12;let m,v,w,C;if(!d&&!h){const q=ye.getNode(s),te=Wt(q);C=qo(q,u),w=q,Qe.isMind(i)&&pr(a)&&(n.detectResult==="left"?(C=mt.left,w.left=!0):(C=mt.right,w.left=!1));const ne=[Ft.right,Tt.middle];Sr(ne,C);const le=ur(te,ne);if(Ii(a)){const Q=[Ft.center,Ko(a)?Tt.top:Tt.bottom],J=ur(te,Q);v=Gt(J,g,C),v[1]=Ko(a)?v[1]-g:v[1]+g}else v=Gt(le,f,C)}else if(!d&&h){const q=dt.get(e,r);w=ye.getNode(q);const te=Wt(w);C=qo(w,u);const ne=[Ft.left,Tt.top];Sr(ne,C);let le=-12;ye.isIndentedLayout(s)&&(le=Ko(a)?le/2+w.height-w.vGap:0),v=ur(te,ne),v=Ad(v,le,C)}else if(d&&!h){const q=dt.get(e,Ue.previous(r));w=ye.getNode(q);const te=Wt(w);C=qo(w,u);const ne=[Ft.left,Tt.bottom];Sr(ne,C);let le=g;ye.isIndentedLayout(s)&&(le=Ko(a)?-le-(w.height-w.vGap):le),v=ur(te,ne),v=Ad(v,le,C)}else{const q=dt.get(e,Ue.previous(r));w=ye.getNode(q);const te=Wt(w),ne=dt.get(e,r),le=ye.getNode(ne),Q=Wt(le),J=[Ft.left,Tt.bottom],ie=[Ft.left,Tt.top];C=qo(w,u),Sr(J,C),Sr(ie,C);const N=ur(te,J),A=ur(Q,ie);v=[(N[0]+A[0])/2,(N[1]+A[1])/2]}let P=v,D=v;const x=u?g:f,k=u?f:g;P=Ad(P,-x/2,C),D=Ad(D,x/2,C),D=Gt(D,k,C);const T=Math.min(P[0],D[0]),H=Math.min(P[1],D[1]);m={...w,x:T,y:H,width:f,height:g,hGap:ye.isIndentedLayout(s)?vn*4+(w.origin.strokeWidth||Vm):0,vGap:ye.isIndentedLayout(s)?vn:0};const z=Bl(O.getRoughSVG(e),m.x,m.y,m.x+f,m.y+g,{stroke:ll,strokeWidth:2,fill:ll,fillStyle:"solid"}),U=bA(e,ye.getNode(s),m,u,!1,ll,Vm);return o==null||o.appendChild(U),o==null||o.appendChild(z),o};var Mn;(function(e){e.start="start",e.end="end"})(Mn||(Mn={}));var Ku;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Ku||(Ku={}));function AP(e,n,r,i,o){const s=st(),a=ye.getParent(r),u=mr.getCorrectLayoutByElement(e,r),h=Bn(u),d=a.children.slice(r.start,r.end+1),f=xt(e,d,!0),g=Nn(e,f);let m=R.getOutlineRectangle(g,-3.5);o&&(m=Iu(m,o,i,h));const v=cz(n,m.x,m.y,m.x+m.width,m.y+m.height,h,{stroke:ll,strokeWidth:1,fillStyle:"solid"}),w=[Ft.center,Tt.top],C=[Ft.center,Tt.bottom],P=qo(ye.getNode(r),h);Sr(w,P),Sr(C,P);let D=ur(m,w),x=ur(m,C);const k=Gt(D,-10/2,P),T=Gt(D,DP/2,P),H=Gt(x,-10/2,P),z=Gt(x,DP/2,P),U=n.line(k[0],k[1],T[0],T[1],BP(i===Mn.start)),q=n.line(H[0],H[1],z[0],z[1],BP(i===Mn.end));return uz(e,i,h),ut(U,"round"),ut(q,"round"),s.append(U),s.append(q),s.append(v),s}function BP(e){return e?{stroke:ll,strokeWidth:4,fillStyle:"solid"}:{stroke:$j,strokeWidth:3,fillStyle:"solid"}}function uz(e,n,r){n?r?O.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):O.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(O.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),O.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function cz(e,n,r,i,o,s,a){const u=Math.abs(n-i),h=Math.abs(r-o),d=5,m=10+4*2;if(s){const v=(u-m-d*2)/2,w=h-d*2;return e.path(`M${n+d},${r}
            l${v},0
            m${m},0
            l${v},0
            a${d},${d},0,0,1,${d},${d}
            l0,${w}
            a${d},${d},0,0,1,-${d},${d}
            l-${v},0
            m-${m},0
            l-${v},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${w}
            a${d},${d},0,0,1,${d},-${d}`,a)}else{const v=(h-m-d*2)/2,w=u-d*2;return e.path(`M${n+d},${r}
            l${w},0
            a${d},${d},0,0,1,${d},${d}
            l0,${v}
            m0,${m}
            l0,${v}
            a${d},${d},0,0,1,-${d},${d}
            l-${w},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${v}
            m0,-${m}
            l0,-${v}
            a${d},${d},0,0,1,${d},-${d}`,a)}}const tw=class tw extends Fr{canDraw(n,r){return!!r.selected}draw(n,r){const i=st(),o=ye.getNode(n),s=Wt(o),a=Nn(this.board,s),u=Zc(this.board,n),h=Jt,d=R.inflate(a,h),f=Bl(O.getRoughSVG(this.board),d.x,d.y,d.x+d.width,d.y+d.height,{stroke:ll,strokeWidth:h,fill:""},!0,B0.shape.rectangleRadius+(h+u)/2);return Ve.isAbstract(n)&&(this.abstractOutlineG=AP(this.board,O.getRoughSVG(this.board),n),i.append(this.abstractOutlineG),f.classList.add("abstract-element")),i.appendChild(f),i.classList.add(Oc),i}updateAbstractOutline(n,r,i){const o=AP(this.board,O.getRoughSVG(this.board),n,r,i);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(o),this.abstractOutlineG=o)}};tw.key="mind-node-active";let is=tw;const Iu=(e,n,r,i)=>i?r===Mn.start?{...e,y:n,height:e.height+e.y-n}:{...e,height:n-e.y}:r===Mn.start?{...e,x:n,width:e.width+e.x-n}:{...e,width:n-e.x},hz=(e,n,r,i,o,s)=>{const a=ye.getNode(i),{start:u,end:h}=Zo(a.origin,o),d=r[u],f=r[h];if(n===Mn.start){const g=r.filter(C=>Ve.isAbstract(C)&&C.end<i.start);let m;if(g.length){const C=g.map(P=>{const{end:D}=Zo(P,o);return D}).sort((P,D)=>D-P)[0];m=r[C+1]}else m=r[0];const v=xt(e,[m],!0),w=xt(e,[f],!1);return s?{max:w.y-Go,min:v.y-Go}:{max:w.x-Go,min:v.x-Go}}else{const g=r.filter(C=>Ve.isAbstract(C)&&C.start>i.end);let m;if(g.length){const C=g.map(P=>{const{start:D}=Zo(P,o);return D}).sort((P,D)=>P-D)[0];m=r[C-1]}else{const C=r.filter(P=>!Ve.isAbstract(P));m=r[C.length-1]}const v=xt(e,[m],!0),w=xt(e,[d],!1);return s?{max:v.y+v.height+Go,min:w.y+w.height+Go}:{max:v.x+v.width+Go,min:w.x+w.width+Go}}},FA=(e,n,r)=>{const i=mr.getCorrectLayoutByElement(e,n),o=Bn(i),a=ye.getParent(n).children.slice(n.start,n.end+1);let u=xt(e,a,!0);u=R.getOutlineRectangle(u,-3.5);const h=MP(u,o,Mn.start),d=MP(u,o,Mn.end),f=R.getRectangleByPoints([r,r]);if(R.isHit(f,h))return Mn.start;if(R.isHit(f,d))return Mn.end},MP=(e,n,r)=>{let i;if(r===Mn.start){const o=n?e.y:e.x;i=Iu(e,o+Od/2,Mn.end,n),i=Iu(i,o-Od/2,r,n)}else{const o=n?e.y+e.height:e.x+e.width;i=Iu(e,o-Od/2,Mn.start,n),i=Iu(i,o+Od/2,r,n)}return i};function dz(e,n,r,i){const o=n.filter(f=>!Ve.isAbstract(f)),s=o.map(f=>xt(e,[f],!1)),a=xt(e,[o[0]],!0),u={x:a.x-a.width,y:a.y-a.height,width:a.width,height:a.height},h=xt(e,[o[o.length-1]],!0),d={x:h.x+h.width,y:h.y+h.height,width:h.width,height:h.height};s.push(d),s.unshift(u);for(let f=0;f<s.length-1;f++){const g=i?s[f].y:s[f].x,m=i?s[f].height:s[f].width;if(r>=g+m/2&&r<=s[f+1][i?"y":"x"]+s[f+1][i?"height":"width"]/2)return f-1}return 0}function fz(e,n,r){let i;const o=Me(e).filter(s=>Ve.isAbstract(s)).find(s=>(i=FA(e,s,r),i));return n===o||(n&&(yt.getElementRef(n).getGenerator(is.key).updateAbstractOutline(n),n=void 0),o&&(n=o,yt.getElementRef(n).getGenerator(is.key).updateAbstractOutline(n,i))),n}const OA=e=>{const n=ye.findParent(e);if(n){const r=n.children.findIndex(i=>i.id===e.id);if(Qe.isMind(n)&&rs(n)===Ae.standard&&n.rightNodeCount&&r<=n.rightNodeCount-1)return!0}return!1},IA=(e,n,r,i=[])=>{let o=i.findIndex(a=>Ue.equals(a.path,n));const s=dt.get(e,n);return o===-1?i.push({path:n,rightNodeCount:s.rightNodeCount+r}):i[o].rightNodeCount+=r,i},LA=(e,n,r=[])=>(n.forEach(i=>{if(OA(i)){const o=ye.getParent(i),s=O.findPath(e,o);let a=r.findIndex(u=>Ue.equals(u.path,s));a===-1?r.push({path:s,rightNodeCount:o.rightNodeCount-1}):r[a].rightNodeCount-=1}}),r);function _y(e,n){const r=ds(n);return O.findPath(e,n).concat(r.length)}function gz(e,n){const r=O.findPath(e,n);return K.next(r)}const jy=(e,n)=>{const r=ye.getAncestors(e,n);r.unshift(n);const i=r[r.length-1];let o=rs(i);if(Qe.isMind(n))return o;const s=ye.getNode(n);let a=o;o===Ae.standard&&(a=s.left?Ae.left:Ae.right);let u=null;const h=r.find(d=>d.layout||Ve.isAbstract(d));if(h)if(Ve.isAbstract(h)){const d=ye.getParent(h),f=jy(e,d);u=Ry(f)}else u=h==null?void 0:h.layout;if(u===Ae.standard||!u)return a;{const d=kj(a,u);return d?bj(u,d):u}},HA=(e,n)=>{const r=[];n.layout&&r.unshift(jy(e,n));let i=ye.findParent(n);for(;i;)i.layout&&r.unshift(i.layout),i=ye.findParent(i);return r},pz=(e,n)=>{const r=ye.findParent(n);if(r){const i=HA(e,r);if(i[0]===Ae.standard){const d=ye.getNode(n);i[0]=d.left?Ae.left:Ae.right}const o=xP(i);let s=CP(o);const a=[i[i.length-1]],u=xP(a),h=CP(u);return s=s.filter(d=>h.some(f=>f===d)),s}},qm=e=>{const n=e.layout;if(n)return n;const r=!Qe.isMind(e)&&ye.getParent(e);return Ve.isAbstract(e)&&r?Ry(qm(r)):r?qm(r):Iy()},mr={getAvailableSubLayoutsByElement:pz,getBranchLayouts:HA,getLayoutByElement:qm,getCorrectLayoutByElement:jy},mz="mindmap",Qe={isMind:e=>e.type==="mind"||e.type===mz},ye={hasLayout(e,n){return mr.getLayoutByElement(e)===n},isIndentedLayout(e){const n=mr.getLayoutByElement(e);return Ii(n)},isMindElement(e,n){return!!(n.data&&n.data.topic||n.type==="mind_child")},getParent(e){if(Qe.isMind(e))throw new Error("mind root node can not get parent");return _s.get(e)},findParent(e){return Qe.isMind(e)?void 0:_s.get(e)},getRoot(e,n){const r=O.findPath(e,n);return dt.get(e,r.slice(0,1))},getAncestors(e,n){const r=O.findPath(e,n),i=[];for(const o of Ue.ancestors(r,{reverse:!0})){const s=dt.get(e,o);s&&!O.isBoard(s)&&i.push(s)}return i},getNode(e){const n=Dc.get(e);if(!n)throw new Error(`can not get node from ${JSON.stringify(e)}`);return n},findParentNode(e){if(Qe.isMind(e))return;const n=ye.getParent(e);return ye.getNode(n)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var po;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(po||(po={}));var ta;(function(e){e.bight="bight",e.polyline="polyline"})(ta||(ta={}));function vz(e,n,r){const o=Aj(e,n.origin),s=wA(e,n.origin),a=M0(e,n.origin),u=n.parent,h=by(e,n.origin),d=Wt(n);let f=u.children.slice(n.origin.start,n.origin.end+1).map(te=>te.origin);const g=xt(e,f,!0),m=qo(n,r),v=[Ft.right,Tt.top],w=[Ft.right,Tt.bottom],C=[Ft.left,Tt.middle];Sr(v,m),Sr(w,m),Sr(C,m);let P=ur(g,v),D=ur(g,w),x=ur(d,C),k=NT(x,P,r)-15*2;P=Gt(P,15,m);let T=Gt(P,k,m);D=Gt(D,15,m);let H=Gt(D,k,m),z=Gt(x,-15,m);const U=ls(a,o);if(h===ta.polyline){const te=st(),ne=Ur([P,T,z,H,D],{stroke:s,strokeWidth:o}),le=Ur([x,z],{stroke:s,strokeWidth:o,strokeLineDash:U});return te.appendChild(ne),te.appendChild(le),te}return O.getRoughSVG(e).path(`M${P[0]},${P[1]} Q${T[0]},${T[1]} ${z[0]},${z[1]} Q${H[0]},${H[1]} ${D[0]},${D[1]} M${x[0]},${x[1]} L${z[0]},${z[1]}`,{stroke:s,strokeWidth:o,strokeLineDash:U})}const NA=(e,n)=>{n.forEach((r,i)=>{const o=i.start+r.start,s=i.end+r.end,a=O.findPath(e,i);o>s?Te.removeNode(e,a):Te.setNode(e,{start:o,end:s},a)})},GA=(e,n)=>{const r=n.rightNodeCount,i=n.children.find(o=>Ve.isAbstract(o)&&o.end>=r&&o.start<r);if(i){const o=O.findPath(e,i);Te.setNode(e,{end:r-1},o)}},yz=(e,n)=>{let r=Xu(n);const{parentElements:i,abstractIncludedGroups:o}=zj(r);o.forEach((s,a)=>{const u=i[a];wz(e,u,s)})},wz=(e,n,r)=>{const i=r.map(u=>n.children.indexOf(u)).sort((u,h)=>u-h),o=n==null?void 0:n.rightNodeCount,s=i[0],a=i[i.length-1];if(pr(mr.getLayoutByElement(n))&&o&&s<o&&a>=o){const u=n.children.length,h=[...O.findPath(e,n),u],d=i.filter(g=>g>=o),f=i.filter(g=>g<o);R1(e,h,f[0],f[f.length-1]),R1(e,Ue.next(h),d[0],d[d.length-1])}else{const u=[...O.findPath(e,n),n.children.length];R1(e,u,s,a)}},R1=(e,n,r,i)=>{const o=Hj(e),s=R0(o,{strokeWidth:Cl.branch.width,branchWidth:Cl.branch.width});s.start=r,s.end=i,Te.insertNode(e,s,n),Al(e),aa(e,s)},xz=(e,n,r)=>{const i={data:{...n.data}};r&&(i.data.topic=r);const o=O.findPath(e,n);Te.setNode(e,i,o)},Cz=(e,n,r)=>{const i=O.findPath(e,n),{width:o}=Jd(e,n,r,0),s={manualWidth:o,data:{...n.data,topic:{...n.data.topic}}};Te.setNode(e,s,i)},_A=(e,n,r)=>{const i=e.pathRef(r);n.forEach(o=>{i.current&&Te.insertNode(e,o,i.current)}),i.unref()},Ez=(e,n,r,i)=>{var u;const o=dt.get(e,K.parent(i)),s=[...K.parent(i),(u=o.children)==null?void 0:u.length],a=n.map(h=>{const{start:d,end:f}=gA(h,r);return{...h.abstract,start:d+i[i.length-1],end:f+i[i.length-1]}});_A(e,a,s)},jA=(e,n)=>{n.forEach(r=>{Te.setNode(e,{rightNodeCount:r.rightNodeCount},r.path)})},Pz=(e,n)=>{if(ye.isMindElement(e,n)){u0(e,n);const r=O.findPath(e,n);if(n.isCollapsed){const i={isCollapsed:!1};li.withoutSaving(e,()=>{Te.setNode(e,i,r)})}Hy(e,n,_y(e,n))}},Dz=(e,n)=>{if(ye.isMindElement(e,n)&&!Qe.isMind(n)&&!Ve.isAbstract(n)){const r=O.findPath(e,n);if(OA(n)){const o=IA(e,r.slice(0,1),1);jA(e,o)}const i=pA(e,K.next(r));NA(e,i),Hy(e,n,gz(e,n))}},Sz=(e,n)=>{Te.insertNode(e,n,[e.children.length]),Te.addSelectionWithTemporaryElements(e,[n])},Tz=(e,n,r)=>{const o=[...n.data.emojis||[]];o.push(r);const s={data:{...n.data,emojis:o}},a=O.findPath(e,n);Te.setNode(e,s,a)},Az=(e,n,r)=>{const i=n.data.emojis.filter(a=>a!==r),o={data:{topic:n.data.topic}};ye.hasImage(n)&&(o.data.image=n.data.image),i.length>0&&(o.data.emojis=i);const s=O.findPath(e,n);Te.setNode(e,o,s)},Bz=(e,n,r,i)=>{const o={data:{...n.data}},s=n.data.emojis.map(u=>u===r?i:u);o.data.emojis=s;const a=O.findPath(e,n);Te.setNode(e,o,a)},Mz=(e,n)=>{ef(e,n);const r={data:{...n.data,topic:{...n.data.topic}}};delete r.data.image;const i=O.findPath(e,n);Te.setNode(e,r,i)},Rz=(e,n,r)=>{const i={data:{...n.data,image:r,topic:{...n.data.topic}}},o=O.findPath(e,n);Te.setNode(e,i,o)},zA=(e,n,r)=>{var o;const i=dt.get(e,r);i&&n&&((o=i.children)==null||o.forEach((s,a)=>{var u;s.layout&&((Cc(n)&&jm(s.layout)||jm(n)&&Cc(s.layout))&&Te.setNode(e,{layout:null},[...r,a]),(u=s.children)!=null&&u.length&&zA(e,n,[...r,a]))}))},kz=(e,n)=>{const r=(i,o)=>{if(ye.isMindElement(e,i)){zA(e,n,o);const s=dt.get(e,o);if(Qe.isMind(s)&&pr(n)){let a={rightNodeCount:s.children.length/2};Te.setNode(e,a,o),GA(e,s)}Te.setNode(e,{layout:n},o)}};zc.setProperty(e,{},{callback:r})},bz=(e,n)=>{zc.setProperty(e,{shape:n})},Fz=(e,n)=>{zc.setProperty(e,{branchShape:n})},Oz=(e,n)=>{zc.setProperty(e,{branchWidth:n})},Iz=(e,n)=>{zc.setProperty(e,{branchColor:n})},hn={setLayout:kz,setShape:bz,setBranchShape:Fz,setBranchWidth:Oz,setBranchColor:Iz,setTopic:xz,setNodeManualWidth:Cz,addEmoji:Tz,removeEmoji:Az,replaceEmoji:Bz,insertAbstract:yz,setAbstractsByRefs:NA,setAbstractByStandardLayout:GA,insertNodes:_A,insertAbstractNodes:Ez,setRightNodeCountByRefs:jA,removeImage:Mz,setImage:Rz,insertChildNode:Pz,insertSiblingNode:Dz,insertMind:Sz};class Lz extends Fr{constructor(n){super(n,{prepend:!0})}canDraw(n,r){return Sc(this.board,n)===po.roundRectangle}draw(n,r){const i=Wt(r.node);return Gy(this.board,i,r.node.origin)}}const nw=class nw extends Fr{canDraw(n,r){return!!((r!=null&&r.isHovered||r!=null&&r.isHoveredCollapseArea||r!=null&&r.isHoveredAddArea)&&Ym(this.board)||r!=null&&r.isSelected&&Nz(this.board,n)&&Ym(this.board)||n.isCollapsed)}draw(n,r){const i=st(),o=ky(this.board,n),s=WA(this.board,n),a=VA(this.board,n,s),u=Gt(a[1],Mi/2,s),h=n.children.length>0,d=!n.isCollapsed&&(js(this.board,n)||!!(r!=null&&r.isHovered)||!!(r!=null&&r.isHoveredCollapseArea)||!!(r!=null&&r.isHoveredAddArea)),f=d&&h&&!Qe.isMind(n),g=d&&!O.isReadonly(this.board),m=d&&$A(n,u,s)||null;return this.toggleCollapseOrAdd(u,m,o,i,f,g,!!(r!=null&&r.isHoveredAddArea),!!(r!=null&&r.isShowCollapseAnimation),!!(r!=null&&r.isShowAddAnimation)),this.toggleExpandBadge(n,a,u,o,i,!!n.isCollapsed,!!(r!=null&&r.isHoveredExpandArea)),i}toggleCollapseOrAdd(n,r,i,o,s,a,u,h,d){var f;if((f=this.collapseOrAddG)==null||f.remove(),!(!s&&!a)){if(this.collapseOrAddG=st(),s){const g=st();this.collapseOrAddG.appendChild(g),g.classList.add("collapse-button"),h&&g.classList.add("animated");const m=O.getRoughSVG(this.board).circle(n[0],n[1],Mi,{fill:"#fff",stroke:i,strokeWidth:Rs,fillStyle:"solid"}),v=Gt(n,-10/2),w=Gt(n,Ru/2),C=O.getRoughSVG(this.board).line(v[0],v[1],w[0],w[1],{fill:"#fff",stroke:i,strokeWidth:Rs,fillStyle:"solid"});g.appendChild(m),g.appendChild(C),ut(C,"round")}if(a&&r){const g=st();this.collapseOrAddG.appendChild(g),g.classList.add("add-button"),d&&g.classList.add("animated");const m=O.getRoughSVG(this.board).circle(r[0],r[1],Mi+Rs,{fill:u?Dj:Pj,stroke:Bm,fillStyle:"solid"}),v=[r[0]-Ru/2,r[1]],w=[r[0]+Ru/2,r[1]],C=[r[0],r[1]-Ru/2],P=[r[0],r[1]+Ru/2],D=O.getRoughSVG(this.board).line(v[0],v[1],w[0],w[1],{stroke:wP,strokeWidth:Rs});ut(D,"round");const x=O.getRoughSVG(this.board).line(C[0],C[1],P[0],P[1],{stroke:wP,strokeWidth:Rs});ut(x,"round"),g.appendChild(m),g.appendChild(D),g.appendChild(x)}o.appendChild(this.collapseOrAddG)}}toggleExpandBadge(n,r,i,o,s,a,u){var x;if((x=this.expandG)==null||x.remove(),!a)return;this.expandG=st(),this.expandG.classList.add("expanded-button");const h=r[1],d=O.getRoughSVG(this.board).line(r[0][0],r[0][1],h[0],h[1],{fill:o,stroke:o,fillStyle:"solid",strokeWidth:Rs}),f=u?tc(o,.4):tc(o,.2),g=O.getRoughSVG(this.board).circle(i[0],i[1],Mi+Rs,{fill:f,stroke:Bm,fillStyle:"solid"}),m=CA(n);let v=`${m}`,w=i[1]+4.5;m>=99&&(v="...",w=i[1]+1);const{width:C,height:P}=$c(this.board,ca(v),{fontSize:Number(kf.fontSize12),fontFamily:sl}),D=B6(i[0]-C/2,w,o,`${v}`);D.setAttribute("style",`font-size: ${Number(kf.fontSize12)}px;`),this.expandG.appendChild(d),this.expandG.appendChild(g),this.expandG.appendChild(D),s.appendChild(this.expandG)}};nw.key="mind-node-more";let Bc=nw;const Hz=(e,n)=>{const r=WA(e,n),[i,o]=VA(e,n,r),s=Gt(o,Mi/2,r),a=$A(n,s,r);return{collapseCenter:s,addCenter:a}},$A=(e,n,r)=>{var o;let i=n;return((o=e.children)==null?void 0:o.length)>0&&!Qe.isMind(e)&&(i=Gt(i,uA+Mi,r)),i},WA=(e,n)=>{const r=ye.getNode(n),i=mr.getLayoutByElement(n),o=Bn(i);let s=qo(r,o);return Ii(i)&&(s=Ko(i)?mt.top:mt.bottom),s},VA=(e,n,r)=>{const i=ye.getNode(n),o=Sc(e,n)===po.underline,s=Wt(i);let a=[Ft.right,Tt.middle];Sr(a,r);const u=mr.getLayoutByElement(n);Bn(u)&&o&&!Qe.isMind(n)&&(a[1]=Tt.bottom);let d=ur(s,a);const f=Gt(d,uA,r);return[d,f]},Nz=(e,n)=>{const i=Me(e).filter(o=>ye.isMindElement(e,o)).reverse();return i[i.length-1]===n},Ym=e=>!eo(e)&&!_n(e)&&!kl(e)&&!fl(e);class UA extends us{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(n,r)=>r.origin.id}initializeGenerator(){this.nodeShapeGenerator=new Lz(this.board),this.nodeEmojisGenerator=new Ac(this.board),this.activeGenerator=new is(this.board),this.nodeMoreGenerator=new Bc(this.board),this.imageGenerator=new ho(this.board,{getRectangle:i=>k0(this.board,i),getImageItem:i=>i.data.image});const n=(this.board.getPluginOptions(Am)||{}).textPlugins,r=new Wc(this.board,{getRectangle:()=>TA(this.board,this.node),onChange:i=>{hn.setTopic(this.board,this.element,i.newText)},getMaxWidth:()=>Bt.getTopicMaxDynamicWidth(this.board,this.element),textPlugins:n||[]});this.getRef().addGenerator(is.key,this.activeGenerator),this.getRef().addGenerator(Ac.key,this.nodeEmojisGenerator),this.getRef().addGenerator(ho.key,this.imageGenerator),this.getRef().addGenerator(Bc.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(r),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=ye.getNode(this.element),this.index=rl.get(this.element)||0,this.roughSVG=O.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),Qe.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(n,r){const i=ye.getNode(n.element),o=R.isEqual(this.node,i);if(this.node=i,!o||n.element!==r.element||n.hasThemeChanged)this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!ye.hasImage(r.element)&&ye.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),ye.hasImage(r.element)&&ye.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),r.element,n.element),ye.hasImage(r.element)&&!ye.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const s=n.selected===r.selected,a=n.parent===r.parent;(!s||n.selected)&&(this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),a||this.drawLink()}}drawEmojis(){const n=this.nodeEmojisGenerator.drawEmojis(this.element);n&&this.getElementG().append(n)}drawLink(){if(Qe.isMind(this.element))return;const n=ye.getParent(this.element),r=ye.getNode(n);this.linkLineG&&this.linkLineG.remove();const i=mr.getLayoutByElement(n);Ve.isAbstract(this.node.origin)?this.linkLineG=vz(this.board,this.node,Bn(i)):this.linkLineG=bA(this.board,r,this.node,Bn(i)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),Dc.get(this.element)===this.node&&Dc.delete(this.element),this.getRef().destroyTextManage()}}class Gz extends UA{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(n){n.element!==this.element&&this.initialized&&this.updateMindLayout(n.element)}updateMindLayout(n=this.element){const r=n.layout||Iy();this.root=cj.layout(n,Fj(this.board),r),this.updateMindNodeLocation(n)}updateMindNodeLocation(n){const{x:r,y:i,hGap:o,vGap:s}=this.root,a=r+o,u=i+s;kn(this.root,h=>{h.x=h.x-a+n.points[0][0],h.y=h.y-u+n.points[0][1],Dc.set(h.origin,h)})}}const _z=5,jz=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=[],s=[],a,u,h,d=null,f;return e.pointerDown=g=>{if(O.isReadonly(e)||O.hasBeenTextEditing(e)||!O.isPointer(e,gt.selection)||!bi(g)){n(g);return}const m=Ze(e,Je(e,g.x,g.y)),v=Me(e),w=Ni(e,m);if(w&&ye.isMindElement(e,w)&&!Qe.isMind(w)&&!Ve.isAbstract(w)){const C=v.filter(D=>ye.isMindElement(e,D)&&!Qe.isMind(D)&&!Ve.isAbstract(D));v.length>0&&v.includes(w)?(o=C,a=m):(o=[w],a=m)}o.length&&(s=dA(e,o)),n(g)},e.pointerMove=g=>{if(!e.options.readonly&&o.length&&a){const m=Ze(e,Je(e,g.x,g.y));if(Ke(a[0],a[1],m[0],m[1])<_z)return;TP(e,!0),h==null||h.remove();const w=Ze(e,Je(e,g.x,g.y));d=Qj(e,w,d,[...o,...s]),d!=null&&d.target&&(f=tz(e,d),h=lz(e,d,f),O.getHost(e).appendChild(h));const C=m[0]-a[0],P=m[1]-a[1];u==null||u.remove(),u=st(),[...o,...s].forEach(D=>{MA(D)}),o.forEach(D=>{const x=az(e,D,C,P);u==null||u.appendChild(x)}),O.getHost(e).appendChild(u);return}r(g)},e.globalPointerUp=g=>{const m=Xu(o);if(!e.options.readonly&&m.length){if(m.push(...s),kl(e)&&m.forEach(v=>{RA(v)}),d){const v=e.pathRef(f),w=Ue.hasPrevious(f)&&e.pathRef(Ue.previous(f)),C=e.pathRef(O.findPath(e,d.target));let P=fA(e,m);const D=m.filter(ne=>!P.some(le=>le.abstract===ne)).map(ne=>Ve.isAbstract(ne)?Km(ne):ne);if(f[f.length-1]!==0){const ne=dt.get(e,Ue.previous(f)),le=Yc(ne);if(le&&le.end!==f[f.length-1]-1){const J=P.map(ie=>Km(ie.abstract));D.push(...J),P=[]}}const k=mA(e,m);pA(e,f,D.length,!1,k),hn.setAbstractsByRefs(e,k);let T=LA(e,m);const H=dt.get(e,Ue.parent(f));kA(H,d)&&C.current&&(T=IA(e,C.current.slice(0,1),D.length,T)),hn.setRightNodeCountByRefs(e,T),Hv.removeElements(e,m);let U=v.current;const q=Ue.parent(v.current||f);if(!U){const ne=w&&w.unref();if(ne)U=Ue.next(ne);else{const le=dt.get(e,q),Q=ds(le);U=[...q,Q.length||0]}}hn.insertNodes(e,D,U),P.length&&hn.insertAbstractNodes(e,P,D,U),C.current&&v.current&&Ue.isAncestor(C.current,v.current)&&d.target.isCollapsed&&Te.setNode(e,{isCollapsed:!1},C.current),C.unref(),v.unref();let te=[];kn(e,ne=>{o.some(Q=>Q.id===ne.id)&&te.push(ne)}),Te.addSelectionWithTemporaryElements(e,te)}TP(e,!1),o=[],u==null||u.remove(),u=void 0,h==null||h.remove(),h=void 0,d=null}i(g)},e},zz=e=>{const n=e,{pointerDown:r,pointerMove:i,pointerUp:o}=e;let s,a,u,h;return e.pointerDown=d=>{if(!bi(d)||O.isReadonly(e)){r(d);return}const f=Me(e).filter(m=>Ve.isAbstract(m)),g=Ze(e,Je(e,d.x,d.y));if(s=f.find(m=>(a=FA(e,m,g),a)),s){n!=null&&n.onAbstractResize&&n.onAbstractResize(Ku.start);return}r(d)},e.pointerMove=d=>{Me(e);const f=Ze(e,Je(e,d.x,d.y));if(u=fz(e,u,f),a&&s){const g=mr.getCorrectLayoutByElement(e,s),m=Bn(g),v=ye.getParent(s);let w=v.children;const C=mr.getLayoutByElement(v);if(pr(C)){const te=v.rightNodeCount,{leftChildren:ne,rightChildren:le}=Tj(v);s.end<te&&(w=le),s.start>=te&&(w=ne)}n!=null&&n.onAbstractResize&&n.onAbstractResize(Ku.resizing);const P=m?f[1]:f[0],D=ye.getNode(v),x=hz(e,a,w,s,D,m),k=Math.min(x.max,Math.max(x.min,P));let T=dz(e,w,k,m);if(a===Mn.start&&T+1===s.start||a===Mn.end&&T===s.end)h=void 0;else{if(pr(D.layout)){const te=D.origin.rightNodeCount;s.start>=te&&(T+=te)}h=a===Mn.start?{start:T+1}:{end:T}}const U=yt.getElementRef(s).getGenerator(is.key),q=nc(e,[k,k]);U.updateAbstractOutline(s,a,m?q[1]:q[0])}i(d)},e.pointerUp=d=>{if(a=void 0,s){if(n!=null&&n.onAbstractResize&&n.onAbstractResize(Ku.end),h){const f=O.findPath(e,s);Te.setNode(e,h,f)}else yt.getElementRef(s).getGenerator(is.key).updateAbstractOutline(s);s=void 0;return}o(d)},e},$z=e=>{const n=e;return e.setPluginOptions(A0,{spaceBetweenEmojis:4,emojiPadding:0}),n},Wz="m",Vz=e=>{const n=e,{keyDown:r,pointerDown:i,pointerMove:o,pointerUp:s}=e;let a=null,u=null;n.pointerDown=d=>{const f=O.isPointer(e,no.mind);if(!O.isReadonly(e)&&ua(e)&&f){const g=Ze(e,Je(e,d.x,d.y)),m=EP(n,g);hn.insertMind(e,m),Pt.updatePointerType(e,gt.selection);return}i(d)},n.pointerMove=d=>{if(O.isReadonly(e)){o(d);return}const f=O.isPointer(e,no.mind);v0(e)&&f?mi(e,"with-mind-create",()=>{let g=O.getMovingPointInBoard(e);if(g){g=Ze(n,Je(e,g[0],g[1])),u=EP(n,g);const m=Vj(n,u),v=Gy(e,m,u),w=AA(n,m,u);if(a)a.textManage.updateRectangle(w),a.nodeG.remove(),a.nodeG=v,a.g.append(v),a.g.append(a.textManage.g);else{const C=new Wc(e,{getRectangle:()=>w});C.draw(u.data.topic),a={g:st(),nodeG:v,textManage:C},a.g.classList.add("root"),a.g.setAttribute("plait-mind-temporary","true"),O.getHost(e).append(a.g),a.g.append(a.nodeG,C.g)}}}):h(),o(d)},n.pointerUp=d=>{if(u){hn.insertMind(e,u),Pt.updatePointerType(e,gt.selection),u=null,h();return}s(d)},e.keyDown=d=>{if(O.isReadonly(e)||Me(e).length>0){r(d);return}if(d.key===Wz&&!O.isPointer(e,no.mind)){Pt.updatePointerType(e,no.mind),lr(e,wn.drawing),d.preventDefault();return}r(d)};function h(){a&&(a.textManage.destroy(),a.g.remove(),a=null)}return n},Uz=e=>{const n=e,{keyDown:r,globalKeyDown:i}=n;return n.keyDown=o=>{const s=Me(n),a=s.length===1,u=s.length===1&&ye.isMindElement(n,s[0]),h=s[0];if($I(o)&&u&&!Qe.isMind(h)&&h.children&&h.children.length>0){Te.setNode(n,{isCollapsed:!h.isCollapsed},O.findPath(n,h));return}if(!O.isReadonly(n)){if(WI(o)&&u){o.preventDefault(),hn.insertChildNode(n,h);return}if(VI(o)&&u&&!Qe.isMind(h)&&!Ve.isAbstract(h)){hn.insertSiblingNode(n,h);return}if(!ty(o)&&!ry(o)&&!ny(o)&&a&&ye.isMindElement(n,h)){o.preventDefault(),Oy(h);return}}r(o)},n.globalKeyDown=o=>{if(O.isFocus(n)&&O.hasBeenTextEditing(n)&&ft.isHotkey("mod+z",o)){const{history:s}=n,{undos:a}=s,u=a.length>0?a[a.length-1][0]:void 0;u&&u.type==="insert_node"&&ye.isMindElement(n,u.node)&&Il(u.node).isEditing&&n.undo()}i(o)},n},Xz=e=>{const{pointerMove:n,pointerLeave:r,pointerUp:i}=e;let o=null;e.pointerMove=a=>{Ym(e)&&mi(e,"with-mind-node-hover-hit-test",()=>{o&&!yt.hasMounted(o.target)&&(o=null);const u=RP(e,a.x,a.y);o&&u&&o.target===u.target||(o&&s({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),u?(s(u),o?o.target=u.target:o=u):o=null)}),n(a)},e.pointerUp=a=>{if(o&&(o.isHoveredCollapseArea||o.isHoveredExpandArea)){const h={isCollapsed:!o.target.isCollapsed},d=O.findPath(e,o.target);Te.setNode(e,h,d),setTimeout(()=>{const f=RP(e,a.x,a.y);f?(s(f),o=f):o=null},0);return}if(o&&o.isHoveredAddArea&&!O.isReadonly(e)){if(o){const u=_y(e,o.target);Hy(e,o.target,u)}return}i(a)};const s=a=>{const u=yt.getElementRef(a.target),h=u==null?void 0:u.getGenerator(Bc.key);if(h){const d=yt.getElementG(a.target);h.processDrawing(a.target,d,{isHovered:a.isHovered,isHoveredCollapseArea:a.isHoveredCollapseArea,isHoveredExpandArea:a.isHoveredExpandArea,isSelected:js(e,a.target),isHoveredAddArea:a.isHoveredAddArea,isShowCollapseAnimation:(a.isHovered||a.isHoveredCollapseArea)&&!js(e,a.target),isShowAddAnimation:(a.isHovered||a.isHoveredAddArea)&&!js(e,a.target)})}};return e.pointerLeave=a=>{o&&s({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),o=null,r(a)},e},RP=(e,n,r)=>{let i=null,o=!1,s=!1,a=!1,u=!1;const h=Ze(e,Je(e,n,r));return kn(e,d=>{if(i||!ye.isMindElement(e,d))return;const f=Qe.isMind(d),g=DA(e,h,d);let m=!1,v=!1;const{collapseCenter:w,addCenter:C}=Hz(e,d),P=!f&&R.getRectangleByCenterPoint(w,Mi,Mi);m=P&&R.isHit(R.getRectangleByPoints([h,h]),P);const D=R.getRectangleByCenterPoint(C,Mi,Mi);v=R.isHit(R.getRectangleByPoints([h,h]),D),(g||m||v)&&(o=g,d.children.length>0&&(d.isCollapsed?a=m:s=m),u=v,i=d)},sa(e),!0),i?{target:i,isHovered:o,isHoveredCollapseArea:s,isHoveredExpandArea:a,isHoveredAddArea:u}:null},Kz=e=>{const{keyDown:n,pointerUp:r,globalPointerUp:i,buildFragment:o,insertFragment:s,deleteFragment:a,afterChange:u}=e;return e.pointerUp=h=>{const d=sr(e);if(d&&ye.isMindElement(e,d)&&!p6(h)&&(O.isReadonly(e)||!bi(h)||!O.isPointer(e,gt.selection))){ef(e,d),r(h);return}if(O.isReadonly(e)){r(h);return}const f=Ze(e,Je(e,h.x,h.y)),g=Ni(e,f),m=g&&ye.isMindElement(e,g)&&ye.hasImage(g)&&BA(e,g,f);if(m&&d&&g===d){um(e),r(h);return}d&&ye.isMindElement(e,d)&&ef(e,d),m&&g&&(um(e),qj(e,g)),r(h)},e.keyDown=h=>{const d=sr(e);if(!O.isReadonly(e)&&d&&(Hn.isDeleteBackward(h)||Hn.isDeleteForward(h))){aa(e,d),hn.removeImage(e,d);return}n(h)},e.globalPointerUp=h=>{if(O.isFocus(e)){const d=h.target instanceof Node&&O.getBoardContainer(e).contains(h.target),f=sr(e);f&&ye.isMindElement(e,f)&&!d&&ef(e,f)}i(h)},e.buildFragment=(h,d,f,g)=>{const m=sr(e);return m&&(h=RM(ao.medias,[m.data.image],"")),o(h,d,f,g)},e.deleteFragment=h=>{const d=sr(e);d&&hn.removeImage(e,d),a(h)},e.insertFragment=(h,d,f)=>{var w,C;const g=Me(e),m=!!sr(e),v=g.length===1&&ye.isMindElement(e,g[0]);if(m||v){if((w=h==null?void 0:h.files)!=null&&w.length){const P=wT.map(x=>"image/"+x),D=g[0]||sr(e);if(P.includes(h.files[0].type)){const x=h.files[0];kT(e,x,Sj,k=>{hn.setImage(e,D,k)});return}}if((C=h==null?void 0:h.medias)!=null&&C.length){const P=g[0]||sr(e);hn.setImage(e,P,h.medias[0]);return}}s(h,d,f)},e.afterChange=()=>{u();const h=sr(e);h&&ye.isMindElement(e,h)&&yt.getElementRef(h).getGenerator(ho.key).setFocus(h,!0)},e},qz=e=>{let n=null;return ha(e,{key:"mind-node",canResize:()=>!0,hitTest:i=>{const o=Yz(e,i);return o?{element:o,handle:null,cursorClass:ci.ew}:null},beforeResize:i=>{n={minWidth:Bt.getNodeResizableMinWidth(e,i.element),currentWidth:Bt.getTopicDynamicWidth(e,i.element),path:O.findPath(e,i.element),textManage:Il(i.element)}},onResize:(i,o)=>{let s=n.currentWidth+We.getOffsetX(o.startPoint,o.endPoint);s<=n.minWidth&&(s=n.minWidth);const a=dt.get(e,n.path);a&&Bt.getNodeTopicMinWidth(e,a)!==s&&hn.setNodeManualWidth(e,a,s)},afterResize:i=>{n=null}}),e},Yz=(e,n)=>{const r=Me(e).filter(i=>ye.isMindElement(e,i));if(r.length>0){const i=r.find(o=>{const s=Zz(e,o);return Ic(n[0],n[1],s)<=0});return i||null}return null},Zz=(e,n)=>{const r=ye.getNode(n),i=Wt(r);return{x:i.x+i.width-yP,y:i.y,width:yP*2,height:i.height}},Qz=e=>(ha(e,{key:"mind-node-image",canResize:()=>!0,hitTest:r=>{const i=sr(e),o=i&&ye.isMindElement(e,i)?i:void 0;if(o){const s=Uj(e,o,r);if(s)return{element:o,handle:s.handle,cursorClass:s.cursorClass}}return null},onResize:(r,i)=>{const o=We.getOffsetX(i.startPoint,i.endPoint),s=r.element.data.image.width,a=r.element.data.image.height,u=r.path;let h=s+o;h<=100&&(h=100);const d=s/a,f=h/d,g={...r.element.data.image,width:h,height:f};hn.setImage(e,dt.get(e,u),g),bT(e,dt.get(e,u))}}),e),Jz=(e,n,r)=>{let i=[];const o=dA(e,n),s=fA(e,[...n,...o]),a=n.filter(h=>!s.find(d=>d.abstract===h));a.push(...s.map(h=>h.abstract));const u=a.map(h=>ye.getNode(h));return a.forEach((h,d)=>{const f=Wt(u[d]),g=[[f.x-r[0],f.y-r[1]]],m=s.find(v=>v.abstract===h);if(Ve.isAbstract(h)&&m){const{start:v,end:w}=gA(m,a);i.push({...h,points:g,start:v,end:w})}else if(Ve.isAbstract(h)){let v={...h,points:g};delete v.start,delete v.end,i.push(v)}else i.push({...h,points:g})}),i},e$=(e,n,r,i)=>{let o,s;const a=Me(e);let u=[];const h=a.length===1,d=a[0],f=d&&O.findPath(e,d),g=d&&ds(d).length;n.forEach((m,v)=>{if(o=PA(m),h&&i!==pi.duplicate)Qe.isMind(m)&&(o=Xj(e,o)),Ve.isAbstract(o)&&(o.start=o.start+g,o.end=o.end+g),s=[...f,g+v];else{const w=[r[0]+m.points[0][0],r[1]+m.points[0][1]];o.points=[w],Ve.isAbstract(m)&&(o=Km(o)),Qe.isMind(m)||(o=Kj(e,o)),s=[e.children.length]}u.push(o),Te.insertNode(e,o,s)}),Te.addSelectionWithTemporaryElements(e,u)},t$=(e,n,r)=>{const i=R0(r,{});Te.insertNode(e,i,_y(e,n)),Te.addSelectionWithTemporaryElements(e,[i])},n$=e=>{const n=e;let r;const{getDeletedFragment:i,insertFragment:o,buildFragment:s,deleteFragment:a}=n;return n.getDeletedFragment=u=>{const h=A1(n);if(h.length){r=Xu(h).reverse();const d=mA(n,r);hn.setAbstractsByRefs(n,d);const f=LA(n,h);hn.setRightNodeCountByRefs(n,f);const g=Xu(h);u.push(...g)}return i(u)},n.deleteFragment=u=>{if(a(u),r){const h=r$(n,r);h&&aa(n,h),r=null}},n.buildFragment=(u,h,d,f)=>{const g=A1(n,f),m=Xu(g);if(m.length){const v=Jz(n,m,h?[h.x,h.y]:[0,0]),C={text:RT(g),type:ao.elements,elements:v};u=d0(u,C)}return s(u,h,d,f)},n.insertFragment=(u,h,d)=>{var f,g;if((f=u==null?void 0:u.elements)!=null&&f.length){const m=(g=u.elements)==null?void 0:g.filter(v=>ye.isMindElement(n,v));m&&m.length>0&&e$(n,m,h,d)}if(u!=null&&u.text){const m=A1(n);if(m.length===1){t$(n,m[0],ca(u.text));return}}o(u,h,d)},n},r$=(e,n)=>{let r;const i=n[0],o=O.findPath(e,i);let s=o;if(Ue.hasPrevious(o)&&(s=Ue.previous(o)),Ve.isAbstract(i)){const d=ye.getParent(i);n.includes(d.children[i.start])||(r=d.children[i.start])}try{r||(r=dt.get(e,s))}catch{}const a=n[0],u=ye.findParent(a),h=n.every(d=>ye.findParent(d)===u);return u&&h&&!r&&(r=u),r},i$=e=>{const n=e;return n.renderEmoji=(r,i)=>{throw new Error("No implementation for renderEmoji method.")},n},o$=e=>!(!e.data||!e.data.topic),s$=e=>{const n={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=n);else{const r={topic:n};e.data=r}},XA=e=>{const n=e,{drawElement:r,dblClick:i,isRectangleHit:o,isHit:s,getRectangle:a,isMovable:u,isRecursion:h,isAlign:d,isImageBindingAllowed:f,canAddToGroup:g,canSetZIndex:m,isExpanded:v,getOneHitElement:w,normalizeElement:C}=n;return n.normalizeElement=P=>{Qe.isMind(P.element)&&kn(P.element,D=>{o$(D)||s$(D)}),C(P)},n.drawElement=P=>Qe.isMind(P.element)?Gz:ye.isMindElement(n,P.element)?UA:r(P),n.applyTheme=P=>{const D=P,x=!O.isBoard(P)&&((D==null?void 0:D.branchColor)||(D==null?void 0:D.fill)||(D==null?void 0:D.strokeColor));if(Qe.isMind(P)&&x){const k=O.findPath(n,P);Te.setNode(n,{fill:null,strokeColor:null,branchColor:null},k)}},n.getRectangle=P=>ye.isMindElement(n,P)?(yt.hasMounted(P)||console.error("mind element has not been mounted"),Wt(ye.getNode(P))):a(P),n.canAddToGroup=P=>ye.isMindElement(n,P)&&!Qe.isMind(P)?!1:g(P),n.canSetZIndex=P=>ye.isMindElement(n,P)&&!Qe.isMind(P)?!1:m(P),n.isRecursion=P=>ye.isMindElement(n,P)&&P.isCollapsed?!1:h(P),n.isRectangleHit=(P,D)=>{if(ye.isMindElement(n,P)){const x=Wt(ye.getNode(P));return R.isHit(R.getRectangleByPoints([D.anchor,D.focus]),x)}return o(P,D)},n.isHit=(P,D,x)=>{if(ye.isMindElement(n,P)){const k=Wt(ye.getNode(P));return R.isHit(R.getRectangleByPoints([D,D]),k)}return s(P,D,x)},n.getOneHitElement=P=>P.every(x=>ye.isMindElement(n,x))?P[0]:w(P),n.isMovable=P=>Qe.isMind(P)?!0:u(P),n.isImageBindingAllowed=P=>ye.isMindElement(n,P)?!0:f(P),n.isAlign=P=>Qe.isMind(P)?!0:d(P),n.isExpanded=P=>ye.isMindElement(n,P)&&!Qe.isMind(P)?!P.isCollapsed:v(P),n.dblClick=P=>{if(O.isReadonly(n)){i(P);return}const D=Ze(n,Je(n,P.x,P.y));n.children.filter(x=>Qe.isMind(x)).forEach(x=>{kn(x,k=>{!O.hasBeenTextEditing(n)&&DA(n,D,k)&&Oy(k)},sa(n))}),!O.hasBeenTextEditing(n)&&i(P)},i$(qz(Qz(Kz(Xz(n$(Uz($z(Vz(zz(jz(n)))))))))))};var k1={exports:{}},kP;function a$(){return kP||(kP=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(n,r){n(function(){var i={};i.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},i.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var o=Object.prototype.hasOwnProperty,s;i.FALLBACK_PHONE="UnknownPhone",i.FALLBACK_TABLET="UnknownTablet",i.FALLBACK_MOBILE="UnknownMobile",s="isArray"in Array?Array.isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]"};function a(g,m){return g!=null&&m!=null&&g.toLowerCase()===m.toLowerCase()}function u(g,m){var v,w,C=g.length;if(!C||!m)return!1;for(v=m.toLowerCase(),w=0;w<C;++w)if(v===g[w].toLowerCase())return!0;return!1}function h(g){for(var m in g)o.call(g,m)&&(g[m]=new RegExp(g[m],"i"))}function d(g){return(g||"").substr(0,500)}(function(){var m,v,w,C,P,D,x=i.mobileDetectRules;for(m in x.props)if(o.call(x.props,m)){for(v=x.props[m],s(v)||(v=[v]),P=v.length,C=0;C<P;++C)w=v[C],D=w.indexOf("[VER]"),D>=0&&(w=w.substring(0,D)+"([\\w._\\+]+)"+w.substring(D+5)),v[C]=new RegExp(w,"i");x.props[m]=v}h(x.oss),h(x.phones),h(x.tablets),h(x.uas),h(x.utils),x.oss0={WindowsPhoneOS:x.oss.WindowsPhoneOS,WindowsMobileOS:x.oss.WindowsMobileOS}})(),i.findMatch=function(g,m){for(var v in g)if(o.call(g,v)&&g[v].test(m))return v;return null},i.findMatches=function(g,m){var v=[];for(var w in g)o.call(g,w)&&g[w].test(m)&&v.push(w);return v},i.getVersionStr=function(g,m){var v=i.mobileDetectRules.props,w,C,P,D;if(o.call(v,g)){for(w=v[g],P=w.length,C=0;C<P;++C)if(D=w[C].exec(m),D!==null)return D[1]}return null},i.getVersion=function(g,m){var v=i.getVersionStr(g,m);return v?i.prepareVersionNo(v):NaN},i.prepareVersionNo=function(g){var m;return m=g.split(/[a-z._ \/\-]/i),m.length===1&&(g=m[0]),m.length>1&&(g=m[0]+".",m.shift(),g+=m.join("")),Number(g)},i.isMobileFallback=function(g){return i.detectMobileBrowsers.fullPattern.test(g)||i.detectMobileBrowsers.shortPattern.test(g.substr(0,4))},i.isTabletFallback=function(g){return i.detectMobileBrowsers.tabletPattern.test(g)},i.prepareDetectionCache=function(g,m,v){if(g.mobile===r){var w,C,P;if(C=i.findMatch(i.mobileDetectRules.tablets,m),C){g.mobile=g.tablet=C,g.phone=null;return}if(w=i.findMatch(i.mobileDetectRules.phones,m),w){g.mobile=g.phone=w,g.tablet=null;return}i.isMobileFallback(m)?(P=f.isPhoneSized(v),P===r?(g.mobile=i.FALLBACK_MOBILE,g.tablet=g.phone=null):P?(g.mobile=g.phone=i.FALLBACK_PHONE,g.tablet=null):(g.mobile=g.tablet=i.FALLBACK_TABLET,g.phone=null)):i.isTabletFallback(m)?(g.mobile=g.tablet=i.FALLBACK_TABLET,g.phone=null):g.mobile=g.tablet=g.phone=null}},i.mobileGrade=function(g){var m=g.mobile()!==null;return g.os("iOS")&&g.version("iPad")>=4.3||g.os("iOS")&&g.version("iPhone")>=3.1||g.os("iOS")&&g.version("iPod")>=3.1||g.version("Android")>2.1&&g.is("Webkit")||g.version("Windows Phone OS")>=7||g.is("BlackBerry")&&g.version("BlackBerry")>=6||g.match("Playbook.*Tablet")||g.version("webOS")>=1.4&&g.match("Palm|Pre|Pixi")||g.match("hp.*TouchPad")||g.is("Firefox")&&g.version("Firefox")>=12||g.is("Chrome")&&g.is("AndroidOS")&&g.version("Android")>=4||g.is("Skyfire")&&g.version("Skyfire")>=4.1&&g.is("AndroidOS")&&g.version("Android")>=2.3||g.is("Opera")&&g.version("Opera Mobi")>11&&g.is("AndroidOS")||g.is("MeeGoOS")||g.is("Tizen")||g.is("Dolfin")&&g.version("Bada")>=2||(g.is("UC Browser")||g.is("Dolfin"))&&g.version("Android")>=2.3||g.match("Kindle Fire")||g.is("Kindle")&&g.version("Kindle")>=3||g.is("AndroidOS")&&g.is("NookTablet")||g.version("Chrome")>=11&&!m||g.version("Safari")>=5&&!m||g.version("Firefox")>=4&&!m||g.version("MSIE")>=7&&!m||g.version("Opera")>=10&&!m?"A":g.os("iOS")&&g.version("iPad")<4.3||g.os("iOS")&&g.version("iPhone")<3.1||g.os("iOS")&&g.version("iPod")<3.1||g.is("Blackberry")&&g.version("BlackBerry")>=5&&g.version("BlackBerry")<6||g.version("Opera Mini")>=5&&g.version("Opera Mini")<=6.5&&(g.version("Android")>=2.3||g.is("iOS"))||g.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||g.version("Opera Mobi")>=11&&g.is("SymbianOS")?"B":(g.version("BlackBerry")<5||g.match("MSIEMobile|Windows CE.*Mobile")||g.version("Windows Mobile")<=5.2,"C")},i.detectOS=function(g){return i.findMatch(i.mobileDetectRules.oss0,g)||i.findMatch(i.mobileDetectRules.oss,g)},i.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function f(g,m){this.ua=d(g),this._cache={},this.maxPhoneWidth=m||600}return f.prototype={constructor:f,mobile:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===r&&(this._cache.userAgent=i.findMatch(i.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===r&&(this._cache.userAgents=i.findMatches(i.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===r&&(this._cache.os=i.detectOS(this.ua)),this._cache.os},version:function(g){return i.getVersion(g,this.ua)},versionStr:function(g){return i.getVersionStr(g,this.ua)},is:function(g){return u(this.userAgents(),g)||a(g,this.os())||a(g,this.phone())||a(g,this.tablet())||u(i.findMatches(i.mobileDetectRules.utils,this.ua),g)},match:function(g){return g instanceof RegExp||(g=new RegExp(g,"i")),g.test(this.ua)},isPhoneSized:function(g){return f.isPhoneSized(g||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===r&&(this._cache.grade=i.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?f.isPhoneSized=function(g){return g<0?r:i.getDeviceSmallerSide()<=g}:f.isPhoneSized=function(){},f._impl=i,f.version="1.4.5 2021-03-13",f})})(function(n){if(e.exports)return function(r){e.exports=r()};if(typeof window<"u")return function(r){window.MobileDetect=r()};throw new Error("unknown environment")}())}(k1)),k1.exports}var l$=a$();const u$=oa(l$),bP=e=>G.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),c$=e=>{const n=e;return e.setPluginOptions(A0,{emojiPadding:0,spaceBetweenEmojis:4}),n.renderEmoji=(r,i)=>{const o=document.createElement("span");r.appendChild(o);const s=Qf.createRoot(o);s.render(G.jsx(bP,{...i}));let a={...i};return{destroy:()=>{setTimeout(()=>{s.unmount()},0)},update:h=>{a={...a,...h},s.render(G.jsx(bP,{...a}))}}},n},FP=e=>{const n={src:e.imageItem.url,draggable:!1,width:"100%"};return G.jsx("div",{children:G.jsx("img",{...n,className:jn("image-origin",{"image-origin--focus":e.isFocus})})})};var El=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(El||{});const zy={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},$y={json:"application/json",drawnix:"application/vnd.drawnix+json",...zy},h$={drawnix:1},Wy=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),d$=Wy?Promise.resolve().then(function(){return y$}):Promise.resolve().then(function(){return D$});async function f$(...e){return(await d$).default(...e)}Wy?Promise.resolve().then(function(){return x$}):Promise.resolve().then(function(){return T$});const g$=Wy?Promise.resolve().then(function(){return E$}):Promise.resolve().then(function(){return B$});async function p$(...e){return(await g$).default(...e)}const m$=async e=>{const n=await e.getFile();return n.handle=e,n};var v$=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((o,s)=>{n[s]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(a=>{n[s].accept[a]=o.extensions||[]}):n[s].accept["*/*"]=o.extensions||[]});const r=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),i=await Promise.all(r.map(m$));return e[0].multiple?i:i[0]},y$={__proto__:null,default:v$};function tf(e){function n(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var i=r.done;return Promise.resolve(r.value).then(function(o){return{value:o,done:i}})}return tf=function(r){this.s=r,this.n=r.next},tf.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):n(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):n(i.apply(this.s,arguments))}},new tf(e)}const KA=async(e,n,r=e.name,i)=>{const o=[],s=[];var a,u=!1,h=!1;try{for(var d,f=function(g){var m,v,w,C=2;for(typeof Symbol<"u"&&(v=Symbol.asyncIterator,w=Symbol.iterator);C--;){if(v&&(m=g[v])!=null)return m.call(g);if(w&&(m=g[w])!=null)return new tf(m.call(g));v="@@asyncIterator",w="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(d=await f.next()).done;u=!1){const g=d.value,m=`${r}/${g.name}`;g.kind==="file"?s.push(g.getFile().then(v=>(v.directoryHandle=e,v.handle=g,Object.defineProperty(v,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>m})))):g.kind!=="directory"||!n||i&&i(g)||o.push(KA(g,n,m,i))}}catch(g){h=!0,a=g}finally{try{u&&f.return!=null&&await f.return()}finally{if(h)throw a}}return[...(await Promise.all(o)).flat(),...await Promise.all(s)]};var w$=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:KA(n,e.recursive,void 0,e.skipDirectory)},x$={__proto__:null,default:w$},C$=async(e,n=[{}],r=null,i=!1,o=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const s=[];let a=null;if(e instanceof Blob&&e.type?a=e.type:e.headers&&e.headers.get("content-type")&&(a=e.headers.get("content-type")),n.forEach((d,f)=>{s[f]={description:d.description||"Files",accept:{}},d.mimeTypes?(f===0&&a&&d.mimeTypes.push(a),d.mimeTypes.map(g=>{s[f].accept[g]=d.extensions||[]})):a?s[f].accept[a]=d.extensions||[]:s[f].accept["*/*"]=d.extensions||[]}),r)try{await r.getFile()}catch(d){if(r=null,i)throw d}const u=r||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:s,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!r&&o&&o(u);const h=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(h),u):"body"in e?(await e.body.pipeTo(h),u):(await h.write(await e),await h.close(),u)},E$={__proto__:null,default:C$},P$=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,r)=>{const i=document.createElement("input");i.type="file";const o=[...e.map(h=>h.mimeTypes||[]),...e.map(h=>h.extensions||[])].join();i.multiple=e[0].multiple||!1,i.accept=o||"",i.style.display="none",document.body.append(i);const s=h=>{typeof a=="function"&&a(),n(h)},a=e[0].legacySetup&&e[0].legacySetup(s,()=>a(r),i),u=()=>{window.removeEventListener("focus",u),i.remove()};i.addEventListener("click",()=>{window.addEventListener("focus",u)}),i.addEventListener("change",()=>{window.removeEventListener("focus",u),i.remove(),s(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),D$={__proto__:null,default:P$},S$=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,r)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0;const o=a=>{typeof s=="function"&&s(),n(a)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(r),i);i.addEventListener("change",()=>{let a=Array.from(i.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(a=a.filter(u=>u.webkitRelativePath.split("/").every(h=>!e[0].skipDirectory({name:h,kind:"directory"})))):a=a.filter(u=>u.webkitRelativePath.split("/").length===2),o(a)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),T$={__proto__:null,default:S$},A$=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const r=document.createElement("a");let i=e;"body"in e&&(i=await async function(a,u){const h=a.getReader(),d=new ReadableStream({start:m=>async function v(){return h.read().then(({done:w,value:C})=>{if(!w)return m.enqueue(C),v();m.close()})}()}),f=new Response(d),g=await f.blob();return h.releaseLock(),new Blob([g],{type:u})}(e.body,e.headers.get("content-type"))),r.download=n.fileName||"Untitled",r.href=URL.createObjectURL(await i);const o=()=>{typeof s=="function"&&s()},s=n.legacySetup&&n.legacySetup(o,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),o()}),r.click(),null},B$={__proto__:null,default:A$};const qA=e=>{var i,o;const n=(i=e.extensions)==null?void 0:i.reduce((s,a)=>(s.push($y[a]),s),[]),r=(o=e.extensions)==null?void 0:o.reduce((s,a)=>a==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${a}`),[]);return f$({description:e.description,extensions:r,mimeTypes:n,multiple:e.multiple??!1})},M$=(e,n)=>p$(e,{fileName:`${n.name}.${n.extension}`,description:n.description,extensions:[`.${n.extension}`]},n.fileHandle);var Vy=(e=>(e.drawnix="drawnix",e))(Vy||{});const R$=()=>new Date().getTime().toString(),YA=async(e,n=R$())=>{const r=F$(e),i=new Blob([r],{type:$y.drawnix});return{fileHandle:await M$(i,{name:n,extension:"drawnix",description:"Drawnix file"})}},k$=async e=>{const n=await qA({description:"Drawnix files"});return O$(e,await H$(n))},b$=e=>e&&e.type===Vy.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",F$=e=>{const n={type:Vy.drawnix,version:h$.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(n,null,2)},O$=async(e,n)=>{const r=await N$(n);let i;try{if(i=JSON.parse(r),b$(i))return i;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},I$=(e,n,r)=>new File([e],r||"",{type:n}),L$=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((n,r)=>{const i=new FileReader;i.onload=o=>{var s;if(!((s=o.target)!=null&&s.result))return r(new Error("Couldn't convert blob to ArrayBuffer"));n(o.target.result)},i.readAsArrayBuffer(e)}),H$=async e=>{var n;return e.type||(n=e==null?void 0:e.name)!=null&&n.endsWith(".drawnix")&&(e=I$(await L$(e),$y.drawnix,e.name)),e},N$=async e=>{let n;return"text"in Blob?n=await e.text():n=await new Promise(r=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&r(i.result)}}),n},G$=async e=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{const o=i.result;n(o)},i.onerror=o=>r(o),i.readAsDataURL(e)}),OP=e=>!!e&&Object.values(zy).includes(e),_$=e=>new Promise((n,r)=>{const i=new Image;i.onload=()=>{n(i)},i.onerror=o=>{r(o)},i.src=e}),j$=(e,n,r)=>{const i=e.width>r?r:e.width,o=i/e.width*e.height;return{url:n,width:i,height:o}},Zm=async(e,n,r,i)=>{const o=Me(e)[0]||sr(e),s=o?240:400,a=await G$(n),u=await _$(a),h=j$(u,a,s),d=r&&Ni(e,r);if(i&&d&&ye.isMindElement(e,d)){hn.setImage(e,d,h);return}o&&ye.isMindElement(e,o)&&!i?hn.setImage(e,o,h):qn.insertImage(e,h,r)};class z${constructor(n={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:n.zoomStep||.2,minZoom:n.minZoom||.1,maxZoom:n.maxZoom||5,enableKeyboard:n.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(n,r=""){this.createOverlay(),this.createImage(n,r),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",n=>{n.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const n=document.createElement("button");n.innerHTML="+",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomIn());const r=document.createElement("button");r.innerHTML="-",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.zoomOut());const i=document.createElement("button");i.innerHTML="",i.className="image-viewer-control-btn",i.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(i),this.controlsContainer.appendChild(n),this.overlay.appendChild(this.controlsContainer)}createImage(n,r){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=n,this.image.alt=r,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=n=>{if(!this.state.isDragging)return;const r=n.clientX-this.state.dragStartX,i=n.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+r,this.state.y=this.state.imageStartY+i,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",n=>{n.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=n.clientX,this.state.dragStartY=n.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=n=>{if(this.overlay){if(n.type==="keydown"&&this.options.enableKeyboard){const r=n;switch(r.key){case"Escape":this.close();break;case"+":case"=":r.preventDefault(),this.zoomIn();break;case"-":r.preventDefault(),this.zoomOut();break;case"0":r.preventDefault(),this.resetState();break}}else if(n.type==="wheel"){const r=n;r.preventDefault(),r.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const $$=e=>{const n=e,{insertFragment:r,drop:i,pointerUp:o}=n,s=new z$({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return n.insertFragment=(a,u,h)=>{var d;if((d=a==null?void 0:a.files)!=null&&d.length&&OP(a.files[0].type)){const f=a.files[0];Zm(e,f,u,!1);return}r(a,u,h)},n.drop=a=>{var u,h;if((h=(u=a.dataTransfer)==null?void 0:u.files)!=null&&h.length){const d=a.dataTransfer.files[0];if(OP(d.type)){const f=Ze(e,Je(e,a.x,a.y));return Zm(e,d,f,!0),!0}}return i(a)},n.pointerUp=a=>{const u=sr(e);if(u&&!eo(e)&&!_n(e)&&!kl(e)){const h=Ze(e,Je(e,a.x,a.y)),d=Ni(e,h);d&&ye.isMindElement(e,d)&&ye.hasImage(d)&&BA(e,d,h)&&u===d&&s.open(d.data.image.url)}o(a)},n},W$={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":"","toolbar.arrow.elbow":"","toolbar.arrow.curve":"","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":"","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"","zoom.100":" 100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":"","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"","general.undo":"","general.redo":"","general.menu":"","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"","dialog.mermaid.sequence":"","dialog.mermaid.class":"","dialog.mermaid.otherTypes":" Drawnix ","dialog.mermaid.syntax":"Mermaid ","dialog.mermaid.placeholder":" Mermaid ","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":" Markdown ","dialog.markdown.syntax":"Markdown ","dialog.markdown.placeholder":" Markdown ","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":" Mermaid ","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":"","cleanConfirm.description":"?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":"","popupToolbar.fillColor":"","popupToolbar.fontColor":"","popupToolbar.link":"","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","draw.lineText":"","draw.geometryText":"","mind.centralText":"","mind.abstractNodeText":"","markdown.example":`# 
  
  -  bug   
    -  
      -    
  
  -    
    -  
      -    
  
  -   
    -   
      -    
      
  ##      
  
  ### Hello world    
  
  ####       `,"tutorial.title":"Drawnix","tutorial.description":"All-in-one ","tutorial.dataDescription":"","tutorial.appToolbar":"...","tutorial.creationToolbar":"","tutorial.themeDescription":""},V$={"toolbar.hand":"Hand  H","toolbar.selection":"Selection  V","toolbar.mind":"Mind  M","toolbar.text":"Text  T","toolbar.arrow":"Arrow  A","toolbar.shape":"Shape","toolbar.image":"Image  Cmd+U","toolbar.extraTools":"Extra Tools","toolbar.pen":"Pen  P","toolbar.eraser":"Eraser  E","toolbar.arrow.straight":"Straight Arrow Line","toolbar.arrow.elbow":"Elbow Arrow Line","toolbar.arrow.curve":"Curve Arrow Line","toolbar.shape.rectangle":"Rectangle  R","toolbar.shape.ellipse":"Ellipse  O","toolbar.shape.triangle":"Triangle","toolbar.shape.terminal":"Terminal","toolbar.shape.diamond":"Diamond","toolbar.shape.parallelogram":"Parallelogram","toolbar.shape.roundRectangle":"Round Rectangle","zoom.in":"Zoom In  Cmd++","zoom.out":"Zoom Out  Cmd+-","zoom.fit":"Fit to Screen","zoom.100":"Zoom to 100%","theme.default":"Default","theme.colorful":"Colorful","theme.soft":"Soft","theme.retro":"Retro","theme.dark":"Dark","theme.starry":"Starry","color.none":"Topic Color","color.unknown":"Other Color","color.default":"Basic Black","color.white":"White","color.gray":"Grey","color.deepBlue":"Deep Blue","color.red":"Red","color.green":"Green","color.yellow":"Yellow","color.purple":"Purple","color.orange":"Orange","color.pastelPink":"Paster Pink","color.cyan":"Cyan","color.brown":"Brown","color.forestGreen":"Forest Green","color.lightGray":"Light Grey","general.undo":"Undo","general.redo":"Redo","general.menu":"App Menu","general.duplicate":"Duplicate","general.delete":"Delete","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"Open","menu.saveFile":"Save File","menu.exportImage":"Export Image","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Clear Board","menu.github":"GitHub","dialog.mermaid.title":"Mermaid to Drawnix","dialog.mermaid.description":"Currently supports","dialog.mermaid.flowchart":"flowcharts","dialog.mermaid.sequence":"sequence diagrams","dialog.mermaid.class":"class diagrams","dialog.mermaid.otherTypes":", and other diagram types (rendered as images).","dialog.mermaid.syntax":"Mermaid Syntax","dialog.mermaid.placeholder":"Write your Mermaid chart definition here","dialog.mermaid.preview":"Preview","dialog.mermaid.insert":"Insert","dialog.markdown.description":"Supports automatic conversion of Markdown syntax to mind map.","dialog.markdown.syntax":"Markdown Syntax","dialog.markdown.placeholder":"Write your Markdown text definition here...","dialog.markdown.preview":"Preview","dialog.markdown.insert":"Insert","dialog.error.loadMermaid":"Failed to load Mermaid library","extraTools.mermaidToDrawnix":"Mermaid to Drawnix","extraTools.markdownToDrawnix":"Markdown to Drawnix","cleanConfirm.title":"Clear Board","cleanConfirm.description":"This will clear the entire board. Do you want to continue?","cleanConfirm.cancel":"Cancel","cleanConfirm.ok":"OK","popupLink.delLink":"Delete Link","popupToolbar.fillColor":"Fill Color","popupToolbar.fontColor":"Font Color","popupToolbar.link":"Insert Link","popupToolbar.stroke":"Stroke","textPlaceholders.link":"Link","textPlaceholders.text":"Text","line.source":"Start","line.target":"End","line.arrow":"Arrow","line.none":"None","stroke.solid":"Solid","stroke.dashed":"Dashed","stroke.dotted":"Dotted","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"Text","draw.geometryText":"Text","mind.centralText":"Central Topic","mind.abstractNodeText":"Summary","tutorial.title":"Drawnix","tutorial.description":"All-in-one whiteboard, including mind maps, flowcharts, free drawing, and more","tutorial.dataDescription":"All data is stored locally in your browser","tutorial.appToolbar":"Export, language settings, ...","tutorial.creationToolbar":"Select a tool to start your creation","tutorial.themeDescription":"Switch between light and dark themes"},U$={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"Mind-  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":" ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"  ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":" ","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"-","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"-","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"    (  ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"    Mermaid-","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown  mind-.","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"     Markdown","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"    .   ?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":""},X$={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"   M","toolbar.eraser":"  E","toolbar.text":"  T","toolbar.pen":"  P","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":" ","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":" ","toolbar.shape.roundRectangle":"  ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":" ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":" ","color.unknown":" ","color.default":" ","color.white":"","color.gray":"","color.deepBlue":" ","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":" ","color.cyan":"","color.brown":"","color.forestGreen":"  ()","color.lightGray":" ","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":" ","menu.exportImage":" ","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":" ","dialog.mermaid.title":" Mermaid  Drawnix","dialog.mermaid.description":" ","dialog.mermaid.flowchart":" ","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"     ( ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"   ...","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown   .","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"  Markdown ...","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":" Mermaid  Drawnix","extraTools.markdownToDrawnix":" Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"     .   ","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":" ","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  -          
    -  
      -      

  -          
    -         
      -    

  -      
    -     
      -    
    
  ##         

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":""},ZA={zh:W$,en:V$,ru:U$,ar:X$},QA=j.createContext(void 0),K$=({children:e,defaultLanguage:n="zh"})=>{const[r,i]=j.useState(()=>localStorage.getItem("language")||n),o=u=>{localStorage.setItem("language",u),i(u)},s=u=>ZA[r][u]||u,a=j.useMemo(()=>({language:r,setLanguage:o,t:s}),[r]);return G.jsx(QA.Provider,{value:a,children:e})},vr=()=>{const e=j.useContext(QA);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},q$=()=>({t:n=>{const r=localStorage.getItem("language")||"zh";return ZA[r][n]||n},language:localStorage.getItem("language")||"zh"}),JA=e=>{const n=e;n.renderImage=(i,o)=>{const s=Qf.createRoot(i);s.render(G.jsx(FP,{...o}));let a={...o};return{destroy:()=>{setTimeout(()=>{s.unmount()},0)},update:h=>{a={...a,...h},s.render(G.jsx(FP,{...a}))}}};const{t:r}=q$();return n.getI18nValue=i=>i===yl.lineText?r("draw.lineText"):i===yl.geometryText?r("draw.geometryText"):i===xl.mindCentralText?r("mind.centralText"):i===xl.abstractNodeText?r("mind.abstractNodeText"):null,$$(n)},Hl=Xe.forwardRef(({children:e,padding:n,className:r,style:i,...o},s)=>G.jsx("div",{className:jn("island",r),style:{"--padding":n,...i},ref:s,...o,children:e})),Y$=j.forwardRef(({children:e,gap:n,align:r,justifyContent:i,className:o,style:s},a)=>G.jsx("div",{className:jn("stack stack_horizontal",o),style:{"--gap":n,alignItems:r,justifyContent:i,...s},ref:a,children:e})),Z$=j.forwardRef(({children:e,gap:n,align:r,justifyContent:i,className:o,style:s},a)=>G.jsx("div",{className:jn("stack stack_vertical",o),style:{"--gap":n,justifyItems:r,justifyContent:i,...s},ref:a,children:e})),na={Row:Y$,Col:Z$};class Q$ extends DOMException{constructor(n="Request Aborted"){super(n,"AbortError")}}const J$=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,eW=(e,n,{checkForDefaultPrevented:r=!0}={})=>function(o){if(e==null||e(o),!r||!(o!=null&&o.defaultPrevented))return n==null?void 0:n(o)},tW=e=>{const n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]);let o=i.length;const s=new Uint8Array(o);for(;o--;)s[o]=i.charCodeAt(o);return new Blob([s],{type:r})},nW=(e,n={})=>BM(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...n});function rW(e,n){const r=document.createElement("a"),i=window.URL.createObjectURL(e);r.href=i,r.download=n,document.body.append(r),r.click(),window.URL.revokeObjectURL(i),r.remove()}const e7=(e,n)=>{const r=[];for(let i=0;i<e.length;i+=n)r.push(e.slice(i,i+n));return r},Mc=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),vf||O6?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),gi=Xe.forwardRef((e,n)=>{const{id:r}={id:"drawnix"},i=Xe.useRef(null);Xe.useImperativeHandle(n,()=>i.current);const o=`tool-icon_size_${e.size||"medium"}`,[s,a]=j.useState(!1),u=j.useRef(!0),h=async f=>{var m;const g="onClick"in e&&((m=e.onClick)==null?void 0:m.call(e,f));if(J$(g))try{a(!0),await g}catch(v){if(v instanceof Q$)console.warn(v);else throw v}finally{u.current&&a(!1)}};j.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const d=j.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const f=e.type==="icon"?"button":e.type;return G.jsxs("button",{className:jn("tool-icon_type_button",o,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:f,onClick:h,onPointerDown:g=>{var m;(m=e.onPointerDown)==null||m.call(e,{pointerType:g.pointerType||null,event:g})},onPointerUp:g=>{var m;(m=e.onPointerUp)==null||m.call(e,{pointerType:g.pointerType||null})},ref:i,disabled:s||!!e.disabled,children:[(e.icon||e.label)&&G.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&G.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&G.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&G.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return G.jsxs("label",{className:jn("tool-icon",e.className),title:e.title,onPointerDown:f=>{var g;d.current=f.pointerType||null,(g=e.onPointerDown)==null||g.call(e,{pointerType:f.pointerType||null,event:f})},onPointerUp:f=>{var g;(g=e.onPointerUp)==null||g.call(e,{pointerType:f.pointerType||null}),requestAnimationFrame(()=>{d.current=null})},children:[G.jsx("input",{className:`tool-icon_type_radio ${o}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${r}-${e.id}`,onChange:()=>{var f;(f=e.onChange)==null||f.call(e,{pointerType:d.current})},checked:e.checked,ref:i}),G.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&G.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});gi.displayName="ToolButton";const Rt=e=>e,iW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),oW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),sW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),aW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),lW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),uW=Rt(G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),G.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),G.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]})),cW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),hW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:G.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),dW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:G.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),fW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),gW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),pW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),mW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),vW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),yW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),wW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),xW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),CW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:G.jsxs("g",{strokeWidth:"1.5",children:[G.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),G.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),G.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),G.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),EW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:G.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),PW=Rt(G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:G.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[G.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),G.jsx("path",{d:"M15 8h.01"}),G.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),G.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),G.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),G.jsx("path",{d:"M19 16v6"}),G.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),DW=Rt(G.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:G.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),SW=Rt(G.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:G.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),TW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:G.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),AW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{stroke:"none",fill:"currentColor",children:G.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:G.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),t7=Rt(G.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:G.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),BW=Rt(G.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:G.jsxs("g",{strokeWidth:"1.25",children:[G.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),G.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),n7=Rt(G.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),MW=Rt(G.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:G.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),RW=Rt(G.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:G.jsxs("g",{strokeWidth:1.8,fill:"none",children:[G.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),G.jsx("path",{d:"M12 3l-4 7h8z"}),G.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),G.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),r7={[Zt.default]:{strokeColor:Yn,fill:"#FFFFFF"},[Zt.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[Zt.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[Zt.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[Zt.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[Zt.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var Ar=(e=>(e.eraser="eraser",e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(Ar||{});const i7="freehand",si={isFreehand:e=>e.type===i7},o7=[{icon:n7,pointer:Ar.feltTipPen,titleKey:"toolbar.pen"},{icon:uW,pointer:Ar.eraser,titleKey:"toolbar.eraser"}],kW=e7(o7,5),bW=({onPointerUp:e})=>{const{t:n}=vr(),r=qr();return G.jsx(Hl,{padding:1,children:G.jsx(na.Col,{gap:1,children:kW.map((i,o)=>G.jsx(na.Row,{gap:1,children:i.map((s,a)=>G.jsx(gi,{className:jn({fillable:!1}),selected:r.pointer===s.pointer,type:"icon",size:"small",visible:!0,icon:s.icon,title:n(s.titleKey),"aria-label":n(s.titleKey),onPointerDown:()=>{lr(r,wn.dnd),Pt.updatePointerType(r,s.pointer)},onPointerUp:()=>{lr(r,wn.drawing),e(s.pointer)}},a))},o))})})},FW=[{icon:hW,title:"toolbar.shape.rectangle",pointer:$e.rectangle},{icon:fW,title:"toolbar.shape.ellipse",pointer:$e.ellipse},{icon:gW,title:"toolbar.shape.triangle",pointer:$e.triangle},{icon:dW,title:"toolbar.shape.terminal",pointer:ze.terminal},{icon:pW,title:"toolbar.shape.diamond",pointer:$e.diamond},{icon:mW,title:"toolbar.shape.parallelogram",pointer:$e.parallelogram},{icon:vW,title:"toolbar.shape.roundRectangle",pointer:$e.roundRectangle}],OW=e7(FW,5),IW=({onPointerUp:e})=>{const n=qr(),{t:r}=vr();return G.jsx(Hl,{padding:1,children:G.jsx(na.Col,{gap:1,children:OW.map((i,o)=>G.jsx(na.Row,{gap:1,children:i.map((s,a)=>G.jsx(gi,{className:jn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:O.isPointer(n,s.pointer),icon:s.icon,title:r(s.title||"toolbar.shape"),"aria-label":r(s.title||"toolbar.shape"),onPointerDown:()=>{lr(n,wn.dnd),Pt.updatePointerType(n,s.pointer)},onPointerUp:()=>{lr(n,wn.drawing),e(s.pointer)}},a))},o))})})},LW=[{icon:yW,title:"toolbar.arrow.straight",pointer:kt.straight},{icon:wW,title:"toolbar.arrow.elbow",pointer:kt.elbow},{icon:xW,title:"toolbar.arrow.curve",pointer:kt.curve}],HW=({onPointerUp:e})=>{const n=qr(),{t:r}=vr();return G.jsx(Hl,{padding:1,children:G.jsx(na.Row,{gap:1,children:LW.map((i,o)=>G.jsx(gi,{className:jn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:O.isPointer(n,i.pointer),icon:i.icon,title:r(i.title),"aria-label":r(i.title),onPointerDown:()=>{lr(n,wn.drawing),Pt.updatePointerType(n,i.pointer)},onPointerUp:()=>{e(i.pointer)}},o))})})};function b0(){return typeof window<"u"}function fs(e){return s7(e)?(e.nodeName||"").toLowerCase():"#document"}function Mr(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function _i(e){var n;return(n=(s7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function s7(e){return b0()?e instanceof Node||e instanceof Mr(e).Node:!1}function Qt(e){return b0()?e instanceof Element||e instanceof Mr(e).Element:!1}function xn(e){return b0()?e instanceof HTMLElement||e instanceof Mr(e).HTMLElement:!1}function Qm(e){return!b0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Mr(e).ShadowRoot}function Qc(e){const{overflow:n,overflowX:r,overflowY:i,display:o}=Xr(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(o)}function NW(e){return["table","td","th"].includes(fs(e))}function F0(e){return[":popover-open",":modal"].some(n=>{try{return e.matches(n)}catch{return!1}})}function Uy(e){const n=O0(),r=Qt(e)?Xr(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(r.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(r.contain||"").includes(i))}function GW(e){let n=mo(e);for(;xn(n)&&!os(n);){if(Uy(n))return n;if(F0(n))return null;n=mo(n)}return null}function O0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function os(e){return["html","body","#document"].includes(fs(e))}function Xr(e){return Mr(e).getComputedStyle(e)}function I0(e){return Qt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mo(e){if(fs(e)==="html")return e;const n=e.assignedSlot||e.parentNode||Qm(e)&&e.host||_i(e);return Qm(n)?n.host:n}function a7(e){const n=mo(e);return os(n)?e.ownerDocument?e.ownerDocument.body:e.body:xn(n)&&Qc(n)?n:a7(n)}function Qo(e,n,r){var i;n===void 0&&(n=[]),r===void 0&&(r=!0);const o=a7(e),s=o===((i=e.ownerDocument)==null?void 0:i.body),a=Mr(o);if(s){const u=Jm(a);return n.concat(a,a.visualViewport||[],Qc(o)?o:[],u&&r?Qo(u):[])}return n.concat(o,Qo(o,[],r))}function Jm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Is(e){let n=e.activeElement;for(;((r=n)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;n=n.shadowRoot.activeElement}return n}function Pr(e,n){if(!e||!n)return!1;const r=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(r&&Qm(r)){let i=n;for(;i;){if(e===i)return!0;i=i.parentNode||i.host}}return!1}function l7(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function u7(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:r,version:i}=n;return r+"/"+i}).join(" "):navigator.userAgent}function _W(e){return e.mozInputSource===0&&e.isTrusted?!0:ev()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function jW(e){return $W()?!1:!ev()&&e.width===0&&e.height===0||ev()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function zW(){return/apple/i.test(navigator.vendor)}function ev(){const e=/android/i;return e.test(l7())||e.test(u7())}function $W(){return u7().includes("jsdom/")}function IP(e,n){return["mouse","pen"].includes(e)}function WW(e){return"nativeEvent"in e}function VW(e){return e.matches("html,body")}function ai(e){return(e==null?void 0:e.ownerDocument)||document}function b1(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const r=e;return r.target!=null&&n.contains(r.target)}function Hs(e){return"composedPath"in e?e.composedPath()[0]:e.target}const UW="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function c7(e){return xn(e)&&e.matches(UW)}function F1(e){e.preventDefault(),e.stopPropagation()}function XW(e){return e?e.getAttribute("role")==="combobox"&&c7(e):!1}const zf=Math.min,Us=Math.max,$f=Math.round,Id=Math.floor,ki=e=>({x:e,y:e}),KW={left:"right",right:"left",bottom:"top",top:"bottom"},qW={start:"end",end:"start"};function LP(e,n,r){return Us(e,zf(n,r))}function L0(e,n){return typeof e=="function"?e(n):e}function ra(e){return e.split("-")[0]}function H0(e){return e.split("-")[1]}function h7(e){return e==="x"?"y":"x"}function d7(e){return e==="y"?"height":"width"}function Pl(e){return["top","bottom"].includes(ra(e))?"y":"x"}function f7(e){return h7(Pl(e))}function YW(e,n,r){r===void 0&&(r=!1);const i=H0(e),o=f7(e),s=d7(o);let a=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[s]>n.floating[s]&&(a=Wf(a)),[a,Wf(a)]}function ZW(e){const n=Wf(e);return[tv(e),n,tv(n)]}function tv(e){return e.replace(/start|end/g,n=>qW[n])}function QW(e,n,r){const i=["left","right"],o=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?n?o:i:n?i:o;case"left":case"right":return n?s:a;default:return[]}}function JW(e,n,r,i){const o=H0(e);let s=QW(ra(e),r==="start",i);return o&&(s=s.map(a=>a+"-"+o),n&&(s=s.concat(s.map(tv)))),s}function Wf(e){return e.replace(/left|right|bottom|top/g,n=>KW[n])}function eV(e){return{top:0,right:0,bottom:0,left:0,...e}}function tV(e){return typeof e!="number"?eV(e):{top:e,right:e,bottom:e,left:e}}function Vf(e){const{x:n,y:r,width:i,height:o}=e;return{width:i,height:o,top:r,left:n,right:n+i,bottom:r+o,x:n,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nV=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Uf=nV.join(","),g7=typeof Element>"u",Dl=g7?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xf=!g7&&Element.prototype.getRootNode?function(e){var n;return e==null||(n=e.getRootNode)===null||n===void 0?void 0:n.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Kf=function e(n,r){var i;r===void 0&&(r=!0);var o=n==null||(i=n.getAttribute)===null||i===void 0?void 0:i.call(n,"inert"),s=o===""||o==="true",a=s||r&&n&&e(n.parentNode);return a},rV=function(n){var r,i=n==null||(r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"contenteditable");return i===""||i==="true"},iV=function(n,r,i){if(Kf(n))return[];var o=Array.prototype.slice.apply(n.querySelectorAll(Uf));return r&&Dl.call(n,Uf)&&o.unshift(n),o=o.filter(i),o},oV=function e(n,r,i){for(var o=[],s=Array.from(n);s.length;){var a=s.shift();if(!Kf(a,!1))if(a.tagName==="SLOT"){var u=a.assignedElements(),h=u.length?u:a.children,d=e(h,!0,i);i.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else{var f=Dl.call(a,Uf);f&&i.filter(a)&&(r||!n.includes(a))&&o.push(a);var g=a.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(a),m=!Kf(g,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(a));if(g&&m){var v=e(g===!0?a.children:g.children,!0,i);i.flatten?o.push.apply(o,v):o.push({scopeParent:a,candidates:v})}else s.unshift.apply(s,a.children)}}return o},p7=function(n){return!isNaN(parseInt(n.getAttribute("tabindex"),10))},m7=function(n){if(!n)throw new Error("No node provided");return n.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(n.tagName)||rV(n))&&!p7(n)?0:n.tabIndex},sV=function(n,r){var i=m7(n);return i<0&&r&&!p7(n)?0:i},aV=function(n,r){return n.tabIndex===r.tabIndex?n.documentOrder-r.documentOrder:n.tabIndex-r.tabIndex},v7=function(n){return n.tagName==="INPUT"},lV=function(n){return v7(n)&&n.type==="hidden"},uV=function(n){var r=n.tagName==="DETAILS"&&Array.prototype.slice.apply(n.children).some(function(i){return i.tagName==="SUMMARY"});return r},cV=function(n,r){for(var i=0;i<n.length;i++)if(n[i].checked&&n[i].form===r)return n[i]},hV=function(n){if(!n.name)return!0;var r=n.form||Xf(n),i=function(u){return r.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=i(window.CSS.escape(n.name));else try{o=i(n.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=cV(o,n.form);return!s||s===n},dV=function(n){return v7(n)&&n.type==="radio"},fV=function(n){return dV(n)&&!hV(n)},gV=function(n){var r,i=n&&Xf(n),o=(r=i)===null||r===void 0?void 0:r.host,s=!1;if(i&&i!==n){var a,u,h;for(s=!!((a=o)!==null&&a!==void 0&&(u=a.ownerDocument)!==null&&u!==void 0&&u.contains(o)||n!=null&&(h=n.ownerDocument)!==null&&h!==void 0&&h.contains(n));!s&&o;){var d,f,g;i=Xf(o),o=(d=i)===null||d===void 0?void 0:d.host,s=!!((f=o)!==null&&f!==void 0&&(g=f.ownerDocument)!==null&&g!==void 0&&g.contains(o))}}return s},HP=function(n){var r=n.getBoundingClientRect(),i=r.width,o=r.height;return i===0&&o===0},pV=function(n,r){var i=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(n).visibility==="hidden")return!0;var s=Dl.call(n,"details>summary:first-of-type"),a=s?n.parentElement:n;if(Dl.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof o=="function"){for(var u=n;n;){var h=n.parentElement,d=Xf(n);if(h&&!h.shadowRoot&&o(h)===!0)return HP(n);n.assignedSlot?n=n.assignedSlot:!h&&d!==n.ownerDocument?n=d.host:n=h}n=u}if(gV(n))return!n.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return HP(n);return!1},mV=function(n){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(n.tagName))for(var r=n.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var o=r.children.item(i);if(o.tagName==="LEGEND")return Dl.call(r,"fieldset[disabled] *")?!0:!o.contains(n)}return!0}r=r.parentElement}return!1},vV=function(n,r){return!(r.disabled||Kf(r)||lV(r)||pV(r,n)||uV(r)||mV(r))},nv=function(n,r){return!(fV(r)||m7(r)<0||!vV(n,r))},yV=function(n){var r=parseInt(n.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},wV=function e(n){var r=[],i=[];return n.forEach(function(o,s){var a=!!o.scopeParent,u=a?o.scopeParent:o,h=sV(u,a),d=a?e(o.candidates):u;h===0?a?r.push.apply(r,d):r.push(u):i.push({documentOrder:s,tabIndex:h,item:o,isScope:a,content:d})}),i.sort(aV).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(r)},N0=function(n,r){r=r||{};var i;return r.getShadowRoot?i=oV([n],r.includeContainer,{filter:nv.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:yV}):i=iV(n,r.includeContainer,nv.bind(null,r)),wV(i)},xV=function(n,r){if(r=r||{},!n)throw new Error("No node provided");return Dl.call(n,Uf)===!1?!1:nv(r,n)};function NP(e,n,r){let{reference:i,floating:o}=e;const s=Pl(n),a=f7(n),u=d7(a),h=ra(n),d=s==="y",f=i.x+i.width/2-o.width/2,g=i.y+i.height/2-o.height/2,m=i[u]/2-o[u]/2;let v;switch(h){case"top":v={x:f,y:i.y-o.height};break;case"bottom":v={x:f,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:g};break;case"left":v={x:i.x-o.width,y:g};break;default:v={x:i.x,y:i.y}}switch(H0(n)){case"start":v[a]-=m*(r&&d?-1:1);break;case"end":v[a]+=m*(r&&d?-1:1);break}return v}const CV=async(e,n,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:a}=r,u=s.filter(Boolean),h=await(a.isRTL==null?void 0:a.isRTL(n));let d=await a.getElementRects({reference:e,floating:n,strategy:o}),{x:f,y:g}=NP(d,i,h),m=i,v={},w=0;for(let C=0;C<u.length;C++){const{name:P,fn:D}=u[C],{x,y:k,data:T,reset:H}=await D({x:f,y:g,initialPlacement:i,placement:m,strategy:o,middlewareData:v,rects:d,platform:a,elements:{reference:e,floating:n}});f=x??f,g=k??g,v={...v,[P]:{...v[P],...T}},H&&w<=50&&(w++,typeof H=="object"&&(H.placement&&(m=H.placement),H.rects&&(d=H.rects===!0?await a.getElementRects({reference:e,floating:n,strategy:o}):H.rects),{x:f,y:g}=NP(d,m,h)),C=-1)}return{x:f,y:g,placement:m,strategy:o,middlewareData:v}};async function y7(e,n){var r;n===void 0&&(n={});const{x:i,y:o,platform:s,rects:a,elements:u,strategy:h}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:m=!1,padding:v=0}=L0(n,e),w=tV(v),P=u[m?g==="floating"?"reference":"floating":g],D=Vf(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(P)))==null||r?P:P.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(u.floating)),boundary:d,rootBoundary:f,strategy:h})),x=g==="floating"?{x:i,y:o,width:a.floating.width,height:a.floating.height}:a.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u.floating)),T=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},H=Vf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:x,offsetParent:k,strategy:h}):x);return{top:(D.top-H.top+w.top)/T.y,bottom:(H.bottom-D.bottom+w.bottom)/T.y,left:(D.left-H.left+w.left)/T.x,right:(H.right-D.right+w.right)/T.x}}const EV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var r,i;const{placement:o,middlewareData:s,rects:a,initialPlacement:u,platform:h,elements:d}=n,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:C=!0,...P}=L0(e,n);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const D=ra(o),x=Pl(u),k=ra(u)===u,T=await(h.isRTL==null?void 0:h.isRTL(d.floating)),H=m||(k||!C?[Wf(u)]:ZW(u)),z=w!=="none";!m&&z&&H.push(...JW(u,C,w,T));const U=[u,...H],q=await y7(n,P),te=[];let ne=((i=s.flip)==null?void 0:i.overflows)||[];if(f&&te.push(q[D]),g){const ie=YW(o,a,T);te.push(q[ie[0]],q[ie[1]])}if(ne=[...ne,{placement:o,overflows:te}],!te.every(ie=>ie<=0)){var le,Q;const ie=(((le=s.flip)==null?void 0:le.index)||0)+1,N=U[ie];if(N)return{data:{index:ie,overflows:ne},reset:{placement:N}};let A=(Q=ne.filter(b=>b.overflows[0]<=0).sort((b,M)=>b.overflows[1]-M.overflows[1])[0])==null?void 0:Q.placement;if(!A)switch(v){case"bestFit":{var J;const b=(J=ne.filter(M=>{if(z){const I=Pl(M.placement);return I===x||I==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(I=>I>0).reduce((I,_)=>I+_,0)]).sort((M,I)=>M[1]-I[1])[0])==null?void 0:J[0];b&&(A=b);break}case"initialPlacement":A=u;break}if(o!==A)return{reset:{placement:A}}}return{}}}};async function PV(e,n){const{placement:r,platform:i,elements:o}=e,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),a=ra(r),u=H0(r),h=Pl(r)==="y",d=["left","top"].includes(a)?-1:1,f=s&&h?-1:1,g=L0(n,e);let{mainAxis:m,crossAxis:v,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),h?{x:v*f,y:m*d}:{x:m*d,y:v*f}}const DV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var r,i;const{x:o,y:s,placement:a,middlewareData:u}=n,h=await PV(n,e);return a===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:o+h.x,y:s+h.y,data:{...h,placement:a}}}}},SV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:r,y:i,placement:o}=n,{mainAxis:s=!0,crossAxis:a=!1,limiter:u={fn:P=>{let{x:D,y:x}=P;return{x:D,y:x}}},...h}=L0(e,n),d={x:r,y:i},f=await y7(n,h),g=Pl(ra(o)),m=h7(g);let v=d[m],w=d[g];if(s){const P=m==="y"?"top":"left",D=m==="y"?"bottom":"right",x=v+f[P],k=v-f[D];v=LP(x,v,k)}if(a){const P=g==="y"?"top":"left",D=g==="y"?"bottom":"right",x=w+f[P],k=w-f[D];w=LP(x,w,k)}const C=u.fn({...n,[m]:v,[g]:w});return{...C,data:{x:C.x-r,y:C.y-i,enabled:{[m]:s,[g]:a}}}}}};function w7(e){const n=Xr(e);let r=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const o=xn(e),s=o?e.offsetWidth:r,a=o?e.offsetHeight:i,u=$f(r)!==s||$f(i)!==a;return u&&(r=s,i=a),{width:r,height:i,$:u}}function Xy(e){return Qt(e)?e:e.contextElement}function ul(e){const n=Xy(e);if(!xn(n))return ki(1);const r=n.getBoundingClientRect(),{width:i,height:o,$:s}=w7(n);let a=(s?$f(r.width):r.width)/i,u=(s?$f(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const TV=ki(0);function x7(e){const n=Mr(e);return!O0()||!n.visualViewport?TV:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function AV(e,n,r){return n===void 0&&(n=!1),!r||n&&r!==Mr(e)?!1:n}function ia(e,n,r,i){n===void 0&&(n=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),s=Xy(e);let a=ki(1);n&&(i?Qt(i)&&(a=ul(i)):a=ul(e));const u=AV(s,r,i)?x7(s):ki(0);let h=(o.left+u.x)/a.x,d=(o.top+u.y)/a.y,f=o.width/a.x,g=o.height/a.y;if(s){const m=Mr(s),v=i&&Qt(i)?Mr(i):i;let w=m,C=Jm(w);for(;C&&i&&v!==w;){const P=ul(C),D=C.getBoundingClientRect(),x=Xr(C),k=D.left+(C.clientLeft+parseFloat(x.paddingLeft))*P.x,T=D.top+(C.clientTop+parseFloat(x.paddingTop))*P.y;h*=P.x,d*=P.y,f*=P.x,g*=P.y,h+=k,d+=T,w=Mr(C),C=Jm(w)}}return Vf({width:f,height:g,x:h,y:d})}function Ky(e,n){const r=I0(e).scrollLeft;return n?n.left+r:ia(_i(e)).left+r}function C7(e,n,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=i.left+n.scrollLeft-(r?0:Ky(e,i)),s=i.top+n.scrollTop;return{x:o,y:s}}function BV(e){let{elements:n,rect:r,offsetParent:i,strategy:o}=e;const s=o==="fixed",a=_i(i),u=n?F0(n.floating):!1;if(i===a||u&&s)return r;let h={scrollLeft:0,scrollTop:0},d=ki(1);const f=ki(0),g=xn(i);if((g||!g&&!s)&&((fs(i)!=="body"||Qc(a))&&(h=I0(i)),xn(i))){const v=ia(i);d=ul(i),f.x=v.x+i.clientLeft,f.y=v.y+i.clientTop}const m=a&&!g&&!s?C7(a,h,!0):ki(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-h.scrollLeft*d.x+f.x+m.x,y:r.y*d.y-h.scrollTop*d.y+f.y+m.y}}function MV(e){return Array.from(e.getClientRects())}function RV(e){const n=_i(e),r=I0(e),i=e.ownerDocument.body,o=Us(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),s=Us(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+Ky(e);const u=-r.scrollTop;return Xr(i).direction==="rtl"&&(a+=Us(n.clientWidth,i.clientWidth)-o),{width:o,height:s,x:a,y:u}}function kV(e,n){const r=Mr(e),i=_i(e),o=r.visualViewport;let s=i.clientWidth,a=i.clientHeight,u=0,h=0;if(o){s=o.width,a=o.height;const d=O0();(!d||d&&n==="fixed")&&(u=o.offsetLeft,h=o.offsetTop)}return{width:s,height:a,x:u,y:h}}function bV(e,n){const r=ia(e,!0,n==="fixed"),i=r.top+e.clientTop,o=r.left+e.clientLeft,s=xn(e)?ul(e):ki(1),a=e.clientWidth*s.x,u=e.clientHeight*s.y,h=o*s.x,d=i*s.y;return{width:a,height:u,x:h,y:d}}function GP(e,n,r){let i;if(n==="viewport")i=kV(e,r);else if(n==="document")i=RV(_i(e));else if(Qt(n))i=bV(n,r);else{const o=x7(e);i={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return Vf(i)}function E7(e,n){const r=mo(e);return r===n||!Qt(r)||os(r)?!1:Xr(r).position==="fixed"||E7(r,n)}function FV(e,n){const r=n.get(e);if(r)return r;let i=Qo(e,[],!1).filter(u=>Qt(u)&&fs(u)!=="body"),o=null;const s=Xr(e).position==="fixed";let a=s?mo(e):e;for(;Qt(a)&&!os(a);){const u=Xr(a),h=Uy(a);!h&&u.position==="fixed"&&(o=null),(s?!h&&!o:!h&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Qc(a)&&!h&&E7(e,a))?i=i.filter(f=>f!==a):o=u,a=mo(a)}return n.set(e,i),i}function OV(e){let{element:n,boundary:r,rootBoundary:i,strategy:o}=e;const a=[...r==="clippingAncestors"?F0(n)?[]:FV(n,this._c):[].concat(r),i],u=a[0],h=a.reduce((d,f)=>{const g=GP(n,f,o);return d.top=Us(g.top,d.top),d.right=zf(g.right,d.right),d.bottom=zf(g.bottom,d.bottom),d.left=Us(g.left,d.left),d},GP(n,u,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function IV(e){const{width:n,height:r}=w7(e);return{width:n,height:r}}function LV(e,n,r){const i=xn(n),o=_i(n),s=r==="fixed",a=ia(e,!0,s,n);let u={scrollLeft:0,scrollTop:0};const h=ki(0);if(i||!i&&!s)if((fs(n)!=="body"||Qc(o))&&(u=I0(n)),i){const m=ia(n,!0,s,n);h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}else o&&(h.x=Ky(o));const d=o&&!i&&!s?C7(o,u):ki(0),f=a.left+u.scrollLeft-h.x-d.x,g=a.top+u.scrollTop-h.y-d.y;return{x:f,y:g,width:a.width,height:a.height}}function O1(e){return Xr(e).position==="static"}function _P(e,n){if(!xn(e)||Xr(e).position==="fixed")return null;if(n)return n(e);let r=e.offsetParent;return _i(e)===r&&(r=r.ownerDocument.body),r}function P7(e,n){const r=Mr(e);if(F0(e))return r;if(!xn(e)){let o=mo(e);for(;o&&!os(o);){if(Qt(o)&&!O1(o))return o;o=mo(o)}return r}let i=_P(e,n);for(;i&&NW(i)&&O1(i);)i=_P(i,n);return i&&os(i)&&O1(i)&&!Uy(i)?r:i||GW(e)||r}const HV=async function(e){const n=this.getOffsetParent||P7,r=this.getDimensions,i=await r(e.floating);return{reference:LV(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function NV(e){return Xr(e).direction==="rtl"}const GV={convertOffsetParentRelativeRectToViewportRelativeRect:BV,getDocumentElement:_i,getClippingRect:OV,getOffsetParent:P7,getElementRects:HV,getClientRects:MV,getDimensions:IV,getScale:ul,isElement:Qt,isRTL:NV};function D7(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function _V(e,n){let r=null,i;const o=_i(e);function s(){var u;clearTimeout(i),(u=r)==null||u.disconnect(),r=null}function a(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),s();const d=e.getBoundingClientRect(),{left:f,top:g,width:m,height:v}=d;if(u||n(),!m||!v)return;const w=Id(g),C=Id(o.clientWidth-(f+m)),P=Id(o.clientHeight-(g+v)),D=Id(f),k={rootMargin:-w+"px "+-C+"px "+-P+"px "+-D+"px",threshold:Us(0,zf(1,h))||1};let T=!0;function H(z){const U=z[0].intersectionRatio;if(U!==h){if(!T)return a();U?a(!1,U):i=setTimeout(()=>{a(!1,1e-7)},1e3)}U===1&&!D7(d,e.getBoundingClientRect())&&a(),T=!1}try{r=new IntersectionObserver(H,{...k,root:o.ownerDocument})}catch{r=new IntersectionObserver(H,k)}r.observe(e)}return a(!0),s}function jV(e,n,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,d=Xy(e),f=o||s?[...d?Qo(d):[],...Qo(n)]:[];f.forEach(D=>{o&&D.addEventListener("scroll",r,{passive:!0}),s&&D.addEventListener("resize",r)});const g=d&&u?_V(d,r):null;let m=-1,v=null;a&&(v=new ResizeObserver(D=>{let[x]=D;x&&x.target===d&&v&&(v.unobserve(n),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=v)==null||k.observe(n)})),r()}),d&&!h&&v.observe(d),v.observe(n));let w,C=h?ia(e):null;h&&P();function P(){const D=ia(e);C&&!D7(C,D)&&r(),C=D,w=requestAnimationFrame(P)}return r(),()=>{var D;f.forEach(x=>{o&&x.removeEventListener("scroll",r),s&&x.removeEventListener("resize",r)}),g==null||g(),(D=v)==null||D.disconnect(),v=null,h&&cancelAnimationFrame(w)}}const zV=DV,$V=SV,WV=EV,VV=(e,n,r)=>{const i=new Map,o={platform:GV,...r},s={...o.platform,_c:i};return CV(e,n,{...o,platform:s})};var nf=typeof document<"u"?j.useLayoutEffect:j.useEffect;function qf(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let r,i,o;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==n.length)return!1;for(i=r;i--!==0;)if(!qf(e[i],n[i]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){const s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!qf(e[s],n[s]))return!1}return!0}return e!==e&&n!==n}function S7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jP(e,n){const r=S7(e);return Math.round(n*r)/r}function I1(e){const n=j.useRef(e);return nf(()=>{n.current=e}),n}function UV(e){e===void 0&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:s,floating:a}={},transform:u=!0,whileElementsMounted:h,open:d}=e,[f,g]=j.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[m,v]=j.useState(i);qf(m,i)||v(i);const[w,C]=j.useState(null),[P,D]=j.useState(null),x=j.useCallback(M=>{M!==z.current&&(z.current=M,C(M))},[]),k=j.useCallback(M=>{M!==U.current&&(U.current=M,D(M))},[]),T=s||w,H=a||P,z=j.useRef(null),U=j.useRef(null),q=j.useRef(f),te=h!=null,ne=I1(h),le=I1(o),Q=I1(d),J=j.useCallback(()=>{if(!z.current||!U.current)return;const M={placement:n,strategy:r,middleware:m};le.current&&(M.platform=le.current),VV(z.current,U.current,M).then(I=>{const _={...I,isPositioned:Q.current!==!1};ie.current&&!qf(q.current,_)&&(q.current=_,Zv.flushSync(()=>{g(_)}))})},[m,n,r,le,Q]);nf(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,g(M=>({...M,isPositioned:!1})))},[d]);const ie=j.useRef(!1);nf(()=>(ie.current=!0,()=>{ie.current=!1}),[]),nf(()=>{if(T&&(z.current=T),H&&(U.current=H),T&&H){if(ne.current)return ne.current(T,H,J);J()}},[T,H,J,ne,te]);const N=j.useMemo(()=>({reference:z,floating:U,setReference:x,setFloating:k}),[x,k]),A=j.useMemo(()=>({reference:T,floating:H}),[T,H]),b=j.useMemo(()=>{const M={position:r,left:0,top:0};if(!A.floating)return M;const I=jP(A.floating,f.x),_=jP(A.floating,f.y);return u?{...M,transform:"translate("+I+"px, "+_+"px)",...S7(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:I,top:_}},[r,u,A.floating,f.x,f.y]);return j.useMemo(()=>({...f,update:J,refs:N,elements:A,floatingStyles:b}),[f,J,N,A,b])}const XV=(e,n)=>({...zV(e),options:[e,n]}),KV=(e,n)=>({...$V(e),options:[e,n]}),qV=(e,n)=>({...WV(e),options:[e,n]});function G0(e){return j.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})},e)}const T7={...u4},YV=T7.useInsertionEffect,ZV=YV||(e=>e());function Vo(e){const n=j.useRef(()=>{});return ZV(()=>{n.current=e}),j.useCallback(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.current==null?void 0:n.current(...i)},[])}var Br=typeof document<"u"?j.useLayoutEffect:j.useEffect;function Rc(){return Rc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Rc.apply(this,arguments)}let zP=!1,QV=0;const $P=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+QV++;function JV(){const[e,n]=j.useState(()=>zP?$P():void 0);return Br(()=>{e==null&&n($P())},[]),j.useEffect(()=>{zP=!0},[]),e}const eU=T7.useId,Jc=eU||JV;function tU(){const e=new Map;return{emit(n,r){var i;(i=e.get(n))==null||i.forEach(o=>o(r))},on(n,r){e.set(n,[...e.get(n)||[],r])},off(n,r){var i;e.set(n,((i=e.get(n))==null?void 0:i.filter(o=>o!==r))||[])}}}const nU=j.createContext(null),rU=j.createContext(null),A7=()=>{var e;return((e=j.useContext(nU))==null?void 0:e.id)||null},qy=()=>j.useContext(rU);function kc(e){return"data-floating-ui-"+e}function L1(e){const n=j.useRef(e);return Br(()=>{n.current=e}),n}let WP=0;function Va(e,n){n===void 0&&(n={});const{preventScroll:r=!1,cancelPrevious:i=!0,sync:o=!1}=n;i&&cancelAnimationFrame(WP);const s=()=>e==null?void 0:e.focus({preventScroll:r});o?s():WP=requestAnimationFrame(s)}function iU(e,n){var r;let i=[],o=(r=e.find(s=>s.id===n))==null?void 0:r.parentId;for(;o;){const s=e.find(a=>a.id===o);o=s==null?void 0:s.parentId,s&&(i=i.concat(s))}return i}function qu(e,n){let r=e.filter(o=>{var s;return o.parentId===n&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var u;return o.parentId===a.id&&((u=o.context)==null?void 0:u.open)})}),r=r.concat(i);return r}let Ua=new WeakMap,Ld=new WeakSet,Hd={},H1=0;const oU=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,B7=e=>e&&(e.host||B7(e.parentNode)),sU=(e,n)=>n.map(r=>{if(e.contains(r))return r;const i=B7(r);return e.contains(i)?i:null}).filter(r=>r!=null);function aU(e,n,r,i){const o="data-floating-ui-inert",s=i?"inert":r?"aria-hidden":null,a=sU(n,e),u=new Set,h=new Set(a),d=[];Hd[o]||(Hd[o]=new WeakMap);const f=Hd[o];a.forEach(g),m(n),u.clear();function g(v){!v||u.has(v)||(u.add(v),v.parentNode&&g(v.parentNode))}function m(v){!v||h.has(v)||[].forEach.call(v.children,w=>{if(fs(w)!=="script")if(u.has(w))m(w);else{const C=s?w.getAttribute(s):null,P=C!==null&&C!=="false",D=(Ua.get(w)||0)+1,x=(f.get(w)||0)+1;Ua.set(w,D),f.set(w,x),d.push(w),D===1&&P&&Ld.add(w),x===1&&w.setAttribute(o,""),!P&&s&&w.setAttribute(s,"true")}})}return H1++,()=>{d.forEach(v=>{const w=(Ua.get(v)||0)-1,C=(f.get(v)||0)-1;Ua.set(v,w),f.set(v,C),w||(!Ld.has(v)&&s&&v.removeAttribute(s),Ld.delete(v)),C||v.removeAttribute(o)}),H1--,H1||(Ua=new WeakMap,Ua=new WeakMap,Ld=new WeakSet,Hd={})}}function VP(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);const i=ai(e[0]).body;return aU(e.concat(Array.from(i.querySelectorAll("[aria-live]"))),i,n,r)}const bc=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function M7(e,n){const r=N0(e,bc());n==="prev"&&r.reverse();const i=r.indexOf(Is(ai(e)));return r.slice(i+1)[0]}function R7(){return M7(document.body,"next")}function k7(){return M7(document.body,"prev")}function Yu(e,n){const r=n||e.currentTarget,i=e.relatedTarget;return!i||!Pr(r,i)}function lU(e){N0(e,bc()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function UP(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const i=r.dataset.tabindex;delete r.dataset.tabindex,i?r.setAttribute("tabindex",i):r.removeAttribute("tabindex")})}const _0={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let uU;function XP(e){e.key==="Tab"&&(e.target,clearTimeout(uU))}const Yf=j.forwardRef(function(n,r){const[i,o]=j.useState();Br(()=>(zW()&&o("button"),document.addEventListener("keydown",XP),()=>{document.removeEventListener("keydown",XP)}),[]);const s={ref:r,tabIndex:0,role:i,"aria-hidden":i?void 0:!0,[kc("focus-guard")]:"",style:_0};return j.createElement("span",Rc({},n,s))}),b7=j.createContext(null),KP=kc("portal");function cU(e){e===void 0&&(e={});const{id:n,root:r}=e,i=Jc(),o=O7(),[s,a]=j.useState(null),u=j.useRef(null);return Br(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{u.current=null})},[s]),Br(()=>{if(!i||u.current)return;const h=n?document.getElementById(n):null;if(!h)return;const d=document.createElement("div");d.id=i,d.setAttribute(KP,""),h.appendChild(d),u.current=d,a(d)},[n,i]),Br(()=>{if(r===null||!i||u.current)return;let h=r||(o==null?void 0:o.portalNode);h&&!Qt(h)&&(h=h.current),h=h||document.body;let d=null;n&&(d=document.createElement("div"),d.id=n,h.appendChild(d));const f=document.createElement("div");f.id=i,f.setAttribute(KP,""),h=d||h,h.appendChild(f),u.current=f,a(f)},[n,r,i,o]),s}function F7(e){const{children:n,id:r,root:i,preserveTabOrder:o=!0}=e,s=cU({id:r,root:i}),[a,u]=j.useState(null),h=j.useRef(null),d=j.useRef(null),f=j.useRef(null),g=j.useRef(null),m=a==null?void 0:a.modal,v=a==null?void 0:a.open,w=!!a&&!a.modal&&a.open&&o&&!!(i||s);return j.useEffect(()=>{if(!s||!o||m)return;function C(P){s&&Yu(P)&&(P.type==="focusin"?UP:lU)(s)}return s.addEventListener("focusin",C,!0),s.addEventListener("focusout",C,!0),()=>{s.removeEventListener("focusin",C,!0),s.removeEventListener("focusout",C,!0)}},[s,o,m]),j.useEffect(()=>{s&&(v||UP(s))},[v,s]),j.createElement(b7.Provider,{value:j.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:h,afterOutsideRef:d,beforeInsideRef:f,afterInsideRef:g,portalNode:s,setFocusManagerState:u}),[o,s])},w&&s&&j.createElement(Yf,{"data-type":"outside",ref:h,onFocus:C=>{if(Yu(C,s)){var P;(P=f.current)==null||P.focus()}else{const D=k7()||(a==null?void 0:a.refs.domReference.current);D==null||D.focus()}}}),w&&s&&j.createElement("span",{"aria-owns":s.id,style:_0}),s&&Zv.createPortal(n,s),w&&s&&j.createElement(Yf,{"data-type":"outside",ref:d,onFocus:C=>{if(Yu(C,s)){var P;(P=g.current)==null||P.focus()}else{const D=R7()||(a==null?void 0:a.refs.domReference.current);D==null||D.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,C.nativeEvent,"focus-out"))}}}))}const O7=()=>j.useContext(b7),rv="data-floating-ui-focusable";function hU(e){return e?e.hasAttribute(rv)?e:e.querySelector("["+rv+"]")||e:null}const dU=20;let Ls=[];function N1(e){Ls=Ls.filter(r=>r.isConnected);let n=e;if(!(!n||fs(n)==="body")){if(!xV(n,bc())){const r=N0(n,bc())[0];r&&(n=r)}Ls.push(n),Ls.length>dU&&(Ls=Ls.slice(-20))}}function qP(){return Ls.slice().reverse().find(e=>e.isConnected)}const fU=j.forwardRef(function(n,r){return j.createElement("button",Rc({},n,{type:"button",ref:r,tabIndex:-1,style:_0}))});function I7(e){const{context:n,children:r,disabled:i=!1,order:o=["content"],guards:s=!0,initialFocus:a=0,returnFocus:u=!0,restoreFocus:h=!1,modal:d=!0,visuallyHiddenDismiss:f=!1,closeOnFocusOut:g=!0}=e,{open:m,refs:v,nodeId:w,onOpenChange:C,events:P,dataRef:D,floatingId:x,elements:{domReference:k,floating:T}}=n,H=typeof a=="number"&&a<0,z=XW(k)&&H,U=oU()?s:!0,q=L1(o),te=L1(a),ne=L1(u),le=qy(),Q=O7(),J=j.useRef(null),ie=j.useRef(null),N=j.useRef(!1),A=j.useRef(!1),b=j.useRef(-1),M=Q!=null,I=hU(T),_=Vo(function(Y){return Y===void 0&&(Y=I),Y?N0(Y,bc()):[]}),B=Vo(Y=>{const oe=_(Y);return q.current.map(re=>k&&re==="reference"?k:I&&re==="floating"?I:oe).filter(Boolean).flat()});j.useEffect(()=>{if(i||!d)return;function Y(re){if(re.key==="Tab"){Pr(I,Is(ai(I)))&&_().length===0&&!z&&F1(re);const ge=B(),pe=Hs(re);q.current[0]==="reference"&&pe===k&&(F1(re),re.shiftKey?Va(ge[ge.length-1]):Va(ge[1])),q.current[1]==="floating"&&pe===I&&re.shiftKey&&(F1(re),Va(ge[0]))}}const oe=ai(I);return oe.addEventListener("keydown",Y),()=>{oe.removeEventListener("keydown",Y)}},[i,k,I,d,q,z,_,B]),j.useEffect(()=>{if(i||!T)return;function Y(oe){const re=Hs(oe),pe=_().indexOf(re);pe!==-1&&(b.current=pe)}return T.addEventListener("focusin",Y),()=>{T.removeEventListener("focusin",Y)}},[i,T,_]),j.useEffect(()=>{if(i||!g)return;function Y(){A.current=!0,setTimeout(()=>{A.current=!1})}function oe(re){const ge=re.relatedTarget;queueMicrotask(()=>{const pe=!(Pr(k,ge)||Pr(T,ge)||Pr(ge,T)||Pr(Q==null?void 0:Q.portalNode,ge)||ge!=null&&ge.hasAttribute(kc("focus-guard"))||le&&(qu(le.nodesRef.current,w).find(X=>{var ae,fe;return Pr((ae=X.context)==null?void 0:ae.elements.floating,ge)||Pr((fe=X.context)==null?void 0:fe.elements.domReference,ge)})||iU(le.nodesRef.current,w).find(X=>{var ae,fe;return((ae=X.context)==null?void 0:ae.elements.floating)===ge||((fe=X.context)==null?void 0:fe.elements.domReference)===ge})));if(h&&pe&&Is(ai(I))===ai(I).body){xn(I)&&I.focus();const X=b.current,ae=_(),fe=ae[X]||ae[ae.length-1]||I;xn(fe)&&fe.focus()}(z||!d)&&ge&&pe&&!A.current&&ge!==qP()&&(N.current=!0,C(!1,re,"focus-out"))})}if(T&&xn(k))return k.addEventListener("focusout",oe),k.addEventListener("pointerdown",Y),T.addEventListener("focusout",oe),()=>{k.removeEventListener("focusout",oe),k.removeEventListener("pointerdown",Y),T.removeEventListener("focusout",oe)}},[i,k,T,I,d,w,le,Q,C,g,h,_,z]),j.useEffect(()=>{var Y;if(i)return;const oe=Array.from((Q==null||(Y=Q.portalNode)==null?void 0:Y.querySelectorAll("["+kc("portal")+"]"))||[]);if(T){const re=[T,...oe,J.current,ie.current,q.current.includes("reference")||z?k:null].filter(pe=>pe!=null),ge=d||z?VP(re,U,!U):VP(re);return()=>{ge()}}},[i,k,T,d,q,Q,z,U]),Br(()=>{if(i||!xn(I))return;const Y=ai(I),oe=Is(Y);queueMicrotask(()=>{const re=B(I),ge=te.current,pe=(typeof ge=="number"?re[ge]:ge.current)||I,X=Pr(I,oe);!H&&!X&&m&&Va(pe,{preventScroll:pe===I})})},[i,m,I,H,B,te]),Br(()=>{if(i||!I)return;let Y=!1;const oe=ai(I),re=Is(oe);let pe=D.current.openEvent;N1(re);function X(me){let{open:Ne,reason:we,event:it,nested:Ie}=me;Ne&&(pe=it),we==="escape-key"&&v.domReference.current&&N1(v.domReference.current),we==="hover"&&it.type==="mouseleave"&&(N.current=!0),we==="outside-press"&&(Ie?(N.current=!1,Y=!0):N.current=!(_W(it)||jW(it)))}P.on("openchange",X);const ae=oe.createElement("span");ae.setAttribute("tabindex","-1"),ae.setAttribute("aria-hidden","true"),Object.assign(ae.style,_0),M&&k&&k.insertAdjacentElement("afterend",ae);function fe(){return typeof ne.current=="boolean"?qP()||ae:ne.current.current||ae}return()=>{P.off("openchange",X);const me=Is(oe),Ne=Pr(T,me)||le&&qu(le.nodesRef.current,w).some(Ie=>{var Be;return Pr((Be=Ie.context)==null?void 0:Be.elements.floating,me)});(Ne||pe&&["click","mousedown"].includes(pe.type))&&v.domReference.current&&N1(v.domReference.current);const it=fe();queueMicrotask(()=>{ne.current&&!N.current&&xn(it)&&(!(it!==me&&me!==oe.body)||Ne)&&it.focus({preventScroll:Y}),ae.remove()})}},[i,T,I,ne,D,v,P,le,w,M,k]),j.useEffect(()=>{queueMicrotask(()=>{N.current=!1})},[i]),Br(()=>{if(!i&&Q)return Q.setFocusManagerState({modal:d,closeOnFocusOut:g,open:m,onOpenChange:C,refs:v}),()=>{Q.setFocusManagerState(null)}},[i,Q,d,m,C,v,g]),Br(()=>{if(i||!I||typeof MutationObserver!="function"||H)return;const Y=()=>{const re=I.getAttribute("tabindex"),ge=_(),pe=Is(ai(T)),X=ge.indexOf(pe);X!==-1&&(b.current=X),q.current.includes("floating")||pe!==v.domReference.current&&ge.length===0?re!=="0"&&I.setAttribute("tabindex","0"):re!=="-1"&&I.setAttribute("tabindex","-1")};Y();const oe=new MutationObserver(Y);return oe.observe(I,{childList:!0,subtree:!0,attributes:!0}),()=>{oe.disconnect()}},[i,T,I,v,q,_,H]);function $(Y){return i||!f||!d?null:j.createElement(fU,{ref:Y==="start"?J:ie,onClick:oe=>C(!1,oe.nativeEvent)},typeof f=="string"?f:"Dismiss")}const W=!i&&U&&(d?!z:!0)&&(M||d);return j.createElement(j.Fragment,null,W&&j.createElement(Yf,{"data-type":"inside",ref:Q==null?void 0:Q.beforeInsideRef,onFocus:Y=>{if(d){const re=B();Va(o[0]==="reference"?re[0]:re[re.length-1])}else if(Q!=null&&Q.preserveTabOrder&&Q.portalNode)if(N.current=!1,Yu(Y,Q.portalNode)){const re=R7()||k;re==null||re.focus()}else{var oe;(oe=Q.beforeOutsideRef.current)==null||oe.focus()}}}),!z&&$("start"),r,$("end"),W&&j.createElement(Yf,{"data-type":"inside",ref:Q==null?void 0:Q.afterInsideRef,onFocus:Y=>{if(d)Va(B()[0]);else if(Q!=null&&Q.preserveTabOrder&&Q.portalNode)if(g&&(N.current=!0),Yu(Y,Q.portalNode)){const re=k7()||k;re==null||re.focus()}else{var oe;(oe=Q.afterOutsideRef.current)==null||oe.focus()}}}))}let Nd=0;function gU(){const e=/iP(hone|ad|od)|iOS/.test(l7()),n=document.body.style,i=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth,s=n.left?parseFloat(n.left):window.scrollX,a=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",o&&(n[i]=o+"px"),e){var u,h;const d=((u=window.visualViewport)==null?void 0:u.offsetLeft)||0,f=((h=window.visualViewport)==null?void 0:h.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(a-Math.floor(f))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[i]:""}),e&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(s,a))}}let YP=()=>{};const pU=j.forwardRef(function(n,r){const{lockScroll:i=!1,...o}=n;return Br(()=>{if(i)return Nd++,Nd===1&&(YP=gU()),()=>{Nd--,Nd===0&&YP()}},[i]),j.createElement("div",Rc({ref:r},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))});function ZP(e){return xn(e.target)&&e.target.tagName==="BUTTON"}function QP(e){return c7(e)}function L7(e,n){n===void 0&&(n={});const{open:r,onOpenChange:i,dataRef:o,elements:{domReference:s}}=e,{enabled:a=!0,event:u="click",toggle:h=!0,ignoreMouse:d=!1,keyboardHandlers:f=!0,stickIfOpen:g=!0}=n,m=j.useRef(),v=j.useRef(!1),w=j.useMemo(()=>({onPointerDown(C){m.current=C.pointerType},onMouseDown(C){const P=m.current;C.button===0&&u!=="click"&&(IP(P)&&d||(r&&h&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="mousedown")?i(!1,C.nativeEvent,"click"):(C.preventDefault(),i(!0,C.nativeEvent,"click"))))},onClick(C){const P=m.current;if(u==="mousedown"&&m.current){m.current=void 0;return}IP(P)&&d||(r&&h&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="click")?i(!1,C.nativeEvent,"click"):i(!0,C.nativeEvent,"click"))},onKeyDown(C){m.current=void 0,!(C.defaultPrevented||!f||ZP(C))&&(C.key===" "&&!QP(s)&&(C.preventDefault(),v.current=!0),C.key==="Enter"&&i(!(r&&h),C.nativeEvent,"click"))},onKeyUp(C){C.defaultPrevented||!f||ZP(C)||QP(s)||C.key===" "&&v.current&&(v.current=!1,i(!(r&&h),C.nativeEvent,"click"))}}),[o,s,u,d,f,i,r,g,h]);return j.useMemo(()=>a?{reference:w}:{},[a,w])}const mU={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},vU={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},JP=e=>{var n,r;return{escapeKey:typeof e=="boolean"?e:(n=e==null?void 0:e.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function H7(e,n){n===void 0&&(n={});const{open:r,onOpenChange:i,elements:o,dataRef:s}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:h=!0,outsidePressEvent:d="pointerdown",referencePress:f=!1,referencePressEvent:g="pointerdown",ancestorScroll:m=!1,bubbles:v,capture:w}=n,C=qy(),P=Vo(typeof h=="function"?h:()=>!1),D=typeof h=="function"?P:h,x=j.useRef(!1),k=j.useRef(!1),{escapeKey:T,outsidePress:H}=JP(v),{escapeKey:z,outsidePress:U}=JP(w),q=j.useRef(!1),te=Vo(N=>{var A;if(!r||!a||!u||N.key!=="Escape"||q.current)return;const b=(A=s.current.floatingContext)==null?void 0:A.nodeId,M=C?qu(C.nodesRef.current,b):[];if(!T&&(N.stopPropagation(),M.length>0)){let I=!0;if(M.forEach(_=>{var B;if((B=_.context)!=null&&B.open&&!_.context.dataRef.current.__escapeKeyBubbles){I=!1;return}}),!I)return}i(!1,WW(N)?N.nativeEvent:N,"escape-key")}),ne=Vo(N=>{var A;const b=()=>{var M;te(N),(M=Hs(N))==null||M.removeEventListener("keydown",b)};(A=Hs(N))==null||A.addEventListener("keydown",b)}),le=Vo(N=>{var A;const b=x.current;x.current=!1;const M=k.current;if(k.current=!1,d==="click"&&M||b||typeof D=="function"&&!D(N))return;const I=Hs(N),_="["+kc("inert")+"]",B=ai(o.floating).querySelectorAll(_);let $=Qt(I)?I:null;for(;$&&!os($);){const re=mo($);if(os(re)||!Qt(re))break;$=re}if(B.length&&Qt(I)&&!VW(I)&&!Pr(I,o.floating)&&Array.from(B).every(re=>!Pr($,re)))return;if(xn(I)&&ie){const re=I.clientWidth>0&&I.scrollWidth>I.clientWidth,ge=I.clientHeight>0&&I.scrollHeight>I.clientHeight;let pe=ge&&N.offsetX>I.clientWidth;if(ge&&Xr(I).direction==="rtl"&&(pe=N.offsetX<=I.offsetWidth-I.clientWidth),pe||re&&N.offsetY>I.clientHeight)return}const W=(A=s.current.floatingContext)==null?void 0:A.nodeId,Y=C&&qu(C.nodesRef.current,W).some(re=>{var ge;return b1(N,(ge=re.context)==null?void 0:ge.elements.floating)});if(b1(N,o.floating)||b1(N,o.domReference)||Y)return;const oe=C?qu(C.nodesRef.current,W):[];if(oe.length>0){let re=!0;if(oe.forEach(ge=>{var pe;if((pe=ge.context)!=null&&pe.open&&!ge.context.dataRef.current.__outsidePressBubbles){re=!1;return}}),!re)return}i(!1,N,"outside-press")}),Q=Vo(N=>{var A;const b=()=>{var M;le(N),(M=Hs(N))==null||M.removeEventListener(d,b)};(A=Hs(N))==null||A.addEventListener(d,b)});j.useEffect(()=>{if(!r||!a)return;s.current.__escapeKeyBubbles=T,s.current.__outsidePressBubbles=H;let N=-1;function A(B){i(!1,B,"ancestor-scroll")}function b(){window.clearTimeout(N),q.current=!0}function M(){N=window.setTimeout(()=>{q.current=!1},O0()?5:0)}const I=ai(o.floating);u&&(I.addEventListener("keydown",z?ne:te,z),I.addEventListener("compositionstart",b),I.addEventListener("compositionend",M)),D&&I.addEventListener(d,U?Q:le,U);let _=[];return m&&(Qt(o.domReference)&&(_=Qo(o.domReference)),Qt(o.floating)&&(_=_.concat(Qo(o.floating))),!Qt(o.reference)&&o.reference&&o.reference.contextElement&&(_=_.concat(Qo(o.reference.contextElement)))),_=_.filter(B=>{var $;return B!==(($=I.defaultView)==null?void 0:$.visualViewport)}),_.forEach(B=>{B.addEventListener("scroll",A,{passive:!0})}),()=>{u&&(I.removeEventListener("keydown",z?ne:te,z),I.removeEventListener("compositionstart",b),I.removeEventListener("compositionend",M)),D&&I.removeEventListener(d,U?Q:le,U),_.forEach(B=>{B.removeEventListener("scroll",A)}),window.clearTimeout(N)}},[s,o,u,D,d,r,i,m,a,T,H,te,z,ne,le,U,Q]),j.useEffect(()=>{x.current=!1},[D,d]);const J=j.useMemo(()=>({onKeyDown:te,[mU[g]]:N=>{f&&i(!1,N.nativeEvent,"reference-press")}}),[te,i,f,g]),ie=j.useMemo(()=>({onKeyDown:te,onMouseDown(){k.current=!0},onMouseUp(){k.current=!0},[vU[d]]:()=>{x.current=!0}}),[te,d]);return j.useMemo(()=>a?{reference:J,floating:ie}:{},[a,J,ie])}function yU(e){const{open:n=!1,onOpenChange:r,elements:i}=e,o=Jc(),s=j.useRef({}),[a]=j.useState(()=>tU()),u=A7()!=null,[h,d]=j.useState(i.reference),f=Vo((v,w,C)=>{s.current.openEvent=v?w:void 0,a.emit("openchange",{open:v,event:w,reason:C,nested:u}),r==null||r(v,w,C)}),g=j.useMemo(()=>({setPositionReference:d}),[]),m=j.useMemo(()=>({reference:h||i.reference||null,floating:i.floating||null,domReference:i.reference}),[h,i.reference,i.floating]);return j.useMemo(()=>({dataRef:s,open:n,onOpenChange:f,elements:m,events:a,floatingId:o,refs:g}),[n,f,m,a,o,g])}function N7(e){e===void 0&&(e={});const{nodeId:n}=e,r=yU({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||r,o=i.elements,[s,a]=j.useState(null),[u,h]=j.useState(null),f=(o==null?void 0:o.domReference)||s,g=j.useRef(null),m=qy();Br(()=>{f&&(g.current=f)},[f]);const v=UV({...e,elements:{...o,...u&&{reference:u}}}),w=j.useCallback(k=>{const T=Qt(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),contextElement:k}:k;h(T),v.refs.setReference(T)},[v.refs]),C=j.useCallback(k=>{(Qt(k)||k===null)&&(g.current=k,a(k)),(Qt(v.refs.reference.current)||v.refs.reference.current===null||k!==null&&!Qt(k))&&v.refs.setReference(k)},[v.refs]),P=j.useMemo(()=>({...v.refs,setReference:C,setPositionReference:w,domReference:g}),[v.refs,C,w]),D=j.useMemo(()=>({...v.elements,domReference:f}),[v.elements,f]),x=j.useMemo(()=>({...v,...i,refs:P,elements:D,nodeId:n}),[v,P,D,n,i]);return Br(()=>{i.dataRef.current.floatingContext=x;const k=m==null?void 0:m.nodesRef.current.find(T=>T.id===n);k&&(k.context=x)}),j.useMemo(()=>({...v,context:x,refs:P,elements:D}),[v,P,D,x])}const eD="active",tD="selected";function G1(e,n,r){const i=new Map,o=r==="item";let s=e;if(o&&e){const{[eD]:a,[tD]:u,...h}=e;s=h}return{...r==="floating"&&{tabIndex:-1,[rv]:""},...s,...n.map(a=>{const u=a?a[r]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((a,u)=>(u&&Object.entries(u).forEach(h=>{let[d,f]=h;if(!(o&&[eD,tD].includes(d)))if(d.indexOf("on")===0){if(i.has(d)||i.set(d,[]),typeof f=="function"){var g;(g=i.get(d))==null||g.push(f),a[d]=function(){for(var m,v=arguments.length,w=new Array(v),C=0;C<v;C++)w[C]=arguments[C];return(m=i.get(d))==null?void 0:m.map(P=>P(...w)).find(P=>P!==void 0)}}}else a[d]=f}),a),{})}}function G7(e){e===void 0&&(e=[]);const n=e.map(u=>u==null?void 0:u.reference),r=e.map(u=>u==null?void 0:u.floating),i=e.map(u=>u==null?void 0:u.item),o=j.useCallback(u=>G1(u,e,"reference"),n),s=j.useCallback(u=>G1(u,e,"floating"),r),a=j.useCallback(u=>G1(u,e,"item"),i);return j.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:a}),[o,s,a])}const wU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function _7(e,n){var r;n===void 0&&(n={});const{open:i,floatingId:o}=e,{enabled:s=!0,role:a="dialog"}=n,u=(r=wU.get(a))!=null?r:a,h=Jc(),f=A7()!=null,g=j.useMemo(()=>u==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:i?o:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":i?o:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:h},...u==="menu"&&f&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[u,o,f,i,h,a]),m=j.useMemo(()=>{const w={id:o,...u&&{role:u}};return u==="tooltip"||a==="label"?w:{...w,...u==="menu"&&{"aria-labelledby":h}}},[u,o,h,a]),v=j.useCallback(w=>{let{active:C,selected:P}=w;const D={role:"option",...C&&{id:o+"-option"}};switch(a){case"select":return{...D,"aria-selected":C&&P};case"combobox":return{...D,...C&&{"aria-selected":!0}}}return{}},[o,a]);return j.useMemo(()=>s?{reference:g,floating:m,item:v}:{},[s,g,m,v])}function xU({initialOpen:e=!1,placement:n="bottom",modal:r,sideOffset:i,open:o,onOpenChange:s}={}){const[a,u]=j.useState(e),[h,d]=j.useState(),[f,g]=j.useState(),m=o??a,v=s??u,w=N7({placement:n,open:m,onOpenChange:v,whileElementsMounted:jV,middleware:[XV(i||4),qV({crossAxis:n.includes("-"),fallbackAxisSideDirection:"end",padding:5}),KV({padding:5})]}),C=w.context,P=L7(C,{enabled:o==null}),D=H7(C),x=_7(C),k=G7([P,D,x]);return j.useMemo(()=>({open:m,setOpen:v,...k,...w,modal:r,labelId:h,descriptionId:f,setLabelId:d,setDescriptionId:g}),[m,v,k,w,r,h,f])}const j7=j.createContext(null),z7=()=>{const e=j.useContext(j7);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Zu({children:e,modal:n=!1,...r}){const i=xU({modal:n,...r});return G.jsx(j7.Provider,{value:i,children:e})}const rf=j.forwardRef(function({children:n,asChild:r=!1,...i},o){const s=z7(),a=n.ref,u=G0([s.refs.setReference,o,a]);return r&&j.isValidElement(n)?j.cloneElement(n,s.getReferenceProps({ref:u,...i,...n.props,"data-state":s.open?"open":"closed"})):G.jsx("button",{ref:u,type:"button","data-state":s.open?"open":"closed",...s.getReferenceProps(i),children:n})}),Qu=j.forwardRef(function({container:n,style:r,...i},o){const{context:s,...a}=z7(),u=G0([a.refs.setFloating,o]);return s.open?G.jsx(F7,{root:n,children:G.jsx(I7,{context:s,modal:a.modal,children:G.jsx("div",{ref:u,style:{...a.floatingStyles,...r},"aria-labelledby":a.labelId,"aria-describedby":a.descriptionId,...a.getFloatingProps(i),children:i.children})})}):null});var Lu=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Lu||{});const $7=j.createContext(null),fa=()=>{const e=j.useContext($7);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},CU=()=>{const{appState:e,setAppState:n}=fa();return r=>{n({...e,pointer:r})}},nD=[{icon:iW,pointer:gt.hand,titleKey:"toolbar.hand"},{icon:oW,pointer:gt.selection,titleKey:"toolbar.selection"},{icon:sW,pointer:no.mind,titleKey:"toolbar.mind"},{icon:lW,pointer:$e.text,titleKey:"toolbar.text"},{icon:n7,pointer:Ar.feltTipPen,titleKey:"toolbar.pen",key:"freehand"},{icon:cW,titleKey:"toolbar.arrow",key:"arrow",pointer:kt.straight},{icon:aW,titleKey:"toolbar.shape",key:"shape",pointer:$e.rectangle},{icon:MW,titleKey:"toolbar.image",key:"image"},{icon:RW,titleKey:"toolbar.extraTools",key:"extra-tools"}],rD=e=>Object.keys(kt).includes(e.pointer),iD=e=>Object.keys($e).includes(e.pointer)||Object.keys(ze).includes(e.pointer),EU=()=>{const e=qr(),{appState:n}=fa(),{t:r}=vr(),i=CU(),o=O.getBoardContainer(e),[s,a]=j.useState(!1),[u,h]=j.useState(!1),[d,f]=j.useState(!1),[g,m]=j.useState(nD.find(P=>P.key==="freehand")),v=P=>{lr(e,wn.dnd),Pt.updatePointerType(e,P),i(P)},w=()=>{lr(e,wn.drawing)},C=P=>O.isInPointer(P,[Ar.feltTipPen,Ar.eraser]);return G.jsx(Hl,{padding:1,className:jn("draw-toolbar",dv),children:G.jsx(na.Row,{gap:1,children:nD.map((P,D)=>{if(n.isMobile&&P.pointer===gt.hand)return G.jsx(G.Fragment,{});if(P.key==="freehand")return G.jsxs(Zu,{open:s||C(e),sideOffset:12,onOpenChange:x=>{a(x)},children:[G.jsx(rf,{asChild:!0,children:G.jsx(gi,{type:"icon",visible:!0,selected:s||C(e),icon:g.icon,title:g.titleKey?r(g.titleKey):"Freehand","aria-label":g.titleKey?r(g.titleKey):"Freehand",onPointerDown:()=>{a(!s),v(g.pointer)},onPointerUp:()=>{w()}})}),G.jsx(Qu,{container:o,children:G.jsx(bW,{onPointerUp:x=>{i(x),m(o7.find(k=>k.pointer===x))}})})]},D);if(P.key==="shape")return G.jsxs(Zu,{open:d,sideOffset:12,onOpenChange:x=>{f(x)},children:[G.jsx(rf,{asChild:!0,children:G.jsx(gi,{type:"icon",visible:!0,selected:d||iD(e)&&!O.isPointer(e,$e.text),icon:P.icon,title:P.titleKey?r(P.titleKey):"Shape","aria-label":P.titleKey?r(P.titleKey):"Shape",onPointerDown:()=>{f(!d),iD(e)?Pt.updatePointerType(e,e.pointer):Pt.updatePointerType(e,P.pointer)}})}),G.jsx(Qu,{container:o,children:G.jsx(IW,{onPointerUp:x=>{f(!1),i(x)}})})]},D);if(P.key==="arrow")return G.jsxs(Zu,{open:u,sideOffset:12,onOpenChange:x=>{h(x)},children:[G.jsx(rf,{asChild:!0,children:G.jsx(gi,{type:"icon",visible:!0,selected:u||rD(e),icon:P.icon,title:P.titleKey?r(P.titleKey):"","aria-label":P.titleKey?r(P.titleKey):"",onPointerDown:()=>{h(!u),rD(e)?Pt.updatePointerType(e,e.pointer):Pt.updatePointerType(e,P.pointer)}})}),G.jsx(Qu,{container:o,children:G.jsx(HW,{onPointerUp:x=>{h(!1),i(x)}})})]},D)})})})},j0=Xe.createContext({}),iv=(e="",n=!1)=>`menu-item menu-item-base ${e} ${n?"menu-item--active":""}`.trim(),W7=(e,n)=>{const r=j.useContext(j0);return eW(e,i=>{var s;const o=new CustomEvent(El.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});n==null||n(o),o.defaultPrevented||(s=r.onSelect)==null||s.call(r,o)})},V7=({icon:e,shortcut:n,children:r})=>G.jsxs(G.Fragment,{children:[e&&G.jsx("div",{className:"menu-item__icon",children:e}),G.jsx("div",{className:"menu-item__text",children:r}),n&&G.jsx("div",{className:"menu-item__shortcut",children:n})]}),Tr=({icon:e,onSelect:n,children:r,shortcut:i,className:o,selected:s,submenu:a,...u})=>{const[h,d]=j.useState(!1),f=j.useRef(),g=W7(u.onClick,n),m=G.jsx(V7,{icon:e,shortcut:i,children:r}),v=()=>{f.current&&window.clearTimeout(f.current),d(!0)},w=()=>{f.current=window.setTimeout(()=>{d(!1)},100)};return a?G.jsxs(Zu,{open:h,onOpenChange:d,placement:"right-start",children:[G.jsx(rf,{asChild:!0,children:G.jsx("button",{...u,type:"button",className:iv(o,s||h),title:u.title??u["aria-label"],onClick:g,onMouseEnter:v,onMouseLeave:w,children:m})}),G.jsx(Qu,{onMouseEnter:v,onMouseLeave:w,children:a})]}):G.jsx("button",{...u,onClick:g,type:"button",className:iv(o,s),title:u.title??u["aria-label"],children:m})};Tr.displayName="MenuItem";const U7=({children:e})=>G.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});U7.displayName="MenuItemBadge";Tr.Badge=U7;const X7=({icon:e,shortcut:n,href:r,children:i,onSelect:o,className:s="",selected:a,...u})=>{const h=W7(u.onClick,o);return G.jsx("a",{...u,href:r,target:"_blank",rel:"noreferrer",className:iv(s,a),title:u.title??u["aria-label"],onClick:h,children:G.jsx(V7,{icon:e,shortcut:n,children:i})})};X7.displayName="MenuItemLink";const of=(e,n)=>{const r=Me(e);nW(e,{elements:r.length>0?r:void 0,fillStyle:n?"transparent":"white"}).then(i=>{if(i){const o=n?"png":"jpg",s=tW(i),a=`drawnix-${new Date().getTime()}.${o}`;rW(s,a)}})},PU=async e=>{const n=await qA({description:"Image",extensions:Object.keys(zy)});Zm(e,n)},z0=({children:e,className:n="",onSelect:r,style:i})=>{const o=jn(`menu ${n}`).trim();return G.jsx(j0.Provider,{value:{onSelect:r},children:G.jsx("div",{className:o,style:i,"data-testid":"menu",children:G.jsx(Hl,{className:"menu-container",padding:2,children:e})})})};z0.displayName="Menu";const K7=()=>{const e=qr(),{t:n}=vr();return G.jsx(Tr,{"data-testid":"save-button",onSelect:()=>{YA(e)},icon:DW,"aria-label":n("menu.saveFile"),shortcut:Mc("CtrlOrCmd+S"),children:n("menu.saveFile")})};K7.displayName="SaveToFile";const q7=()=>{const e=qr(),n=OS(),{t:r}=vr(),i=(o,s,a)=>{e.children=o,e.viewport=s||{zoom:1},e.theme={themeColorMode:Zt.default},n.update(e.children,{board:e,parent:e,parentG:O.getElementHost(e)}),Pt.fitViewport(e)};return G.jsx(Tr,{"data-testid":"open-button",onSelect:()=>{k$(e).then(o=>{i(o.elements,o.viewport)})},icon:SW,"aria-label":r("menu.open"),children:r("menu.open")})};q7.displayName="OpenFile";const Y7=()=>{const e=qr(),n=j.useContext(j0),{t:r}=vr();return G.jsx(Tr,{icon:PW,"data-testid":"image-export-button",onSelect:()=>{of(e,!0)},submenu:G.jsxs(z0,{onSelect:()=>{var o;const i=new CustomEvent(El.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(o=n.onSelect)==null||o.call(n,i)},children:[G.jsx(Tr,{onSelect:()=>{of(e,!0)},"aria-label":r("menu.exportImage.png"),children:r("menu.exportImage.png")}),G.jsx(Tr,{onSelect:()=>{of(e,!1)},"aria-label":r("menu.exportImage.jpg"),children:r("menu.exportImage.jpg")})]}),shortcut:Mc("CtrlOrCmd+Shift+E"),"aria-label":r("menu.exportImage"),children:r("menu.exportImage")})};Y7.displayName="SaveAsImage";const Z7=()=>{const{appState:e,setAppState:n}=fa(),{t:r}=vr();return G.jsx(Tr,{icon:t7,"data-testid":"reset-button",onSelect:()=>{n({...e,openCleanConfirm:!0})},shortcut:Mc("CtrlOrCmd+Backspace"),"aria-label":r("menu.cleanBoard"),children:r("menu.cleanBoard")})};Z7.displayName="CleanBoard";const Q7=()=>G.jsx(X7,{icon:EW,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});Q7.displayName="Socials";const J7=()=>{const{language:e,setLanguage:n,t:r}=vr(),i=j.useContext(j0);return G.jsx(Tr,{icon:CW,"data-testid":"language-switcher-button",onSelect:()=>{},submenu:G.jsxs(z0,{onSelect:()=>{var s;const o=new CustomEvent(El.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(s=i.onSelect)==null||s.call(i,o)},children:[G.jsx(Tr,{onSelect:()=>{n("zh")},"aria-label":r("language.chinese"),selected:e==="zh",children:r("language.chinese")}),G.jsx(Tr,{onSelect:()=>{n("en")},"aria-label":r("language.english"),selected:e==="en",children:r("language.english")}),G.jsx(Tr,{onSelect:()=>{n("ru")},"aria-label":r("language.russian"),selected:e==="ru",children:r("language.russian")}),G.jsx(Tr,{onSelect:()=>{n("ar")},"aria-label":r("language.arabic"),selected:e==="ar",children:r("language.arabic")})]}),"aria-label":r("language.switcher"),children:r("language.switcher")})};J7.displayName="LanguageSwitcherMenu";const eB=()=>G.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});eB.displayName="MenuSeparator";const DU=()=>{const e=qr(),{t:n}=vr(),r=O.getBoardContainer(e),i=Me(e),[o,s]=j.useState(!1),a=e.history.undos.length<=0,u=e.history.redos.length<=0;return G.jsx(Hl,{padding:1,className:jn("app-toolbar",dv),children:G.jsxs(na.Row,{gap:1,children:[G.jsx(Zu,{sideOffset:12,open:o,onOpenChange:h=>{s(h)},placement:"bottom-start",children:G.jsx(Qu,{container:r,children:G.jsxs(z0,{onSelect:()=>{s(!1)},children:[G.jsx(q7,{}),G.jsx(K7,{}),G.jsx(Y7,{}),G.jsx(Z7,{}),G.jsx(eB,{}),G.jsx(J7,{}),G.jsx(Q7,{})]})})},0),G.jsx(gi,{type:"icon",icon:TW,visible:!0,title:n("general.undo"),"aria-label":n("general.undo"),onPointerUp:()=>{e.undo()},disabled:a},1),G.jsx(gi,{type:"icon",icon:AW,visible:!0,title:n("general.redo"),"aria-label":n("general.redo"),onPointerUp:()=>{e.redo()},disabled:u},2),i.length>0&&G.jsx(gi,{className:"duplicate",type:"icon",icon:BW,visible:!0,title:n("general.duplicate"),"aria-label":n("general.duplicate"),onPointerUp:()=>{Lv(e)}},3),i.length>0&&G.jsx(gi,{className:"trash",type:"icon",icon:t7,visible:!0,title:n("general.delete"),"aria-label":n("general.delete"),onPointerUp:()=>{Iv(e)}},4)]})})},SU=e=>r=>{const{globalKeyDown:i,keyDown:o}=r;return r.globalKeyDown=s=>{if(!(s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement)&&(O.getMovingPointInBoard(r)||O.isMovingPointInBoard(r))&&!O.hasBeenTextEditing(r)){if(ft.isHotkey(["mod+shift+e"],{byKey:!0})(s)){of(r,!0),s.preventDefault();return}if(ft.isHotkey(["mod+s"],{byKey:!0})(s)){YA(r),s.preventDefault();return}if(ft.isHotkey(["mod+backspace"])(s)||ft.isHotkey(["mod+delete"])(s)){e({openCleanConfirm:!0}),s.preventDefault();return}if(ft.isHotkey(["mod+u"])(s)){PU(r),s.preventDefault();return}if(!s.altKey&&!s.metaKey&&!s.ctrlKey){if(s.key==="h"){Pt.updatePointerType(r,gt.hand),e({pointer:gt.hand}),s.preventDefault();return}if(s.key==="v"){Pt.updatePointerType(r,gt.selection),e({pointer:gt.selection}),s.preventDefault();return}if(s.key==="m"){lr(r,wn.dnd),Pt.updatePointerType(r,no.mind),e({pointer:no.mind}),s.preventDefault();return}if(s.key==="e"){lr(r,wn.drawing),Pt.updatePointerType(r,Ar.eraser),e({pointer:Ar.eraser}),s.preventDefault();return}if(s.key==="p"){lr(r,wn.drawing),Pt.updatePointerType(r,Ar.feltTipPen),e({pointer:Ar.feltTipPen}),s.preventDefault();return}if(s.key==="a"&&!ft.isHotkey(["mod+a"])(s)&&Me(r).length===0){lr(r,wn.drawing),Pt.updatePointerType(r,kt.straight),e({pointer:kt.straight}),s.preventDefault();return}if(s.key==="r"||s.key==="o"||s.key==="t"){const u={r:$e.rectangle,o:$e.ellipse,t:$e.text};u[s.key]===$e.text?lr(r,wn.dnd):lr(r,wn.drawing),Pt.updatePointerType(r,u[s.key]),e({pointer:u[s.key]}),s.preventDefault();return}}}i(s)},r.keyDown=s=>{if(ft.isHotkey(["mod+z"],{byKey:!0})(s)){r.undo(),s.preventDefault();return}if(ft.isHotkey(["mod+shift+z"],{byKey:!0})(s)){r.redo(),s.preventDefault();return}o(s)},r};function TU(){return[Ar.feltTipPen,Ar.eraser]}const oD=(e,n)=>({id:St(),type:"freehand",shape:e,points:n}),tB=(e,n,r)=>{const i=ts(e,r,n)||r,o=n.points;return Uc(n.points)&&es(i,o)||vc(o,i)},AU=(e,n,r)=>{const i=R.getRectangleByPoints([r.anchor,r.focus]);return If(i,n.points,n.angle)},sD=e=>Me(e).filter(n=>si.isFreehand(n)),BU=e=>r7[e].strokeColor,MU=e=>r7[e].fill,RU=(e,n)=>{const r=BU(e.theme.themeColorMode);return n.strokeColor||r},kU=(e,n)=>{const r=si.isFreehand(n)&&E5(e,n)?MU(e.theme.themeColorMode):w0.fill;return n.fill||r};function bU(e,n){return Math.exp(-(e*e)/(2*n*n))}function FU(e,n,r){if(e.length<2)return e;const i=Math.floor(r/2),o=[];function s(u){if(u<0){const h=-u-1;if(h<e.length)return[2*e[0][0]-e[h][0],2*e[0][1]-e[h][1]]}else if(u>=e.length){const h=2*e.length-u-1;if(h>=0)return[2*e[e.length-1][0]-e[h][0],2*e[e.length-1][1]-e[h][1]]}return e[u]}function a(u){const h=Math.min(u,e.length-1-u);return Math.min(i,h+Math.floor(i/2))}for(let u=0;u<e.length;u++){let h=0,d=0,f=0;const g=a(u);for(let m=-g;m<=g;m++){const v=u+m,w=s(v);let C=bU(m,n);if(u<i||u>=e.length-i){const P=1+.5*(1-Math.abs(m)/g);C*=m===0?P:1}h+=w[0]*C,d+=w[1]*C,f+=C}u===0||u===e.length-1?o.push([e[u][0],e[u][1]]):o.push([h/f,d/f])}return o}class nB extends Fr{draw(n){const r=ht(n),i=RU(this.board,n),o=kU(this.board,n),s={strokeWidth:r,stroke:i,fill:o,fillStyle:"solid"},a=O.getRoughSVG(this.board).curve(FU(n.points,1,3),s);return ut(a,"round"),a}canDraw(n){return!0}}class OU extends us{constructor(){super()}initializeGenerator(){this.activeGenerator=Gc(this.board,{getRectangle:n=>R.getRectangleByPoints(n.points),getStrokeWidth:()=>Jt,getStrokeOpacity:()=>1,hasResizeHandle:()=>m0(this.board,this.element)}),this.generator=new nB(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(n,r){n.element!==r.element||n.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})):(n.selected!==r.selected||n.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}destroy(){var n;super.destroy(),(n=this.activeGenerator)==null||n.destroy()}}class IU{constructor(n={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...n}}process(n,r={}){const i=r.timestamp??Date.now();if(this.points.length===0){const h={point:n,timestamp:i,...r};return this.points.push(h),this.lastProcessedTime=i,n}if(i-this.lastProcessedTime<this.options.samplingRate&&i-this.lastProcessedTime<2)return null;const o={point:n,timestamp:i,...r};if(!this.checkDistance(n)&&this.points.length>1&&i-this.lastProcessedTime<32)return null;this.updatePoints(o);const a=this.calculateDynamicParameters(o),u=this.smooth(n,a);return this.lastProcessedTime=i,u}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(n){this.points.push(n),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(n){if(this.points.length===0)return!0;const r=this.points[this.points.length-1].point,i=this.getDistance(r,n);let o=this.options.minDistance;if(this.movingAverageVelocity.length>0){const s=this.getAverageVelocity();o*=Math.max(.5,Math.min(1.5,s/200))}return i>=o}calculateDynamicParameters(n){const r=this.calculateVelocity(n);this.updateMovingAverage(r);const i=this.getAverageVelocity(),o={...this.options};if(n.pressure!==void 0){const a=Math.pow(n.pressure,1.2);o.smoothing*=1-a*o.pressureSensitivity*.8}const s=Math.min(i/o.velocityThreshold,1);if(o.velocityWeight=.2+s*.3,o.smoothing*=1+s*.2,n.tiltX!==void 0&&n.tiltY!==void 0){const a=Math.sqrt(n.tiltX**2+n.tiltY**2)/90;o.smoothing*=1+a*o.tiltSensitivity*.7}return o}smooth(n,r){if(this.points.length<2)return n;const i=this.calculateWeights(r),o=i.reduce((a,u)=>a+u,0);if(o===0)return n;const s=[0,0];for(let a=0;a<this.points.length;a++){const u=i[a]/o;s[0]+=this.points[a].point[0]*u,s[1]+=this.points[a].point[1]*u}return s}calculateWeights(n){const r=[],i=this.points.length-1;for(let o=0;o<this.points.length;o++){let s=Math.pow(n.smoothing,(i-o)*.8);if(o<i){const a=this.getPointVelocity(o);s*=1+a*n.velocityWeight*.8}if(o>0&&o<i){const a=this.getPointCurvature(o);s*=1+a*n.curvatureWeight*.7}r.push(s)}return r}getDistance(n,r){return Ke(n[0],n[1],r[0],r[1])}calculateVelocity(n){if(this.points.length<2)return 0;const r=this.points[this.points.length-1],i=this.getDistance(r.point,n.point),o=n.timestamp-r.timestamp;return o>0?i/o:0}updateMovingAverage(n){this.movingAverageVelocity.push(n),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((n,r)=>n+r)/this.movingAverageVelocity.length}getPointVelocity(n){if(n>=this.points.length-1)return 0;const r=this.points[n],i=this.points[n+1],o=this.getDistance(r.point,i.point),s=i.timestamp-r.timestamp;return s>0?o/s:0}getPointCurvature(n){if(n<=0||n>=this.points.length-1)return 0;const r=this.points[n-1].point,i=this.points[n].point,o=this.points[n+1].point,s=this.getDistance(r,i),a=this.getDistance(i,o),u=this.getDistance(r,o),h=(s+a+u)/2;return 4*Math.sqrt(Math.max(0,h*(h-s)*(h-a)*(h-u)))/(s*a*u+1e-4)}}const LU=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e;let s=!1,a=!1,u=[],h=null;const d=new nB(e),f=new IU({smoothing:.7,pressureSensitivity:.6});let g=null;const m=v=>{if(s){const w=O.getPointer(e);a&&u.push(u[0]),g=oD(w,u)}g&&!v&&Te.insertNode(e,g,[e.children.length]),d==null||d.destroy(),g=null,s=!1,u=[],f.reset()};return e.pointerDown=v=>{const w=TU();if(O.isInPointer(e,w)&&ua(e)){s=!0,h=[v.x,v.y];const P=f.process(h),D=Ze(e,Je(e,P[0],P[1]));u.push(D)}n(v)},e.pointerMove=v=>{if(s){const w=[v.x,v.y];h&&Ke(h[0],h[1],w[0],w[1])<8?a=!0:a=!1;const C=f.process(w);if(C){d==null||d.destroy();const P=Ze(e,Je(e,C[0],C[1]));u.push(P);const D=O.getPointer(e);g=oD(D,u),d.processDrawing(g,O.getElementTopHost(e))}return}r(v)},e.pointerUp=v=>{m(),i(v)},e.globalPointerUp=v=>{m(!0),o(v)},e},HU=e=>{const n=e,{getDeletedFragment:r,buildFragment:i,insertFragment:o}=n;return n.getDeletedFragment=s=>{const a=sD(n);return a.length&&s.push(...a),r(s)},n.buildFragment=(s,a,u,h)=>{const d=sD(n);if(d.length){const f=LT(n,d,a?[a.x,a.y]:[0,0]);s=d0(s,{text:"",type:ao.elements,elements:f})}return i(s,a,u,h)},n.insertFragment=(s,a,u)=>{var d;const h=(d=s==null?void 0:s.elements)==null?void 0:d.filter(f=>si.isFreehand(f));h&&h.length>0&&HT(n,h,a),o(s,a,u)},n};var sf={exports:{}},NU=sf.exports,aD;function GU(){return aD||(aD=1,function(e,n){(function(r,i){e.exports=i()})(NU,function(){return(()=>{var r={607:(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.drawLaserPen=s.drawRoundCap=s.drawDrawingBezierData=s.calDrawingData=s.transformPointToBezier=s.calControlPoints=s.drainPoints=s.setRoundCap=s.setColor=s.setOpacity=s.setTension=s.setMinWidth=s.setMaxWidth=s.setDelay=void 0;var u=a(405),h=10,d=0,f=300,g=.3,m=0,v=255,w=0,C=0,P=!1;function D(x,k){return Math.sqrt(x*x+k*k)}s.setDelay=function(x){f=x},s.setMaxWidth=function(x){h=x},s.setMinWidth=function(x){d=x},s.setTension=function(x){g=x},s.setOpacity=function(x){m=x},s.setColor=function(x,k,T){v=x,w=k,C=T},s.setRoundCap=function(x){P=x},s.drainPoints=function(x){for(var k,T=Date.now()-f,H=0;H<x.length;H++)if(x[H].time>=T){k=H;break}var z=k===0?x:k===void 0?[]:x.slice(k);for(H=z.length-1;H>0;H--)(U=z[H]).x===z[H-1].x&&U.y===z[H-1].y&&z.splice(H,1);for(H=z.length-1;H>1;H--){var U;(U=z[H]).x===z[H-2].x&&U.y===z[H-2].y&&(z.splice(H-1,2),H--)}return z},s.calControlPoints=function(x){if(x.length<3)throw new Error("to calculate control points, the point counts should be larger than 3");for(var k=Array(x.length),T=x.length,H=T-2;H>0;H--){var z=x[H],U=x[H+1],q=x[H-1],te=q.x-U.x,ne=q.y-U.y,le=D(te,ne),Q=te/le,J=ne/le,ie=D(z.x-U.x,z.y-U.y),N=D(z.x-q.x,z.y-q.y),A=z.x-Q*ie*g,b=z.y-J*ie*g,M=z.x+Q*N*g,I=z.y+J*N*g;k[H]={cn:{x:A,y:b},cp:{x:M,y:I}},(isNaN(A)||isNaN(b)||isNaN(M)||isNaN(I))&&console.log("a")}return k[T-1]={cn:{x:x[T-1].x,y:x[T-1].y},cp:{x:(x[T-1].x+x[T-2].x)/2,y:(x[T-1].y+x[T-2].y)/2}},k[0]={cn:{x:(x[0].x+x[H+1].x)/2,y:(x[0].y+x[H+1].y)/2},cp:{x:x[0].x,y:x[0].y}},k},s.transformPointToBezier=function(x,k){for(var T=[],H=1;H<x.length;H++){var z=x[H-1],U=x[H],q=k[H-1].cn,te=k[H].cp,ne=new u.Bezier(z.x,z.y,q.x,q.y,te.x,te.y,U.x,U.y);T.push(ne)}return T},s.calDrawingData=function(x,k){for(var T=[],H=1-m,z=h-d,U=0,q=0;q<x.length;q++){var te=x[q],ne=te.length(),le=m+(U+=ne)/k*H,Q=d+U/k*z;T.push({bezier:te,opacity:le,width:Q})}return T},s.drawDrawingBezierData=function(x,k){x.save(),x.lineCap="butt";for(var T=0;T<k.length;T++){x.beginPath();var H=k[T],z=H.bezier,U=H.width,q=H.opacity;x.lineWidth=U,x.strokeStyle="rgba(".concat(v,",").concat(w,",").concat(C,",").concat(q,")");var te=z.points[0].x,ne=z.points[0].y;if(z.points[0].x!==z.points[1].x){var le=z.points[0].x,Q=z.points[0].y,J=(Q-z.points[1].y)/(le-z.points[1].x),ie=Q-J*le,N=Math.sqrt(.005/(1+J*J));ne=J*(te=(z.points[1].x>le?-N:N)+le)+ie}else ne+=z.points[0].y>z.points[1].y?.005:-.005;var A=z.points[3].x,b=z.points[3].y;if(z.points[2].x!==z.points[3].x){var M=z.points[3].x,I=z.points[3].y,_=(I-z.points[2].y)/(M-z.points[2].x),B=I-_*M;N=Math.sqrt(.005/(1+_*_)),b=_*(A=(z.points[2].x>M?-N:N)+M)+B}else b+=z.points[2].y>z.points[3].y?-.005:.005;x.moveTo(te,ne),x.bezierCurveTo(z.points[1].x,z.points[1].y,z.points[2].x,z.points[2].y,A,b),x.stroke(),x.closePath()}x.restore()},s.drawRoundCap=function(x,k){var T=k.bezier.points[3];x.save(),x.beginPath(),x.fillStyle="rgba(".concat(v,",").concat(w,",").concat(C,",").concat(k.opacity,")"),x.arc(T.x,T.y,k.width/2,0,2*Math.PI,!1),x.closePath(),x.fill(),x.restore()},s.drawLaserPen=function(x,k){if(k.length<3)throw new Error("too less points");var T=(0,s.calControlPoints)(k),H=(0,s.transformPointToBezier)(k,T),z=H.reduce(function(Q,J){return Q+J.length()},0),U=z/50,q=[];H.forEach(function(Q,J){var ie=Q.length(),N=Math.ceil(ie/U)+2,A=Q.getLUT(N);J<H.length-1&&A.pop(),q.push.apply(q,A)});var te=(0,s.calControlPoints)(q),ne=(0,s.transformPointToBezier)(q,te),le=(0,s.calDrawingData)(ne,z);(0,s.drawDrawingBezierData)(x,le),P&&(0,s.drawRoundCap)(x,le[le.length-1])}},405:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Bezier=void 0;const{abs:a,cos:u,sin:h,acos:d,atan2:f,sqrt:g,pow:m}=Math;function v(N){return N<0?-m(-N,.3333333333333333):m(N,.3333333333333333)}const w=Math.PI,C=2*w,P=w/2,D=Number.MAX_SAFE_INTEGER||9007199254740991,x=Number.MIN_SAFE_INTEGER||-9007199254740991,k={x:0,y:0,z:0},T={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(N,A){const b=A(N);let M=b.x*b.x+b.y*b.y;return b.z!==void 0&&(M+=b.z*b.z),g(M)},compute:function(N,A,b){if(N===0)return A[0].t=0,A[0];const M=A.length-1;if(N===1)return A[M].t=1,A[M];const I=1-N;let _=A;if(M===0)return A[0].t=N,A[0];if(M===1){const $={x:I*_[0].x+N*_[1].x,y:I*_[0].y+N*_[1].y,t:N};return b&&($.z=I*_[0].z+N*_[1].z),$}if(M<4){let $,W,Y,oe=I*I,re=N*N,ge=0;M===2?(_=[_[0],_[1],_[2],k],$=oe,W=I*N*2,Y=re):M===3&&($=oe*I,W=oe*N*3,Y=I*re*3,ge=N*re);const pe={x:$*_[0].x+W*_[1].x+Y*_[2].x+ge*_[3].x,y:$*_[0].y+W*_[1].y+Y*_[2].y+ge*_[3].y,t:N};return b&&(pe.z=$*_[0].z+W*_[1].z+Y*_[2].z+ge*_[3].z),pe}const B=JSON.parse(JSON.stringify(A));for(;B.length>1;){for(let $=0;$<B.length-1;$++)B[$]={x:B[$].x+(B[$+1].x-B[$].x)*N,y:B[$].y+(B[$+1].y-B[$].y)*N},B[$].z!==void 0&&(B[$]=B[$].z+(B[$+1].z-B[$].z)*N);B.splice(B.length-1,1)}return B[0].t=N,B[0]},computeWithRatios:function(N,A,b,M){const I=1-N,_=b,B=A;let $,W=_[0],Y=_[1],oe=_[2],re=_[3];return W*=I,Y*=N,B.length===2?($=W+Y,{x:(W*B[0].x+Y*B[1].x)/$,y:(W*B[0].y+Y*B[1].y)/$,z:!!M&&(W*B[0].z+Y*B[1].z)/$,t:N}):(W*=I,Y*=2*I,oe*=N*N,B.length===3?($=W+Y+oe,{x:(W*B[0].x+Y*B[1].x+oe*B[2].x)/$,y:(W*B[0].y+Y*B[1].y+oe*B[2].y)/$,z:!!M&&(W*B[0].z+Y*B[1].z+oe*B[2].z)/$,t:N}):(W*=I,Y*=1.5*I,oe*=3*I,re*=N*N*N,B.length===4?($=W+Y+oe+re,{x:(W*B[0].x+Y*B[1].x+oe*B[2].x+re*B[3].x)/$,y:(W*B[0].y+Y*B[1].y+oe*B[2].y+re*B[3].y)/$,z:!!M&&(W*B[0].z+Y*B[1].z+oe*B[2].z+re*B[3].z)/$,t:N}):void 0))},derive:function(N,A){const b=[];for(let M=N,I=M.length,_=I-1;I>1;I--,_--){const B=[];for(let $,W=0;W<_;W++)$={x:_*(M[W+1].x-M[W].x),y:_*(M[W+1].y-M[W].y)},A&&($.z=_*(M[W+1].z-M[W].z)),B.push($);b.push(B),M=B}return b},between:function(N,A,b){return A<=N&&N<=b||T.approximately(N,A)||T.approximately(N,b)},approximately:function(N,A,b){return a(N-A)<=(b||1e-6)},length:function(N){const A=T.Tvalues.length;let b=0;for(let M,I=0;I<A;I++)M=.5*T.Tvalues[I]+.5,b+=T.Cvalues[I]*T.arcfn(M,N);return .5*b},map:function(N,A,b,M,I){return M+(N-A)/(b-A)*(I-M)},lerp:function(N,A,b){const M={x:A.x+N*(b.x-A.x),y:A.y+N*(b.y-A.y)};return A.z!==void 0&&b.z!==void 0&&(M.z=A.z+N*(b.z-A.z)),M},pointToString:function(N){let A=N.x+"/"+N.y;return N.z!==void 0&&(A+="/"+N.z),A},pointsToString:function(N){return"["+N.map(T.pointToString).join(", ")+"]"},copy:function(N){return JSON.parse(JSON.stringify(N))},angle:function(N,A,b){const M=A.x-N.x,I=A.y-N.y,_=b.x-N.x,B=b.y-N.y;return f(M*B-I*_,M*_+I*B)},round:function(N,A){const b=""+N,M=b.indexOf(".");return parseFloat(b.substring(0,M+1+A))},dist:function(N,A){const b=N.x-A.x,M=N.y-A.y;return g(b*b+M*M)},closest:function(N,A){let b,M,I=m(2,63);return N.forEach(function(_,B){M=T.dist(A,_),M<I&&(I=M,b=B)}),{mdist:I,mpos:b}},abcratio:function(N,A){if(A!==2&&A!==3)return!1;if(N===void 0)N=.5;else if(N===0||N===1)return N;const b=m(N,A)+m(1-N,A);return a((b-1)/b)},projectionratio:function(N,A){if(A!==2&&A!==3)return!1;if(N===void 0)N=.5;else if(N===0||N===1)return N;const b=m(1-N,A);return b/(m(N,A)+b)},lli8:function(N,A,b,M,I,_,B,$){const W=(N-b)*(_-$)-(A-M)*(I-B);return W!=0&&{x:((N*M-A*b)*(I-B)-(N-b)*(I*$-_*B))/W,y:((N*M-A*b)*(_-$)-(A-M)*(I*$-_*B))/W}},lli4:function(N,A,b,M){const I=N.x,_=N.y,B=A.x,$=A.y,W=b.x,Y=b.y,oe=M.x,re=M.y;return T.lli8(I,_,B,$,W,Y,oe,re)},lli:function(N,A){return T.lli4(N,N.c,A,A.c)},makeline:function(N,A){return new ie(N.x,N.y,(N.x+A.x)/2,(N.y+A.y)/2,A.x,A.y)},findbbox:function(N){let A=D,b=D,M=x,I=x;return N.forEach(function(_){const B=_.bbox();A>B.x.min&&(A=B.x.min),b>B.y.min&&(b=B.y.min),M<B.x.max&&(M=B.x.max),I<B.y.max&&(I=B.y.max)}),{x:{min:A,mid:(A+M)/2,max:M,size:M-A},y:{min:b,mid:(b+I)/2,max:I,size:I-b}}},shapeintersections:function(N,A,b,M,I){if(!T.bboxoverlap(A,M))return[];const _=[],B=[N.startcap,N.forward,N.back,N.endcap],$=[b.startcap,b.forward,b.back,b.endcap];return B.forEach(function(W){W.virtual||$.forEach(function(Y){if(Y.virtual)return;const oe=W.intersects(Y,I);oe.length>0&&(oe.c1=W,oe.c2=Y,oe.s1=N,oe.s2=b,_.push(oe))})}),_},makeshape:function(N,A,b){const M=A.points.length,I=N.points.length,_=T.makeline(A.points[M-1],N.points[0]),B=T.makeline(N.points[I-1],A.points[0]),$={startcap:_,forward:N,back:A,endcap:B,bbox:T.findbbox([_,N,A,B]),intersections:function(W){return T.shapeintersections($,$.bbox,W,W.bbox,b)}};return $},getminmax:function(N,A,b){if(!b)return{min:0,max:0};let M,I,_=D,B=x;b.indexOf(0)===-1&&(b=[0].concat(b)),b.indexOf(1)===-1&&b.push(1);for(let $=0,W=b.length;$<W;$++)M=b[$],I=N.get(M),I[A]<_&&(_=I[A]),I[A]>B&&(B=I[A]);return{min:_,mid:(_+B)/2,max:B,size:B-_}},align:function(N,A){const b=A.p1.x,M=A.p1.y,I=-f(A.p2.y-M,A.p2.x-b);return N.map(function(_){return{x:(_.x-b)*u(I)-(_.y-M)*h(I),y:(_.x-b)*h(I)+(_.y-M)*u(I)}})},roots:function(N,A){A=A||{p1:{x:0,y:0},p2:{x:1,y:0}};const b=N.length-1,M=T.align(N,A),I=function(Be){return 0<=Be&&Be<=1};if(b===2){const Be=M[0].y,et=M[1].y,_e=M[2].y,ct=Be-2*et+_e;if(ct!==0){const rt=-g(et*et-Be*_e),wt=-Be+et;return[-(rt+wt)/ct,-(-rt+wt)/ct].filter(I)}return et!==_e&&ct===0?[(2*et-_e)/(2*et-2*_e)].filter(I):[]}const _=M[0].y,B=M[1].y,$=M[2].y;let W=3*B-_-3*$+M[3].y,Y=3*_-6*B+3*$,oe=-3*_+3*B,re=_;if(T.approximately(W,0)){if(T.approximately(Y,0))return T.approximately(oe,0)?[]:[-re/oe].filter(I);const Be=g(oe*oe-4*Y*re),et=2*Y;return[(Be-oe)/et,(-oe-Be)/et].filter(I)}Y/=W,oe/=W,re/=W;const ge=(3*oe-Y*Y)/3,pe=ge/3,X=(2*Y*Y*Y-9*Y*oe+27*re)/27,ae=X/2,fe=ae*ae+pe*pe*pe;let me,Ne,we,it,Ie;if(fe<0){const Be=-ge/3,et=g(Be*Be*Be),_e=-X/(2*et),ct=d(_e<-1?-1:_e>1?1:_e),rt=2*v(et);return we=rt*u(ct/3)-Y/3,it=rt*u((ct+C)/3)-Y/3,Ie=rt*u((ct+2*C)/3)-Y/3,[we,it,Ie].filter(I)}if(fe===0)return me=ae<0?v(-ae):-v(ae),we=2*me-Y/3,it=-me-Y/3,[we,it].filter(I);{const Be=g(fe);return me=v(-ae+Be),Ne=v(ae+Be),[me-Ne-Y/3].filter(I)}},droots:function(N){if(N.length===3){const A=N[0],b=N[1],M=N[2],I=A-2*b+M;if(I!==0){const _=-g(b*b-A*M),B=-A+b;return[-(_+B)/I,-(-_+B)/I]}return b!==M&&I===0?[(2*b-M)/(2*(b-M))]:[]}if(N.length===2){const A=N[0],b=N[1];return A!==b?[A/(A-b)]:[]}return[]},curvature:function(N,A,b,M,I){let _,B,$,W,Y=0,oe=0;const re=T.compute(N,A),ge=T.compute(N,b),pe=re.x*re.x+re.y*re.y;if(M?(_=g(m(re.y*ge.z-ge.y*re.z,2)+m(re.z*ge.x-ge.z*re.x,2)+m(re.x*ge.y-ge.x*re.y,2)),B=m(pe+re.z*re.z,1.5)):(_=re.x*ge.y-re.y*ge.x,B=m(pe,1.5)),_===0||B===0)return{k:0,r:0};if(Y=_/B,oe=B/_,!I){const X=T.curvature(N-.001,A,b,M,!0).k,ae=T.curvature(N+.001,A,b,M,!0).k;W=(ae-Y+(Y-X))/2,$=(a(ae-Y)+a(Y-X))/2}return{k:Y,r:oe,dk:W,adk:$}},inflections:function(N){if(N.length<4)return[];const A=T.align(N,{p1:N[0],p2:N.slice(-1)[0]}),b=A[2].x*A[1].y,M=A[3].x*A[1].y,I=A[1].x*A[2].y,_=18*(-3*b+2*M+3*I-A[3].x*A[2].y),B=18*(3*b-M-3*I),$=18*(I-b);if(T.approximately(_,0)){if(!T.approximately(B,0)){let re=-$/B;if(0<=re&&re<=1)return[re]}return[]}const W=B*B-4*_*$,Y=Math.sqrt(W),oe=2*_;return T.approximately(oe,0)?[]:[(Y-B)/oe,-(B+Y)/oe].filter(function(re){return 0<=re&&re<=1})},bboxoverlap:function(N,A){const b=["x","y"],M=b.length;for(let I,_,B,$,W=0;W<M;W++)if(I=b[W],_=N[I].mid,B=A[I].mid,$=(N[I].size+A[I].size)/2,a(_-B)>=$)return!1;return!0},expandbox:function(N,A){A.x.min<N.x.min&&(N.x.min=A.x.min),A.y.min<N.y.min&&(N.y.min=A.y.min),A.z&&A.z.min<N.z.min&&(N.z.min=A.z.min),A.x.max>N.x.max&&(N.x.max=A.x.max),A.y.max>N.y.max&&(N.y.max=A.y.max),A.z&&A.z.max>N.z.max&&(N.z.max=A.z.max),N.x.mid=(N.x.min+N.x.max)/2,N.y.mid=(N.y.min+N.y.max)/2,N.z&&(N.z.mid=(N.z.min+N.z.max)/2),N.x.size=N.x.max-N.x.min,N.y.size=N.y.max-N.y.min,N.z&&(N.z.size=N.z.max-N.z.min)},pairiteration:function(N,A,b){const M=N.bbox(),I=A.bbox(),_=1e5,B=b||.5;if(M.x.size+M.y.size<B&&I.x.size+I.y.size<B)return[(_*(N._t1+N._t2)/2|0)/_+"/"+(_*(A._t1+A._t2)/2|0)/_];let $=N.split(.5),W=A.split(.5),Y=[{left:$.left,right:W.left},{left:$.left,right:W.right},{left:$.right,right:W.right},{left:$.right,right:W.left}];Y=Y.filter(function(re){return T.bboxoverlap(re.left.bbox(),re.right.bbox())});let oe=[];return Y.length===0||(Y.forEach(function(re){oe=oe.concat(T.pairiteration(re.left,re.right,B))}),oe=oe.filter(function(re,ge){return oe.indexOf(re)===ge})),oe},getccenter:function(N,A,b){const M=A.x-N.x,I=A.y-N.y,_=b.x-A.x,B=b.y-A.y,$=M*u(P)-I*h(P),W=M*h(P)+I*u(P),Y=_*u(P)-B*h(P),oe=_*h(P)+B*u(P),re=(N.x+A.x)/2,ge=(N.y+A.y)/2,pe=(A.x+b.x)/2,X=(A.y+b.y)/2,ae=re+$,fe=ge+W,me=pe+Y,Ne=X+oe,we=T.lli8(re,ge,ae,fe,pe,X,me,Ne),it=T.dist(we,N);let Ie,Be=f(N.y-we.y,N.x-we.x),et=f(A.y-we.y,A.x-we.x),_e=f(b.y-we.y,b.x-we.x);return Be<_e?((Be>et||et>_e)&&(Be+=C),Be>_e&&(Ie=_e,_e=Be,Be=Ie)):_e<et&&et<Be?(Ie=_e,_e=Be,Be=Ie):_e+=C,we.s=Be,we.e=_e,we.r=it,we},numberSort:function(N,A){return N-A}};class H{constructor(A){this.curves=[],this._3d=!1,A&&(this.curves=A,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(A){return T.pointsToString(A.points)}).join(", ")+"]"}addCurve(A){this.curves.push(A),this._3d=this._3d||A._3d}length(){return this.curves.map(function(A){return A.length()}).reduce(function(A,b){return A+b})}curve(A){return this.curves[A]}bbox(){const A=this.curves;for(var b=A[0].bbox(),M=1;M<A.length;M++)T.expandbox(b,A[M].bbox());return b}offset(A){const b=[];return this.curves.forEach(function(M){b.push(...M.offset(A))}),new H(b)}}const{abs:z,min:U,max:q,cos:te,sin:ne,acos:le,sqrt:Q}=Math,J=Math.PI;class ie{constructor(A){let b=A&&A.forEach?A:Array.from(arguments).slice(),M=!1;if(typeof b[0]=="object"){M=b.length;const pe=[];b.forEach(function(X){["x","y","z"].forEach(function(ae){X[ae]!==void 0&&pe.push(X[ae])})}),b=pe}let I=!1;const _=b.length;if(M){if(M>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");I=!0}}else if(_!==6&&_!==8&&_!==9&&_!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const B=this._3d=!I&&(_===9||_===12)||A&&A[0]&&A[0].z!==void 0,$=this.points=[];for(let pe=0,X=B?3:2;pe<_;pe+=X){var W={x:b[pe],y:b[pe+1]};B&&(W.z=b[pe+2]),$.push(W)}const Y=this.order=$.length-1,oe=this.dims=["x","y"];B&&oe.push("z"),this.dimlen=oe.length;const re=T.align($,{p1:$[0],p2:$[Y]}),ge=T.dist($[0],$[Y]);this._linear=re.reduce((pe,X)=>pe+z(X.y),0)<ge/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(A,b,M,I){if(I===void 0&&(I=.5),I===0)return new ie(b,b,M);if(I===1)return new ie(A,b,b);const _=ie.getABC(2,A,b,M,I);return new ie(A,_.A,M)}static cubicFromPoints(A,b,M,I,_){I===void 0&&(I=.5);const B=ie.getABC(3,A,b,M,I);_===void 0&&(_=T.dist(b,B.C));const $=_*(1-I)/I,W=T.dist(A,M),Y=(M.x-A.x)/W,oe=(M.y-A.y)/W,re=_*Y,ge=_*oe,pe=$*Y,X=$*oe,ae=b.x-re,fe=b.y-ge,me=b.x+pe,Ne=b.y+X,we=B.A,it=we.x+(ae-we.x)/(1-I),Ie=we.y+(fe-we.y)/(1-I),Be=we.x+(me-we.x)/I,et=we.y+(Ne-we.y)/I,_e={x:A.x+(it-A.x)/I,y:A.y+(Ie-A.y)/I},ct={x:M.x+(Be-M.x)/(1-I),y:M.y+(et-M.y)/(1-I)};return new ie(A,_e,ct,M)}static getUtils(){return T}getUtils(){return ie.getUtils()}static get PolyBezier(){return H}valueOf(){return this.toString()}toString(){return T.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const A=this.points,b=["M",A[0].x,A[0].y,this.order===2?"Q":"C"];for(let M=1,I=A.length;M<I;M++)b.push(A[M].x),b.push(A[M].y);return b.join(" ")}setRatios(A){if(A.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=A,this._lut=[]}verify(){const A=this.coordDigest();A!==this._print&&(this._print=A,this.update())}coordDigest(){return this.points.map(function(A,b){return""+b+A.x+A.y+(A.z?A.z:0)}).join("")}update(){this._lut=[],this.dpoints=T.derive(this.points,this._3d),this.computedirection()}computedirection(){const A=this.points,b=T.angle(A[0],A[this.order],A[1]);this.clockwise=b>0}length(){return T.length(this.derivative.bind(this))}static getABC(A=2,b,M,I,_=.5){const B=T.projectionratio(_,A),$=1-B,W={x:B*b.x+$*I.x,y:B*b.y+$*I.y},Y=T.abcratio(_,A);return{A:{x:M.x+(M.x-W.x)/Y,y:M.y+(M.y-W.y)/Y},B:M,C:W,S:b,E:I}}getABC(A,b){b=b||this.get(A);let M=this.points[0],I=this.points[this.order];return ie.getABC(this.order,M,b,I,A)}getLUT(A){if(this.verify(),A=A||100,this._lut.length===A)return this._lut;this._lut=[],A++,this._lut=[];for(let b,M,I=0;I<A;I++)M=I/(A-1),b=this.compute(M),b.t=M,this._lut.push(b);return this._lut}on(A,b){b=b||5;const M=this.getLUT(),I=[];for(let _,B=0,$=0;B<M.length;B++)_=M[B],T.dist(_,A)<b&&(I.push(_),$+=B/M.length);return!!I.length&&(t/=I.length)}project(A){const b=this.getLUT(),M=b.length-1,I=T.closest(b,A),_=I.mpos,B=(_-1)/M,$=(_+1)/M,W=.1/M;let Y,oe,re=I.mdist,ge=B,pe=ge;for(re+=1;ge<$+W;ge+=W)Y=this.compute(ge),oe=T.dist(A,Y),oe<re&&(re=oe,pe=ge);return pe=pe<0?0:pe>1?1:pe,Y=this.compute(pe),Y.t=pe,Y.d=re,Y}get(A){return this.compute(A)}point(A){return this.points[A]}compute(A){return this.ratios?T.computeWithRatios(A,this.points,this.ratios,this._3d):T.compute(A,this.points,this._3d,this.ratios)}raise(){const A=this.points,b=[A[0]],M=A.length;for(let I,_,B=1;B<M;B++)I=A[B],_=A[B-1],b[B]={x:(M-B)/M*I.x+B/M*_.x,y:(M-B)/M*I.y+B/M*_.y};return b[M]=A[M-1],new ie(b)}derivative(A){return T.compute(A,this.dpoints[0],this._3d)}dderivative(A){return T.compute(A,this.dpoints[1],this._3d)}align(){let A=this.points;return new ie(T.align(A,{p1:A[0],p2:A[A.length-1]}))}curvature(A){return T.curvature(A,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return T.inflections(this.points)}normal(A){return this._3d?this.__normal3(A):this.__normal2(A)}__normal2(A){const b=this.derivative(A),M=Q(b.x*b.x+b.y*b.y);return{x:-b.y/M,y:b.x/M}}__normal3(A){const b=this.derivative(A),M=this.derivative(A+.01),I=Q(b.x*b.x+b.y*b.y+b.z*b.z),_=Q(M.x*M.x+M.y*M.y+M.z*M.z);b.x/=I,b.y/=I,b.z/=I,M.x/=_,M.y/=_,M.z/=_;const B={x:M.y*b.z-M.z*b.y,y:M.z*b.x-M.x*b.z,z:M.x*b.y-M.y*b.x},$=Q(B.x*B.x+B.y*B.y+B.z*B.z);B.x/=$,B.y/=$,B.z/=$;const W=[B.x*B.x,B.x*B.y-B.z,B.x*B.z+B.y,B.x*B.y+B.z,B.y*B.y,B.y*B.z-B.x,B.x*B.z-B.y,B.y*B.z+B.x,B.z*B.z];return{x:W[0]*b.x+W[1]*b.y+W[2]*b.z,y:W[3]*b.x+W[4]*b.y+W[5]*b.z,z:W[6]*b.x+W[7]*b.y+W[8]*b.z}}hull(A){let b=this.points,M=[],I=[],_=0;for(I[_++]=b[0],I[_++]=b[1],I[_++]=b[2],this.order===3&&(I[_++]=b[3]);b.length>1;){M=[];for(let B,$=0,W=b.length-1;$<W;$++)B=T.lerp(A,b[$],b[$+1]),I[_++]=B,M.push(B);b=M}return I}split(A,b){if(A===0&&b)return this.split(b).left;if(b===1)return this.split(A).right;const M=this.hull(A),I={left:this.order===2?new ie([M[0],M[3],M[5]]):new ie([M[0],M[4],M[7],M[9]]),right:this.order===2?new ie([M[5],M[4],M[2]]):new ie([M[9],M[8],M[6],M[3]]),span:M};return I.left._t1=T.map(0,0,1,this._t1,this._t2),I.left._t2=T.map(A,0,1,this._t1,this._t2),I.right._t1=T.map(A,0,1,this._t1,this._t2),I.right._t2=T.map(1,0,1,this._t1,this._t2),b?(b=T.map(b,A,1,0,1),I.right.split(b).left):I}extrema(){const A={};let b=[];return this.dims.forEach((function(M){let I=function(B){return B[M]},_=this.dpoints[0].map(I);A[M]=T.droots(_),this.order===3&&(_=this.dpoints[1].map(I),A[M]=A[M].concat(T.droots(_))),A[M]=A[M].filter(function(B){return B>=0&&B<=1}),b=b.concat(A[M].sort(T.numberSort))}).bind(this)),A.values=b.sort(T.numberSort).filter(function(M,I){return b.indexOf(M)===I}),A}bbox(){const A=this.extrema(),b={};return this.dims.forEach((function(M){b[M]=T.getminmax(this,M,A[M])}).bind(this)),b}overlaps(A){const b=this.bbox(),M=A.bbox();return T.bboxoverlap(b,M)}offset(A,b){if(b!==void 0){const M=this.get(A),I=this.normal(A),_={c:M,n:I,x:M.x+I.x*b,y:M.y+I.y*b};return this._3d&&(_.z=M.z+I.z*b),_}if(this._linear){const M=this.normal(0),I=this.points.map(function(_){const B={x:_.x+A*M.x,y:_.y+A*M.y};return _.z&&M.z&&(B.z=_.z+A*M.z),B});return[new ie(I)]}return this.reduce().map(function(M){return M._linear?M.offset(A)[0]:M.scale(A)})}simple(){if(this.order===3){const I=T.angle(this.points[0],this.points[3],this.points[1]),_=T.angle(this.points[0],this.points[3],this.points[2]);if(I>0&&_<0||I<0&&_>0)return!1}const A=this.normal(0),b=this.normal(1);let M=A.x*b.x+A.y*b.y;return this._3d&&(M+=A.z*b.z),z(le(M))<J/3}reduce(){let A,b,M=0,I=0,_=.01,B=[],$=[],W=this.extrema().values;for(W.indexOf(0)===-1&&(W=[0].concat(W)),W.indexOf(1)===-1&&W.push(1),M=W[0],A=1;A<W.length;A++)I=W[A],b=this.split(M,I),b._t1=M,b._t2=I,B.push(b),M=I;return B.forEach(function(Y){for(M=0,I=0;I<=1;)for(I=M+_;I<=1.01;I+=_)if(b=Y.split(M,I),!b.simple()){if(I-=_,z(M-I)<_)return[];b=Y.split(M,I),b._t1=T.map(M,0,1,Y._t1,Y._t2),b._t2=T.map(I,0,1,Y._t1,Y._t2),$.push(b),M=I;break}M<1&&(b=Y.split(M,1),b._t1=T.map(M,0,1,Y._t1,Y._t2),b._t2=Y._t2,$.push(b))}),$}translate(A,b,M){M=typeof M=="number"?M:b;const I=this.order;let _=this.points.map((B,$)=>(1-$/I)*b+$/I*M);return new ie(this.points.map((B,$)=>({x:B.x+A.x*_[$],y:B.y+A.y*_[$]})))}scale(A){const b=this.order;let M=!1;if(typeof A=="function"&&(M=A),M&&b===2)return this.raise().scale(M);const I=this.clockwise,_=this.points;if(this._linear)return this.translate(this.normal(0),M?M(0):A,M?M(1):A);const B=M?M(0):A,$=M?M(1):A,W=[this.offset(0,10),this.offset(1,10)],Y=[],oe=T.lli4(W[0],W[0].c,W[1],W[1].c);if(!oe)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(re){const ge=Y[re*b]=T.copy(_[re*b]);ge.x+=(re?$:B)*W[re].n.x,ge.y+=(re?$:B)*W[re].n.y}),M?([0,1].forEach(function(re){if(b!==2||!re){var ge=_[re+1],pe={x:ge.x-oe.x,y:ge.y-oe.y},X=M?M((re+1)/b):A;M&&!I&&(X=-X);var ae=Q(pe.x*pe.x+pe.y*pe.y);pe.x/=ae,pe.y/=ae,Y[re+1]={x:ge.x+X*pe.x,y:ge.y+X*pe.y}}}),new ie(Y)):([0,1].forEach(re=>{if(b===2&&re)return;const ge=Y[re*b],pe=this.derivative(re),X={x:ge.x+pe.x,y:ge.y+pe.y};Y[re+1]=T.lli4(ge,X,oe,_[re+1])}),new ie(Y))}outline(A,b,M,I){if(b=b===void 0?A:b,this._linear){const Ie=this.normal(0),Be=this.points[0],et=this.points[this.points.length-1];let _e,ct,rt;M===void 0&&(M=A,I=b),_e={x:Be.x+Ie.x*A,y:Be.y+Ie.y*A},rt={x:et.x+Ie.x*M,y:et.y+Ie.y*M},ct={x:(_e.x+rt.x)/2,y:(_e.y+rt.y)/2};const wt=[_e,ct,rt];_e={x:Be.x-Ie.x*b,y:Be.y-Ie.y*b},rt={x:et.x-Ie.x*I,y:et.y-Ie.y*I},ct={x:(_e.x+rt.x)/2,y:(_e.y+rt.y)/2};const sn=[rt,ct,_e],Qn=T.makeline(sn[2],wt[0]),an=T.makeline(wt[2],sn[0]),Yr=[Qn,new ie(wt),an,new ie(sn)];return new H(Yr)}const _=this.reduce(),B=_.length,$=[];let W,Y=[],oe=0,re=this.length();const ge=M!==void 0&&I!==void 0;function pe(Ie,Be,et,_e,ct){return function(rt){const wt=_e/et,sn=(_e+ct)/et,Qn=Be-Ie;return T.map(rt,0,1,Ie+wt*Qn,Ie+sn*Qn)}}_.forEach(function(Ie){const Be=Ie.length();ge?($.push(Ie.scale(pe(A,M,re,oe,Be))),Y.push(Ie.scale(pe(-b,-I,re,oe,Be)))):($.push(Ie.scale(A)),Y.push(Ie.scale(-b))),oe+=Be}),Y=Y.map(function(Ie){return W=Ie.points,W[3]?Ie.points=[W[3],W[2],W[1],W[0]]:Ie.points=[W[2],W[1],W[0]],Ie}).reverse();const X=$[0].points[0],ae=$[B-1].points[$[B-1].points.length-1],fe=Y[B-1].points[Y[B-1].points.length-1],me=Y[0].points[0],Ne=T.makeline(fe,X),we=T.makeline(ae,me),it=[Ne].concat($).concat([we]).concat(Y);return new H(it)}outlineshapes(A,b,M){b=b||A;const I=this.outline(A,b).curves,_=[];for(let B=1,$=I.length;B<$/2;B++){const W=T.makeshape(I[B],I[$-B],M);W.startcap.virtual=B>1,W.endcap.virtual=B<$/2-1,_.push(W)}return _}intersects(A,b){return A?A.p1&&A.p2?this.lineIntersects(A):(A instanceof ie&&(A=A.reduce()),this.curveintersects(this.reduce(),A,b)):this.selfintersects(b)}lineIntersects(A){const b=U(A.p1.x,A.p2.x),M=U(A.p1.y,A.p2.y),I=q(A.p1.x,A.p2.x),_=q(A.p1.y,A.p2.y);return T.roots(this.points,A).filter(B=>{var $=this.get(B);return T.between($.x,b,I)&&T.between($.y,M,_)})}selfintersects(A){const b=this.reduce(),M=b.length-2,I=[];for(let _,B,$,W=0;W<M;W++)B=b.slice(W,W+1),$=b.slice(W+2),_=this.curveintersects(B,$,A),I.push(..._);return I}curveintersects(A,b,M){const I=[];A.forEach(function(B){b.forEach(function($){B.overlaps($)&&I.push({left:B,right:$})})});let _=[];return I.forEach(function(B){const $=T.pairiteration(B.left,B.right,M);$.length>0&&(_=_.concat($))}),_}arcs(A){return A=A||.5,this._iterate(A,[])}_error(A,b,M,I){const _=(I-M)/4,B=this.get(M+_),$=this.get(I-_),W=T.dist(A,b),Y=T.dist(A,B),oe=T.dist(A,$);return z(Y-W)+z(oe-W)}_iterate(A,b){let M,I=0,_=1;do{M=0,_=1;let B,$,W,Y,oe,re=this.get(I),ge=!1,pe=!1,X=_,ae=1;do if(pe=ge,Y=W,X=(I+_)/2,B=this.get(X),$=this.get(_),W=T.getccenter(re,B,$),W.interval={start:I,end:_},ge=this._error(W,re,I,_)<=A,oe=pe&&!ge,oe||(ae=_),ge){if(_>=1){if(W.interval.end=ae=1,Y=W,_>1){let fe={x:W.x+W.r*te(W.e),y:W.y+W.r*ne(W.e)};W.e+=T.angle({x:W.x,y:W.y},fe,this.get(1))}break}_+=(_-I)/2}else _=X;while(!oe&&M++<100);if(M>=100)break;Y=Y||W,b.push(Y),I=ae}while(_<1);return b}}s.Bezier=ie}},i={};return function o(s){var a=i[s];if(a!==void 0)return a.exports;var u=i[s]={exports:{}};return r[s](u,u.exports,o),u.exports}(607)})()})}(sf)),sf.exports}var _o=GU();const rB="laser-pointer",_U=e=>{const n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/n};class jU{constructor(){this.mouseTrack=[],this.mouseMoveHandler=null,this.resizeHandler=null,this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1,this.container=null}init(n){this.container=O.getBoardContainer(n).closest(".drawnix"),this.cvsDom=this.container.querySelector(`.${rB}`),this.ctx=this.cvsDom.getContext("2d"),this.canvasPos=this.cvsDom.getBoundingClientRect(),this.mouseMoveHandler=r=>{if(!this.canvasPos)return;const i=r.clientX-this.canvasPos.x,o=r.clientY-this.canvasPos.y;this.mouseTrack.push({x:i,y:o,time:Date.now()}),this.ctx&&this.startDraw()},this.resizeHandler=()=>this.setCanvasSize(),this.container.addEventListener("pointermove",this.mouseMoveHandler),window.addEventListener("resize",this.resizeHandler),this.setCanvasSize()}destroy(){this.mouseMoveHandler&&this.container&&(this.container.removeEventListener("pointermove",this.mouseMoveHandler),this.mouseMoveHandler=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.ctx&&this.cvsDom&&this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height),this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1}startDraw(){this.drawing||(this.drawing=!0,this.draw())}draw(){if(!this.ctx||!this.cvsDom)return;this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height);let n=!1;if(this.mouseTrack=_o.drainPoints(this.mouseTrack),this.mouseTrack.length>=3)_o.setColor(211,211,211),_o.setDelay(180),_o.setRoundCap(!0),_o.setMaxWidth(10),_o.setMinWidth(0),_o.setOpacity(.6),_o.drawLaserPen(this.ctx,this.mouseTrack),n=!0;else{const r=this.mouseTrack[this.mouseTrack.length-1];if(!r)return;this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="rgba(211, 211, 211)",this.ctx.arc(r.x,r.y,5,0,Math.PI*2,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}n?requestAnimationFrame(()=>this.draw()):this.drawing=!1}setCanvasSize(){if(!this.cvsDom||!this.ctx)return;const n=this.cvsDom.getBoundingClientRect(),r=_U(this.ctx);this.cvsDom.setAttribute("width",`${n.width*r}px`),this.cvsDom.setAttribute("height",`${n.height*r}px`),this.ctx.scale(r,r),this.canvasPos=this.cvsDom.getBoundingClientRect()}}const zU=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e,s=new jU;let a=!1;const u=new Set,h=g=>{const m=Ze(e,Je(e,g[0],g[1]));e.children.filter(w=>si.isFreehand(w)).forEach(w=>{!u.has(w.id)&&tB(e,w,m)&&(yt.getElementG(w).style.opacity="0.2",u.add(w.id))})},d=()=>{if(u.size>0){const g=e.children.filter(m=>u.has(m.id));g.length>0&&Hv.removeElements(e,g)}},f=()=>{a&&(d(),a=!1,u.clear(),s.destroy())};return e.pointerDown=g=>{if(O.isInPointer(e,[Ar.eraser])&&ua(e)){a=!0,u.clear();const v=[g.x,g.y];h(v),s.init(e);return}n(g)},e.pointerMove=g=>{if(a){mi(e,"with-freehand-erase",()=>{const m=[g.x,g.y];h(m)});return}r(g)},e.pointerUp=g=>{if(a){f();return}i(g)},e.globalPointerUp=g=>{if(a){f();return}o(g)},e},$U=e=>{const{getRectangle:n,drawElement:r,isHit:i,isRectangleHit:o,getOneHitElement:s,isMovable:a,isAlign:u}=e;return e.drawElement=h=>si.isFreehand(h.element)?OU:r(h),e.getRectangle=h=>si.isFreehand(h)?R.getRectangleByPoints(h.points):n(h),e.isRectangleHit=(h,d)=>si.isFreehand(h)?AU(e,h,d):o(h,d),e.isHit=(h,d,f)=>si.isFreehand(h)?tB(e,h,d):i(h,d,f),e.getOneHitElement=h=>h.every(f=>si.isFreehand(f))?y5(e,h):s(h),e.isMovable=h=>si.isFreehand(h)?!0:a(h),e.isAlign=h=>si.isFreehand(h)?!0:u(h),e.setPluginOptions(zT,{customGeometryTypes:[i7]}),zU(HU(LU(e)))},iB=new WeakMap,lD=e=>!!iB.get(e),WU=(e,n)=>{iB.set(e,n)},VU=e=>r=>{const{pointerDown:i}=r;return r.pointerDown=o=>{pm(o)&&!lD(r)&&(WU(r,!0),e({isPencilMode:!0})),!(lD(r)&&!pm(o))&&i(o)},r};function UU({initialOpen:e=!1,open:n,onOpenChange:r}={}){const[i,o]=j.useState(e),[s,a]=j.useState(),[u,h]=j.useState(),d=n??i,f=r??o,g=N7({open:d,onOpenChange:f}),m=g.context,v=L7(m,{enabled:n==null}),w=H7(m,{outsidePressEvent:"mousedown"}),C=_7(m),P=G7([v,w,C]);return j.useMemo(()=>({open:d,setOpen:f,...P,...g,labelId:s,descriptionId:u,setLabelId:a,setDescriptionId:h}),[d,f,P,g,s,u])}const oB=j.createContext(null),eh=()=>{const e=j.useContext(oB);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function ov({children:e,...n}){const r=UU(n);return G.jsx(oB.Provider,{value:r,children:e})}j.forwardRef(function({children:n,asChild:r=!1,...i},o){const s=eh(),a=n.ref,u=G0([s.refs.setReference,o,a]);return r&&j.isValidElement(n)?j.cloneElement(n,s.getReferenceProps({ref:u,...i,...n.props,"data-state":s.open?"open":"closed"})):G.jsx("button",{ref:u,"data-state":s.open?"open":"closed",...s.getReferenceProps(i),children:n})});const sv=j.forwardRef(function(n,r){const{context:i,...o}=eh(),s=G0([o.refs.setFloating,r]);return i.open?G.jsx(F7,{root:n.container,children:G.jsx(pU,{className:"Dialog-overlay",lockScroll:!0,children:G.jsx(I7,{context:i,children:G.jsx("div",{ref:s,"aria-labelledby":o.labelId,"aria-describedby":o.descriptionId,...o.getFloatingProps(n),children:n.children})})})}):null});j.forwardRef(function({children:n,...r},i){const{setLabelId:o}=eh(),s=Jc();return j.useLayoutEffect(()=>(o(s),()=>o(void 0)),[s,o]),G.jsx("h2",{...r,ref:i,id:s,children:n})});j.forwardRef(function({children:n,...r},i){const{setDescriptionId:o}=eh(),s=Jc();return j.useLayoutEffect(()=>(o(s),()=>o(void 0)),[s,o]),G.jsx("p",{...r,ref:i,id:s,children:n})});j.forwardRef(function(n,r){const{setOpen:i}=eh();return G.jsx("button",{type:"button",...n,ref:r,onClick:()=>i(!1)})});const XU="modulepreload",KU=function(e){return"/"+e},uD={},sB=function(n,r,i){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(r.map(h=>{if(h=KU(h),h in uD)return;uD[h]=!0;const d=h.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":XU,d||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((m,v)=>{g.addEventListener("load",m),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return o.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},aB=({children:e})=>G.jsx("div",{className:"ttd-dialog-panels",children:e}),Zf=({label:e,children:n,panelAction:r,panelActionDisabled:i=!1,onTextSubmitInProgress:o,renderTopRight:s,renderSubmitShortcut:a,renderBottomRight:u})=>G.jsxs("div",{className:"ttd-dialog-panel",children:[G.jsxs("div",{className:"ttd-dialog-panel__header",children:[G.jsx("label",{children:e}),s==null?void 0:s()]}),n,G.jsxs("div",{className:jn("ttd-dialog-panel-button-container",{invisible:!r}),style:{display:"flex",alignItems:"center"},children:[G.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:r&&r.action,disabled:i||o,children:G.jsxs("div",{className:jn({invisible:o}),children:[r==null?void 0:r.label,(r==null?void 0:r.icon)&&G.jsx("span",{children:r.icon})]})}),!i&&!o&&(a==null?void 0:a()),u==null?void 0:u()]})]}),cD={CTRL_OR_CMD:I6||vf?"metaKey":"ctrlKey",ENTER:"Enter"},lB=({input:e,placeholder:n,onChange:r,onKeyboardSubmit:i})=>{const o=j.useRef(null),s=j.useRef(i);return s.current=i,j.useEffect(()=>{if(!s.current)return;const a=o.current;if(a){const u=h=>{var d;h[cD.CTRL_OR_CMD]&&h.key===cD.ENTER&&(h.preventDefault(),(d=s.current)==null||d.call(s))};return a.addEventListener(El.KEYDOWN,u),()=>{a.removeEventListener(El.KEYDOWN,u)}}},[]),G.jsx("textarea",{className:"ttd-dialog-input",onChange:r,value:e,placeholder:n,autoFocus:!0,ref:o})},qU=({error:e})=>G.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",G.jsx("p",{children:e})]}),uB=({error:e,value:n,loaded:r})=>{const i=[Q5,XA,GT,JA],o={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:lA};return G.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&G.jsx(qU,{error:e.message}),G.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:G.jsx(jT,{value:n,options:o,plugins:i,children:G.jsx(IS,{})})})]})},cB=()=>G.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[G.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Mc("CtrlOrCmd")}),G.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Mc("Enter")})]}),YU=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,ZU=()=>{const{appState:e,setAppState:n}=fa(),{t:r,language:i}=vr(),[o,s]=j.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});j.useEffect(()=>{(async()=>{try{const P=await sB(()=>import("./index-mRZgwR1I.js").then(D=>D.b6),[]);s({loaded:!0,api:Promise.resolve(P)})}catch(P){console.error("Failed to load mermaid library:",P),m(new Error(r("dialog.error.loadMermaid")))}})()},[]);const[a,u]=j.useState(()=>YU),[h,d]=j.useState(()=>[]),f=j.useDeferredValue(a.trim()),[g,m]=j.useState(null),v=qr();j.useEffect(()=>{(async()=>{try{const P=await o.api;let D;try{D=await P.parseMermaidToDrawnix(f)}catch{D=await P.parseMermaidToDrawnix(f.replace(/"/g,"'"))}const{elements:x}=D;d(x),m(null)}catch(P){m(P)}})()},[f,o]);const w=()=>{if(!h.length)return;const C=O.getBoardContainer(v).getBoundingClientRect(),P=[C.width/2,C.height/2],D=v.viewport.zoom,x=Rl(v),k=x[0]+P[0]/D,T=x[1]+P[1]/D,H=h,z=R.getBoundingRectangle(H.filter(q=>!Xn.isGroup(q)).map(q=>R.getRectangleByPoints(q.points))),U=[k-z.width/2,T-z.height/2];v.insertFragment({elements:JSON.parse(JSON.stringify(H))},U,pi.paste),n({...e,openDialogType:null})};return G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"ttd-dialog-desc",children:i==="zh"?G.jsxs(G.Fragment,{children:[r("dialog.mermaid.description")," ",G.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.flowchart")}),"",G.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.sequence")})," ",""," ",G.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.class")}),r("dialog.mermaid.otherTypes")]}):G.jsxs(G.Fragment,{children:[r("dialog.mermaid.description")," ",G.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.flowchart")}),","," ",G.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.sequence")}),","," ",G.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.class")}),r("dialog.mermaid.otherTypes")]})}),G.jsxs(aB,{children:[G.jsx(Zf,{label:r("dialog.mermaid.syntax"),children:G.jsx(lB,{input:a,placeholder:r("dialog.mermaid.placeholder"),onChange:C=>u(C.target.value),onKeyboardSubmit:()=>{w()}})}),G.jsx(Zf,{label:r("dialog.mermaid.preview"),panelAction:{action:()=>{w()},label:r("dialog.mermaid.insert")},renderSubmitShortcut:()=>G.jsx(cB,{}),children:G.jsx(uB,{value:h,loaded:o.loaded,error:g})})]})]})},QU=()=>{const{appState:e,setAppState:n}=fa(),{t:r,language:i}=vr(),[o,s]=j.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(C,P)=>null})});j.useEffect(()=>{(async()=>{try{const P=await sB(()=>import("./index-PodbCr9q.js"),__vite__mapDeps([0,1]));s({loaded:!0,api:Promise.resolve(P)})}catch(P){console.error("Failed to load mermaid library:",P),m(new Error(r("dialog.error.loadMermaid")))}})()},[]);const[a,u]=j.useState(()=>r("markdown.example")),[h,d]=j.useState(()=>[]),f=j.useDeferredValue(a.trim()),[g,m]=j.useState(null),v=qr();j.useEffect(()=>{u(r("markdown.example"))},[i]),j.useEffect(()=>{(async()=>{try{const P=await o.api;let D;try{D=await P.parseMarkdownToDrawnix(f)}catch{D=await P.parseMarkdownToDrawnix(f.replace(/"/g,"'"))}const x=D;x.points=[[0,0]],x&&(d([x]),m(null))}catch(P){m(P)}})()},[f,o]);const w=()=>{if(!h.length)return;const C=O.getBoardContainer(v).getBoundingClientRect(),P=[C.width/4,C.height/2-20],D=v.viewport.zoom,x=Rl(v),k=x[0]+P[0]/D,T=x[1]+P[1]/D,H=h;v.insertFragment({elements:JSON.parse(JSON.stringify(H))},[k,T],pi.paste),n({...e,openDialogType:null})};return G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"ttd-dialog-desc",children:r("dialog.markdown.description")}),G.jsxs(aB,{children:[G.jsx(Zf,{label:r("dialog.markdown.syntax"),children:G.jsx(lB,{input:a,placeholder:r("dialog.markdown.placeholder"),onChange:C=>u(C.target.value),onKeyboardSubmit:()=>{w()}})}),G.jsx(Zf,{label:r("dialog.markdown.preview"),panelAction:{action:()=>{w()},label:r("dialog.markdown.insert")},renderSubmitShortcut:()=>G.jsx(cB,{}),children:G.jsx(uB,{value:h,loaded:o.loaded,error:g})})]})]})},JU=({container:e})=>{const{appState:n,setAppState:r}=fa();return G.jsxs(G.Fragment,{children:[G.jsx(ov,{open:n.openDialogType===Lu.mermaidToDrawnix,onOpenChange:i=>{r({...n,openDialogType:i?Lu.mermaidToDrawnix:null})},children:G.jsx(sv,{className:"Dialog ttd-dialog",container:e,children:G.jsx(ZU,{})})}),G.jsx(ov,{open:n.openDialogType===Lu.markdownToDrawnix,onOpenChange:i=>{r({...n,openDialogType:i?Lu.markdownToDrawnix:null})},children:G.jsx(sv,{className:"Dialog ttd-dialog",container:e,children:G.jsx(QU,{})})})]})},eX=({container:e})=>{const{appState:n,setAppState:r}=fa(),{t:i}=vr(),o=qr();return G.jsx(ov,{open:n.openCleanConfirm,onOpenChange:s=>{r({...n,openCleanConfirm:s})},children:G.jsxs(sv,{className:"clean-confirm",container:e,children:[G.jsx("h2",{className:"clean-confirm__title",children:i("cleanConfirm.title")}),G.jsx("p",{className:"clean-confirm__description",children:i("cleanConfirm.description")}),G.jsxs("div",{className:"clean-confirm__actions",children:[G.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{r({...n,openCleanConfirm:!1})},children:i("cleanConfirm.cancel")}),G.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{o.deleteFragment(o.children),r({...n,openCleanConfirm:!1})},children:i("cleanConfirm.ok")})]})]})})},hD=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isHovering},dD=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isEditing},tX=e=>r=>{const{pointerMove:i}=r;let o=null,s=null;return r.pointerMove=a=>{(O.isPointer(r,gt.selection)||O.isPointer(r,gt.hand))&&!fl(r)&&!eo(r)&&!hD(r)&&!dD(r)&&mi(r,"with-text-link",()=>{const u=a.target.closest(".plait-board-link");if(u&&u!==o){const h=u.closest(".plait-text-container"),d=Pe.toSlateNode(void 0,h),f=Pe.toSlateNode(void 0,u);o=u,e({linkState:{targetDom:u,targetElement:f,editor:d,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(s)}else!u&&o&&(s=setTimeout(()=>{!hD(r)&&!dD(r)&&e({linkState:null})},300),o=null)}),i(a)},r},nX=()=>{const{t:e}=vr();return G.jsx("div",{className:"drawnix-tutorial",children:G.jsx("div",{className:"tutorial-overlay",children:G.jsxs("div",{className:"tutorial-content",children:[G.jsx("h1",{className:"brand-title",children:e("tutorial.title")}),G.jsx("p",{className:"brand-description",children:e("tutorial.description")}),G.jsx("p",{className:"brand-tooltip",children:e("tutorial.dataDescription")}),G.jsxs("div",{className:"feature-pointer top-left",children:[G.jsxs("svg",{className:"pointer-arrow-svg",width:"130",height:"100",viewBox:"0 0 130 100",children:[G.jsx("defs",{children:G.jsx("marker",{id:"arrow-left",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:G.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),G.jsx("path",{d:"M 80,70 Q 35,60 15,15",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-left)"})]}),G.jsx("div",{className:"pointer-content",children:G.jsx("p",{children:e("tutorial.appToolbar")})})]}),G.jsxs("div",{className:"feature-pointer top-center",children:[G.jsxs("svg",{className:"pointer-arrow-svg",width:"100",height:"130",viewBox:"0 0 100 130",children:[G.jsx("defs",{children:G.jsx("marker",{id:"arrow-top",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:G.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),G.jsx("path",{d:"M 45,90 Q 20,50 45,10",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-top)"})]}),G.jsx("div",{className:"pointer-content",children:G.jsx("p",{children:e("tutorial.creationToolbar")})})]}),G.jsxs("div",{className:"feature-pointer bottom-right",children:[G.jsxs("svg",{className:"pointer-arrow-svg",width:"180",height:"100",viewBox:"0 0 180 100",children:[G.jsx("defs",{children:G.jsx("marker",{id:"arrow-right",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:G.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),G.jsx("path",{d:"M 20,25 Q 75,20 105,70",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-right)"})]}),G.jsx("div",{className:"pointer-content",children:G.jsx("p",{children:e("tutorial.themeDescription")})})]})]})})})},rX=({value:e,viewport:n,theme:r,onChange:i,onSelectionChange:o,onViewportChange:s,onThemeChange:a,onValueChange:u,afterInit:h,tutorial:d=!1})=>{const f={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:lA},[g,m]=j.useState(()=>{const x=new u$(window.navigator.userAgent);return{pointer:gt.hand,isMobile:x.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[v,w]=j.useState(null);v&&(v.appState=g);const C=x=>{m({...g,...x})},P=[Q5,GT,XA,c$,JA,SU(C),$U,VU(C),tX(C)],D=j.useRef(null);return G.jsx(K$,{children:G.jsx($7.Provider,{value:{appState:g,setAppState:m},children:G.jsxs("div",{className:jn("drawnix",{"drawnix--mobile":g.isMobile}),ref:D,children:[G.jsxs(jT,{value:e,viewport:n,theme:r,options:f,plugins:P,onChange:x=>{i&&i(x)},onSelectionChange:o,onViewportChange:s,onThemeChange:a,onValueChange:u,children:[G.jsx(IS,{afterInit:x=>{w(x),h&&h(x)},children:d&&v&&O.isPointer(v,gt.selection)&&G.jsx(nX,{})}),G.jsx(DU,{}),G.jsx(EU,{}),G.jsx(JU,{container:D.current}),G.jsx(eX,{container:D.current})]}),G.jsx("canvas",{className:`${rB} mouse-course-hidden`})]})})})},iX=JSON.parse(`[{"id":"Aheki","type":"arrow-line","shape":"curve","source":{"marker":"none","connection":[1,0.420824927949495],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[0,0.5],"boundId":"XjwHr"},"opacity":1,"points":[[-17.743654586406365,-254.17051515541806],[159.7017822265625,-87.00341796875]],"strokeWidth":2},{"id":"erABA","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Education"}],"type":"paragraph","align":"center"},"points":[[165.4587246165798,-233.8383929236789],[552.3973214695168,-199.7075335486789]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"XjwHr","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""}],"type":"paragraph","align":"center"},"points":[[165.4587246165798,-196.6236858846031],[552.3973214695168,-89.06869060835731]],"strokeWidth":2},{"id":"JSMsb","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":40,"text":{"children":[{"text":"Shiv Nadar University Chennai (2023 - 2027)\\nB.Tech in AI & DS"}],"type":"paragraph"},"points":[[171.12084479730203,-191.5261604041786],[547.420649484802,-151.5261604041786]],"autoSize":false},{"id":"zPJwd","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":40,"text":{"children":[{"text":"> Core Committee member of Coding Club's SDE vertical\\n> Built websites for various inter college events"}],"type":"paragraph"},"points":[[171.12084479730203,-136.1578370118517],[547.420649484802,-96.15783701185171]],"autoSize":true},{"id":"BPhwe","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"","color":"#333333ff"}],"type":"paragraph","align":"center"},"points":[[166.20880038371098,-449.9890508762695],[553.147397236648,-315.8998529565559]],"strokeWidth":2,"strokeColor":"#333333"},{"id":"WfXiF","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Find me here ->","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[186.9029877940178,-433.6495763885527],[297.6608002940178,-413.6495763885527]],"autoSize":true},{"id":"mNNFr","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"","color":"#1E90FFff"},{"type":"link","url":"https://github.com/try3d","children":[{"text":"Github","url":"try3d.github.io","color":"#1E90FFff"}]},{"text":"","color":"#1E90FFff"}],"type":"paragraph","align":"center"},"points":[[186.9029877940178,-403.86122123927123],[354.54271780451865,-371.25807018871245]],"strokeWidth":2,"strokeColor":"#1E90FF"},{"id":"KeajT","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"External Links"}],"type":"paragraph","align":"center"},"points":[[166.20880038371098,-486.6039847025109],[553.147397236648,-452.4731253275109]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"RAXPz","type":"arrow-line","shape":"curve","source":{"marker":"none","connection":[1,0.4152947094965555],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[0,0.5000000000000002],"boundId":"BPhwe"},"opacity":1,"points":[[-16.949302909405333,-255.34733245467874],[164.27286060491224,-344.2798675264945]],"strokeWidth":2},{"id":"swTmx","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":40,"text":{"children":[{"text":"Saran Shankar\\n{ SDE, CSE Undergrad }"}],"type":"paragraph","align":"center"},"points":[[-257.66082576610256,-298.0654309039652],[-18.69497452867421,-247.19205639377142]],"strokeWidth":2,"strokeColor":null,"fill":"#D3D3D3ed"},{"id":"eSeCr","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Experience"}],"type":"paragraph","align":"center"},"points":[[-266.3198646308863,-582.7581510596766],[-10.035935663890456,-548.6272916846766]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"ZiDhe","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""}],"type":"paragraph","align":"center"},"points":[[-266.3198646308863,-545.5434440206009],[-10.035935663890456,-470.7949980371242]],"strokeWidth":2},{"id":"WDwCT","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":40,"text":{"children":[{"text":"Miniture\\nSDE Intern (March 2025 - Present)","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-255.19221640648735,-536.2689335706535],[-20.38619265457342,-478.2224534345199]],"autoSize":false},{"id":"MsFyt","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Tech Stack"}],"type":"paragraph","align":"center"},"points":[[-321.1066383272281,-37.027113136197954],[44.75083803245132,-4.639178059489656]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"HWEsX","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""}],"type":"paragraph","align":"center"},"points":[[-321.1066383272281,-1.7128099644717325],[44.75083803245132,136.3824139324994]],"strokeWidth":2},{"id":"rPDmr","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":120,"text":{"children":[{"text":"Languages: Node, Python, Go\\nBackend: Express.JS, AWS Lambda, Flask\\nFrontend: React, Expo, Next.JS, Svelte, Tailwind\\nDB: PostgreSQL, MySQL, Redis, Supabase, Firebase\\nCloud: AWS, GCP, Docker, Kubernetes\\nMisc: Git, CI/CD, Posthog","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-313.65959426597885,3.369804386940075],[37.30379397120208,130.6038761139684]],"autoSize":false},{"id":"ipTGK","type":"arrow-line","shape":"straight","source":{"marker":"none","connection":[0.5,1],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[0.5,0],"boundId":"MsFyt"},"opacity":1,"points":[[-139.16387297181473,-128.39249803979885],[-138.15027144853926,-35.34903231933856]],"strokeWidth":2},{"id":"JWQGY","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Summary"}],"type":"paragraph","align":"center"},"points":[[-832.1913355660765,-631.5961142686767],[-535.6110016319884,-597.4652548936767]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"eatrn","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""}],"type":"paragraph","align":"center"},"points":[[-832.1913355660765,-594.3814072296009],[-535.6110016319884,-324.84879260036314]],"strokeWidth":2},{"id":"Srwwb","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":80,"text":{"children":[{"text":"> I am a Software Engineer with hands-on experience building practical solutions through clean and efficient code\\n","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-814.355263204564,-539.8907191540063],[-548.7612109909646,-451.14055017418707]],"autoSize":false},{"id":"zJhzQ","type":"arrow-line","shape":"straight","source":{"marker":"none","connection":[0.5,0],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[0.5,1],"boundId":"ZiDhe"},"opacity":1,"points":[[-134.71238300855816,-296.13893679695593],[-138.17790014738839,-463.44073589560935]],"strokeWidth":2},{"id":"StZBX","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":" Hello, I am Saran","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-814.355263204564,-573.5832721651389],[-676.027138204564,-553.5832721651389]],"autoSize":true},{"id":"dExeP","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":40,"text":{"children":[{"text":"> Curious about anything new, tools, frameworks and technologies","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-814.355263204564,-389.2010937348095],[-548.7612109909646,-346.97551190566986]],"autoSize":false},{"id":"TFHAA","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":60,"text":{"children":[{"text":"> Skilled in translating real-world requirements into robust, production-ready software","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-814.355263204564,-449.19406202256516],[-548.7612109909646,-391.1475818864315]],"autoSize":false},{"id":"xkePp","type":"arrow-line","shape":"curve","source":{"marker":"none","connection":[0,0.5000000000000003],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[1,0.4999999999999999],"boundId":"eatrn"},"opacity":1,"points":[[-259.40787743357146,-273.72086093893927],[-443.81934779135076,-449.6184893214379]],"strokeWidth":2},{"id":"aRAKz","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Projects"}],"type":"paragraph","align":"center"},"points":[[-908.8243664694614,-254.14508111653845],[-441.81452491135656,-220.01422174153845]],"strokeWidth":2,"fill":"#D3D3D3ed"},{"id":"xhkNH","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""}],"type":"paragraph","align":"center"},"points":[[-908.8243664694614,-216.93037407746272],[-441.81452491135656,130.60387611396843]],"strokeWidth":2},{"id":"szPMh","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":80,"text":{"children":[{"text":"1. Eunoia\\nPersonalized DIY project recommendation platform that fine-tuned models + Agentic RAG to detect objects in the users environment and suggest relevant, hands-on activities for children","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-898.1872420344937,-205.0642450569593],[-441.81452491135656,-116.31407607713999]],"autoSize":false},{"id":"wnKYx","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":100,"text":{"children":[{"text":"2. RaftKV\\nFault-tolerant key-value store based on the Raft consensus algorithm for strong consistency across nodes, leader election, log replication, term-based safety, and snapshotting. Built for resilience over network partitions, failovers and recovery from faults","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-898.1872420344937,-66.1035775484778],[-451.4805036418679,76.66026126012969]],"autoSize":false},{"id":"XjMma","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Tech Stack: Python, FastAPI, Expo, BS4, Gemini, ChromaDB","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-898.1872420344937,-113.45586276799352],[-505.4880232844937,-93.45586276799352]],"autoSize":true},{"id":"XmXSE","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""},{"type":"link","url":"https://github.com/try3d/eunoia","children":[{"text":"Github","url":"https://try3d.github.io"}]},{"text":""}],"type":"paragraph"},"points":[[-898.1872420344937,-83.01172097164539],[-847.0866560969937,-63.01172097164539]],"autoSize":true},{"id":"zXjNh","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""},{"type":"link","url":"https://github.com/Try3D/Eunoia/releases/tag/v1.0.0","children":[{"text":"Release","url":"https://try3d.github.io"}]},{"text":""}],"type":"paragraph"},"points":[[-815.6612183597106,-83.01172097164539],[-757.1846558597106,-63.01172097164539]],"autoSize":true},{"id":"Ztyhj","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"Tech Stack: Go, Raft, CLI, Distributed Systems","url":"https://try3d.github.io"}],"type":"paragraph"},"points":[[-898.1872420344937,60.68180518516169],[-591.6003279719938,80.68180518516169]],"autoSize":true},{"id":"kWetA","type":"geometry","shape":"text","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":""},{"type":"link","url":"https://github.com/Try3D/RaftKV","children":[{"text":"Github","url":"https://try3d.github.io"}]},{"text":""}],"type":"paragraph"},"points":[[-898.1872420344937,89.7521178369621],[-847.0866560969937,109.7521178369621]],"autoSize":true},{"id":"jzktk","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"","color":"#1E90FFff"},{"type":"link","url":"mailto:rsarans186@gmail.com","children":[{"text":"Email","url":"try3d.github.io","color":"#1E90FFff"}]},{"text":"","color":"#1E90FFff"}],"type":"paragraph","align":"center"},"points":[[186.9029877940178,-366.21500182117063],[354.54271780451865,-333.61185077061185]],"strokeWidth":2,"strokeColor":"#1E90FF"},{"id":"njcJG","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"","color":"#1E90FFff"},{"type":"link","url":"https://try3d.github.io","children":[{"text":"Resume","url":"try3d.github.io","color":"#1E90FFff"}]},{"text":"","color":"#1E90FFff"}],"type":"paragraph","align":"center"},"points":[[359.67809881017945,-366.21500182117063],[527.3178288206802,-333.61185077061185]],"strokeWidth":2,"strokeColor":"#1E90FF"},{"id":"tiszc","type":"geometry","shape":"rectangle","angle":0,"opacity":1,"textHeight":20,"text":{"children":[{"text":"","color":"#1E90FFff"},{"type":"link","url":"https://linkedin.com/in/rsarans186","children":[{"text":"Linkedin","url":"try3d.github.io","color":"#1E90FFff"}]},{"text":"","color":"#1E90FFff"}],"type":"paragraph","align":"center"},"points":[[359.67809881017945,-403.86122123927123],[527.3178288206802,-371.25807018871245]],"strokeWidth":2,"strokeColor":"#1E90FF"},{"id":"ZTXhk","type":"arrow-line","shape":"curve","source":{"marker":"none","connection":[0,0.5000000000000003],"boundId":"swTmx"},"texts":[],"target":{"marker":"arrow","connection":[1,0.5],"boundId":"xhkNH"},"opacity":1,"points":[[-259.0043524828395,-269.8729812309857],[-453.1904913515193,-16.52943203653706]],"strokeWidth":2}]`),oX={zoom:1,origination:[-933.8384846164067,-689.1068501680886]},Gd={elements:iX,viewport:oX};function sX(){const[e,n]=j.useState({children:[]}),[r,i]=j.useState(!1);return j.useEffect(()=>{Array.isArray(Gd.elements)?(n({children:Gd.elements,viewport:Gd.viewport}),Gd.elements.length===0&&i(!0)):i(!0)},[]),G.jsx(rX,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:o=>{const s=o;n(s),s.children&&s.children.length>0&&i(!1)},tutorial:r,afterInit:o=>{console.log("board initialized")}})}const aX=Qf.createRoot(document.getElementById("root"));aX.render(G.jsx(j.StrictMode,{children:G.jsx(sX,{})}));export{mn as A,$e as B,fc as D,ze as F,Ae as M,De as N,Xn as P,R,co as S,sB as _,Xc as a,ca as b,n9 as c,Cy as d,sl as e,XH as f,oa as g,QT as h,kt as i,Fe as j,St as k,R0 as l,$c as m,ud as n};
