import{l as en,b4 as tn,b5 as nn}from"./index-XK61J9Y4.js";import{d as Xe,c as rn}from"./browser-_ca9S3D6.js";var ut=Object.prototype.hasOwnProperty;function ot(e,n,t){for(t of e.keys())if(Be(t,n))return t}function Be(e,n){var t,r,o;if(e===n)return!0;if(e&&n&&(t=e.constructor)===n.constructor){if(t===Date)return e.getTime()===n.getTime();if(t===RegExp)return e.toString()===n.toString();if(t===Array){if((r=e.length)===n.length)for(;r--&&Be(e[r],n[r]););return r===-1}if(t===Set){if(e.size!==n.size)return!1;for(r of e)if(o=r,o&&typeof o=="object"&&(o=ot(n,o),!o)||!n.has(o))return!1;return!0}if(t===Map){if(e.size!==n.size)return!1;for(r of e)if(o=r[0],o&&typeof o=="object"&&(o=ot(n,o),!o)||!Be(r[1],n.get(o)))return!1;return!0}if(t===ArrayBuffer)e=new Uint8Array(e),n=new Uint8Array(n);else if(t===DataView){if((r=e.byteLength)===n.byteLength)for(;r--&&e.getInt8(r)===n.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===n.byteLength)for(;r--&&e[r]===n[r];);return r===-1}if(!t||typeof e=="object"){r=0;for(t in e)if(ut.call(e,t)&&++r&&!ut.call(n,t)||!(t in n)||!Be(e[t],n[t]))return!1;return Object.keys(n).length===r}}return e!==e&&n!==n}var an={};let Ne,wt,Ct,Et,zt=!0;typeof process<"u"&&({FORCE_COLOR:Ne,NODE_DISABLE_COLORS:wt,NO_COLOR:Ct,TERM:Et}=an||{},zt=process.stdout&&process.stdout.isTTY);const L={enabled:!wt&&Ct==null&&Et!=="dumb"&&(Ne!=null&&Ne!=="0"||zt),reset:N(0,0),bold:N(1,22),dim:N(2,22),italic:N(3,23),underline:N(4,24),inverse:N(7,27),hidden:N(8,28),strikethrough:N(9,29),black:N(30,39),red:N(31,39),green:N(32,39),yellow:N(33,39),blue:N(34,39),magenta:N(35,39),cyan:N(36,39),white:N(37,39),gray:N(90,39),grey:N(90,39),bgBlack:N(40,49),bgRed:N(41,49),bgGreen:N(42,49),bgYellow:N(43,49),bgBlue:N(44,49),bgMagenta:N(45,49),bgCyan:N(46,49),bgWhite:N(47,49)};function lt(e,n){let t=0,r,o="",u="";for(;t<e.length;t++)r=e[t],o+=r.open,u+=r.close,~n.indexOf(r.close)&&(n=n.replace(r.rgx,r.close+r.open));return o+n+u}function un(e,n){let t={has:e,keys:n};return t.reset=L.reset.bind(t),t.bold=L.bold.bind(t),t.dim=L.dim.bind(t),t.italic=L.italic.bind(t),t.underline=L.underline.bind(t),t.inverse=L.inverse.bind(t),t.hidden=L.hidden.bind(t),t.strikethrough=L.strikethrough.bind(t),t.black=L.black.bind(t),t.red=L.red.bind(t),t.green=L.green.bind(t),t.yellow=L.yellow.bind(t),t.blue=L.blue.bind(t),t.magenta=L.magenta.bind(t),t.cyan=L.cyan.bind(t),t.white=L.white.bind(t),t.gray=L.gray.bind(t),t.grey=L.grey.bind(t),t.bgBlack=L.bgBlack.bind(t),t.bgRed=L.bgRed.bind(t),t.bgGreen=L.bgGreen.bind(t),t.bgYellow=L.bgYellow.bind(t),t.bgBlue=L.bgBlue.bind(t),t.bgMagenta=L.bgMagenta.bind(t),t.bgCyan=L.bgCyan.bind(t),t.bgWhite=L.bgWhite.bind(t),t}function N(e,n){let t={open:`\x1B[${e}m`,close:`\x1B[${n}m`,rgx:new RegExp(`\\x1b\\[${n}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(~this.has.indexOf(e)||(this.has.push(e),this.keys.push(t)),r===void 0?this:L.enabled?lt(this.keys,r+""):r+""):r===void 0?un([e],[t]):L.enabled?lt([t],r+""):r+""}}function ke(){}ke.prototype={diff:function(n,t){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.callback;typeof o=="function"&&(u=o,o={}),this.options=o;var l=this;function s(I){return u?(setTimeout(function(){u(void 0,I)},0),!0):I}n=this.castInput(n),t=this.castInput(t),n=this.removeEmpty(this.tokenize(n)),t=this.removeEmpty(this.tokenize(t));var m=t.length,d=n.length,c=1,k=m+d;o.maxEditLength&&(k=Math.min(k,o.maxEditLength));var g=(r=o.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+g,B=[{oldPos:-1,lastComponent:void 0}],D=this.extractCommon(B[0],t,n,0);if(B[0].oldPos+1>=d&&D+1>=m)return s([{value:this.join(t),count:t.length}]);var v=-1/0,T=1/0;function j(){for(var I=Math.max(v,-c);I<=Math.min(T,c);I+=2){var O=void 0,y=B[I-1],P=B[I+1];y&&(B[I-1]=void 0);var W=!1;if(P){var Q=P.oldPos-I;W=P&&0<=Q&&Q<m}var Y=y&&y.oldPos+1<d;if(!W&&!Y){B[I]=void 0;continue}if(!Y||W&&y.oldPos+1<P.oldPos?O=l.addToPath(P,!0,void 0,0):O=l.addToPath(y,void 0,!0,1),D=l.extractCommon(O,t,n,I),O.oldPos+1>=d&&D+1>=m)return s(on(l,O.lastComponent,t,n,l.useLongestToken));B[I]=O,O.oldPos+1>=d&&(T=Math.min(T,I-1)),D+1>=m&&(v=Math.max(v,I+1))}c++}if(u)(function I(){setTimeout(function(){if(c>k||Date.now()>f)return u();j()||I()},0)})();else for(;c<=k&&Date.now()<=f;){var z=j();if(z)return z}},addToPath:function(n,t,r,o){var u=n.lastComponent;return u&&u.added===t&&u.removed===r?{oldPos:n.oldPos+o,lastComponent:{count:u.count+1,added:t,removed:r,previousComponent:u.previousComponent}}:{oldPos:n.oldPos+o,lastComponent:{count:1,added:t,removed:r,previousComponent:u}}},extractCommon:function(n,t,r,o){for(var u=t.length,l=r.length,s=n.oldPos,m=s-o,d=0;m+1<u&&s+1<l&&this.equals(t[m+1],r[s+1]);)m++,s++,d++;return d&&(n.lastComponent={count:d,previousComponent:n.lastComponent}),n.oldPos=s,m},equals:function(n,t){return this.options.comparator?this.options.comparator(n,t):n===t||this.options.ignoreCase&&n.toLowerCase()===t.toLowerCase()},removeEmpty:function(n){for(var t=[],r=0;r<n.length;r++)n[r]&&t.push(n[r]);return t},castInput:function(n){return n},tokenize:function(n){return n.split("")},join:function(n){return n.join("")}};function on(e,n,t,r,o){for(var u=[],l;n;)u.push(n),l=n.previousComponent,delete n.previousComponent,n=l;u.reverse();for(var s=0,m=u.length,d=0,c=0;s<m;s++){var k=u[s];if(k.removed){if(k.value=e.join(r.slice(c,c+k.count)),c+=k.count,s&&u[s-1].added){var f=u[s-1];u[s-1]=u[s],u[s]=f}}else{if(!k.added&&o){var g=t.slice(d,d+k.count);g=g.map(function(D,v){var T=r[c+v];return T.length>D.length?T:D}),k.value=e.join(g)}else k.value=e.join(t.slice(d,d+k.count));d+=k.count,k.added||(c+=k.count)}}var B=u[m-1];return m>1&&typeof B.value=="string"&&(B.added||B.removed)&&e.equals("",B.value)&&(u[m-2].value+=B.value,u.pop()),u}var st=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,ct=/\S/,At=new ke;At.equals=function(e,n){return this.options.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n||this.options.ignoreWhitespace&&!ct.test(e)&&!ct.test(n)};At.tokenize=function(e){for(var n=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<n.length-1;t++)!n[t+1]&&n[t+2]&&st.test(n[t])&&st.test(n[t+2])&&(n[t]+=n[t+2],n.splice(t+1,2),t--);return n};var Bt=new ke;Bt.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var n=[],t=e.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var r=0;r<t.length;r++){var o=t[r];r%2&&!this.options.newlineIsToken?n[n.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),n.push(o))}return n};var ln=new ke;ln.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var sn=new ke;sn.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function De(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?De=function(n){return typeof n}:De=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},De(e)}var cn=Object.prototype.toString,Me=new ke;Me.useLongestToken=!0;Me.tokenize=Bt.tokenize;Me.castInput=function(e){var n=this.options,t=n.undefinedReplacement,r=n.stringifyReplacer,o=r===void 0?function(u,l){return typeof l>"u"?t:l}:r;return typeof e=="string"?e:JSON.stringify(Ve(e,null,null,o),o,"  ")};Me.equals=function(e,n){return ke.prototype.equals.call(Me,e.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};function Ve(e,n,t,r,o){n=n||[],t=t||[],r&&(e=r(o,e));var u;for(u=0;u<n.length;u+=1)if(n[u]===e)return t[u];var l;if(cn.call(e)==="[object Array]"){for(n.push(e),l=new Array(e.length),t.push(l),u=0;u<e.length;u+=1)l[u]=Ve(e[u],n,t,r,o);return n.pop(),t.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),De(e)==="object"&&e!==null){n.push(e),l={},t.push(l);var s=[],m;for(m in e)e.hasOwnProperty(m)&&s.push(m);for(s.sort(),u=0;u<s.length;u+=1)m=s[u],l[m]=Ve(e[m],n,t,r,m);n.pop(),t.pop()}else l=e;return l}var We=new ke;We.tokenize=function(e){return e.slice()};We.join=We.removeEmpty=function(e){return e};L.red,L.grey,L.green;L.dim().italic;L.dim("→");L.dim("·");L.dim("↵");function Oe(e){e=e.replace(/\r?\n/g,`
`);let n=e.match(/^[ \t]*(?=\S)/gm),t=0,r=1/0,o=(n||[]).length;for(;t<o;t++)r=Math.min(r,n[t].length);return o&&r?e.replace(new RegExp(`^[ \\t]{${r}}`,"gm"),""):e}class pn extends Error{constructor(n={}){super(n.message),this.name="Assertion",this.code="ERR_ASSERTION",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.details=n.details||!1,this.generated=!!n.generated,this.operator=n.operator,this.expects=n.expects,this.actual=n.actual}}function ae(e,n,t,r,o,u,l){if(e)return;let s=l||u;if(l instanceof Error)throw l;let m=o;throw new pn({actual:n,expects:t,operator:r,message:s,details:m,generated:!l})}function x(e,n){ae(!!e,!1,!0,"ok",!1,"Expected value to be truthy",n)}function me(e,n){ae(!e,!0,!1,"not",!1,"Expected value to be falsey",n)}me.ok=me;me.equal=function(e,n,t){ae(!Be(e,n),e,n,"not.equal",!1,"Expected values not to be deeply equal",t)};me.type=function(e,n,t){let r=typeof e;ae(r!==n,r,n,"not.type",!1,`Expected "${r}" not to be "${n}"`,t)};me.instance=function(e,n,t){let r="`"+(n.name||n.constructor.name)+"`";ae(!(e instanceof n),e,n,"not.instance",!1,`Expected value not to be an instance of ${r}`,t)};me.snapshot=function(e,n,t){e=Oe(e),n=Oe(n),ae(e!==n,e,n,"not.snapshot",!1,"Expected value not to match snapshot",t)};me.fixture=function(e,n,t){e=Oe(e),n=Oe(n),ae(e!==n,e,n,"not.fixture",!1,"Expected value not to match fixture",t)};me.match=function(e,n,t){typeof n=="string"?ae(!e.includes(n),e,n,"not.match",!1,`Expected value not to include "${n}" substring`,t):ae(!n.test(e),e,n,"not.match",!1,`Expected value not to match \`${String(n)}\` pattern`,t)};me.throws=function(e,n,t){!t&&typeof n=="string"&&(t=n,n=null);try{e()}catch(r){typeof n=="function"?ae(!n(r),!0,!1,"not.throws",!1,"Expected function not to throw matching exception",t):n instanceof RegExp?ae(!n.test(r.message),!0,!1,"not.throws",!1,`Expected function not to throw exception matching \`${String(n)}\` pattern`,t):n||ae(!1,!0,!1,"not.throws",!1,"Expected function not to throw",t)}};const hn={};function fn(e,n){const t=hn,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,o=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return It(e,r,o)}function It(e,n,t){if(dn(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return pt(e.children,n,t)}return Array.isArray(e)?pt(e,n,t):""}function pt(e,n,t){const r=[];let o=-1;for(;++o<e.length;)r[o]=It(e[o],n,t);return r.join("")}function dn(e){return!!(e&&typeof e=="object")}const w={atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupWhitespace:1,characterGroupPunctuation:2,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeFlow:"flow",contentTypeContent:"content",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlRaw:1,htmlComment:2,htmlInstruction:3,htmlDeclaration:4,htmlCdata:5,htmlBasic:6,htmlComplete:7,htmlRawSizeMax:8,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4};function se(e,n,t,r){const o=e.length;let u=0,l;if(n<0?n=-n>o?0:o+n:n=n>o?o:n,t=t>0?t:0,r.length<w.v8MaxSafeChunkSize)l=Array.from(r),l.unshift(n,t),e.splice(...l);else for(t&&e.splice(n,t);u<r.length;)l=r.slice(u,u+w.v8MaxSafeChunkSize),l.unshift(n,0),e.splice(...l),u+=w.v8MaxSafeChunkSize,n+=w.v8MaxSafeChunkSize}function ie(e,n){return e.length>0?(se(e,e.length,0,n),e):n}const ht={}.hasOwnProperty;function mn(e){const n={};let t=-1;for(;++t<e.length;)xn(n,e[t]);return n}function xn(e,n){let t;for(t in n){const o=(ht.call(e,t)?e[t]:void 0)||(e[t]={}),u=n[t];let l;if(u)for(l in u){ht.call(o,l)||(o[l]=[]);const s=u[l];gn(o[l],Array.isArray(s)?s:s?[s]:[])}}}function gn(e,n){let t=-1;const r=[];for(;++t<n.length;)(n[t].add==="after"?e:r).push(n[t]);se(e,0,0,r)}const a={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,ht:9,lf:10,vt:11,cr:13,space:32,exclamationMark:33,quotationMark:34,numberSign:35,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseX:88,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseX:120,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533},kn=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,le=be(/[A-Za-z]/),ue=be(/[\dA-Za-z]/),bn=be(/[#-'*+\--9=?A-Z^-~]/);function Qe(e){return e!==null&&(e<a.space||e===a.del)}const Ue=be(/\d/),Sn=be(/[\dA-Fa-f]/),yn=be(/[!-/:-@[-`{-~]/);function E(e){return e!==null&&e<a.horizontalTab}function ee(e){return e!==null&&(e<a.nul||e===a.space)}function R(e){return e===a.horizontalTab||e===a.virtualSpace||e===a.space}const Tn=be(kn),Fn=be(/\s/);function be(e){return n;function n(t){return t!==null&&e.test(String.fromCharCode(t))}}function V(e,n,t,r){const o=r?r-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(m){return R(m)?(e.enter(t),s(m)):n(m)}function s(m){return R(m)&&u++<o?(e.consume(m),s):(e.exit(t),n(m))}}const i={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"},wn={tokenize:Cn};function Cn(e){const n=e.attempt(this.parser.constructs.contentInitial,r,o);let t;return n;function r(s){if(x(s===a.eof||E(s),"expected eol or eof"),s===a.eof){e.consume(s);return}return e.enter(i.lineEnding),e.consume(s),e.exit(i.lineEnding),V(e,n,i.linePrefix)}function o(s){return x(s!==a.eof&&!E(s),"expected anything other than a line ending or EOF"),e.enter(i.paragraph),u(s)}function u(s){const m=e.enter(i.chunkText,{contentType:w.contentTypeText,previous:t});return t&&(t.next=m),t=m,l(s)}function l(s){if(s===a.eof){e.exit(i.chunkText),e.exit(i.paragraph),e.consume(s);return}return E(s)?(e.consume(s),e.exit(i.chunkText),u):(e.consume(s),l)}}const En={tokenize:zn},ft={tokenize:An};function zn(e){const n=this,t=[];let r=0,o,u,l;return s;function s(z){if(r<t.length){const I=t[r];return n.containerState=I[1],x(I[0].continuation,"expected `continuation` to be defined on container construct"),e.attempt(I[0].continuation,m,d)(z)}return d(z)}function m(z){if(x(n.containerState,"expected `containerState` to be defined after continuation"),r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,o&&j();const I=n.events.length;let O=I,y;for(;O--;)if(n.events[O][0]==="exit"&&n.events[O][1].type===i.chunkFlow){y=n.events[O][1].end;break}x(y,"could not find previous flow chunk"),T(r);let P=I;for(;P<n.events.length;)n.events[P][1].end=Object.assign({},y),P++;return se(n.events,O+1,0,n.events.slice(I)),n.events.length=P,d(z)}return s(z)}function d(z){if(r===t.length){if(!o)return g(z);if(o.currentConstruct&&o.currentConstruct.concrete)return B(z);n.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(ft,c,k)(z)}function c(z){return o&&j(),T(r),g(z)}function k(z){return n.parser.lazy[n.now().line]=r!==t.length,l=n.now().offset,B(z)}function g(z){return n.containerState={},e.attempt(ft,f,B)(z)}function f(z){return x(n.currentConstruct,"expected `currentConstruct` to be defined on tokenizer"),x(n.containerState,"expected `containerState` to be defined on tokenizer"),r++,t.push([n.currentConstruct,n.containerState]),g(z)}function B(z){if(z===a.eof){o&&j(),T(0),e.consume(z);return}return o=o||n.parser.flow(n.now()),e.enter(i.chunkFlow,{contentType:w.contentTypeFlow,previous:u,_tokenizer:o}),D(z)}function D(z){if(z===a.eof){v(e.exit(i.chunkFlow),!0),T(0),e.consume(z);return}return E(z)?(e.consume(z),v(e.exit(i.chunkFlow)),r=0,n.interrupt=void 0,s):(e.consume(z),D)}function v(z,I){x(o,"expected `childFlow` to be defined when continuing");const O=n.sliceStream(z);if(I&&O.push(null),z.previous=u,u&&(u.next=z),u=z,o.defineSkip(z.start),o.write(O),n.parser.lazy[z.start.line]){let y=o.events.length;for(;y--;)if(o.events[y][1].start.offset<l&&(!o.events[y][1].end||o.events[y][1].end.offset>l))return;const P=n.events.length;let W=P,Q,Y;for(;W--;)if(n.events[W][0]==="exit"&&n.events[W][1].type===i.chunkFlow){if(Q){Y=n.events[W][1].end;break}Q=!0}for(x(Y,"could not find previous flow chunk"),T(r),y=P;y<n.events.length;)n.events[y][1].end=Object.assign({},Y),y++;se(n.events,W+1,0,n.events.slice(P)),n.events.length=y}}function T(z){let I=t.length;for(;I-- >z;){const O=t[I];n.containerState=O[1],x(O[0].exit,"expected `exit` to be defined on container construct"),O[0].exit.call(n,e)}t.length=z}function j(){x(n.containerState,"expected `containerState` to be defined when closing flow"),x(o,"expected `childFlow` to be defined when closing it"),o.write([a.eof]),u=void 0,o=void 0,n.containerState._closeFlow=void 0}}function An(e,n,t){return x(this.parser.constructs.disable.null,"expected `disable.null` to be populated"),V(e,e.attempt(this.parser.constructs.document,n,t),i.linePrefix,this.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize)}function dt(e){if(e===a.eof||ee(e)||Fn(e))return w.characterGroupWhitespace;if(Tn(e))return w.characterGroupPunctuation}function Ze(e,n,t){const r=[];let o=-1;for(;++o<e.length;){const u=e[o].resolveAll;u&&!r.includes(u)&&(n=u(n,t),r.push(u))}return n}const $e={name:"attention",tokenize:In,resolveAll:Bn};function Bn(e,n){let t=-1,r,o,u,l,s,m,d,c;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(r=t;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&n.sliceSerialize(e[r][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[r][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;m=e[r][1].end.offset-e[r][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const k=Object.assign({},e[r][1].end),g=Object.assign({},e[t][1].start);mt(k,-m),mt(g,m),l={type:m>1?i.strongSequence:i.emphasisSequence,start:k,end:Object.assign({},e[r][1].end)},s={type:m>1?i.strongSequence:i.emphasisSequence,start:Object.assign({},e[t][1].start),end:g},u={type:m>1?i.strongText:i.emphasisText,start:Object.assign({},e[r][1].end),end:Object.assign({},e[t][1].start)},o={type:m>1?i.strong:i.emphasis,start:Object.assign({},l.start),end:Object.assign({},s.end)},e[r][1].end=Object.assign({},l.start),e[t][1].start=Object.assign({},s.end),d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=ie(d,[["enter",e[r][1],n],["exit",e[r][1],n]])),d=ie(d,[["enter",o,n],["enter",l,n],["exit",l,n],["enter",u,n]]),x(n.parser.constructs.insideSpan.null,"expected `insideSpan` to be populated"),d=ie(d,Ze(n.parser.constructs.insideSpan.null,e.slice(r+1,t),n)),d=ie(d,[["exit",u,n],["enter",s,n],["exit",s,n],["exit",o,n]]),e[t][1].end.offset-e[t][1].start.offset?(c=2,d=ie(d,[["enter",e[t][1],n],["exit",e[t][1],n]])):c=0,se(e,r-1,t-r+3,d),t=r+d.length-c-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function In(e,n){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,o=dt(r);let u;return l;function l(m){return x(m===a.asterisk||m===a.underscore,"expected asterisk or underscore"),u=m,e.enter("attentionSequence"),s(m)}function s(m){if(m===u)return e.consume(m),s;const d=e.exit("attentionSequence"),c=dt(m);x(t,"expected `attentionMarkers` to be populated");const k=!c||c===w.characterGroupPunctuation&&o||t.includes(m),g=!o||o===w.characterGroupPunctuation&&c||t.includes(r);return d._open=!!(u===a.asterisk?k:k&&(o||!g)),d._close=!!(u===a.asterisk?g:g&&(c||!k)),n(m)}}function mt(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const Mn={name:"autolink",tokenize:Dn};function Dn(e,n,t){let r=0;return o;function o(f){return x(f===a.lessThan,"expected `<`"),e.enter(i.autolink),e.enter(i.autolinkMarker),e.consume(f),e.exit(i.autolinkMarker),e.enter(i.autolinkProtocol),u}function u(f){return le(f)?(e.consume(f),l):d(f)}function l(f){return f===a.plusSign||f===a.dash||f===a.dot||ue(f)?(r=1,s(f)):d(f)}function s(f){return f===a.colon?(e.consume(f),r=0,m):(f===a.plusSign||f===a.dash||f===a.dot||ue(f))&&r++<w.autolinkSchemeSizeMax?(e.consume(f),s):(r=0,d(f))}function m(f){return f===a.greaterThan?(e.exit(i.autolinkProtocol),e.enter(i.autolinkMarker),e.consume(f),e.exit(i.autolinkMarker),e.exit(i.autolink),n):f===a.eof||f===a.space||f===a.lessThan||Qe(f)?t(f):(e.consume(f),m)}function d(f){return f===a.atSign?(e.consume(f),c):bn(f)?(e.consume(f),d):t(f)}function c(f){return ue(f)?k(f):t(f)}function k(f){return f===a.dot?(e.consume(f),r=0,c):f===a.greaterThan?(e.exit(i.autolinkProtocol).type=i.autolinkEmail,e.enter(i.autolinkMarker),e.consume(f),e.exit(i.autolinkMarker),e.exit(i.autolink),n):g(f)}function g(f){if((f===a.dash||ue(f))&&r++<w.autolinkDomainSizeMax){const B=f===a.dash?g:k;return e.consume(f),B}return t(f)}}const Pe={tokenize:Ln,partial:!0};function Ln(e,n,t){return r;function r(u){return R(u)?V(e,o,i.linePrefix)(u):o(u)}function o(u){return u===a.eof||E(u)?n(u):t(u)}}const Mt={name:"blockQuote",tokenize:qn,continuation:{tokenize:On},exit:Pn};function qn(e,n,t){const r=this;return o;function o(l){if(l===a.greaterThan){const s=r.containerState;return x(s,"expected `containerState` to be defined in container"),s.open||(e.enter(i.blockQuote,{_container:!0}),s.open=!0),e.enter(i.blockQuotePrefix),e.enter(i.blockQuoteMarker),e.consume(l),e.exit(i.blockQuoteMarker),u}return t(l)}function u(l){return R(l)?(e.enter(i.blockQuotePrefixWhitespace),e.consume(l),e.exit(i.blockQuotePrefixWhitespace),e.exit(i.blockQuotePrefix),n):(e.exit(i.blockQuotePrefix),n(l))}}function On(e,n,t){const r=this;return o;function o(l){return R(l)?(x(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),V(e,u,i.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize)(l)):u(l)}function u(l){return e.attempt(Mt,n,t)(l)}}function Pn(e){e.exit(i.blockQuote)}const Dt={name:"characterEscape",tokenize:Rn};function Rn(e,n,t){return r;function r(u){return x(u===a.backslash,"expected `\\`"),e.enter(i.characterEscape),e.enter(i.escapeMarker),e.consume(u),e.exit(i.escapeMarker),o}function o(u){return yn(u)?(e.enter(i.characterEscapeValue),e.consume(u),e.exit(i.characterEscapeValue),e.exit(i.characterEscape),n):t(u)}}const Lt={name:"characterReference",tokenize:vn};function vn(e,n,t){const r=this;let o=0,u,l;return s;function s(k){return x(k===a.ampersand,"expected `&`"),e.enter(i.characterReference),e.enter(i.characterReferenceMarker),e.consume(k),e.exit(i.characterReferenceMarker),m}function m(k){return k===a.numberSign?(e.enter(i.characterReferenceMarkerNumeric),e.consume(k),e.exit(i.characterReferenceMarkerNumeric),d):(e.enter(i.characterReferenceValue),u=w.characterReferenceNamedSizeMax,l=ue,c(k))}function d(k){return k===a.uppercaseX||k===a.lowercaseX?(e.enter(i.characterReferenceMarkerHexadecimal),e.consume(k),e.exit(i.characterReferenceMarkerHexadecimal),e.enter(i.characterReferenceValue),u=w.characterReferenceHexadecimalSizeMax,l=Sn,c):(e.enter(i.characterReferenceValue),u=w.characterReferenceDecimalSizeMax,l=Ue,c(k))}function c(k){if(k===a.semicolon&&o){const g=e.exit(i.characterReferenceValue);return l===ue&&!Xe(r.sliceSerialize(g))?t(k):(e.enter(i.characterReferenceMarker),e.consume(k),e.exit(i.characterReferenceMarker),e.exit(i.characterReference),n)}return l(k)&&o++<u?(e.consume(k),c):t(k)}}const xt={tokenize:Hn,partial:!0},gt={name:"codeFenced",tokenize:_n,concrete:!0};function _n(e,n,t){const r=this,o={tokenize:O,partial:!0};let u=0,l=0,s;return m;function m(y){return d(y)}function d(y){x(y===a.graveAccent||y===a.tilde,"expected `` ` `` or `~`");const P=r.events[r.events.length-1];return u=P&&P[1].type===i.linePrefix?P[2].sliceSerialize(P[1],!0).length:0,s=y,e.enter(i.codeFenced),e.enter(i.codeFencedFence),e.enter(i.codeFencedFenceSequence),c(y)}function c(y){return y===s?(l++,e.consume(y),c):l<w.codeFencedSequenceSizeMin?t(y):(e.exit(i.codeFencedFenceSequence),R(y)?V(e,k,i.whitespace)(y):k(y))}function k(y){return y===a.eof||E(y)?(e.exit(i.codeFencedFence),r.interrupt?n(y):e.check(xt,D,I)(y)):(e.enter(i.codeFencedFenceInfo),e.enter(i.chunkString,{contentType:w.contentTypeString}),g(y))}function g(y){return y===a.eof||E(y)?(e.exit(i.chunkString),e.exit(i.codeFencedFenceInfo),k(y)):R(y)?(e.exit(i.chunkString),e.exit(i.codeFencedFenceInfo),V(e,f,i.whitespace)(y)):y===a.graveAccent&&y===s?t(y):(e.consume(y),g)}function f(y){return y===a.eof||E(y)?k(y):(e.enter(i.codeFencedFenceMeta),e.enter(i.chunkString,{contentType:w.contentTypeString}),B(y))}function B(y){return y===a.eof||E(y)?(e.exit(i.chunkString),e.exit(i.codeFencedFenceMeta),k(y)):y===a.graveAccent&&y===s?t(y):(e.consume(y),B)}function D(y){return x(E(y),"expected eol"),e.attempt(o,I,v)(y)}function v(y){return x(E(y),"expected eol"),e.enter(i.lineEnding),e.consume(y),e.exit(i.lineEnding),T}function T(y){return u>0&&R(y)?V(e,j,i.linePrefix,u+1)(y):j(y)}function j(y){return y===a.eof||E(y)?e.check(xt,D,I)(y):(e.enter(i.codeFlowValue),z(y))}function z(y){return y===a.eof||E(y)?(e.exit(i.codeFlowValue),j(y)):(e.consume(y),z)}function I(y){return e.exit(i.codeFenced),n(y)}function O(y,P,W){let Q=0;return Y;function Y(M){return x(E(M),"expected eol"),y.enter(i.lineEnding),y.consume(M),y.exit(i.lineEnding),$}function $(M){return x(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),y.enter(i.codeFencedFence),R(M)?V(y,q,i.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize)(M):q(M)}function q(M){return M===s?(y.enter(i.codeFencedFenceSequence),C(M)):W(M)}function C(M){return M===s?(Q++,y.consume(M),C):Q>=l?(y.exit(i.codeFencedFenceSequence),R(M)?V(y,A,i.whitespace)(M):A(M)):W(M)}function A(M){return M===a.eof||E(M)?(y.exit(i.codeFencedFence),P(M)):W(M)}}}function Hn(e,n,t){const r=this;return o;function o(l){return l===a.eof?t(l):(x(E(l),"expected eol"),e.enter(i.lineEnding),e.consume(l),e.exit(i.lineEnding),u)}function u(l){return r.parser.lazy[r.now().line]?t(l):n(l)}}const He={name:"codeIndented",tokenize:Nn},jn={tokenize:Vn,partial:!0};function Nn(e,n,t){const r=this;return o;function o(d){return x(R(d)),e.enter(i.codeIndented),V(e,u,i.linePrefix,w.tabSize+1)(d)}function u(d){const c=r.events[r.events.length-1];return c&&c[1].type===i.linePrefix&&c[2].sliceSerialize(c[1],!0).length>=w.tabSize?l(d):t(d)}function l(d){return d===a.eof?m(d):E(d)?e.attempt(jn,l,m)(d):(e.enter(i.codeFlowValue),s(d))}function s(d){return d===a.eof||E(d)?(e.exit(i.codeFlowValue),l(d)):(e.consume(d),s)}function m(d){return e.exit(i.codeIndented),n(d)}}function Vn(e,n,t){const r=this;return o;function o(l){return r.parser.lazy[r.now().line]?t(l):E(l)?(e.enter(i.lineEnding),e.consume(l),e.exit(i.lineEnding),o):V(e,u,i.linePrefix,w.tabSize+1)(l)}function u(l){const s=r.events[r.events.length-1];return s&&s[1].type===i.linePrefix&&s[2].sliceSerialize(s[1],!0).length>=w.tabSize?n(l):E(l)?o(l):t(l)}}const Wn={name:"codeText",tokenize:Un,resolve:Qn,previous:qt};function Qn(e){let n=e.length-4,t=3,r,o;if((e[t][1].type===i.lineEnding||e[t][1].type==="space")&&(e[n][1].type===i.lineEnding||e[n][1].type==="space")){for(r=t;++r<n;)if(e[r][1].type===i.codeTextData){e[t][1].type=i.codeTextPadding,e[n][1].type=i.codeTextPadding,t+=2,n-=2;break}}for(r=t-1,n++;++r<=n;)o===void 0?r!==n&&e[r][1].type!==i.lineEnding&&(o=r):(r===n||e[r][1].type===i.lineEnding)&&(e[o][1].type=i.codeTextData,r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),n-=r-o-2,r=o+2),o=void 0);return e}function qt(e){return e!==a.graveAccent||this.events[this.events.length-1][1].type===i.characterEscape}function Un(e,n,t){const r=this;let o=0,u,l;return s;function s(g){return x(g===a.graveAccent,"expected `` ` ``"),x(qt.call(r,r.previous),"expected correct previous"),e.enter(i.codeText),e.enter(i.codeTextSequence),m(g)}function m(g){return g===a.graveAccent?(e.consume(g),o++,m):(e.exit(i.codeTextSequence),d(g))}function d(g){return g===a.eof?t(g):g===a.space?(e.enter("space"),e.consume(g),e.exit("space"),d):g===a.graveAccent?(l=e.enter(i.codeTextSequence),u=0,k(g)):E(g)?(e.enter(i.lineEnding),e.consume(g),e.exit(i.lineEnding),d):(e.enter(i.codeTextData),c(g))}function c(g){return g===a.eof||g===a.space||g===a.graveAccent||E(g)?(e.exit(i.codeTextData),d(g)):(e.consume(g),c)}function k(g){return g===a.graveAccent?(e.consume(g),u++,k):u===o?(e.exit(i.codeTextSequence),e.exit(i.codeText),n(g)):(l.type=i.codeTextData,c(g))}}function Ot(e){const n={};let t=-1,r,o,u,l,s,m,d;for(;++t<e.length;){for(;t in n;)t=n[t];if(r=e[t],t&&r[1].type===i.chunkFlow&&e[t-1][1].type===i.listItemPrefix&&(x(r[1]._tokenizer,"expected `_tokenizer` on subtokens"),m=r[1]._tokenizer.events,u=0,u<m.length&&m[u][1].type===i.lineEndingBlank&&(u+=2),u<m.length&&m[u][1].type===i.content))for(;++u<m.length&&m[u][1].type!==i.content;)m[u][1].type===i.chunkText&&(m[u][1]._isInFirstContentOfListItem=!0,u++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,$n(e,t)),t=n[t],d=!0);else if(r[1]._container){for(u=t,o=void 0;u--&&(l=e[u],l[1].type===i.lineEnding||l[1].type===i.lineEndingBlank);)l[0]==="enter"&&(o&&(e[o][1].type=i.lineEndingBlank),l[1].type=i.lineEnding,o=u);o&&(r[1].end=Object.assign({},e[o][1].start),s=e.slice(o,t),s.unshift(r),se(e,o,t-o+1,s))}}return!d}function $n(e,n){const t=e[n][1],r=e[n][2];let o=n-1;const u=[];x(t.contentType,"expected `contentType` on subtokens");const l=t._tokenizer||r.parser[t.contentType](t.start),s=l.events,m=[],d={};let c,k,g=-1,f=t,B=0,D=0;const v=[D];for(;f;){for(;e[++o][1]!==f;);x(!k||f.previous===k,"expected previous to match"),x(!k||k.next===f,"expected next to match"),u.push(o),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(a.eof),k&&l.defineSkip(f.start),f._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(c),f._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),k=f,f=f.next}for(f=t;++g<s.length;)s[g][0]==="exit"&&s[g-1][0]==="enter"&&s[g][1].type===s[g-1][1].type&&s[g][1].start.line!==s[g][1].end.line&&(x(f,"expected a current token"),D=g+1,v.push(D),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(l.events=[],f?(f._tokenizer=void 0,f.previous=void 0,x(!f.next,"expected no next token")):v.pop(),g=v.length;g--;){const T=s.slice(v[g],v[g+1]),j=u.pop();x(j!==void 0,"expected a start position when splicing"),m.unshift([j,j+T.length-1]),se(e,j,2,T)}for(g=-1;++g<m.length;)d[B+m[g][0]]=B+m[g][1],B+=m[g][1]-m[g][0]-1;return d}const Gn={tokenize:Zn,resolve:Xn},Yn={tokenize:Jn,partial:!0};function Xn(e){return Ot(e),e}function Zn(e,n){let t;return r;function r(s){return x(s!==a.eof&&!E(s),"expected no eof or eol"),e.enter(i.content),t=e.enter(i.chunkContent,{contentType:w.contentTypeContent}),o(s)}function o(s){return s===a.eof?u(s):E(s)?e.check(Yn,l,u)(s):(e.consume(s),o)}function u(s){return e.exit(i.chunkContent),e.exit(i.content),n(s)}function l(s){return x(E(s),"expected eol"),e.consume(s),e.exit(i.chunkContent),x(t,"expected previous token"),t.next=e.enter(i.chunkContent,{contentType:w.contentTypeContent,previous:t}),t=t.next,o}}function Jn(e,n,t){const r=this;return o;function o(l){return x(E(l),"expected a line ending"),e.exit(i.chunkContent),e.enter(i.lineEnding),e.consume(l),e.exit(i.lineEnding),V(e,u,i.linePrefix)}function u(l){if(l===a.eof||E(l))return t(l);x(r.parser.constructs.disable.null,"expected `disable.null` to be populated");const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type===i.linePrefix&&s[2].sliceSerialize(s[1],!0).length>=w.tabSize?n(l):e.interrupt(r.parser.constructs.flow,t,n)(l)}}function Pt(e,n,t,r,o,u,l,s,m){const d=m||Number.POSITIVE_INFINITY;let c=0;return k;function k(T){return T===a.lessThan?(e.enter(r),e.enter(o),e.enter(u),e.consume(T),e.exit(u),g):T===a.eof||T===a.space||T===a.rightParenthesis||Qe(T)?t(T):(e.enter(r),e.enter(l),e.enter(s),e.enter(i.chunkString,{contentType:w.contentTypeString}),D(T))}function g(T){return T===a.greaterThan?(e.enter(u),e.consume(T),e.exit(u),e.exit(o),e.exit(r),n):(e.enter(s),e.enter(i.chunkString,{contentType:w.contentTypeString}),f(T))}function f(T){return T===a.greaterThan?(e.exit(i.chunkString),e.exit(s),g(T)):T===a.eof||T===a.lessThan||E(T)?t(T):(e.consume(T),T===a.backslash?B:f)}function B(T){return T===a.lessThan||T===a.greaterThan||T===a.backslash?(e.consume(T),f):f(T)}function D(T){return!c&&(T===a.eof||T===a.rightParenthesis||ee(T))?(e.exit(i.chunkString),e.exit(s),e.exit(l),e.exit(r),n(T)):c<d&&T===a.leftParenthesis?(e.consume(T),c++,D):T===a.rightParenthesis?(e.consume(T),c--,D):T===a.eof||T===a.space||T===a.leftParenthesis||Qe(T)?t(T):(e.consume(T),T===a.backslash?v:D)}function v(T){return T===a.leftParenthesis||T===a.rightParenthesis||T===a.backslash?(e.consume(T),D):D(T)}}function Rt(e,n,t,r,o,u){const l=this;let s=0,m;return d;function d(f){return x(f===a.leftSquareBracket,"expected `[`"),e.enter(r),e.enter(o),e.consume(f),e.exit(o),e.enter(u),c}function c(f){return s>w.linkReferenceSizeMax||f===a.eof||f===a.leftSquareBracket||f===a.rightSquareBracket&&!m||f===a.caret&&!s&&"_hiddenFootnoteSupport"in l.parser.constructs?t(f):f===a.rightSquareBracket?(e.exit(u),e.enter(o),e.consume(f),e.exit(o),e.exit(r),n):E(f)?(e.enter(i.lineEnding),e.consume(f),e.exit(i.lineEnding),c):(e.enter(i.chunkString,{contentType:w.contentTypeString}),k(f))}function k(f){return f===a.eof||f===a.leftSquareBracket||f===a.rightSquareBracket||E(f)||s++>w.linkReferenceSizeMax?(e.exit(i.chunkString),c(f)):(e.consume(f),m||(m=!R(f)),f===a.backslash?g:k)}function g(f){return f===a.leftSquareBracket||f===a.backslash||f===a.rightSquareBracket?(e.consume(f),s++,k):k(f)}}function vt(e,n,t,r,o,u){let l;return s;function s(g){return g===a.quotationMark||g===a.apostrophe||g===a.leftParenthesis?(e.enter(r),e.enter(o),e.consume(g),e.exit(o),l=g===a.leftParenthesis?a.rightParenthesis:g,m):t(g)}function m(g){return g===l?(e.enter(o),e.consume(g),e.exit(o),e.exit(r),n):(e.enter(u),d(g))}function d(g){return g===l?(e.exit(u),m(l)):g===a.eof?t(g):E(g)?(e.enter(i.lineEnding),e.consume(g),e.exit(i.lineEnding),V(e,d,i.linePrefix)):(e.enter(i.chunkString,{contentType:w.contentTypeString}),c(g))}function c(g){return g===l||g===a.eof||E(g)?(e.exit(i.chunkString),d(g)):(e.consume(g),g===a.backslash?k:c)}function k(g){return g===l||g===a.backslash?(e.consume(g),c):c(g)}}function Ie(e,n){let t;return r;function r(o){return E(o)?(e.enter(i.lineEnding),e.consume(o),e.exit(i.lineEnding),t=!0,r):R(o)?V(e,r,t?i.linePrefix:i.lineSuffix)(o):n(o)}}const de={ht:"	",lf:`
`,cr:"\r",space:" ",replacementCharacter:"�"};function we(e){return e.replace(/[\t\n\r ]+/g,de.space).replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Kn={name:"definition",tokenize:tr},er={tokenize:nr,partial:!0};function tr(e,n,t){const r=this;let o;return u;function u(f){return e.enter(i.definition),l(f)}function l(f){return x(f===a.leftSquareBracket,"expected `[`"),Rt.call(r,e,s,t,i.definitionLabel,i.definitionLabelMarker,i.definitionLabelString)(f)}function s(f){return o=we(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===a.colon?(e.enter(i.definitionMarker),e.consume(f),e.exit(i.definitionMarker),m):t(f)}function m(f){return ee(f)?Ie(e,d)(f):d(f)}function d(f){return Pt(e,c,t,i.definitionDestination,i.definitionDestinationLiteral,i.definitionDestinationLiteralMarker,i.definitionDestinationRaw,i.definitionDestinationString)(f)}function c(f){return e.attempt(er,k,k)(f)}function k(f){return R(f)?V(e,g,i.whitespace)(f):g(f)}function g(f){return f===a.eof||E(f)?(e.exit(i.definition),r.parser.defined.push(o),n(f)):t(f)}}function nr(e,n,t){return r;function r(s){return ee(s)?Ie(e,o)(s):t(s)}function o(s){return vt(e,u,t,i.definitionTitle,i.definitionTitleMarker,i.definitionTitleString)(s)}function u(s){return R(s)?V(e,l,i.whitespace)(s):l(s)}function l(s){return s===a.eof||E(s)?n(s):t(s)}}const rr={name:"hardBreakEscape",tokenize:ir};function ir(e,n,t){return r;function r(u){return x(u===a.backslash,"expected `\\`"),e.enter(i.hardBreakEscape),e.consume(u),o}function o(u){return E(u)?(e.exit(i.hardBreakEscape),n(u)):t(u)}}const ar={name:"headingAtx",tokenize:or,resolve:ur};function ur(e,n){let t=e.length-2,r=3,o,u;return e[r][1].type===i.whitespace&&(r+=2),t-2>r&&e[t][1].type===i.whitespace&&(t-=2),e[t][1].type===i.atxHeadingSequence&&(r===t-1||t-4>r&&e[t-2][1].type===i.whitespace)&&(t-=r+1===t?2:4),t>r&&(o={type:i.atxHeadingText,start:e[r][1].start,end:e[t][1].end},u={type:i.chunkText,start:e[r][1].start,end:e[t][1].end,contentType:w.contentTypeText},se(e,r,t-r+1,[["enter",o,n],["enter",u,n],["exit",u,n],["exit",o,n]])),e}function or(e,n,t){let r=0;return o;function o(c){return e.enter(i.atxHeading),u(c)}function u(c){return x(c===a.numberSign,"expected `#`"),e.enter(i.atxHeadingSequence),l(c)}function l(c){return c===a.numberSign&&r++<w.atxHeadingOpeningFenceSizeMax?(e.consume(c),l):c===a.eof||ee(c)?(e.exit(i.atxHeadingSequence),s(c)):t(c)}function s(c){return c===a.numberSign?(e.enter(i.atxHeadingSequence),m(c)):c===a.eof||E(c)?(e.exit(i.atxHeading),n(c)):R(c)?V(e,s,i.whitespace)(c):(e.enter(i.atxHeadingText),d(c))}function m(c){return c===a.numberSign?(e.consume(c),m):(e.exit(i.atxHeadingSequence),s(c))}function d(c){return c===a.eof||c===a.numberSign||ee(c)?(e.exit(i.atxHeadingText),s(c)):(e.consume(c),d)}}const lr=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kt=["pre","script","style","textarea"],sr={name:"htmlFlow",tokenize:fr,resolveTo:hr,concrete:!0},cr={tokenize:mr,partial:!0},pr={tokenize:dr,partial:!0};function hr(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type===i.htmlFlow););return n>1&&e[n-2][1].type===i.linePrefix&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function fr(e,n,t){const r=this;let o,u,l,s,m;return d;function d(h){return c(h)}function c(h){return x(h===a.lessThan,"expected `<`"),e.enter(i.htmlFlow),e.enter(i.htmlFlowData),e.consume(h),k}function k(h){return h===a.exclamationMark?(e.consume(h),g):h===a.slash?(e.consume(h),u=!0,D):h===a.questionMark?(e.consume(h),o=w.htmlInstruction,r.interrupt?n:p):le(h)?(e.consume(h),l=String.fromCharCode(h),v):t(h)}function g(h){return h===a.dash?(e.consume(h),o=w.htmlComment,f):h===a.leftSquareBracket?(e.consume(h),o=w.htmlCdata,s=0,B):le(h)?(e.consume(h),o=w.htmlDeclaration,r.interrupt?n:p):t(h)}function f(h){return h===a.dash?(e.consume(h),r.interrupt?n:p):t(h)}function B(h){const te=w.cdataOpeningString;return h===te.charCodeAt(s++)?(e.consume(h),s===te.length?r.interrupt?n:q:B):t(h)}function D(h){return le(h)?(e.consume(h),l=String.fromCharCode(h),v):t(h)}function v(h){if(h===a.eof||h===a.slash||h===a.greaterThan||ee(h)){const te=h===a.slash,Te=l.toLowerCase();return!te&&!u&&kt.includes(Te)?(o=w.htmlRaw,r.interrupt?n(h):q(h)):lr.includes(l.toLowerCase())?(o=w.htmlBasic,te?(e.consume(h),T):r.interrupt?n(h):q(h)):(o=w.htmlComplete,r.interrupt&&!r.parser.lazy[r.now().line]?t(h):u?j(h):z(h))}return h===a.dash||ue(h)?(e.consume(h),l+=String.fromCharCode(h),v):t(h)}function T(h){return h===a.greaterThan?(e.consume(h),r.interrupt?n:q):t(h)}function j(h){return R(h)?(e.consume(h),j):Y(h)}function z(h){return h===a.slash?(e.consume(h),Y):h===a.colon||h===a.underscore||le(h)?(e.consume(h),I):R(h)?(e.consume(h),z):Y(h)}function I(h){return h===a.dash||h===a.dot||h===a.colon||h===a.underscore||ue(h)?(e.consume(h),I):O(h)}function O(h){return h===a.equalsTo?(e.consume(h),y):R(h)?(e.consume(h),O):z(h)}function y(h){return h===a.eof||h===a.lessThan||h===a.equalsTo||h===a.greaterThan||h===a.graveAccent?t(h):h===a.quotationMark||h===a.apostrophe?(e.consume(h),m=h,P):R(h)?(e.consume(h),y):W(h)}function P(h){return h===m?(e.consume(h),m=null,Q):h===a.eof||E(h)?t(h):(e.consume(h),P)}function W(h){return h===a.eof||h===a.quotationMark||h===a.apostrophe||h===a.slash||h===a.lessThan||h===a.equalsTo||h===a.greaterThan||h===a.graveAccent||ee(h)?O(h):(e.consume(h),W)}function Q(h){return h===a.slash||h===a.greaterThan||R(h)?z(h):t(h)}function Y(h){return h===a.greaterThan?(e.consume(h),$):t(h)}function $(h){return h===a.eof||E(h)?q(h):R(h)?(e.consume(h),$):t(h)}function q(h){return h===a.dash&&o===w.htmlComment?(e.consume(h),U):h===a.lessThan&&o===w.htmlRaw?(e.consume(h),X):h===a.greaterThan&&o===w.htmlDeclaration?(e.consume(h),re):h===a.questionMark&&o===w.htmlInstruction?(e.consume(h),p):h===a.rightSquareBracket&&o===w.htmlCdata?(e.consume(h),oe):E(h)&&(o===w.htmlBasic||o===w.htmlComplete)?(e.exit(i.htmlFlowData),e.check(cr,ce,C)(h)):h===a.eof||E(h)?(e.exit(i.htmlFlowData),C(h)):(e.consume(h),q)}function C(h){return e.check(pr,A,ce)(h)}function A(h){return x(E(h)),e.enter(i.lineEnding),e.consume(h),e.exit(i.lineEnding),M}function M(h){return h===a.eof||E(h)?C(h):(e.enter(i.htmlFlowData),q(h))}function U(h){return h===a.dash?(e.consume(h),p):q(h)}function X(h){return h===a.slash?(e.consume(h),l="",ne):q(h)}function ne(h){if(h===a.greaterThan){const te=l.toLowerCase();return kt.includes(te)?(e.consume(h),re):q(h)}return le(h)&&l.length<w.htmlRawSizeMax?(e.consume(h),l+=String.fromCharCode(h),ne):q(h)}function oe(h){return h===a.rightSquareBracket?(e.consume(h),p):q(h)}function p(h){return h===a.greaterThan?(e.consume(h),re):h===a.dash&&o===w.htmlComment?(e.consume(h),p):q(h)}function re(h){return h===a.eof||E(h)?(e.exit(i.htmlFlowData),ce(h)):(e.consume(h),re)}function ce(h){return e.exit(i.htmlFlow),n(h)}}function dr(e,n,t){const r=this;return o;function o(l){return E(l)?(e.enter(i.lineEnding),e.consume(l),e.exit(i.lineEnding),u):t(l)}function u(l){return r.parser.lazy[r.now().line]?t(l):n(l)}}function mr(e,n,t){return r;function r(o){return x(E(o),"expected a line ending"),e.enter(i.lineEnding),e.consume(o),e.exit(i.lineEnding),e.attempt(Pe,n,t)}}const xr={name:"htmlText",tokenize:gr};function gr(e,n,t){const r=this;let o,u,l;return s;function s(p){return x(p===a.lessThan,"expected `<`"),e.enter(i.htmlText),e.enter(i.htmlTextData),e.consume(p),m}function m(p){return p===a.exclamationMark?(e.consume(p),d):p===a.slash?(e.consume(p),O):p===a.questionMark?(e.consume(p),z):le(p)?(e.consume(p),W):t(p)}function d(p){return p===a.dash?(e.consume(p),c):p===a.leftSquareBracket?(e.consume(p),u=0,B):le(p)?(e.consume(p),j):t(p)}function c(p){return p===a.dash?(e.consume(p),f):t(p)}function k(p){return p===a.eof?t(p):p===a.dash?(e.consume(p),g):E(p)?(l=k,X(p)):(e.consume(p),k)}function g(p){return p===a.dash?(e.consume(p),f):k(p)}function f(p){return p===a.greaterThan?U(p):p===a.dash?g(p):k(p)}function B(p){const re=w.cdataOpeningString;return p===re.charCodeAt(u++)?(e.consume(p),u===re.length?D:B):t(p)}function D(p){return p===a.eof?t(p):p===a.rightSquareBracket?(e.consume(p),v):E(p)?(l=D,X(p)):(e.consume(p),D)}function v(p){return p===a.rightSquareBracket?(e.consume(p),T):D(p)}function T(p){return p===a.greaterThan?U(p):p===a.rightSquareBracket?(e.consume(p),T):D(p)}function j(p){return p===a.eof||p===a.greaterThan?U(p):E(p)?(l=j,X(p)):(e.consume(p),j)}function z(p){return p===a.eof?t(p):p===a.questionMark?(e.consume(p),I):E(p)?(l=z,X(p)):(e.consume(p),z)}function I(p){return p===a.greaterThan?U(p):z(p)}function O(p){return le(p)?(e.consume(p),y):t(p)}function y(p){return p===a.dash||ue(p)?(e.consume(p),y):P(p)}function P(p){return E(p)?(l=P,X(p)):R(p)?(e.consume(p),P):U(p)}function W(p){return p===a.dash||ue(p)?(e.consume(p),W):p===a.slash||p===a.greaterThan||ee(p)?Q(p):t(p)}function Q(p){return p===a.slash?(e.consume(p),U):p===a.colon||p===a.underscore||le(p)?(e.consume(p),Y):E(p)?(l=Q,X(p)):R(p)?(e.consume(p),Q):U(p)}function Y(p){return p===a.dash||p===a.dot||p===a.colon||p===a.underscore||ue(p)?(e.consume(p),Y):$(p)}function $(p){return p===a.equalsTo?(e.consume(p),q):E(p)?(l=$,X(p)):R(p)?(e.consume(p),$):Q(p)}function q(p){return p===a.eof||p===a.lessThan||p===a.equalsTo||p===a.greaterThan||p===a.graveAccent?t(p):p===a.quotationMark||p===a.apostrophe?(e.consume(p),o=p,C):E(p)?(l=q,X(p)):R(p)?(e.consume(p),q):(e.consume(p),A)}function C(p){return p===o?(e.consume(p),o=void 0,M):p===a.eof?t(p):E(p)?(l=C,X(p)):(e.consume(p),C)}function A(p){return p===a.eof||p===a.quotationMark||p===a.apostrophe||p===a.lessThan||p===a.equalsTo||p===a.graveAccent?t(p):p===a.slash||p===a.greaterThan||ee(p)?Q(p):(e.consume(p),A)}function M(p){return p===a.slash||p===a.greaterThan||ee(p)?Q(p):t(p)}function U(p){return p===a.greaterThan?(e.consume(p),e.exit(i.htmlTextData),e.exit(i.htmlText),n):t(p)}function X(p){return x(l,"expected return state"),x(E(p),"expected eol"),e.exit(i.htmlTextData),e.enter(i.lineEnding),e.consume(p),e.exit(i.lineEnding),ne}function ne(p){return x(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),R(p)?V(e,oe,i.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize)(p):oe(p)}function oe(p){return e.enter(i.htmlTextData),l(p)}}const Je={name:"labelEnd",tokenize:Fr,resolveTo:Tr,resolveAll:yr},kr={tokenize:wr},br={tokenize:Cr},Sr={tokenize:Er};function yr(e){let n=-1;for(;++n<e.length;){const t=e[n][1];(t.type===i.labelImage||t.type===i.labelLink||t.type===i.labelEnd)&&(e.splice(n+1,t.type===i.labelImage?4:2),t.type=i.data,n++)}return e}function Tr(e,n){let t=e.length,r=0,o,u,l,s;for(;t--;)if(o=e[t][1],u){if(o.type===i.link||o.type===i.labelLink&&o._inactive)break;e[t][0]==="enter"&&o.type===i.labelLink&&(o._inactive=!0)}else if(l){if(e[t][0]==="enter"&&(o.type===i.labelImage||o.type===i.labelLink)&&!o._balanced&&(u=t,o.type!==i.labelLink)){r=2;break}}else o.type===i.labelEnd&&(l=t);x(u!==void 0,"`open` is supposed to be found"),x(l!==void 0,"`close` is supposed to be found");const m={type:e[u][1].type===i.labelLink?i.link:i.image,start:Object.assign({},e[u][1].start),end:Object.assign({},e[e.length-1][1].end)},d={type:i.label,start:Object.assign({},e[u][1].start),end:Object.assign({},e[l][1].end)},c={type:i.labelText,start:Object.assign({},e[u+r+2][1].end),end:Object.assign({},e[l-2][1].start)};return s=[["enter",m,n],["enter",d,n]],s=ie(s,e.slice(u+1,u+r+3)),s=ie(s,[["enter",c,n]]),x(n.parser.constructs.insideSpan.null,"expected `insideSpan.null` to be populated"),s=ie(s,Ze(n.parser.constructs.insideSpan.null,e.slice(u+r+4,l-3),n)),s=ie(s,[["exit",c,n],e[l-2],e[l-1],["exit",d,n]]),s=ie(s,e.slice(l+1)),s=ie(s,[["exit",m,n]]),se(e,u,e.length,s),e}function Fr(e,n,t){const r=this;let o=r.events.length,u,l;for(;o--;)if((r.events[o][1].type===i.labelImage||r.events[o][1].type===i.labelLink)&&!r.events[o][1]._balanced){u=r.events[o][1];break}return s;function s(g){return x(g===a.rightSquareBracket,"expected `]`"),u?u._inactive?k(g):(l=r.parser.defined.includes(we(r.sliceSerialize({start:u.end,end:r.now()}))),e.enter(i.labelEnd),e.enter(i.labelMarker),e.consume(g),e.exit(i.labelMarker),e.exit(i.labelEnd),m):t(g)}function m(g){return g===a.leftParenthesis?e.attempt(kr,c,l?c:k)(g):g===a.leftSquareBracket?e.attempt(br,c,l?d:k)(g):l?c(g):k(g)}function d(g){return e.attempt(Sr,c,k)(g)}function c(g){return n(g)}function k(g){return u._balanced=!0,t(g)}}function wr(e,n,t){return r;function r(k){return x(k===a.leftParenthesis,"expected left paren"),e.enter(i.resource),e.enter(i.resourceMarker),e.consume(k),e.exit(i.resourceMarker),o}function o(k){return ee(k)?Ie(e,u)(k):u(k)}function u(k){return k===a.rightParenthesis?c(k):Pt(e,l,s,i.resourceDestination,i.resourceDestinationLiteral,i.resourceDestinationLiteralMarker,i.resourceDestinationRaw,i.resourceDestinationString,w.linkResourceDestinationBalanceMax)(k)}function l(k){return ee(k)?Ie(e,m)(k):c(k)}function s(k){return t(k)}function m(k){return k===a.quotationMark||k===a.apostrophe||k===a.leftParenthesis?vt(e,d,t,i.resourceTitle,i.resourceTitleMarker,i.resourceTitleString)(k):c(k)}function d(k){return ee(k)?Ie(e,c)(k):c(k)}function c(k){return k===a.rightParenthesis?(e.enter(i.resourceMarker),e.consume(k),e.exit(i.resourceMarker),e.exit(i.resource),n):t(k)}}function Cr(e,n,t){const r=this;return o;function o(s){return x(s===a.leftSquareBracket,"expected left bracket"),Rt.call(r,e,u,l,i.reference,i.referenceMarker,i.referenceString)(s)}function u(s){return r.parser.defined.includes(we(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(s):t(s)}function l(s){return t(s)}}function Er(e,n,t){return r;function r(u){return x(u===a.leftSquareBracket,"expected left bracket"),e.enter(i.reference),e.enter(i.referenceMarker),e.consume(u),e.exit(i.referenceMarker),o}function o(u){return u===a.rightSquareBracket?(e.enter(i.referenceMarker),e.consume(u),e.exit(i.referenceMarker),e.exit(i.reference),n):t(u)}}const zr={name:"labelStartImage",tokenize:Ar,resolveAll:Je.resolveAll};function Ar(e,n,t){const r=this;return o;function o(s){return x(s===a.exclamationMark,"expected `!`"),e.enter(i.labelImage),e.enter(i.labelImageMarker),e.consume(s),e.exit(i.labelImageMarker),u}function u(s){return s===a.leftSquareBracket?(e.enter(i.labelMarker),e.consume(s),e.exit(i.labelMarker),e.exit(i.labelImage),l):t(s)}function l(s){return s===a.caret&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):n(s)}}const Br={name:"labelStartLink",tokenize:Ir,resolveAll:Je.resolveAll};function Ir(e,n,t){const r=this;return o;function o(l){return x(l===a.leftSquareBracket,"expected `[`"),e.enter(i.labelLink),e.enter(i.labelMarker),e.consume(l),e.exit(i.labelMarker),e.exit(i.labelLink),u}function u(l){return l===a.caret&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):n(l)}}const je={name:"lineEnding",tokenize:Mr};function Mr(e,n){return t;function t(r){return x(E(r),"expected eol"),e.enter(i.lineEnding),e.consume(r),e.exit(i.lineEnding),V(e,n,i.linePrefix)}}const Le={name:"thematicBreak",tokenize:Dr};function Dr(e,n,t){let r=0,o;return u;function u(d){return e.enter(i.thematicBreak),l(d)}function l(d){return x(d===a.asterisk||d===a.dash||d===a.underscore,"expected `*`, `-`, or `_`"),o=d,s(d)}function s(d){return d===o?(e.enter(i.thematicBreakSequence),m(d)):r>=w.thematicBreakMarkerCountMin&&(d===a.eof||E(d))?(e.exit(i.thematicBreak),n(d)):t(d)}function m(d){return d===o?(e.consume(d),r++,m):(e.exit(i.thematicBreakSequence),R(d)?V(e,s,i.whitespace)(d):s(d))}}const K={name:"list",tokenize:Or,continuation:{tokenize:Pr},exit:vr},Lr={tokenize:_r,partial:!0},qr={tokenize:Rr,partial:!0};function Or(e,n,t){const r=this,o=r.events[r.events.length-1];let u=o&&o[1].type===i.linePrefix?o[2].sliceSerialize(o[1],!0).length:0,l=0;return s;function s(f){x(r.containerState,"expected state");const B=r.containerState.type||(f===a.asterisk||f===a.plusSign||f===a.dash?i.listUnordered:i.listOrdered);if(B===i.listUnordered?!r.containerState.marker||f===r.containerState.marker:Ue(f)){if(r.containerState.type||(r.containerState.type=B,e.enter(B,{_container:!0})),B===i.listUnordered)return e.enter(i.listItemPrefix),f===a.asterisk||f===a.dash?e.check(Le,t,d)(f):d(f);if(!r.interrupt||f===a.digit1)return e.enter(i.listItemPrefix),e.enter(i.listItemValue),m(f)}return t(f)}function m(f){return x(r.containerState,"expected state"),Ue(f)&&++l<w.listItemValueSizeMax?(e.consume(f),m):(!r.interrupt||l<2)&&(r.containerState.marker?f===r.containerState.marker:f===a.rightParenthesis||f===a.dot)?(e.exit(i.listItemValue),d(f)):t(f)}function d(f){return x(r.containerState,"expected state"),x(f!==a.eof,"eof (`null`) is not a marker"),e.enter(i.listItemMarker),e.consume(f),e.exit(i.listItemMarker),r.containerState.marker=r.containerState.marker||f,e.check(Pe,r.interrupt?t:c,e.attempt(Lr,g,k))}function c(f){return x(r.containerState,"expected state"),r.containerState.initialBlankLine=!0,u++,g(f)}function k(f){return R(f)?(e.enter(i.listItemPrefixWhitespace),e.consume(f),e.exit(i.listItemPrefixWhitespace),g):t(f)}function g(f){return x(r.containerState,"expected state"),r.containerState.size=u+r.sliceSerialize(e.exit(i.listItemPrefix),!0).length,n(f)}}function Pr(e,n,t){const r=this;return x(r.containerState,"expected state"),r.containerState._closeFlow=void 0,e.check(Pe,o,u);function o(s){return x(r.containerState,"expected state"),x(typeof r.containerState.size=="number","expected size"),r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,V(e,n,i.listItemIndent,r.containerState.size+1)(s)}function u(s){return x(r.containerState,"expected state"),r.containerState.furtherBlankLines||!R(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(qr,n,l)(s))}function l(s){return x(r.containerState,"expected state"),r.containerState._closeFlow=!0,r.interrupt=void 0,x(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),V(e,e.attempt(K,n,t),i.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize)(s)}}function Rr(e,n,t){const r=this;return x(r.containerState,"expected state"),x(typeof r.containerState.size=="number","expected size"),V(e,o,i.listItemIndent,r.containerState.size+1);function o(u){x(r.containerState,"expected state");const l=r.events[r.events.length-1];return l&&l[1].type===i.listItemIndent&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?n(u):t(u)}}function vr(e){x(this.containerState,"expected state"),x(typeof this.containerState.type=="string","expected type"),e.exit(this.containerState.type)}function _r(e,n,t){const r=this;return x(r.parser.constructs.disable.null,"expected `disable.null` to be populated"),V(e,o,i.listItemPrefixWhitespace,r.parser.constructs.disable.null.includes("codeIndented")?void 0:w.tabSize+1);function o(u){const l=r.events[r.events.length-1];return!R(u)&&l&&l[1].type===i.listItemPrefixWhitespace?n(u):t(u)}}const bt={name:"setextUnderline",tokenize:jr,resolveTo:Hr};function Hr(e,n){let t=e.length,r,o,u;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type===i.content){r=t;break}e[t][1].type===i.paragraph&&(o=t)}else e[t][1].type===i.content&&e.splice(t,1),!u&&e[t][1].type===i.definition&&(u=t);x(o!==void 0,"expected a `text` index to be found"),x(r!==void 0,"expected a `text` index to be found");const l={type:i.setextHeading,start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[o][1].type=i.setextHeadingText,u?(e.splice(o,0,["enter",l,n]),e.splice(u+1,0,["exit",e[r][1],n]),e[r][1].end=Object.assign({},e[u][1].end)):e[r][1]=l,e.push(["exit",l,n]),e}function jr(e,n,t){const r=this;let o;return u;function u(d){let c=r.events.length,k;for(x(d===a.dash||d===a.equalsTo,"expected `=` or `-`");c--;)if(r.events[c][1].type!==i.lineEnding&&r.events[c][1].type!==i.linePrefix&&r.events[c][1].type!==i.content){k=r.events[c][1].type===i.paragraph;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||k)?(e.enter(i.setextHeadingLine),o=d,l(d)):t(d)}function l(d){return e.enter(i.setextHeadingLineSequence),s(d)}function s(d){return d===o?(e.consume(d),s):(e.exit(i.setextHeadingLineSequence),R(d)?V(e,m,i.lineSuffix)(d):m(d))}function m(d){return d===a.eof||E(d)?(e.exit(i.setextHeadingLine),n(d)):t(d)}}const Nr={tokenize:Vr};function Vr(e){const n=this,t=e.attempt(Pe,r,e.attempt(this.parser.constructs.flowInitial,o,V(e,e.attempt(this.parser.constructs.flow,o,e.attempt(Gn,o)),i.linePrefix)));return t;function r(u){if(x(u===a.eof||E(u),"expected eol or eof"),u===a.eof){e.consume(u);return}return e.enter(i.lineEndingBlank),e.consume(u),e.exit(i.lineEndingBlank),n.currentConstruct=void 0,t}function o(u){if(x(u===a.eof||E(u),"expected eol or eof"),u===a.eof){e.consume(u);return}return e.enter(i.lineEnding),e.consume(u),e.exit(i.lineEnding),n.currentConstruct=void 0,t}}const Wr={resolveAll:Ht()},Qr=_t("string"),Ur=_t("text");function _t(e){return{tokenize:n,resolveAll:Ht(e==="text"?$r:void 0)};function n(t){const r=this,o=this.parser.constructs[e],u=t.attempt(o,l,s);return l;function l(c){return d(c)?u(c):s(c)}function s(c){if(c===a.eof){t.consume(c);return}return t.enter(i.data),t.consume(c),m}function m(c){return d(c)?(t.exit(i.data),u(c)):(t.consume(c),m)}function d(c){if(c===a.eof)return!0;const k=o[c];let g=-1;if(k)for(x(Array.isArray(k),"expected `disable.null` to be populated");++g<k.length;){const f=k[g];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Ht(e){return n;function n(t,r){let o=-1,u;for(;++o<=t.length;)u===void 0?t[o]&&t[o][1].type===i.data&&(u=o,o++):(!t[o]||t[o][1].type!==i.data)&&(o!==u+2&&(t[u][1].end=t[o-1][1].end,t.splice(u+2,o-u-2),o=u+2),u=void 0);return e?e(t,r):t}}function $r(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type===i.lineEnding)&&e[t-1][1].type===i.data){const r=e[t-1][1],o=n.sliceStream(r);let u=o.length,l=-1,s=0,m;for(;u--;){const d=o[u];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===a.space;)s++,l--;if(l)break;l=-1}else if(d===a.horizontalTab)m=!0,s++;else if(d!==a.virtualSpace){u++;break}}if(s){const d={type:t===e.length||m||s<w.hardBreakPrefixSizeMin?i.lineSuffix:i.hardBreakTrailing,start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+u,_bufferIndex:u?l:r.start._bufferIndex+l},end:Object.assign({},r.end)};r.end=Object.assign({},d.start),r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(t,0,["enter",d,n],["exit",d,n]),t+=2)}t++}return e}const ye=rn("micromark");function Gr(e,n,t){let r=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},u=[];let l=[],s=[],m=!0;const d={consume:I,enter:O,exit:y,attempt:Q(P),check:Q(W),interrupt:Q(W,{interrupt:!0})},c={previous:a.eof,code:a.eof,containerState:{},events:[],parser:e,sliceStream:D,sliceSerialize:B,now:v,defineSkip:T,write:f};let k=n.tokenize.call(c,d),g;return n.resolveAll&&u.push(n),c;function f(C){return l=ie(l,C),j(),l[l.length-1]!==a.eof?[]:(Y(n,0),c.events=Ze(u,c.events,c),c.events)}function B(C,A){return Xr(D(C),A)}function D(C){return Yr(l,C)}function v(){const{line:C,column:A,offset:M,_index:U,_bufferIndex:X}=r;return{line:C,column:A,offset:M,_index:U,_bufferIndex:X}}function T(C){o[C.line]=C.column,q(),ye("position: define skip: `%j`",r)}function j(){let C;for(;r._index<l.length;){const A=l[r._index];if(typeof A=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<A.length;)z(A.charCodeAt(r._bufferIndex));else z(A)}}function z(C){x(m===!0,"expected character to be consumed"),m=void 0,ye("main: passing `%s` to %s",C,k&&k.name),g=C,x(typeof k=="function","expected state"),k=k(C)}function I(C){x(C===g,"expected given code to equal expected code"),ye("consume: `%s`",C),x(m===void 0,"expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used"),x(C===null?c.events.length===0||c.events[c.events.length-1][0]==="exit":c.events[c.events.length-1][0]==="enter","expected last token to be open"),E(C)?(r.line++,r.column=1,r.offset+=C===a.carriageReturnLineFeed?2:1,q(),ye("position: after eol: `%j`",r)):C!==a.virtualSpace&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C,m=!0}function O(C,A){const M=A||{};return M.type=C,M.start=v(),x(typeof C=="string","expected string type"),x(C.length>0,"expected non-empty string"),ye("enter: `%s`",C),c.events.push(["enter",M,c]),s.push(M),M}function y(C){x(typeof C=="string","expected string type"),x(C.length>0,"expected non-empty string");const A=s.pop();return x(A,"cannot close w/o open tokens"),A.end=v(),x(C===A.type,"expected exit token to match current token"),x(!(A.start._index===A.end._index&&A.start._bufferIndex===A.end._bufferIndex),"expected non-empty token (`"+C+"`)"),ye("exit: `%s`",A.type),c.events.push(["exit",A,c]),A}function P(C,A){Y(C,A.from)}function W(C,A){A.restore()}function Q(C,A){return M;function M(U,X,ne){let oe,p,re,ce;return Array.isArray(U)?te(U):"tokenize"in U?te([U]):h(U);function h(Z){return Ee;function Ee(pe){const Fe=pe!==null&&Z[pe],Se=pe!==null&&Z.null,ve=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return te(ve)(pe)}}function te(Z){return oe=Z,p=0,Z.length===0?(x(ne,"expected `bogusState` to be given"),ne):Te(Z[p])}function Te(Z){return Ee;function Ee(pe){return ce=$(),re=Z,Z.partial||(c.currentConstruct=Z),x(c.parser.constructs.disable.null,"expected `disable.null` to be populated"),Z.name&&c.parser.constructs.disable.null.includes(Z.name)?Ce(pe):Z.tokenize.call(A?Object.assign(Object.create(c),A):c,d,Re,Ce)(pe)}}function Re(Z){return x(Z===g,"expected code"),m=!0,C(re,ce),X}function Ce(Z){return x(Z===g,"expected code"),m=!0,ce.restore(),++p<oe.length?Te(oe[p]):ne}}}function Y(C,A){C.resolveAll&&!u.includes(C)&&u.push(C),C.resolve&&se(c.events,A,c.events.length-A,C.resolve(c.events.slice(A),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c)),x(C.partial||c.events.length===0||c.events[c.events.length-1][0]==="exit","expected last token to end")}function $(){const C=v(),A=c.previous,M=c.currentConstruct,U=c.events.length,X=Array.from(s);return{restore:ne,from:U};function ne(){r=C,c.previous=A,c.currentConstruct=M,c.events.length=U,s=X,q(),ye("position: restore: `%j`",r)}}function q(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function Yr(e,n){const t=n.start._index,r=n.start._bufferIndex,o=n.end._index,u=n.end._bufferIndex;let l;if(t===o)x(u>-1,"expected non-negative end buffer index"),x(r>-1,"expected non-negative start buffer index"),l=[e[t].slice(r,u)];else{if(l=e.slice(t,o),r>-1){const s=l[0];typeof s=="string"?l[0]=s.slice(r):(x(r===0,"expected `startBufferIndex` to be `0`"),l.shift())}u>0&&l.push(e[o].slice(0,u))}return l}function Xr(e,n){let t=-1;const r=[];let o;for(;++t<e.length;){const u=e[t];let l;if(typeof u=="string")l=u;else switch(u){case a.carriageReturn:{l=de.cr;break}case a.lineFeed:{l=de.lf;break}case a.carriageReturnLineFeed:{l=de.cr+de.lf;break}case a.horizontalTab:{l=n?de.space:de.ht;break}case a.virtualSpace:{if(!n&&o)continue;l=de.space;break}default:x(typeof u=="number","expected number"),l=String.fromCharCode(u)}o=u===a.horizontalTab,r.push(l)}return r.join("")}const Zr={[a.asterisk]:K,[a.plusSign]:K,[a.dash]:K,[a.digit0]:K,[a.digit1]:K,[a.digit2]:K,[a.digit3]:K,[a.digit4]:K,[a.digit5]:K,[a.digit6]:K,[a.digit7]:K,[a.digit8]:K,[a.digit9]:K,[a.greaterThan]:Mt},Jr={[a.leftSquareBracket]:Kn},Kr={[a.horizontalTab]:He,[a.virtualSpace]:He,[a.space]:He},ei={[a.numberSign]:ar,[a.asterisk]:Le,[a.dash]:[bt,Le],[a.lessThan]:sr,[a.equalsTo]:bt,[a.underscore]:Le,[a.graveAccent]:gt,[a.tilde]:gt},ti={[a.ampersand]:Lt,[a.backslash]:Dt},ni={[a.carriageReturn]:je,[a.lineFeed]:je,[a.carriageReturnLineFeed]:je,[a.exclamationMark]:zr,[a.ampersand]:Lt,[a.asterisk]:$e,[a.lessThan]:[Mn,xr],[a.leftSquareBracket]:Br,[a.backslash]:[rr,Dt],[a.rightSquareBracket]:Je,[a.underscore]:$e,[a.graveAccent]:Wn},ri={null:[$e,Wr]},ii={null:[a.asterisk,a.underscore]},ai={null:[]},ui=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ii,contentInitial:Jr,disable:ai,document:Zr,flow:ei,flowInitial:Kr,insideSpan:ri,string:ti,text:ni},Symbol.toStringTag,{value:"Module"}));function oi(e){const t=mn([ui,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:t,content:o(wn),document:o(En),flow:o(Nr),string:o(Qr),text:o(Ur)};return r;function o(u){return l;function l(s){return Gr(r,u,s)}}}const St=/[\0\t\n\r]/g;function li(){let e=1,n="",t=!0,r;return o;function o(u,l,s){const m=[];let d,c,k,g,f;for(u=n+u.toString(l),k=0,n="",t&&(u.charCodeAt(0)===a.byteOrderMarker&&k++,t=void 0);k<u.length;){if(St.lastIndex=k,d=St.exec(u),g=d&&d.index!==void 0?d.index:u.length,f=u.charCodeAt(g),!d){n=u.slice(k);break}if(f===a.lf&&k===g&&r)m.push(a.carriageReturnLineFeed),r=void 0;else switch(r&&(m.push(a.carriageReturn),r=void 0),k<g&&(m.push(u.slice(k,g)),e+=g-k),f){case a.nul:{m.push(a.replacementCharacter),e++;break}case a.ht:{for(c=Math.ceil(e/w.tabSize)*w.tabSize,m.push(a.horizontalTab);e++<c;)m.push(a.virtualSpace);break}case a.lf:{m.push(a.lineFeed),e=1;break}default:r=!0,e=1}k=g+1}return s&&(r&&m.push(a.carriageReturn),n&&m.push(n),m.push(a.eof)),m}}function si(e){for(;!Ot(e););return e}function jt(e,n){const t=Number.parseInt(e,n);return t<a.ht||t===a.vt||t>a.cr&&t<a.space||t>a.tilde&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?de.replacementCharacter:String.fromCharCode(t)}const ci=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pi(e){return e.replace(ci,hi)}function hi(e,n,t){if(n)return n;if(t.charCodeAt(0)===a.numberSign){const o=t.charCodeAt(1),u=o===a.lowercaseX||o===a.uppercaseX;return jt(t.slice(u?2:1),u?w.numericBaseHexadecimal:w.numericBaseDecimal)}return Xe(t)||e}function qe(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?yt(e.position):"start"in e||"end"in e?yt(e):"line"in e||"column"in e?Ge(e):""}function Ge(e){return Tt(e&&e.line)+":"+Tt(e&&e.column)}function yt(e){return Ge(e&&e.start)+"-"+Ge(e&&e.end)}function Tt(e){return e&&typeof e=="number"?e:1}const Nt={}.hasOwnProperty,Vt=function(e,n,t){return typeof n!="string"&&(t=n,n=void 0),fi(t)(si(oi(t).document().write(li()(e,n,!0))))};function fi(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(it),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(tt),blockQuote:s(Fe),characterEscape:$,characterReference:$,codeFenced:s(Se),codeFencedFenceInfo:m,codeFencedFenceMeta:m,codeIndented:s(Se,m),codeText:s(ve,m),codeTextData:$,data:$,codeFlowValue:$,definition:s(Ut),definitionDestinationString:m,definitionLabelString:m,definitionTitleString:m,emphasis:s($t),hardBreakEscape:s(nt),hardBreakTrailing:s(nt),htmlFlow:s(rt,m),htmlFlowData:$,htmlText:s(rt,m),htmlTextData:$,image:s(Gt),label:m,link:s(it),listItem:s(Yt),listItemValue:B,listOrdered:s(at,f),listUnordered:s(at),paragraph:s(Xt),reference:Te,referenceString:m,resourceDestinationString:m,resourceTitleString:m,setextHeading:s(tt),strong:s(Zt),thematicBreak:s(Kt)},exit:{atxHeading:c(),atxHeadingSequence:P,autolink:c(),autolinkEmail:pe,autolinkProtocol:Ee,blockQuote:c(),characterEscapeValue:q,characterReferenceMarkerHexadecimal:Ce,characterReferenceMarkerNumeric:Ce,characterReferenceValue:Z,codeFenced:c(j),codeFencedFence:T,codeFencedFenceInfo:D,codeFencedFenceMeta:v,codeFlowValue:q,codeIndented:c(z),codeText:c(X),codeTextData:q,data:q,definition:c(),definitionDestinationString:y,definitionLabelString:I,definitionTitleString:O,emphasis:c(),hardBreakEscape:c(A),hardBreakTrailing:c(A),htmlFlow:c(M),htmlFlowData:q,htmlText:c(U),htmlTextData:q,image:c(oe),label:re,labelText:p,lineEnding:C,link:c(ne),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Re,resourceDestinationString:ce,resourceTitleString:h,resource:te,setextHeading:c(Y),setextHeadingLineSequence:Q,setextHeadingText:W,strong:c(),thematicBreak:c()}};Wt(n,(e||{}).mdastExtensions||[]);const t={};return r;function r(b){let S={type:"root",children:[]};const F={stack:[S],tokenStack:[],config:n,enter:d,exit:k,buffer:m,resume:g,setData:u,getData:l},_=[];let H=-1;for(;++H<b.length;)if(b[H][1].type===i.listOrdered||b[H][1].type===i.listUnordered)if(b[H][0]==="enter")_.push(H);else{const J=_.pop();x(typeof J=="number","expected list ot be open"),H=o(b,J,H)}for(H=-1;++H<b.length;){const J=n[b[H][0]];Nt.call(J,b[H][1].type)&&J[b[H][1].type].call(Object.assign({sliceSerialize:b[H][2].sliceSerialize},F),b[H][1])}if(F.tokenStack.length>0){const J=F.tokenStack[F.tokenStack.length-1];(J[1]||Ft).call(F,void 0,J[0])}for(S.position={start:ge(b.length>0?b[0][1].start:{line:1,column:1,offset:0}),end:ge(b.length>0?b[b.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<n.transforms.length;)S=n.transforms[H](S)||S;return S}function o(b,S,F){let _=S-1,H=-1,J=!1,xe,he,ze,Ae;for(;++_<=F;){const G=b[_];if(G[1].type===i.listUnordered||G[1].type===i.listOrdered||G[1].type===i.blockQuote?(G[0]==="enter"?H++:H--,Ae=void 0):G[1].type===i.lineEndingBlank?G[0]==="enter"&&(xe&&!Ae&&!H&&!ze&&(ze=_),Ae=void 0):G[1].type===i.linePrefix||G[1].type===i.listItemValue||G[1].type===i.listItemMarker||G[1].type===i.listItemPrefix||G[1].type===i.listItemPrefixWhitespace||(Ae=void 0),!H&&G[0]==="enter"&&G[1].type===i.listItemPrefix||H===-1&&G[0]==="exit"&&(G[1].type===i.listUnordered||G[1].type===i.listOrdered)){if(xe){let _e=_;for(he=void 0;_e--;){const fe=b[_e];if(fe[1].type===i.lineEnding||fe[1].type===i.lineEndingBlank){if(fe[0]==="exit")continue;he&&(b[he][1].type=i.lineEndingBlank,J=!0),fe[1].type=i.lineEnding,he=_e}else if(!(fe[1].type===i.linePrefix||fe[1].type===i.blockQuotePrefix||fe[1].type===i.blockQuotePrefixWhitespace||fe[1].type===i.blockQuoteMarker||fe[1].type===i.listItemIndent))break}ze&&(!he||ze<he)&&(xe._spread=!0),xe.end=Object.assign({},he?b[he][1].start:G[1].end),b.splice(he||_,0,["exit",xe,G[2]]),_++,F++}G[1].type===i.listItemPrefix&&(xe={type:"listItem",_spread:!1,start:Object.assign({},G[1].start),end:void 0},b.splice(_,0,["enter",xe,G[2]]),_++,F++,ze=void 0,Ae=!0)}}return b[S][1]._spread=J,F}function u(b,S){t[b]=S}function l(b){return t[b]}function s(b,S){return F;function F(_){d.call(this,b(_),_),S&&S.call(this,_)}}function m(){this.stack.push({type:"fragment",children:[]})}function d(b,S,F){const _=this.stack[this.stack.length-1];return x(_,"expected `parent`"),x("children"in _,"expected `parent`"),_.children.push(b),this.stack.push(b),this.tokenStack.push([S,F]),b.position={start:ge(S.start)},b}function c(b){return S;function S(F){b&&b.call(this,F),k.call(this,F)}}function k(b,S){const F=this.stack.pop();x(F,"expected `node`");const _=this.tokenStack.pop();if(_)_[0].type!==b.type&&(S?S.call(this,b,_[0]):(_[1]||Ft).call(this,b,_[0]));else throw new Error("Cannot close `"+b.type+"` ("+qe({start:b.start,end:b.end})+"): it’s not open");return x(F.type!=="fragment","unexpected fragment `exit`ed"),x(F.position,"expected `position` to be defined"),F.position.end=ge(b.end),F}function g(){return fn(this.stack.pop())}function f(){u("expectingFirstListItemValue",!0)}function B(b){if(l("expectingFirstListItemValue")){const S=this.stack[this.stack.length-2];x(S,"expected nodes on stack"),x(S.type==="list","expected list on stack"),S.start=Number.parseInt(this.sliceSerialize(b),w.numericBaseDecimal),u("expectingFirstListItemValue")}}function D(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="code","expected code on stack"),S.lang=b}function v(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="code","expected code on stack"),S.meta=b}function T(){l("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))}function j(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="code","expected code on stack"),S.value=b.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")}function z(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="code","expected code on stack"),S.value=b.replace(/(\r?\n|\r)$/g,"")}function I(b){const S=this.resume(),F=this.stack[this.stack.length-1];x(F,"expected node on stack"),x(F.type==="definition","expected definition on stack"),F.label=S,F.identifier=we(this.sliceSerialize(b)).toLowerCase()}function O(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="definition","expected definition on stack"),S.title=b}function y(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="definition","expected definition on stack"),S.url=b}function P(b){const S=this.stack[this.stack.length-1];if(x(S,"expected node on stack"),x(S.type==="heading","expected heading on stack"),!S.depth){const F=this.sliceSerialize(b).length;x(F===1||F===2||F===3||F===4||F===5||F===6,"expected `depth` between `1` and `6`"),S.depth=F}}function W(){u("setextHeadingSlurpLineEnding",!0)}function Q(b){const S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="heading","expected heading on stack"),S.depth=this.sliceSerialize(b).charCodeAt(0)===a.equalsTo?1:2}function Y(){u("setextHeadingSlurpLineEnding")}function $(b){const S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x("children"in S,"expected parent on stack");let F=S.children[S.children.length-1];(!F||F.type!=="text")&&(F=Jt(),F.position={start:ge(b.start)},S.children.push(F)),this.stack.push(F)}function q(b){const S=this.stack.pop();x(S,"expected a `node` to be on the stack"),x("value"in S,"expected a `literal` to be on the stack"),x(S.position,"expected `node` to have an open position"),S.value+=this.sliceSerialize(b),S.position.end=ge(b.end)}function C(b){const S=this.stack[this.stack.length-1];if(x(S,"expected `node`"),l("atHardBreak")){x("children"in S,"expected `parent`");const F=S.children[S.children.length-1];x(F.position,"expected tail to have a starting position"),F.position.end=ge(b.end),u("atHardBreak");return}!l("setextHeadingSlurpLineEnding")&&n.canContainEols.includes(S.type)&&($.call(this,b),q.call(this,b))}function A(){u("atHardBreak",!0)}function M(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="html","expected html on stack"),S.value=b}function U(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="html","expected html on stack"),S.value=b}function X(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="inlineCode","expected inline code on stack"),S.value=b}function ne(){const b=this.stack[this.stack.length-1];if(x(b,"expected node on stack"),x(b.type==="link","expected link on stack"),l("inReference")){const S=l("referenceType")||"shortcut";b.type+="Reference",b.referenceType=S,delete b.url,delete b.title}else delete b.identifier,delete b.label;u("referenceType")}function oe(){const b=this.stack[this.stack.length-1];if(x(b,"expected node on stack"),x(b.type==="image","expected image on stack"),l("inReference")){const S=l("referenceType")||"shortcut";b.type+="Reference",b.referenceType=S,delete b.url,delete b.title}else delete b.identifier,delete b.label;u("referenceType")}function p(b){const S=this.sliceSerialize(b),F=this.stack[this.stack.length-2];x(F,"expected ancestor on stack"),x(F.type==="image"||F.type==="link","expected image or link on stack"),F.label=pi(S),F.identifier=we(S).toLowerCase()}function re(){const b=this.stack[this.stack.length-1];x(b,"expected node on stack"),x(b.type==="fragment","expected fragment on stack");const S=this.resume(),F=this.stack[this.stack.length-1];if(x(F,"expected node on stack"),x(F.type==="image"||F.type==="link","expected image or link on stack"),u("inReference",!0),F.type==="link"){const _=b.children;F.children=_}else F.alt=S}function ce(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="image"||S.type==="link","expected image or link on stack"),S.url=b}function h(){const b=this.resume(),S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="image"||S.type==="link","expected image or link on stack"),S.title=b}function te(){u("inReference")}function Te(){u("referenceType","collapsed")}function Re(b){const S=this.resume(),F=this.stack[this.stack.length-1];x(F,"expected node on stack"),x(F.type==="image"||F.type==="link","expected image reference or link reference on stack"),F.label=S,F.identifier=we(this.sliceSerialize(b)).toLowerCase(),u("referenceType","full")}function Ce(b){x(b.type==="characterReferenceMarkerNumeric"||b.type==="characterReferenceMarkerHexadecimal"),u("characterReferenceType",b.type)}function Z(b){const S=this.sliceSerialize(b),F=l("characterReferenceType");let _;if(F)_=jt(S,F===i.characterReferenceMarkerNumeric?w.numericBaseDecimal:w.numericBaseHexadecimal),u("characterReferenceType");else{const J=Xe(S);x(J!==!1,"expected reference to decode"),_=J}const H=this.stack.pop();x(H,"expected `node`"),x(H.position,"expected `node.position`"),x("value"in H,"expected `node.value`"),H.value+=_,H.position.end=ge(b.end)}function Ee(b){q.call(this,b);const S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="link","expected link on stack"),S.url=this.sliceSerialize(b)}function pe(b){q.call(this,b);const S=this.stack[this.stack.length-1];x(S,"expected node on stack"),x(S.type==="link","expected link on stack"),S.url="mailto:"+this.sliceSerialize(b)}function Fe(){return{type:"blockquote",children:[]}}function Se(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $t(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:void 0,children:[]}}function nt(){return{type:"break"}}function rt(){return{type:"html",value:""}}function Gt(){return{type:"image",title:null,url:"",alt:null}}function it(){return{type:"link",title:null,url:"",children:[]}}function at(b){return{type:"list",ordered:b.type==="listOrdered",start:null,spread:b._spread,children:[]}}function Yt(b){return{type:"listItem",spread:b._spread,checked:null,children:[]}}function Xt(){return{type:"paragraph",children:[]}}function Zt(){return{type:"strong",children:[]}}function Jt(){return{type:"text",value:""}}function Kt(){return{type:"thematicBreak"}}}function ge(e){return{line:e.line,column:e.column,offset:e.offset}}function Wt(e,n){let t=-1;for(;++t<n.length;){const r=n[t];Array.isArray(r)?Wt(e,r):di(e,r)}}function di(e,n){let t;for(t in n)if(Nt.call(n,t)){if(t==="canContainEols"){const r=n[t];r&&e[t].push(...r)}else if(t==="transforms"){const r=n[t];r&&e[t].push(...r)}else if(t==="enter"||t==="exit"){const r=n[t];r&&Object.assign(e[t],r)}}}function Ft(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+qe({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+qe({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+qe({start:n.start,end:n.end})+") is still open")}function mi(e){const n=e.replace(/\n{2,}/g,`
`);return nn(n)}function xi(e){const n=mi(e),{children:t}=Vt(n),r=[[]];let o=0;function u(l,s="normal"){l.type==="text"?l.value.split(`
`).forEach((d,c)=>{c!==0&&(o++,r.push([])),d.split(" ").forEach(k=>{k&&r[o].push({content:k,type:s})})}):(l.type==="strong"||l.type==="emphasis")&&l.children.forEach(m=>{u(m,l.type)})}return t.forEach(l=>{l.type==="paragraph"&&l.children.forEach(s=>{u(s)})}),r}function gi(e){const{children:n}=Vt(e);function t(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(t).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(t).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(t).join("")}</p>`:`Unsupported markdown: ${r.type}`}return n.map(t).join("")}function ki(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(n=>n.segment):[...e]}function bi(e,n){const t=ki(n.content);return Qt(e,[],t,n.type)}function Qt(e,n,t,r){if(t.length===0)return[{content:n.join(""),type:r},{content:"",type:r}];const[o,...u]=t,l=[...n,o];return e([{content:l.join(""),type:r}])?Qt(e,l,u,r):(n.length===0&&o&&(n.push(o),t.shift()),[{content:n.join(""),type:r},{content:t.join(""),type:r}])}function Si(e,n){if(e.some(({content:t})=>t.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Ye(e,n)}function Ye(e,n,t=[],r=[]){if(e.length===0)return r.length>0&&t.push(r),t.length>0?t:[];let o="";e[0].content===" "&&(o=" ",e.shift());const u=e.shift()??{content:" ",type:"normal"},l=[...r];if(o!==""&&l.push({content:o,type:"normal"}),l.push(u),n(l))return Ye(e,n,t,l);if(r.length>0)t.push(r),e.unshift(u);else if(u.content){const[s,m]=bi(n,u);t.push([s]),m.content&&e.unshift(m)}return Ye(e,n,t)}function yi(e,n){n&&e.attr("style",n)}function Ti(e,n,t,r,o=!1){const u=e.append("foreignObject"),l=u.append("xhtml:div"),s=n.label,m=n.isNode?"nodeLabel":"edgeLabel";l.html(`
    <span class="${m} ${r}" `+(n.labelStyle?'style="'+n.labelStyle+'"':"")+">"+s+"</span>"),yi(l,n.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("max-width",t+"px"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),o&&l.attr("class","labelBkg");let d=l.node().getBoundingClientRect();return d.width===t&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",t+"px"),d=l.node().getBoundingClientRect()),u.style("width",d.width),u.style("height",d.height),u.node()}function Ke(e,n,t){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",n*t-.1+"em").attr("dy",t+"em")}function Fi(e,n,t){const r=e.append("text"),o=Ke(r,1,n);et(o,t);const u=o.node().getComputedTextLength();return r.remove(),u}function zi(e,n,t){var r;const o=e.append("text"),u=Ke(o,1,n);et(u,[{content:t,type:"normal"}]);const l=(r=u.node())==null?void 0:r.getBoundingClientRect();return l&&o.remove(),l}function wi(e,n,t,r=!1){const u=n.append("g"),l=u.insert("rect").attr("class","background"),s=u.append("text").attr("y","-10.1");let m=0;for(const d of t){const c=g=>Fi(u,1.1,g)<=e,k=c(d)?[d]:Si(d,c);for(const g of k){const f=Ke(s,m,1.1);et(f,g),m++}}if(r){const d=s.node().getBBox(),c=2;return l.attr("x",-2).attr("y",-2).attr("width",d.width+2*c).attr("height",d.height+2*c),u.node()}else return s.node()}function et(e,n){e.text(""),n.forEach((t,r)=>{const o=e.append("tspan").attr("font-style",t.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",t.type==="strong"?"bold":"normal");r===0?o.text(t.content):o.text(" "+t.content)})}const Ai=(e,n="",{style:t="",isTitle:r=!1,classes:o="",useHtmlLabels:u=!0,isNode:l=!0,width:s=200,addSvgBackground:m=!1}={})=>{if(en.info("createText",n,t,r,o,u,l,m),u){const d=gi(n),c={isNode:l,label:tn(d).replace(/fa[blrs]?:fa-[\w-]+/g,g=>`<i class='${g.replace(":"," ")}'></i>`),labelStyle:t.replace("fill:","color:")};return Ti(e,c,s,o,m)}else{const d=xi(n);return wi(s,e,d,m)}};export{Ai as a,zi as c};
